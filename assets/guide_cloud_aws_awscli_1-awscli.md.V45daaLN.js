import{_ as s,o as a,c as n,R as e}from"./chunks/framework.zUbWieqp.js";const g=JSON.parse('{"title":"1. aws-cli部署","description":"","frontmatter":{},"headers":[],"relativePath":"guide/cloud/aws/awscli/1-awscli.md","filePath":"guide/cloud/aws/awscli/1-awscli.md","lastUpdated":1745936384000}'),l={name:"guide/cloud/aws/awscli/1-awscli.md"},p=e(`<h1 id="_1-aws-cli部署" tabindex="-1">1. aws-cli部署 <a class="header-anchor" href="#_1-aws-cli部署" aria-label="Permalink to &quot;1. aws-cli部署&quot;">​</a></h1><p><a href="https://aws.amazon.com/cli/" target="_blank" rel="noreferrer">下载AWSCLI</a>并配置上AKSK</p><h2 id="_1-1-卸载old" tabindex="-1">1.1 卸载old <a class="header-anchor" href="#_1-1-卸载old" aria-label="Permalink to &quot;1.1 卸载old&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">remove</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">awscli</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#032F62;">remove</span><span style="color:#24292E;"> </span><span style="color:#032F62;">awscli</span></span></code></pre></div><h2 id="_1-2-安装" tabindex="-1">1.2 安装 <a class="header-anchor" href="#_1-2-安装" aria-label="Permalink to &quot;1.2 安装&quot;">​</a></h2><p><a href="https://docs.aws.amazon.com/zh_cn/cli/latest/userguide/getting-started-install.html" target="_blank" rel="noreferrer">官当</a></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">curl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-o</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;awscliv2.zip&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">unzip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">awscliv2.zip</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">./aws/install</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">curl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-o</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;awscliv2.zip&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">unzip</span><span style="color:#24292E;"> </span><span style="color:#032F62;">awscliv2.zip</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">./aws/install</span></span></code></pre></div><ul><li>下载特定版本</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">curl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-o</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">awscliv2.sig</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://awscli.amazonaws.com/awscli-exe-linux-x86_64-2.0.30.zip.sig</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">curl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-o</span><span style="color:#24292E;"> </span><span style="color:#032F62;">awscliv2.sig</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://awscli.amazonaws.com/awscli-exe-linux-x86_64-2.0.30.zip.sig</span></span></code></pre></div><ul><li>查看版本号</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">aws</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--version</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">aws</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--version</span></span></code></pre></div><h2 id="_1-3-更新" tabindex="-1">1.3 更新 <a class="header-anchor" href="#_1-3-更新" aria-label="Permalink to &quot;1.3 更新&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">./aws/install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--bin-dir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/local/bin</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--install-dir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/local/aws-cli</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--update</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">./aws/install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--bin-dir</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/local/bin</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--install-dir</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/local/aws-cli</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--update</span></span></code></pre></div><blockquote><p>查找使用 <code>which</code> 命令查找符号链接 <strong>which aws</strong></p></blockquote><h1 id="_2-win下部署" tabindex="-1">2. win下部署 <a class="header-anchor" href="#_2-win下部署" aria-label="Permalink to &quot;2. win下部署&quot;">​</a></h1><p>要在 Windows 上更新当前安装的 AWS CLI，请在每次更新以覆盖以前版本时下载一个新的安装程序。AWS CLI 会定期更新。要查看最新版本的发布时间，请参阅 <em>GitHub</em> 上的 <a href="https://raw.githubusercontent.com/aws/aws-cli/v2/CHANGELOG.rst" target="_blank" rel="noreferrer">AWS CLI 版本 2 更改日志</a>。</p><p>1.下载并运行适用于 Windows（64 位）的 AWS CLI MSI 安装程序：</p><p><a href="https://awscli.amazonaws.com/AWSCLIV2.msi" target="_blank" rel="noreferrer">https://awscli.amazonaws.com/AWSCLIV2.msi</a></p><p>2.安装</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">msiexec.exe /i https://awscli.amazonaws.com/AWSCLIV2.msi</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">msiexec.exe /i https://awscli.amazonaws.com/AWSCLIV2.msi</span></span></code></pre></div><ul><li>查看版本</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">aws --version</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">aws --version</span></span></code></pre></div><h1 id="_3-案例" tabindex="-1">3.案例 <a class="header-anchor" href="#_3-案例" aria-label="Permalink to &quot;3.案例&quot;">​</a></h1><h2 id="_3-1-修改安全组" tabindex="-1">3.1 修改安全组 <a class="header-anchor" href="#_3-1-修改安全组" aria-label="Permalink to &quot;3.1 修改安全组&quot;">​</a></h2><p>vi update_sg.sh</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">#! /bin/bash</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;"># get ip</span></span>
<span class="line"><span style="color:#e1e4e8;">response=$(curl -s https://api.ipify.org)</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">if [ $? -eq 0 ]; then</span></span>
<span class="line"><span style="color:#e1e4e8;">    </span></span>
<span class="line"><span style="color:#e1e4e8;">    # get ip address</span></span>
<span class="line"><span style="color:#e1e4e8;">    real_ip=$response</span></span>
<span class="line"><span style="color:#e1e4e8;">    echo &quot;您的公网IP地址是: $real_ip ，更新安全组中，更新完毕会显示返回结果True&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">    sleep 5</span></span>
<span class="line"><span style="color:#e1e4e8;">    </span></span>
<span class="line"><span style="color:#e1e4e8;">    # update security group</span></span>
<span class="line"><span style="color:#e1e4e8;">    aws ec2 modify-security-group-rules \\</span></span>
<span class="line"><span style="color:#e1e4e8;">    --group-id sg-08fb252aczb0f64c1 \\</span></span>
<span class="line"><span style="color:#e1e4e8;">    --security-group-rules SecurityGroupRuleId=sgr-02fb32a8442611dc1,SecurityGroupRule=&#39;{Description=single_ip,IpProtocol=tcp,FromPort=3389,ToPort=3389,CidrIpv4=&#39;$real_ip&#39;/32}&#39;</span></span>
<span class="line"><span style="color:#e1e4e8;">else</span></span>
<span class="line"><span style="color:#e1e4e8;">    echo &quot;无法获取IP地址,请检查网络连接&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">fi</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">#! /bin/bash</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;"># get ip</span></span>
<span class="line"><span style="color:#24292e;">response=$(curl -s https://api.ipify.org)</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">if [ $? -eq 0 ]; then</span></span>
<span class="line"><span style="color:#24292e;">    </span></span>
<span class="line"><span style="color:#24292e;">    # get ip address</span></span>
<span class="line"><span style="color:#24292e;">    real_ip=$response</span></span>
<span class="line"><span style="color:#24292e;">    echo &quot;您的公网IP地址是: $real_ip ，更新安全组中，更新完毕会显示返回结果True&quot;</span></span>
<span class="line"><span style="color:#24292e;">    sleep 5</span></span>
<span class="line"><span style="color:#24292e;">    </span></span>
<span class="line"><span style="color:#24292e;">    # update security group</span></span>
<span class="line"><span style="color:#24292e;">    aws ec2 modify-security-group-rules \\</span></span>
<span class="line"><span style="color:#24292e;">    --group-id sg-08fb252aczb0f64c1 \\</span></span>
<span class="line"><span style="color:#24292e;">    --security-group-rules SecurityGroupRuleId=sgr-02fb32a8442611dc1,SecurityGroupRule=&#39;{Description=single_ip,IpProtocol=tcp,FromPort=3389,ToPort=3389,CidrIpv4=&#39;$real_ip&#39;/32}&#39;</span></span>
<span class="line"><span style="color:#24292e;">else</span></span>
<span class="line"><span style="color:#24292e;">    echo &quot;无法获取IP地址,请检查网络连接&quot;</span></span>
<span class="line"><span style="color:#24292e;">fi</span></span></code></pre></div>`,26),o=[p];function c(t,i,r,d,u,y){return a(),n("div",null,o)}const b=s(l,[["render",c]]);export{g as __pageData,b as default};
