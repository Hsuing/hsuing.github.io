import{_ as s,o as a,c as l,R as n}from"./chunks/framework.zUbWieqp.js";const F=JSON.parse('{"title":"1. Helm命令","description":"","frontmatter":{},"headers":[],"relativePath":"guide/container/k8s/Helm/4-manager-cmd.md","filePath":"guide/container/k8s/Helm/4-manager-cmd.md","lastUpdated":1730456937000}'),p={name:"guide/container/k8s/Helm/4-manager-cmd.md"},o=n(`<h1 id="_1-helm命令" tabindex="-1">1. Helm命令 <a class="header-anchor" href="#_1-helm命令" aria-label="Permalink to &quot;1. Helm命令&quot;">​</a></h1><p><a href="https://helm.sh/zh/docs/helm/helm/" target="_blank" rel="noreferrer">官方</a></p><p>helm --help 通过help获取更多解释</p><h2 id="_1-1-添加仓库" tabindex="-1">1.1 添加仓库 <a class="header-anchor" href="#_1-1-添加仓库" aria-label="Permalink to &quot;1.1 添加仓库&quot;">​</a></h2><h3 id="helm-repo-add" tabindex="-1"><code>helm repo add</code> <a class="header-anchor" href="#helm-repo-add" aria-label="Permalink to &quot;\`helm repo add\`&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# helm repo add bitnami https://charts.bitnami.com/bitnami</span></span>
<span class="line"><span style="color:#B392F0;">&quot;bitnami&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">has</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">been</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">added</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">your</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">repositories</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# helm repo add bitnami https://charts.bitnami.com/bitnami</span></span>
<span class="line"><span style="color:#6F42C1;">&quot;bitnami&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">has</span><span style="color:#24292E;"> </span><span style="color:#032F62;">been</span><span style="color:#24292E;"> </span><span style="color:#032F62;">added</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">your</span><span style="color:#24292E;"> </span><span style="color:#032F62;">repositories</span></span></code></pre></div><h3 id="helm-repo-list" tabindex="-1"><code>helm repo list</code> <a class="header-anchor" href="#helm-repo-list" aria-label="Permalink to &quot;\`helm repo list\`&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# helm repo list</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">   	</span><span style="color:#9ECBFF;">URL</span></span>
<span class="line"><span style="color:#B392F0;">bitnami</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">https://charts.bitnami.com/bitnami</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# helm repo list</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">   	</span><span style="color:#032F62;">URL</span></span>
<span class="line"><span style="color:#6F42C1;">bitnami</span><span style="color:#24292E;">	</span><span style="color:#032F62;">https://charts.bitnami.com/bitnami</span></span></code></pre></div><h3 id="helm-repo-update" tabindex="-1"><code>helm repo update</code> <a class="header-anchor" href="#helm-repo-update" aria-label="Permalink to &quot;\`helm repo update\`&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">helm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">repo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">update</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">repo_name</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">helm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">repo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">update</span><span style="color:#24292E;"> </span><span style="color:#032F62;">repo_name</span></span></code></pre></div><h3 id="helm-repo-remove" tabindex="-1"><code>helm repo remove </code> <a class="header-anchor" href="#helm-repo-remove" aria-label="Permalink to &quot;\`helm repo remove \`&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">helm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">repo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">remove</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">repo_name</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">helm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">repo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">remove</span><span style="color:#24292E;"> </span><span style="color:#032F62;">repo_name</span></span></code></pre></div><h2 id="_1-2-创建" tabindex="-1">1.2 创建 <a class="header-anchor" href="#_1-2-创建" aria-label="Permalink to &quot;1.2 创建&quot;">​</a></h2><h3 id="helm-create" tabindex="-1"><code>helm create</code> <a class="header-anchor" href="#helm-create" aria-label="Permalink to &quot;\`helm create\`&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# helm create demo</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# tree demo</span></span>
<span class="line"><span style="color:#B392F0;">demo</span></span>
<span class="line"><span style="color:#B392F0;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">charts</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># 依赖其他包的charts文件</span></span>
<span class="line"><span style="color:#B392F0;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Chart.yaml</span><span style="color:#E1E4E8;">			   </span><span style="color:#6A737D;"># chart的描述文件,包括ico地址,版本信息等</span></span>
<span class="line"><span style="color:#B392F0;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">templates</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;"># 存放k8s模板文件目录</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">deployment.yaml</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># Kubernetes deployment 配置</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">_helpers.tpl</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;"># 下划线开头的文件为公共文件,可以被其他模板引用</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hpa.yaml</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># #水平 pod 自动扩缩容 go 模板文件</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ingress.yaml</span><span style="color:#E1E4E8;">		</span><span style="color:#6A737D;"># Kubernetes ingress 配置</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">NOTES.txt</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># 用户运行 helm install 时候的提示信息</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">serviceaccount.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># Kubernetes serviceaccount 配置</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">service.yaml</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># Kubernetes service 配置</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">└──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">tests</span><span style="color:#E1E4E8;">				</span><span style="color:#6A737D;"># test</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">└──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">test-connection.yaml</span></span>
<span class="line"><span style="color:#B392F0;">└──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">values.yaml</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;">#模板的值文件，这些值会在安装时应用到 GO 模板生成部署文件</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# helm create demo</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@kube-master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# tree demo</span></span>
<span class="line"><span style="color:#6F42C1;">demo</span></span>
<span class="line"><span style="color:#6F42C1;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">charts</span><span style="color:#24292E;">                 </span><span style="color:#6A737D;"># 依赖其他包的charts文件</span></span>
<span class="line"><span style="color:#6F42C1;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Chart.yaml</span><span style="color:#24292E;">			   </span><span style="color:#6A737D;"># chart的描述文件,包括ico地址,版本信息等</span></span>
<span class="line"><span style="color:#6F42C1;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">templates</span><span style="color:#24292E;">              </span><span style="color:#6A737D;"># 存放k8s模板文件目录</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">deployment.yaml</span><span style="color:#24292E;">    </span><span style="color:#6A737D;"># Kubernetes deployment 配置</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">_helpers.tpl</span><span style="color:#24292E;">       </span><span style="color:#6A737D;"># 下划线开头的文件为公共文件,可以被其他模板引用</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hpa.yaml</span><span style="color:#24292E;">           </span><span style="color:#6A737D;"># #水平 pod 自动扩缩容 go 模板文件</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ingress.yaml</span><span style="color:#24292E;">		</span><span style="color:#6A737D;"># Kubernetes ingress 配置</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">NOTES.txt</span><span style="color:#24292E;">           </span><span style="color:#6A737D;"># 用户运行 helm install 时候的提示信息</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">serviceaccount.yaml</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># Kubernetes serviceaccount 配置</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">service.yaml</span><span style="color:#24292E;">        </span><span style="color:#6A737D;"># Kubernetes service 配置</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">└──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">tests</span><span style="color:#24292E;">				</span><span style="color:#6A737D;"># test</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;">     </span><span style="color:#032F62;">└──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">test-connection.yaml</span></span>
<span class="line"><span style="color:#6F42C1;">└──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">values.yaml</span><span style="color:#24292E;">             </span><span style="color:#6A737D;">#模板的值文件，这些值会在安装时应用到 GO 模板生成部署文件</span></span></code></pre></div><h4 id="目录结构介绍" tabindex="-1">目录结构介绍 <a class="header-anchor" href="#目录结构介绍" aria-label="Permalink to &quot;目录结构介绍&quot;">​</a></h4><table><thead><tr><th>目录</th><th>说明</th></tr></thead><tbody><tr><td>charts</td><td>可选目录，可能包含子chart</td></tr><tr><td>Chart.yaml</td><td>包含chart描述的主文件</td></tr><tr><td>templates</td><td>Kubernetes 资源定义为模板的目录</td></tr><tr><td>values.yaml</td><td>定义 chart 模板中的自定义配置的默认值，可以在执行 helm install 或 helm update 的时候覆盖</td></tr><tr><td>.helmignore</td><td>定义打包时要忽略的模式的地方（概念上与 .gitignore 类似）</td></tr></tbody></table><h3 id="helm-lint" tabindex="-1"><code>helm lint</code> <a class="header-anchor" href="#helm-lint" aria-label="Permalink to &quot;\`helm lint\`&quot;">​</a></h3><p>检查语法是否正确</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# helm lint ./demo</span></span>
<span class="line"><span style="color:#E1E4E8;">==&gt; </span><span style="color:#9ECBFF;">Linting</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">./demo</span></span>
<span class="line"><span style="color:#E1E4E8;">[INFO] Chart.yaml: icon is recommended</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">chart</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">s</span><span style="color:#E1E4E8;">) </span><span style="color:#9ECBFF;">linted,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">chart</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">s</span><span style="color:#E1E4E8;">) </span><span style="color:#9ECBFF;">failed</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# helm lint ./demo</span></span>
<span class="line"><span style="color:#24292E;">==&gt; </span><span style="color:#032F62;">Linting</span><span style="color:#24292E;"> </span><span style="color:#032F62;">./demo</span></span>
<span class="line"><span style="color:#24292E;">[INFO] Chart.yaml: icon is recommended</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">1</span><span style="color:#24292E;"> </span><span style="color:#032F62;">chart</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">s</span><span style="color:#24292E;">) </span><span style="color:#032F62;">linted,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">chart</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">s</span><span style="color:#24292E;">) </span><span style="color:#032F62;">failed</span></span></code></pre></div><h2 id="_1-3-下载" tabindex="-1">1.3 下载 <a class="header-anchor" href="#_1-3-下载" aria-label="Permalink to &quot;1.3 下载&quot;">​</a></h2><h3 id="helm-pull" tabindex="-1"><code>helm pull</code> <a class="header-anchor" href="#helm-pull" aria-label="Permalink to &quot;\`helm pull\`&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">helm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bitnami/nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">helm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bitnami/nginx</span></span></code></pre></div><h2 id="_1-4-查询" tabindex="-1">1.4 查询 <a class="header-anchor" href="#_1-4-查询" aria-label="Permalink to &quot;1.4 查询&quot;">​</a></h2><h3 id="helm-ls" tabindex="-1"><code>helm ls</code> <a class="header-anchor" href="#helm-ls" aria-label="Permalink to &quot;\`helm ls\`&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# helm ls --all</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">NAMESPACE</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">REVISION</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">UPDATED</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">CHART</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">APP</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">VERSION</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# helm ls --all</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">	</span><span style="color:#032F62;">NAMESPACE</span><span style="color:#24292E;">	</span><span style="color:#032F62;">REVISION</span><span style="color:#24292E;">	</span><span style="color:#032F62;">UPDATED</span><span style="color:#24292E;">	</span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">	</span><span style="color:#032F62;">CHART</span><span style="color:#24292E;">	</span><span style="color:#032F62;">APP</span><span style="color:#24292E;"> </span><span style="color:#032F62;">VERSION</span></span></code></pre></div><h3 id="helm-list" tabindex="-1"><code>helm list</code> <a class="header-anchor" href="#helm-list" aria-label="Permalink to &quot;\`helm list\`&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#显示某个命名空间下的所有 Release</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# helm  list</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">NAMESPACE</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">REVISION</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">UPDATED</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">CHART</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">APP</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">VERSION</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#显示某个命名空间下的所有 Release</span></span>
<span class="line"><span style="color:#24292E;">[root@kube-master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# helm  list</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">	</span><span style="color:#032F62;">NAMESPACE</span><span style="color:#24292E;">	</span><span style="color:#032F62;">REVISION</span><span style="color:#24292E;">	</span><span style="color:#032F62;">UPDATED</span><span style="color:#24292E;">	</span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">	</span><span style="color:#032F62;">CHART</span><span style="color:#24292E;">	</span><span style="color:#032F62;">APP</span><span style="color:#24292E;"> </span><span style="color:#032F62;">VERSION</span></span></code></pre></div><h3 id="helm-status" tabindex="-1"><code>helm status</code> <a class="header-anchor" href="#helm-status" aria-label="Permalink to &quot;\`helm status\`&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#查询某个 Release 的状态信息</span></span>
<span class="line"><span style="color:#B392F0;">helm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">my-nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#查询某个 Release 的状态信息</span></span>
<span class="line"><span style="color:#6F42C1;">helm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span><span style="color:#24292E;"> </span><span style="color:#032F62;">my-nginx</span></span></code></pre></div><h3 id="helm-get" tabindex="-1"><code>helm get</code> <a class="header-anchor" href="#helm-get" aria-label="Permalink to &quot;\`helm get\`&quot;">​</a></h3><p>获取某个 Release 的扩展信息，包括：</p><ul><li><code>helm get hooks</code> - 获取 Release 关联的钩子信息</li><li><code>helm get manifest</code> - 获取 Release 的清单信息</li><li><code>helm get notes</code> - 获取 Release 的注释</li><li><code>helm get values</code> - 获取 Release 的 values 文件</li><li><code>helm get all</code> - 获取 Release 的所有信息</li></ul><h3 id="helm-history" tabindex="-1"><code>helm history</code> <a class="header-anchor" href="#helm-history" aria-label="Permalink to &quot;\`helm history\`&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">helm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">history</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">my-nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">helm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">history</span><span style="color:#24292E;"> </span><span style="color:#032F62;">my-nginx</span></span></code></pre></div><h3 id="helm-search-hub" tabindex="-1"><code>helm search hub</code> <a class="header-anchor" href="#helm-search-hub" aria-label="Permalink to &quot;\`helm search hub\`&quot;">​</a></h3><p>ArtifactHub 中搜索 Chart</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#从公共仓库</span></span>
<span class="line"><span style="color:#B392F0;">helm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">search</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hub</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#从公共仓库</span></span>
<span class="line"><span style="color:#6F42C1;">helm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">search</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hub</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span></span></code></pre></div><h3 id="helm-search-repo" tabindex="-1"><code>helm search repo</code> <a class="header-anchor" href="#helm-search-repo" aria-label="Permalink to &quot;\`helm search repo\`&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#从添加仓库中搜索</span></span>
<span class="line"><span style="color:#B392F0;">helm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">search</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">repo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看对应repo的url</span></span>
<span class="line"><span style="color:#B392F0;">helm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">search</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hub</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--list-repo-url</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#以设置每一列的宽度，这样可以显示所有的描述信息</span></span>
<span class="line"><span style="color:#B392F0;">helm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">search</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hub</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--max-col-width</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">100</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#从添加仓库中搜索</span></span>
<span class="line"><span style="color:#6F42C1;">helm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">search</span><span style="color:#24292E;"> </span><span style="color:#032F62;">repo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看对应repo的url</span></span>
<span class="line"><span style="color:#6F42C1;">helm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">search</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hub</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--list-repo-url</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#以设置每一列的宽度，这样可以显示所有的描述信息</span></span>
<span class="line"><span style="color:#6F42C1;">helm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">search</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hub</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--max-col-width</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">100</span></span></code></pre></div><h3 id="helm-show" tabindex="-1"><code>helm show</code> <a class="header-anchor" href="#helm-show" aria-label="Permalink to &quot;\`helm show\`&quot;">​</a></h3><p>该命令用于显示 Chart 的基本信息，包括：</p><ul><li><code>helm show chart</code> - 显示 Chart 定义，实际上就是 <code>Chart.yaml</code> 文件的内容</li><li><code>helm show crds</code> - 显示 Chart 的 CRD</li><li><code>helm show readme</code> - 显示 Chart 的 <code>README.md</code> 文件中的内容</li><li><code>helm show values</code> - 显示 Chart 的 <code>values.yaml</code> 文件中的内容</li><li><code>helm show all</code> - 显示 Chart 的所有信息</li></ul><h2 id="_1-5-安装" tabindex="-1">1.5 安装 <a class="header-anchor" href="#_1-5-安装" aria-label="Permalink to &quot;1.5 安装&quot;">​</a></h2><h3 id="helm的执行安装顺序" tabindex="-1">Helm的执行安装顺序 <a class="header-anchor" href="#helm的执行安装顺序" aria-label="Permalink to &quot;Helm的执行安装顺序&quot;">​</a></h3><p>Helm按照以下顺序安装资源：</p><ul><li>Namespace</li><li>NetworkPolicy</li><li>ResourceQuota</li><li>LimitRange</li><li>PodSecurityPolicy</li><li>PodDisruptionBudget</li><li>ServiceAccount</li><li>Secret</li><li>SecretList</li><li>ConfigMap</li><li>StorageClass</li><li>PersistentVolume</li><li>PersistentVolumeClaim</li><li>CustomResourceDefinition</li><li>ClusterRole</li><li>ClusterRoleList</li><li>ClusterRoleBinding</li><li>ClusterRoleBindingList</li><li>Role</li><li>RoleList</li><li>RoleBinding</li><li>RoleBindingList</li><li>Service</li><li>DaemonSet</li><li>Pod</li><li>ReplicationController</li><li>ReplicaSet</li><li>Deployment</li><li>HorizontalPodAutoscaler</li><li>StatefulSet</li><li>Job</li><li>CronJob</li><li>Ingress</li><li>APIService</li></ul><h2 id="_1-6-更新" tabindex="-1">1.6 更新 <a class="header-anchor" href="#_1-6-更新" aria-label="Permalink to &quot;1.6 更新&quot;">​</a></h2><h3 id="helm-upgrade" tabindex="-1"><code>helm upgrade</code> <a class="header-anchor" href="#helm-upgrade" aria-label="Permalink to &quot;\`helm upgrade\`&quot;">​</a></h3><p>格式：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">helm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">upgrade</span><span style="color:#E1E4E8;"> [RELEASE] [CHART] [flags]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">helm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">upgrade</span><span style="color:#24292E;"> [RELEASE] [CHART] [flags]</span></span></code></pre></div><h4 id="指定-values-f-参数" tabindex="-1">指定&#39;--values&#39;/&#39;-f&#39;参数 <a class="header-anchor" href="#指定-values-f-参数" aria-label="Permalink to &quot;指定&#39;--values&#39;/&#39;-f&#39;参数&quot;">​</a></h4><p>可以多次指定&#39;--values&#39;/&#39;-f&#39;参数，最后（最右边）指定的文件优先级最高。比如如果myvalues.yaml和override.yaml同时包含了名为 &#39;Test&#39;的key，override.yaml中的设置会优先使用：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">helm upgrade -f myvalues.yaml -f override.yaml redis ./redis</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">helm upgrade -f myvalues.yaml -f override.yaml redis ./redis</span></span></code></pre></div><h4 id="指定-set-参数" tabindex="-1">指定&#39;--set&#39;参数 <a class="header-anchor" href="#指定-set-参数" aria-label="Permalink to &quot;指定&#39;--set&#39;参数&quot;">​</a></h4><p>可以多次指定&#39;--set&#39;参数，最后（最右边）指定的优先级最高。比如&#39;bar&#39; 和 &#39;newbar&#39;都设置了一个名为&#39;foo&#39;的可以， &#39;newbar&#39;的值会优先使用：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">helm upgrade --set foo=bar --set foo=newbar redis ./redis</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">helm upgrade --set foo=bar --set foo=newbar redis ./redis</span></span></code></pre></div><h4 id="案例" tabindex="-1">案例 <a class="header-anchor" href="#案例" aria-label="Permalink to &quot;案例&quot;">​</a></h4><p>修改nginx镜像版本为1.27.0</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">helm upgrade my-nginx nginx-helm-1.0.0.tgz --set image.tag=1.27.0</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">helm upgrade my-nginx nginx-helm-1.0.0.tgz --set image.tag=1.27.0</span></span></code></pre></div><h2 id="_1-7-回滚" tabindex="-1">1.7 回滚 <a class="header-anchor" href="#_1-7-回滚" aria-label="Permalink to &quot;1.7 回滚&quot;">​</a></h2><h3 id="helm-rollback" tabindex="-1"><code>helm rollback</code> <a class="header-anchor" href="#helm-rollback" aria-label="Permalink to &quot;\`helm rollback\`&quot;">​</a></h3><h3 id="查看发布历史" tabindex="-1">查看发布历史 <a class="header-anchor" href="#查看发布历史" aria-label="Permalink to &quot;查看发布历史&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#查看</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# helm list</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">NAMESPACE</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">REVISION</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">UPDATED</span><span style="color:#E1E4E8;">                                	</span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">  	</span><span style="color:#9ECBFF;">CHART</span><span style="color:#E1E4E8;">     	</span><span style="color:#9ECBFF;">APP</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">VERSION</span></span>
<span class="line"><span style="color:#B392F0;">demo</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">default</span><span style="color:#E1E4E8;">  	</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">       	</span><span style="color:#79B8FF;">2024</span><span style="color:#9ECBFF;">-07-16</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">18</span><span style="color:#9ECBFF;">:06:26.685169771</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+0800</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">CST</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">deployed</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">demo-1.0.0</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看历史发布</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# helm history demo</span></span>
<span class="line"><span style="color:#B392F0;">REVISION</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">UPDATED</span><span style="color:#E1E4E8;">                 	</span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">    	</span><span style="color:#9ECBFF;">CHART</span><span style="color:#E1E4E8;">     	</span><span style="color:#9ECBFF;">APP</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">VERSION</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">DESCRIPTION</span></span>
<span class="line"><span style="color:#B392F0;">1</span><span style="color:#E1E4E8;">       	</span><span style="color:#9ECBFF;">Tue</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Jul</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">18</span><span style="color:#9ECBFF;">:03:50</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2024</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">superseded</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">demo-1.0.0</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">v1</span><span style="color:#E1E4E8;">         	</span><span style="color:#9ECBFF;">Install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">complete</span></span>
<span class="line"><span style="color:#B392F0;">2</span><span style="color:#E1E4E8;">       	</span><span style="color:#9ECBFF;">Tue</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Jul</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">18</span><span style="color:#9ECBFF;">:04:14</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2024</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">superseded</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">demo-2.0.0</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">v2</span><span style="color:#E1E4E8;">         	</span><span style="color:#9ECBFF;">Upgrade</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">complete</span></span>
<span class="line"><span style="color:#B392F0;">3</span><span style="color:#E1E4E8;">       	</span><span style="color:#9ECBFF;">Tue</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Jul</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">18</span><span style="color:#9ECBFF;">:06:26</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2024</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">deployed</span><span style="color:#E1E4E8;">  	</span><span style="color:#9ECBFF;">demo-1.0.0</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">v1</span><span style="color:#E1E4E8;">         	</span><span style="color:#9ECBFF;">Rollback</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#查看</span></span>
<span class="line"><span style="color:#24292E;">[root@kube-master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# helm list</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">	</span><span style="color:#032F62;">NAMESPACE</span><span style="color:#24292E;">	</span><span style="color:#032F62;">REVISION</span><span style="color:#24292E;">	</span><span style="color:#032F62;">UPDATED</span><span style="color:#24292E;">                                	</span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">  	</span><span style="color:#032F62;">CHART</span><span style="color:#24292E;">     	</span><span style="color:#032F62;">APP</span><span style="color:#24292E;"> </span><span style="color:#032F62;">VERSION</span></span>
<span class="line"><span style="color:#6F42C1;">demo</span><span style="color:#24292E;">	</span><span style="color:#032F62;">default</span><span style="color:#24292E;">  	</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">       	</span><span style="color:#005CC5;">2024</span><span style="color:#032F62;">-07-16</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">18</span><span style="color:#032F62;">:06:26.685169771</span><span style="color:#24292E;"> </span><span style="color:#032F62;">+0800</span><span style="color:#24292E;"> </span><span style="color:#032F62;">CST</span><span style="color:#24292E;">	</span><span style="color:#032F62;">deployed</span><span style="color:#24292E;">	</span><span style="color:#032F62;">demo-1.0.0</span><span style="color:#24292E;">	</span><span style="color:#032F62;">v1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看历史发布</span></span>
<span class="line"><span style="color:#24292E;">[root@kube-master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# helm history demo</span></span>
<span class="line"><span style="color:#6F42C1;">REVISION</span><span style="color:#24292E;">	</span><span style="color:#032F62;">UPDATED</span><span style="color:#24292E;">                 	</span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">    	</span><span style="color:#032F62;">CHART</span><span style="color:#24292E;">     	</span><span style="color:#032F62;">APP</span><span style="color:#24292E;"> </span><span style="color:#032F62;">VERSION</span><span style="color:#24292E;">	</span><span style="color:#032F62;">DESCRIPTION</span></span>
<span class="line"><span style="color:#6F42C1;">1</span><span style="color:#24292E;">       	</span><span style="color:#032F62;">Tue</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Jul</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">16</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">18</span><span style="color:#032F62;">:03:50</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2024</span><span style="color:#24292E;">	</span><span style="color:#032F62;">superseded</span><span style="color:#24292E;">	</span><span style="color:#032F62;">demo-1.0.0</span><span style="color:#24292E;">	</span><span style="color:#032F62;">v1</span><span style="color:#24292E;">         	</span><span style="color:#032F62;">Install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">complete</span></span>
<span class="line"><span style="color:#6F42C1;">2</span><span style="color:#24292E;">       	</span><span style="color:#032F62;">Tue</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Jul</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">16</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">18</span><span style="color:#032F62;">:04:14</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2024</span><span style="color:#24292E;">	</span><span style="color:#032F62;">superseded</span><span style="color:#24292E;">	</span><span style="color:#032F62;">demo-2.0.0</span><span style="color:#24292E;">	</span><span style="color:#032F62;">v2</span><span style="color:#24292E;">         	</span><span style="color:#032F62;">Upgrade</span><span style="color:#24292E;"> </span><span style="color:#032F62;">complete</span></span>
<span class="line"><span style="color:#6F42C1;">3</span><span style="color:#24292E;">       	</span><span style="color:#032F62;">Tue</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Jul</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">16</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">18</span><span style="color:#032F62;">:06:26</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2024</span><span style="color:#24292E;">	</span><span style="color:#032F62;">deployed</span><span style="color:#24292E;">  	</span><span style="color:#032F62;">demo-1.0.0</span><span style="color:#24292E;">	</span><span style="color:#032F62;">v1</span><span style="color:#24292E;">         	</span><span style="color:#032F62;">Rollback</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span></span></code></pre></div><h3 id="回滚到第一个版本" tabindex="-1">回滚到第一个版本 <a class="header-anchor" href="#回滚到第一个版本" aria-label="Permalink to &quot;回滚到第一个版本&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">helm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rollback</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">nam</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">REVISIO</span><span style="color:#E1E4E8;">N</span><span style="color:#F97583;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">helm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rollback</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">nam</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">REVISIO</span><span style="color:#24292E;">N</span><span style="color:#D73A49;">&gt;</span></span></code></pre></div><h2 id="_1-8-模版渲染" tabindex="-1">1.8 模版渲染 <a class="header-anchor" href="#_1-8-模版渲染" aria-label="Permalink to &quot;1.8 模版渲染&quot;">​</a></h2><p><code>本质就是以yaml文件查看内容</code></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">root@kube-master ~</span><span style="color:#E1E4E8;">]# </span><span style="color:#9ECBFF;">helm template ./demo</span></span>
<span class="line"><span style="color:#B392F0;">---</span></span>
<span class="line"><span style="color:#6A737D;"># Source: demo/templates/serviceaccount.yaml</span></span>
<span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">ServiceAccount</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">release-name-demo</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">labels</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">helm.sh/chart</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">demo-0.1.0</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">app.kubernetes.io/name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">demo</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">app.kubernetes.io/instance</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">release-name</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">app.kubernetes.io/version</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;1.16.0&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">app.kubernetes.io/managed-by</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Helm</span></span>
<span class="line"><span style="color:#85E89D;">automountServiceAccountToken</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[</span><span style="color:#032F62;">root@kube-master ~</span><span style="color:#24292E;">]# </span><span style="color:#032F62;">helm template ./demo</span></span>
<span class="line"><span style="color:#6F42C1;">---</span></span>
<span class="line"><span style="color:#6A737D;"># Source: demo/templates/serviceaccount.yaml</span></span>
<span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">ServiceAccount</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">release-name-demo</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">labels</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">helm.sh/chart</span><span style="color:#24292E;">: </span><span style="color:#032F62;">demo-0.1.0</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">app.kubernetes.io/name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">demo</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">app.kubernetes.io/instance</span><span style="color:#24292E;">: </span><span style="color:#032F62;">release-name</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">app.kubernetes.io/version</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;1.16.0&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">app.kubernetes.io/managed-by</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Helm</span></span>
<span class="line"><span style="color:#22863A;">automountServiceAccountToken</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span></span></code></pre></div><h2 id="_1-9-卸载-release" tabindex="-1">1.9 卸载 Release <a class="header-anchor" href="#_1-9-卸载-release" aria-label="Permalink to &quot;1.9 卸载 Release&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#删除</span></span>
<span class="line"><span style="color:#B392F0;">helm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">uninstall</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">my-nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#删除</span></span>
<span class="line"><span style="color:#6F42C1;">helm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">uninstall</span><span style="color:#24292E;"> </span><span style="color:#032F62;">my-nginx</span></span></code></pre></div>`,71),e=[o];function t(c,r,y,E,i,h){return a(),l("div",null,e)}const m=s(p,[["render",t]]);export{F as __pageData,m as default};
