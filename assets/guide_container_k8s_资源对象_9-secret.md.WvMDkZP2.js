import{_ as s,o as a,c as n,R as l}from"./chunks/framework.zUbWieqp.js";const u=JSON.parse('{"title":"1. SecretåŸºæœ¬æ¦‚å¿µ","description":"","frontmatter":{},"headers":[],"relativePath":"guide/container/k8s/èµ„æºå¯¹è±¡/9-secret.md","filePath":"guide/container/k8s/èµ„æºå¯¹è±¡/9-secret.md","lastUpdated":1730111076000}'),p={name:"guide/container/k8s/èµ„æºå¯¹è±¡/9-secret.md"},o=l(`<p>å®˜æ–¹æ–‡æ¡£,<a href="https://kubernetes.io/docs/concepts/configuration/secret/" target="_blank" rel="noreferrer">https://kubernetes.io/docs/concepts/configuration/secret/</a></p><h1 id="_1-secretåŸºæœ¬æ¦‚å¿µ" tabindex="-1">1. SecretåŸºæœ¬æ¦‚å¿µ <a class="header-anchor" href="#_1-secretåŸºæœ¬æ¦‚å¿µ" aria-label="Permalink to &quot;1. SecretåŸºæœ¬æ¦‚å¿µ&quot;">â€‹</a></h1><h2 id="_1-1-ä»€ä¹ˆæ˜¯secret" tabindex="-1">1.1 ä»€ä¹ˆæ˜¯Secret <a class="header-anchor" href="#_1-1-ä»€ä¹ˆæ˜¯secret" aria-label="Permalink to &quot;1.1 ä»€ä¹ˆæ˜¯Secret&quot;">â€‹</a></h2><p>Secret èµ„æºçš„åŠŸèƒ½ç±»ä¼¼äº ConfigMapï¼Œä½†å®ƒä¸“ç”¨äºå­˜æ”¾æ•æ„Ÿæ•°æ®ï¼Œä¾‹å¦‚å¯†ç ã€æ•°å­—è¯ä¹¦ã€ç§é’¥ã€ä»¤ç‰Œ å’Œ SSH key ç­‰ã€‚</p><p>Secret å¯¹è±¡å­˜å‚¨æ•°æ®çš„æ–¹å¼åŠä½¿ç”¨æ–¹å¼ç±»ä¼¼äº ConfigMap å¯¹è±¡ï¼Œ<code>ç›¸åŒçš„æ˜¯ï¼Œéƒ½ä»¥é”®å€¼æ–¹å¼å­˜å‚¨æ•°æ®</code>ï¼Œåœ¨ Pod èµ„æºä¸­é€šè¿‡ç¯å¢ƒå˜é‡æˆ–å­˜å‚¨å·è¿›è¡Œæ•°æ®è®¿é—®ã€‚ä¸åŒçš„æ˜¯ï¼ŒSecret å¯¹è±¡ä»…ä¼šè¢«åˆ†å‘è‡³è°ƒç”¨äº†å¯¹è±¡çš„ Pod èµ„æºæ‰€åœ¨çš„<code>å·¥ä½œèŠ‚ç‚¹</code>ï¼Œä¸”åªèƒ½ç”±èŠ‚ç‚¹å°†å…¶å­˜å‚¨äºå†…å­˜ä¸­ã€‚å¦å¤–ï¼ŒSecret å¯¹è±¡çš„æ•°æ®çš„å­˜å‚¨åŠæ‰“å°æ ¼å¼ä¸º Base64 ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œå› æ­¤ç”¨æˆ·åˆ›å»º Secret å¯¹è±¡æ—¶ä¹Ÿè¦æä¾›æ­¤ç¼–ç æ ¼å¼çš„æ•°æ®ã€‚åœ¨å®¹å™¨ä¸­ä»¥ç¯å¢ƒå˜é‡æˆ–å­˜å‚¨å·çš„æ–¹å¼è®¿é—®æ—¶ï¼Œå®ƒä»¬ä¼šè¢«è‡ªåŠ¨è§£ç ä¸ºæ˜æ–‡æ ¼å¼ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ Master èŠ‚ç‚¹ä¸Šï¼ŒSecret å¯¹è±¡ä»¥éåŠ å¯†çš„æ ¼å¼å­˜å‚¨äº etcd ä¸­ï¼Œå› æ­¤ç®¡ç†å‘˜å¿…é¡»åŠ ä»¥ç²¾å¿ƒç®¡æ§ä»¥ç¡®ä¿æ•æ„Ÿæ•°æ®çš„æœºå¯†æ€§ï¼Œå¿…é¡»ç¡®ä¿ etcd é›†ç¾¤èŠ‚ç‚¹é—´ä»¥åŠä¸ API Server çš„å®‰å…¨é€šä¿¡ï¼Œetcd æœåŠ¡çš„è®¿é—®æˆæƒï¼Œè¿˜åŒ…æ‹¬ç”¨æˆ·è®¿é—® API Server æ—¶çš„æˆæƒï¼Œå› ä¸ºæ‹¥æœ‰åˆ›å»º Pod èµ„æºçš„ç”¨æˆ·éƒ½å¯ä»¥ä½¿ç”¨ Secret èµ„æºå¹¶èƒ½å¤Ÿé€šè¿‡ Pod çš„å®¹å™¨è®¿é—®å…¶æ•°æ®ã€‚</p><h2 id="_1-2-ä¸ºä½•éœ€è¦secret" tabindex="-1">1.2 ä¸ºä½•éœ€è¦Secret <a class="header-anchor" href="#_1-2-ä¸ºä½•éœ€è¦secret" aria-label="Permalink to &quot;1.2 ä¸ºä½•éœ€è¦Secret&quot;">â€‹</a></h2><p>å‰é¢æˆ‘ä»¬é€šè¿‡<code>ConfigMap</code>æ¥å®ç°åº”ç”¨ä¸é…ç½®çš„è§£è€¦ï¼Œä½†æ˜¯è§£è€¦ä¸ä»…ä»…åªæœ‰é…ç½®æ–‡ä»¶ï¼Œè¿˜åº”è¯¥æœ‰é»˜è®¤å£ä»¤ï¼ˆä¾‹å¦‚MySQLã€RedisæœåŠ¡è®¿é—®çš„å£ä»¤ï¼‰ï¼Œç”¨äºSSLé€šä¿¡æ—¶çš„æ•°å­—è¯ä¹¦ï¼Œç”¨äºè®¤è¯çš„ä»¤ç‰Œå’Œssh keyç­‰ï¼Œä½†è¿™äº›æ•æ„Ÿæ•°æ®ä¸é€‚åˆå­˜å‚¨åœ¨ConfigMapä¸­ï¼Œè€Œæ˜¯è¦ç”¨å¦ä¸€ç§è¢«ç§°ä¸ºSecretçš„èµ„æºã€‚å°†æ•æ„Ÿæ•°æ®å­˜å‚¨åœ¨<code>Secret</code>ä¸­æ¯”æ˜æ–‡å­˜å‚¨åœ¨ConfigMapæˆ–Podé…ç½®æ¸…å•ä¸­æ›´åŠ å®‰å…¨ã€‚</p><h2 id="_1-3-secretèµ„æºç±»åˆ«" tabindex="-1">1.3 Secretèµ„æºç±»åˆ« <a class="header-anchor" href="#_1-3-secretèµ„æºç±»åˆ«" aria-label="Permalink to &quot;1.3 Secretèµ„æºç±»åˆ«&quot;">â€‹</a></h2><p>Secretç±»ä¼¼äºConfigMapèµ„æºï¼Œåˆ›å»ºSecretå¯¹è±¡ä¹Ÿæ”¯æŒå‘½ä»¤è¡Œã€æ–‡ä»¶ã€ç›®å½•ç­‰å¤šç§æ–¹å¼çš„æ•°æ®æºï¼Œè€Œæ ¹æ®å…¶å­˜å‚¨æ ¼å¼åŠç”¨é€”çš„ä¸åŒï¼ŒSecretå¯¹è±¡è¿˜ä¼šåˆ’åˆ†ä¸ºå¦‚ä¸‹3ç§ç±»åˆ«ã€‚</p><ul><li><code>docker-registry</code>ï¼šç”¨äºè®¤è¯Docker Registryçš„Secretï¼Œä»¥ä¾¿äºç”¨æˆ·èƒ½ä½¿ç”¨ç§æœ‰å®¹å™¨é•œåƒã€‚</li><li><code>generic</code>ï¼šåŸºäºæœ¬åœ°æ–‡ä»¶ã€ç›®å½•æˆ–å‘½ä»¤è¡Œåˆ›å»ºçš„Secretï¼Œä¸€èˆ¬ç”¨äºå­˜å‚¨å¯†ç ã€ç§˜é’¥ã€ç­‰ä¿¡æ¯ã€‚</li><li><code>tls</code>ï¼šåŸºäºæŒ‡å®šçš„å…¬é’¥å’Œç§é’¥å¯¹æ¥åˆ›å»ºTLSSecretï¼Œä¸“ç”¨äºTLSé€šä¿¡</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master secret]# kubectl create secret</span></span>
<span class="line"><span style="color:#B392F0;">Create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">secret</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">using</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">specified</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">subcommand.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Available</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Commands:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">docker-registry</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">åˆ›å»ºä¸€ä¸ªç»™</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">registry</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ä½¿ç”¨çš„</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">secret</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">generic</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">Create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">secret</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">local</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">directory,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">or</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">literal</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">value</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">tls</span><span style="color:#E1E4E8;">             </span><span style="color:#9ECBFF;">åˆ›å»ºä¸€ä¸ª</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">TLS</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">secret</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Usage:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">secret</span><span style="color:#E1E4E8;"> [flags] [options]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Use</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;kubectl &lt;command&gt; --help&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">for</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">more</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">information</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">about</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">given</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command.</span></span>
<span class="line"><span style="color:#B392F0;">Use</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;kubectl options&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">for</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">list</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">global</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command-line</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">options</span><span style="color:#E1E4E8;"> (applies </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">all</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">commands</span><span style="color:#E1E4E8;">).</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master secret]# kubectl create secret</span></span>
<span class="line"><span style="color:#6F42C1;">Create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">a</span><span style="color:#24292E;"> </span><span style="color:#032F62;">secret</span><span style="color:#24292E;"> </span><span style="color:#032F62;">using</span><span style="color:#24292E;"> </span><span style="color:#032F62;">specified</span><span style="color:#24292E;"> </span><span style="color:#032F62;">subcommand.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Available</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Commands:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">docker-registry</span><span style="color:#24292E;"> </span><span style="color:#032F62;">åˆ›å»ºä¸€ä¸ªç»™</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">registry</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ä½¿ç”¨çš„</span><span style="color:#24292E;"> </span><span style="color:#032F62;">secret</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">generic</span><span style="color:#24292E;">         </span><span style="color:#032F62;">Create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">a</span><span style="color:#24292E;"> </span><span style="color:#032F62;">secret</span><span style="color:#24292E;"> </span><span style="color:#032F62;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">a</span><span style="color:#24292E;"> </span><span style="color:#032F62;">local</span><span style="color:#24292E;"> </span><span style="color:#032F62;">file,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">directory,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">or</span><span style="color:#24292E;"> </span><span style="color:#032F62;">literal</span><span style="color:#24292E;"> </span><span style="color:#032F62;">value</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">tls</span><span style="color:#24292E;">             </span><span style="color:#032F62;">åˆ›å»ºä¸€ä¸ª</span><span style="color:#24292E;"> </span><span style="color:#032F62;">TLS</span><span style="color:#24292E;"> </span><span style="color:#032F62;">secret</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Usage:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">secret</span><span style="color:#24292E;"> [flags] [options]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Use</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;kubectl &lt;command&gt; --help&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">for</span><span style="color:#24292E;"> </span><span style="color:#032F62;">more</span><span style="color:#24292E;"> </span><span style="color:#032F62;">information</span><span style="color:#24292E;"> </span><span style="color:#032F62;">about</span><span style="color:#24292E;"> </span><span style="color:#032F62;">a</span><span style="color:#24292E;"> </span><span style="color:#032F62;">given</span><span style="color:#24292E;"> </span><span style="color:#032F62;">command.</span></span>
<span class="line"><span style="color:#6F42C1;">Use</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;kubectl options&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">for</span><span style="color:#24292E;"> </span><span style="color:#032F62;">a</span><span style="color:#24292E;"> </span><span style="color:#032F62;">list</span><span style="color:#24292E;"> </span><span style="color:#032F62;">of</span><span style="color:#24292E;"> </span><span style="color:#032F62;">global</span><span style="color:#24292E;"> </span><span style="color:#032F62;">command-line</span><span style="color:#24292E;"> </span><span style="color:#032F62;">options</span><span style="color:#24292E;"> (applies </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">all</span><span style="color:#24292E;"> </span><span style="color:#032F62;">commands</span><span style="color:#24292E;">).</span></span></code></pre></div><h2 id="_1-4-secretç±»å‹ç»„æˆ" tabindex="-1">1.4 Secretç±»å‹ç»„æˆ <a class="header-anchor" href="#_1-4-secretç±»å‹ç»„æˆ" aria-label="Permalink to &quot;1.4 Secretç±»å‹ç»„æˆ&quot;">â€‹</a></h2><ul><li>Opaque: è‡ªå®šä¹‰æ•°æ®å†…å®¹ï¼šbase64ç¼–ç ï¼Œç”¨æ¥å­˜å‚¨å¯†ç ã€å¯†é’¥ã€ä¿¡æ¯ã€è¯ä¹¦ç­‰æ•°æ®ã€‚</li><li>kubernetes.io/tls: ç”¨äºä¸º SSL é€šä¿¡æ¨¡å¼å­˜å‚¨è¯ä¹¦å’Œç§é’¥æ–‡ä»¶ï¼Œå‘½ä»¤å¼åˆ›å»ºæ—¶ç±»å‹è¡¨ç¤ºä¸º tlsã€‚</li><li>kubernetes.io/dockerconfigjson: ç”¨æ¥å­˜å‚¨ Docker é•œåƒä»“åº“çš„è®¤è¯ä¿¡æ¯ï¼Œç±»å‹æ ‡è¯†ä¸º docker-registryã€‚</li><li>kubernetes.io/servcie-account-token: Servcie Account çš„è®¤è¯ä¿¡æ¯ï¼Œå¯åœ¨åˆ›å»º Service Account æ—¶ç”± Kubernetes è‡ªåŠ¨åˆ›å»ºã€‚</li></ul><div class="warning custom-block"><p class="custom-block-title">ğŸ’¡ è¯´æ˜</p><p>base64<code></code>ç¼–ç å¹¶éåŠ å¯†æœºåˆ¶ï¼Œå…¶ç¼–ç çš„æ•°æ®å¯ä½¿ç”¨ <code>&quot;base64 --decode&quot;</code> ä¸€ç±»çš„å‘½ä»¤è¿›è¡Œè§£ç </p></div><h2 id="_1-5-secreté…ç½®æ–‡ä»¶" tabindex="-1">1.5 Secreté…ç½®æ–‡ä»¶ <a class="header-anchor" href="#_1-5-secreté…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;1.5 Secreté…ç½®æ–‡ä»¶&quot;">â€‹</a></h2><ul><li>ä¸ConfigMapç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºSecretä¸»è¦å­˜å‚¨æ•æ„Ÿæ•°æ®ï¼Œæ‰€æœ‰çš„æ•°æ®è¦ç»è¿‡base64ç¼–ç ã€‚</li><li>åº”ç”¨åœºæ™¯ï¼šå‡­æ®</li><li>kubectl create secret æ”¯æŒä¸‰ç§æ•°æ®ç±»å‹ï¼š <ul><li>docker-registryï¼ˆkubernetes.io/dockerconfigjsonï¼‰ï¼šå­˜å‚¨é•œåƒä»“åº“è®¤è¯ä¿¡æ¯</li><li>genericï¼ˆOpaqueï¼‰ï¼šå­˜å‚¨å¯†ç ã€å¯†é’¥ç­‰</li><li>tlsï¼ˆkubernetes.io/tlsï¼‰ï¼šå­˜å‚¨TLSè¯ä¹¦</li></ul></li></ul><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202408070937979.png" alt="image"></p><h1 id="_2-åˆ›å»ºsecrets" tabindex="-1">2. åˆ›å»ºSecrets <a class="header-anchor" href="#_2-åˆ›å»ºsecrets" aria-label="Permalink to &quot;2. åˆ›å»ºSecrets&quot;">â€‹</a></h1><p><strong>å¸®åŠ©</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">explain</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">secret</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">explain</span><span style="color:#24292E;"> </span><span style="color:#032F62;">secret</span></span></code></pre></div><h2 id="_2-1-åŸºäºå‘½ä»¤åˆ›å»ºsecret" tabindex="-1">2.1 åŸºäºå‘½ä»¤åˆ›å»ºSecret <a class="header-anchor" href="#_2-1-åŸºäºå‘½ä»¤åˆ›å»ºsecret" aria-label="Permalink to &quot;2.1 åŸºäºå‘½ä»¤åˆ›å»ºSecret&quot;">â€‹</a></h2><ul><li>å¸®åŠ©æ–‡æ¡£</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">secret</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--help</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">secret</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--help</span></span></code></pre></div><p>ä½¿ç”¨Secretä¸ºå®¹å™¨ä¸­è¿è¡Œçš„æœåŠ¡æä¾›ç”¨äºè®¤è¯çš„ç”¨æˆ·åå’Œå¯†ç æ˜¯ä¸€ç§å¸¸è§çš„åº”ç”¨åœºæ™¯ï¼ŒåƒMySQLé•œåƒå°±æ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡æ¥è®¾ç½®ç®¡ç†å‘˜ç”¨æˆ·çš„é»˜è®¤å¯†ç ã€‚</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master secret]# kubectl create secret generic mysql-auth-secret --from-literal=username=root --from-literal=password=ikubernetes</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">generic</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">---</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">The</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">API</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">generator</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">use.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master secret]# kubectl create secret generic mysql-auth-secret --from-literal=username=root --from-literal=password=ikubernetes</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">generic</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">---</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">The</span><span style="color:#24292E;"> </span><span style="color:#032F62;">name</span><span style="color:#24292E;"> </span><span style="color:#032F62;">of</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">API</span><span style="color:#24292E;"> </span><span style="color:#032F62;">generator</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">use.</span></span></code></pre></div><ul><li>æŸ¥çœ‹</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master secret]# kubectl get secrets mysql-auth-secret</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">TYPE</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">DATA</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">AGE</span></span>
<span class="line"><span style="color:#B392F0;">mysql-auth-secret</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Opaque</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">29</span><span style="color:#9ECBFF;">m</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#æŸ¥çœ‹å†…å®¹</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master secret]# kubectl get secrets mysql-auth-secret -oyaml</span></span>
<span class="line"><span style="color:#B392F0;">apiVersion:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#B392F0;">data:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">password:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">aWt1YmVybmV0ZXM=</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">username:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cm9vdA==</span></span>
<span class="line"><span style="color:#B392F0;">kind:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Secret</span></span>
<span class="line"><span style="color:#B392F0;">metadata:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">creationTimestamp:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;2024-05-29T07:23:46Z&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">name:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mysql-auth-secret</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">namespace:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">default</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">resourceVersion:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;1660181&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">uid:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">f454b6d5-4aab-42fe-9bee-c44f91b17877</span></span>
<span class="line"><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Opaque</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#è§£å¯†</span></span>
<span class="line"><span style="color:#79B8FF;">echo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">aWt1YmVybmV0ZXM=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">base64</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master secret]# kubectl get secrets mysql-auth-secret</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                </span><span style="color:#032F62;">TYPE</span><span style="color:#24292E;">     </span><span style="color:#032F62;">DATA</span><span style="color:#24292E;">   </span><span style="color:#032F62;">AGE</span></span>
<span class="line"><span style="color:#6F42C1;">mysql-auth-secret</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Opaque</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">29</span><span style="color:#032F62;">m</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#æŸ¥çœ‹å†…å®¹</span></span>
<span class="line"><span style="color:#24292E;">[root@kube-master secret]# kubectl get secrets mysql-auth-secret -oyaml</span></span>
<span class="line"><span style="color:#6F42C1;">apiVersion:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#6F42C1;">data:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">password:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">aWt1YmVybmV0ZXM=</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">username:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cm9vdA==</span></span>
<span class="line"><span style="color:#6F42C1;">kind:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Secret</span></span>
<span class="line"><span style="color:#6F42C1;">metadata:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">creationTimestamp:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;2024-05-29T07:23:46Z&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">name:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mysql-auth-secret</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">namespace:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">default</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">resourceVersion:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;1660181&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">uid:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">f454b6d5-4aab-42fe-9bee-c44f91b17877</span></span>
<span class="line"><span style="color:#005CC5;">type</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Opaque</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#è§£å¯†</span></span>
<span class="line"><span style="color:#005CC5;">echo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">aWt1YmVybmV0ZXM=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">base64</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span></span></code></pre></div><h2 id="_2-2-åŸºäºæ–‡ä»¶åˆ›å»ºsecret" tabindex="-1">2.2 åŸºäºâ½‚ä»¶åˆ›å»ºSecret <a class="header-anchor" href="#_2-2-åŸºäºæ–‡ä»¶åˆ›å»ºsecret" aria-label="Permalink to &quot;2.2 åŸºäºâ½‚ä»¶åˆ›å»ºSecret&quot;">â€‹</a></h2><p><code>Secret</code>ä¸­åŒ…å«Podè®¿é—®æ•°æ®åº“æ‰€éœ€çš„ç”¨æˆ·å‡­è¯ï¼Œé™¤äº†é€šè¿‡å‘½ä»¤è¡Œåˆ›å»ºï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ–‡ä»¶æ–¹å¼åˆ›å»ºï¼›å°†ç”¨æˆ·åå­˜å‚¨åœ¨æ–‡ä»¶<code>./username.txt</code>ä¸­ï¼Œå°†å¯†ç å­˜å‚¨åœ¨æ–‡ä»¶<code>./password.txt</code>ä¸­ã€‚</p><p>1.å‡†å¤‡æ–‡ä»¶</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master secret]# echo echo -n </span><span style="color:#9ECBFF;">&#39;han&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> ./username.txt</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master secret]# echo -n </span><span style="color:#9ECBFF;">&#39;123456&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> ./password.txt</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master secret]# echo echo -n </span><span style="color:#032F62;">&#39;han&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> ./username.txt</span></span>
<span class="line"><span style="color:#24292E;">[root@kube-master secret]# echo -n </span><span style="color:#032F62;">&#39;123456&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> ./password.txt</span></span></code></pre></div><p>2.é€šè¿‡kubectl create secret å‘½ä»¤å°†è¿™äº›â½‚ä»¶æ‰“åŒ…æˆâ¼€ä¸ªSecret å¯¹è±¡</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master secret]# kubectl create secret generic mysql-auth-secrets --from-file=./username.txt --from-file=./password.txt</span></span>
<span class="line"><span style="color:#B392F0;">secret/mysql-auth-secrets</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#æŸ¥çœ‹</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master secret]# kubectl get secrets</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                  </span><span style="color:#9ECBFF;">TYPE</span><span style="color:#E1E4E8;">                                  </span><span style="color:#9ECBFF;">DATA</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">AGE</span></span>
<span class="line"><span style="color:#B392F0;">mysql-auth-secrets</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">Opaque</span><span style="color:#E1E4E8;">                                </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">50</span><span style="color:#9ECBFF;">s</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master secret]# kubectl create secret generic mysql-auth-secrets --from-file=./username.txt --from-file=./password.txt</span></span>
<span class="line"><span style="color:#6F42C1;">secret/mysql-auth-secrets</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#æŸ¥çœ‹</span></span>
<span class="line"><span style="color:#24292E;">[root@kube-master secret]# kubectl get secrets</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                  </span><span style="color:#032F62;">TYPE</span><span style="color:#24292E;">                                  </span><span style="color:#032F62;">DATA</span><span style="color:#24292E;">   </span><span style="color:#032F62;">AGE</span></span>
<span class="line"><span style="color:#6F42C1;">mysql-auth-secrets</span><span style="color:#24292E;">    </span><span style="color:#032F62;">Opaque</span><span style="color:#24292E;">                                </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">50</span><span style="color:#032F62;">s</span></span></code></pre></div><h2 id="_2-3-åŸºäºtls-secret" tabindex="-1">2.3 åŸºäºTLS Secret <a class="header-anchor" href="#_2-3-åŸºäºtls-secret" aria-label="Permalink to &quot;2.3 åŸºäºTLS Secret&quot;">â€‹</a></h2><p>ä¸ºNginxåº”â½¤åˆ›å»ºSSLè™šæ‹Ÿä¸»æœºæ—¶ï¼Œéœ€è¦å…ˆé€šè¿‡Secretå¯¹è±¡å‘å®¹å™¨æ³¨â¼ŠæœåŠ¡å™¨è¯ä¹¦ï¼Œä»¥ä¾›nginxè¿›ç¨‹åŠ è½½ä½¿â½¤</p><ul><li>å¸®åŠ©æ–‡æ¡£</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">tls</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--help</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">tls</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--help</span></span></code></pre></div><p>1.å‡†å¤‡â¼€ä¸ªâ¾ƒç­¾è¯ä¹¦</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#ç”Ÿæˆkey</span></span>
<span class="line"><span style="color:#B392F0;">openssl</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">genrsa</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-out</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx.key</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2048</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#ç”Ÿæˆcrt</span></span>
<span class="line"><span style="color:#B392F0;">openssl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">req</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-new</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-x509</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-key</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx.key</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-out</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx.crt</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-subj</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;/C=CN/ST=BJ/L=BJ/O=DevOps/CN=book.ikubernetes.net&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#ç”Ÿæˆkey</span></span>
<span class="line"><span style="color:#6F42C1;">openssl</span><span style="color:#24292E;">  </span><span style="color:#032F62;">genrsa</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-out</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx.key</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2048</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#ç”Ÿæˆcrt</span></span>
<span class="line"><span style="color:#6F42C1;">openssl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">req</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-new</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-x509</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-key</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx.key</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-out</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx.crt</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-subj</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;/C=CN/ST=BJ/L=BJ/O=DevOps/CN=book.ikubernetes.net&quot;</span></span></code></pre></div><p>2.åˆ›å»ºtlsç±»å‹çš„secretèµ„æº</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master secret]# kubectl create secret tls nginx-tls-secret --key=nginx.key --cert=nginx.crt</span></span>
<span class="line"><span style="color:#B392F0;">secret/nginx-tls-secret</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master secret]# kubectl create secret tls nginx-tls-secret --key=nginx.key --cert=nginx.crt</span></span>
<span class="line"><span style="color:#6F42C1;">secret/nginx-tls-secret</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span></code></pre></div><p>3.æŸ¥çœ‹</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master secret]# kubectl get secrets nginx-tls-secret -oyaml</span></span>
<span class="line"><span style="color:#B392F0;">apiVersion:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#B392F0;">data:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">tls.crt:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">......</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">tls.key:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">......</span></span>
<span class="line"><span style="color:#B392F0;">kind:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Secret</span></span>
<span class="line"><span style="color:#B392F0;">metadata:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">creationTimestamp:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;2024-05-30T07:21:11Z&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">name:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx-tls-secret</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">namespace:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">default</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">resourceVersion:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;1729408&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">uid:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">7</span><span style="color:#9ECBFF;">dca0a90-822f-43e9-95f1-be1a7f6346c0</span></span>
<span class="line"><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">kubernetes.io/tls</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master secret]# kubectl get secrets nginx-tls-secret -oyaml</span></span>
<span class="line"><span style="color:#6F42C1;">apiVersion:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#6F42C1;">data:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">tls.crt:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">......</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">tls.key:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">......</span></span>
<span class="line"><span style="color:#6F42C1;">kind:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Secret</span></span>
<span class="line"><span style="color:#6F42C1;">metadata:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">creationTimestamp:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;2024-05-30T07:21:11Z&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">name:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx-tls-secret</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">namespace:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">default</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">resourceVersion:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;1729408&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">uid:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">7</span><span style="color:#032F62;">dca0a90-822f-43e9-95f1-be1a7f6346c0</span></span>
<span class="line"><span style="color:#005CC5;">type</span><span style="color:#24292E;">: </span><span style="color:#032F62;">kubernetes.io/tls</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">ğŸ’¡ è¯´æ˜</p><p>â½†è®ºâ½¤æˆ·æä¾›çš„è¯ä¹¦æ˜¯ä»€ä¹ˆåç§°ï¼Œæœ€ç»ˆéƒ½ä¼šè½¬ä¸ºtls.keyç§é’¥ tls.crtå…¬é’¥</p></div><h2 id="_2-4-åŸºäºæ¸…å•å¼åˆ›å»º" tabindex="-1">2.4 åŸºäºæ¸…å•å¼åˆ›å»º <a class="header-anchor" href="#_2-4-åŸºäºæ¸…å•å¼åˆ›å»º" aria-label="Permalink to &quot;2.4 åŸºäºæ¸…å•å¼åˆ›å»º&quot;">â€‹</a></h2><p>Secret èµ„æºæ˜¯æ ‡å‡†çš„ Kubernetes API å¯¹è±¡ï¼Œé™¤äº†æ ‡å‡†çš„ apiVersionã€kind å’Œ metadata å­—æ®µï¼Œå®ƒå¯ç”¨çš„å…¶ä»–å­—æ®µå…·ä½“å¦‚ä¸‹ï¼š</p><ul><li><code>data &lt;map[string]string&gt;</code>: &quot;key:value&quot; æ ¼å¼çš„æ•°æ®ï¼Œé€šå¸¸æ˜¯æ•æ„Ÿä¿¡æ¯ï¼Œæ•°æ®æ ¼å¼éœ€æ˜¯ä»¥ Base64 æ ¼å¼ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œå› æ­¤éœ€è¦ç”¨æˆ·äº‹å…ˆå…ˆå®Œæˆç¼–ç ã€‚</li><li><code>stringData &lt;map[string]string&gt;</code>: ä»¥æ˜æ–‡æ ¼å¼ï¼ˆé Base64 ç¼–ç ï¼‰å®šä¹‰çš„ &quot;key:value&quot; æ•°æ®ï¼›æ— é¡»ç”¨æˆ·äº‹å…ˆå¯¹æ•°æ®è¿›è¡Œ Base64 ç¼–ç ï¼Œè€Œæ˜¯åœ¨åˆ›å»ºä¸º Secret å¯¹è±¡æ—¶è‡ªåŠ¨è¿›è¡Œç¼–ç å¹¶ä¿å­˜äº data å­—æ®µä¸­ï¼ŒstringData å­—æ®µä¸­æ˜æ–‡ä¸ä¼šè¢« API Server è¾“å‡ºï¼Œä¸è¿‡è‹¥æ˜¯ä½¿ç”¨ &quot;kubectl apply&quot; å‘½ä»¤è¿›è¡Œçš„åˆ›å»ºï¼Œé‚£ä¹ˆæ³¨è§£ä¿¡æ¯ä¸­è¿˜æ˜¯å¯èƒ½ä¼šç›´æ¥è¾“å‡ºè¿™äº›ä¿¡æ¯çš„ã€‚</li><li><code>type &lt;string&gt;</code>: ä»…æ˜¯ä¸ºäº†ä¾¿äºç¼–ç¨‹æ–¹å¼å¤„ç† Secret æ•°æ®è€Œæä¾›çš„ç±»å‹æ ‡è¯†ã€‚</li></ul><h3 id="æ˜æ–‡" tabindex="-1">æ˜æ–‡ <a class="header-anchor" href="#æ˜æ–‡" aria-label="Permalink to &quot;æ˜æ–‡&quot;">â€‹</a></h3><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">root@kube-master secret</span><span style="color:#E1E4E8;">]# </span><span style="color:#9ECBFF;">cat redis-demo.yaml</span></span>
<span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Secret</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">secret-demo</span></span>
<span class="line"><span style="color:#85E89D;">stringData</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">username</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">redis</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">password</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">redis@123</span></span>
<span class="line"><span style="color:#85E89D;">type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Opaque</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[</span><span style="color:#032F62;">root@kube-master secret</span><span style="color:#24292E;">]# </span><span style="color:#032F62;">cat redis-demo.yaml</span></span>
<span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Secret</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">secret-demo</span></span>
<span class="line"><span style="color:#22863A;">stringData</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">username</span><span style="color:#24292E;">: </span><span style="color:#032F62;">redis</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">password</span><span style="color:#24292E;">: </span><span style="color:#032F62;">redis@123</span></span>
<span class="line"><span style="color:#22863A;">type</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Opaque</span></span></code></pre></div><h3 id="åŠ å¯†" tabindex="-1">åŠ å¯† <a class="header-anchor" href="#åŠ å¯†" aria-label="Permalink to &quot;åŠ å¯†&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master secret]# echo -n </span><span style="color:#9ECBFF;">&quot;admin&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">base64</span></span>
<span class="line"><span style="color:#E1E4E8;">YWRtaW4</span><span style="color:#F97583;">=</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master secret]# echo -n </span><span style="color:#9ECBFF;">&quot;123456&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">base64</span></span>
<span class="line"><span style="color:#B392F0;">MTIzNDU2</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master secret]# echo -n </span><span style="color:#032F62;">&quot;admin&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">base64</span></span>
<span class="line"><span style="color:#24292E;">YWRtaW4</span><span style="color:#D73A49;">=</span></span>
<span class="line"><span style="color:#24292E;">[root@kube-master secret]# echo -n </span><span style="color:#032F62;">&quot;123456&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">base64</span></span>
<span class="line"><span style="color:#6F42C1;">MTIzNDU2</span></span></code></pre></div><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">root@kube-master secret</span><span style="color:#E1E4E8;">]# </span><span style="color:#9ECBFF;">cat secret-demo.yaml</span></span>
<span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Secret</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">secre-hello</span></span>
<span class="line"><span style="color:#85E89D;">data</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">user</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">YWRtaW4=</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">password</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">MTIzNDU2</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[</span><span style="color:#032F62;">root@kube-master secret</span><span style="color:#24292E;">]# </span><span style="color:#032F62;">cat secret-demo.yaml</span></span>
<span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Secret</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">secre-hello</span></span>
<span class="line"><span style="color:#22863A;">data</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">user</span><span style="color:#24292E;">: </span><span style="color:#032F62;">YWRtaW4=</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">password</span><span style="color:#24292E;">: </span><span style="color:#032F62;">MTIzNDU2</span></span></code></pre></div><h1 id="_3-podå¼•ç”¨secret" tabindex="-1">3. Podå¼•ç”¨Secret <a class="header-anchor" href="#_3-podå¼•ç”¨secret" aria-label="Permalink to &quot;3. Podå¼•ç”¨Secret&quot;">â€‹</a></h1><ul><li>å¸®åŠ©æ–‡æ¡£</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">explain</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pod.spec.imagePullSecrets</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">explain</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pod.spec.imagePullSecrets</span></span></code></pre></div><h2 id="_3-1-secretå­˜å‚¨å·" tabindex="-1">3.1 Secretå­˜å‚¨å· <a class="header-anchor" href="#_3-1-secretå­˜å‚¨å·" aria-label="Permalink to &quot;3.1 Secretå­˜å‚¨å·&quot;">â€‹</a></h2><p>ç±»ä¼¼äº Pod ä½¿ç”¨ ConfigMap å¯¹è±¡çš„æ–¹å¼ï¼ŒSecret å¯¹è±¡å¯ä»¥æ³¨å…¥ä¸ºç¯å¢ƒå˜é‡ï¼Œä¹Ÿå¯ä»¥å­˜å‚¨ä¸ºå·å½¢å¼æŒ‚è½½ä½¿ç”¨</p><p>é™¤äº†å…¶ç±»å‹åŠå¼•â½¤çš„æ ‡è¯†éœ€è¦æ›¿æ¢ä¸º <code>secretã€secretName</code>ä¹‹å¤–ï¼Œå…¶ä»–â¼ä¹â¼€è‡´ï¼ŒåŒ…æ‹¬â½€æŒä½¿â½¤æŒ‚è½½æ•´ä¸ªå­˜å‚¨å·ï¼ŒåªæŒ‚è½½å­˜å‚¨å·ä¸­æŒ‡å®šçš„é”®å€¼ç­‰</p><p>1.æŸ¥çœ‹tls</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master secret]# kubectl get secrets</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                  </span><span style="color:#9ECBFF;">TYPE</span><span style="color:#E1E4E8;">                                  </span><span style="color:#9ECBFF;">DATA</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">AGE</span></span>
<span class="line"><span style="color:#B392F0;">nginx-tls-secret</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">kubernetes.io/tls</span><span style="color:#E1E4E8;">                     </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">60</span><span style="color:#9ECBFF;">m</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master secret]# kubectl get secrets</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                  </span><span style="color:#032F62;">TYPE</span><span style="color:#24292E;">                                  </span><span style="color:#032F62;">DATA</span><span style="color:#24292E;">   </span><span style="color:#032F62;">AGE</span></span>
<span class="line"><span style="color:#6F42C1;">nginx-tls-secret</span><span style="color:#24292E;">      </span><span style="color:#032F62;">kubernetes.io/tls</span><span style="color:#24292E;">                     </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">60</span><span style="color:#032F62;">m</span></span></code></pre></div><p>2.åˆ›å»º</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">root@kube-master secret</span><span style="color:#E1E4E8;">]# </span><span style="color:#9ECBFF;">cat secret-volume-demo.yaml</span></span>
<span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Pod</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">my-pod-demo</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">volumes</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">my-volume</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#å®šä¹‰æŒ‚è½½åå­—ï¼Œè®©volumMountsä½¿ç”¨</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">secret</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">secretName</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx-tls-secret</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">containers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">my-container-demo</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx:latest</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">ports</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        - </span><span style="color:#85E89D;">containerPort</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">80</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">volumeMounts</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">my-volume</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">mountPath</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/etc/nginx/ssl</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">readOnly</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[</span><span style="color:#032F62;">root@kube-master secret</span><span style="color:#24292E;">]# </span><span style="color:#032F62;">cat secret-volume-demo.yaml</span></span>
<span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Pod</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">my-pod-demo</span></span>
<span class="line"><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">volumes</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">my-volume</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#å®šä¹‰æŒ‚è½½åå­—ï¼Œè®©volumMountsä½¿ç”¨</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">secret</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">secretName</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx-tls-secret</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">containers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">my-container-demo</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx:latest</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">ports</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        - </span><span style="color:#22863A;">containerPort</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">80</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">volumeMounts</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">my-volume</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">mountPath</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/etc/nginx/ssl</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">readOnly</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span></span></code></pre></div><p>3.æ‰§è¡Œ</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">kubectl apply -f secret-volume-demo.yaml</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">kubectl apply -f secret-volume-demo.yaml</span></span></code></pre></div><p>4.éªŒè¯æ•ˆæœ</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master secret]# kubectl exec -it my-pod-demo -- ls /etc/nginx/ssl</span></span>
<span class="line"><span style="color:#B392F0;">tls.crt</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">tls.key</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master secret]# kubectl exec -it my-pod-demo -- ls /etc/nginx/ssl</span></span>
<span class="line"><span style="color:#6F42C1;">tls.crt</span><span style="color:#24292E;">  </span><span style="color:#032F62;">tls.key</span></span></code></pre></div><h2 id="_3-2-é€šè¿‡ç¯å¢ƒå˜é‡" tabindex="-1">3.2 é€šè¿‡ç¯å¢ƒå˜é‡ <a class="header-anchor" href="#_3-2-é€šè¿‡ç¯å¢ƒå˜é‡" aria-label="Permalink to &quot;3.2 é€šè¿‡ç¯å¢ƒå˜é‡&quot;">â€‹</a></h2><p>Podèµ„æºä»¥ç¯å¢ƒå˜é‡â½…å¼è·å–Secretæ•°æ®ï¼Œå­˜åœ¨ä¸¤ç§â½…å¼</p><ul><li>å°†æŒ‡å®šé”®çš„å€¼ä¼ é€’ç»™ç¯å¢ƒå˜é‡ï¼Œä¸€ä¸ªä¸€ä¸ªä¼ é€’ï¼Œé€šè¿‡<code>env.valueFrom</code>å­—æ®µå®ç°;</li><li>å°†Secretå¯¹è±¡ä¸Šçš„å…¨éƒ¨é”®ä¸€æ¬¡æ€§å…¨éƒ¨æ˜ å°„ä¸ºå®¹å™¨çš„ç¯å¢ƒå˜é‡ï¼Œé€šè¿‡<code>envFrom</code>å­—æ®µå®ç°ï¼›</li></ul><h3 id="env" tabindex="-1">env <a class="header-anchor" href="#env" aria-label="Permalink to &quot;env&quot;">â€‹</a></h3><p>1.åˆ›å»ºsecret</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">root@kube-master secret</span><span style="color:#E1E4E8;">]# </span><span style="color:#9ECBFF;">cat secret-demo.yaml</span></span>
<span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Secret</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">secre-hello</span></span>
<span class="line"><span style="color:#85E89D;">data</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">user</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">YWRtaW4=</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">password</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">MTIzNDU2</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[</span><span style="color:#032F62;">root@kube-master secret</span><span style="color:#24292E;">]# </span><span style="color:#032F62;">cat secret-demo.yaml</span></span>
<span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Secret</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">secre-hello</span></span>
<span class="line"><span style="color:#22863A;">data</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">user</span><span style="color:#24292E;">: </span><span style="color:#032F62;">YWRtaW4=</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">password</span><span style="color:#24292E;">: </span><span style="color:#032F62;">MTIzNDU2</span></span></code></pre></div><p>2.åˆ›å»ºpod</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">root@kube-master secret</span><span style="color:#E1E4E8;">]# </span><span style="color:#9ECBFF;">cat secret-env.yaml</span></span>
<span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Pod</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">my-pod-demo1</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">containers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">my-container</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx:latest</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">ports</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">containerPort</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">80</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">env</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">USER</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">valueFrom</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">secretKeyRef</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">secre-hello</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">user</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[</span><span style="color:#032F62;">root@kube-master secret</span><span style="color:#24292E;">]# </span><span style="color:#032F62;">cat secret-env.yaml</span></span>
<span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Pod</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">my-pod-demo1</span></span>
<span class="line"><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">containers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">my-container</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx:latest</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">ports</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">containerPort</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">80</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">env</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">USER</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">valueFrom</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">secretKeyRef</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">secre-hello</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">key</span><span style="color:#24292E;">: </span><span style="color:#032F62;">user</span></span></code></pre></div><p>3.éªŒè¯</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master secret]# kubectl exec -it my-pod-demo1 -- /bin/bash</span></span>
<span class="line"><span style="color:#B392F0;">root@my-pod-demo1:/#</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">env</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">egrep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;(user|pass)&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">USER</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">admin</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master secret]# kubectl exec -it my-pod-demo1 -- /bin/bash</span></span>
<span class="line"><span style="color:#6F42C1;">root@my-pod-demo1:/#</span><span style="color:#24292E;"> </span><span style="color:#032F62;">env</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">egrep</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;(user|pass)&quot;</span></span>
<span class="line"><span style="color:#24292E;">USER</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">admin</span></span></code></pre></div><h3 id="envfrom" tabindex="-1">envFrom <a class="header-anchor" href="#envfrom" aria-label="Permalink to &quot;envFrom&quot;">â€‹</a></h3><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Pod</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">my-pod-demo1</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">containers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">my-container</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx:latest</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">ports</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">containerPort</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">80</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">envFrom</span><span style="color:#E1E4E8;">:     </span><span style="color:#6A737D;"># æ•´ä½“å¼•â½¤æŒ‡å®šçš„Secretå¯¹è±¡å…¨éƒ¨é”®åå’Œé”®å€¼</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">prefix</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">New</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># å°†æ‰€æœ‰é”®åå¼•â½¤ä¸ºç¯å¢ƒå˜é‡æ—¶ç»Ÿâ¼€æ·»åŠ çš„å‰ç¼€ ï¼ˆâ½†éœ€æ±‚ï¼Œå¯ä¸â½¤ï¼‰</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">secretRef</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">secre-hello</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Pod</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">my-pod-demo1</span></span>
<span class="line"><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">containers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">my-container</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx:latest</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">ports</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">containerPort</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">80</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">envFrom</span><span style="color:#24292E;">:     </span><span style="color:#6A737D;"># æ•´ä½“å¼•â½¤æŒ‡å®šçš„Secretå¯¹è±¡å…¨éƒ¨é”®åå’Œé”®å€¼</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">prefix</span><span style="color:#24292E;">: </span><span style="color:#032F62;">New</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># å°†æ‰€æœ‰é”®åå¼•â½¤ä¸ºç¯å¢ƒå˜é‡æ—¶ç»Ÿâ¼€æ·»åŠ çš„å‰ç¼€ ï¼ˆâ½†éœ€æ±‚ï¼Œå¯ä¸â½¤ï¼‰</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">secretRef</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">secre-hello</span></span></code></pre></div><h1 id="_4-imagepullsecret-èµ„æºå¯¹è±¡" tabindex="-1">4. imagePullSecret èµ„æºå¯¹è±¡ <a class="header-anchor" href="#_4-imagepullsecret-èµ„æºå¯¹è±¡" aria-label="Permalink to &quot;4. imagePullSecret èµ„æºå¯¹è±¡&quot;">â€‹</a></h1><p>å®˜æ–¹æ–‡æ¡£,</p><p><a href="https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/pull-image-private-registry/" target="_blank" rel="noreferrer">https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/pull-image-private-registry/</a></p><p><a href="https://kubernetes.io/zh-cn/docs/concepts/configuration/secret/#using-imagepullsecrets" target="_blank" rel="noreferrer">https://kubernetes.io/zh-cn/docs/concepts/configuration/secret/#using-imagepullsecrets</a></p><p>å½“Podé…ç½®æ¸…å•ä¸­å®šä¹‰çš„å®¹å™¨é•œåƒæ¥è‡ªäº<code>ç§æœ‰ä»“åº“æ—¶</code>ï¼Œéœ€è¦å…ˆè®¤è¯ç›®æ ‡çš„Registryï¼Œè€Œåæ‰èƒ½æ­£å¸¸ä¸‹è½½é•œåƒï¼ŒimagePulLSecretå­—æ®µæŒ‡å®šè®¤è¯Registryæ—¶ä½¿ç”¨çš„Secretå¯¹è±¡ï¼Œä»¥è¾…åŠ©kubeletä»éœ€è¦è®¤è¯çš„ç§æœ‰ä»“åº“è·å–é•œåƒã€‚</p><p>åˆ›å»ºç”¨äºè®¤è¯Registryçš„Secretï¼Œæœ‰ä¸“ç”¨çš„docker-registryå­å‘½ä»¤ï¼Œé€šå¸¸è®¤è¯éœ€è¦å‘kubeLetæä¾›Registryåœ°å€ã€ç”¨æˆ·åã€å¯†ç ã€Emailä¿¡æ¯ï¼Œå› æ­¤docker-registryå­å‘½ä»¤éœ€è¦åŒæ—¶ä½¿ç”¨ä»¥ä¸‹4ä¸ªé€‰é¡¹ã€‚</p><p>--docker-serverï¼šç”¨äºæŒ‡å®šç§æœ‰ä»“åº“æœåŠ¡å™¨åœ°å€;</p><p>--docker-Userï¼šç”¨äºæŒ‡å®šç§æœ‰ä»“åº“è®¤è¯çš„ç”¨æˆ·å;</p><p>--docker-passwordï¼šç”¨äºæŒ‡å®šç§æœ‰ä»“åº“è®¤è¯çš„å¯†ç ;</p><p>--dcker-emailï¼šç”¨äºæŒ‡å®šè¯·æ±‚ç§æœ‰ä»“åº“çš„ç”¨æˆ·E-mail(å¯é€‰)</p><p>1.åˆ›å»ºaliyun-registryçš„Secretå¯¹è±¡</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">secret</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-registry</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">local-registry</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--docker-username=admin</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--docker-password=admin@123</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">secret</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-registry</span><span style="color:#24292E;">  </span><span style="color:#032F62;">local-registry</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--docker-username=admin</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--docker-password=admin@123</span></span></code></pre></div><ul><li>æˆ–è€…å£°æ˜æ–‡ä»¶</li></ul><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">data</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">.dockerconfigjson</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">...</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Secret</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">local-registry</span></span>
<span class="line"><span style="color:#85E89D;">type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">kubernetes.io/dockerconfigjson</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">data</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">.dockerconfigjson</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">...</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Secret</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">local-registry</span></span>
<span class="line"><span style="color:#22863A;">type</span><span style="color:#24292E;">: </span><span style="color:#032F62;">kubernetes.io/dockerconfigjson</span></span></code></pre></div><p>è§£å¯†</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">secret</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">regcred</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--output=</span><span style="color:#9ECBFF;">&quot;jsonpath={.data.\\.dockerconfigjson}&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">base64</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span><span style="color:#B392F0;">&quot;auths&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;">{&quot;</span><span style="color:#B392F0;">registry.cn-zhangjiakou.aliyuncs.com</span><span style="color:#B392F0;">&quot;:{&quot;</span><span style="color:#B392F0;">username</span><span style="color:#B392F0;">&quot;:&quot;</span><span style="color:#B392F0;">hsuing.han@outlook.com</span><span style="color:#B392F0;">&quot;,&quot;</span><span style="color:#B392F0;">password</span><span style="color:#B392F0;">&quot;:&quot;</span><span style="color:#B392F0;">123456</span><span style="color:#B392F0;">&quot;,&quot;</span><span style="color:#B392F0;">email</span><span style="color:#B392F0;">&quot;:&quot;</span><span style="color:#B392F0;">hsuing.han@outlook.com</span><span style="color:#B392F0;">&quot;,&quot;</span><span style="color:#B392F0;">auth</span><span style="color:#B392F0;">&quot;:&quot;</span><span style="color:#B392F0;">aHN1aW5nLmhhbkBvdXRsb29rLmNvbTpoeDEzMjMxMj</span><span style="color:#B392F0;">&quot;}}}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">#æŸ¥çœ‹ç”¨æˆ·å’Œå¯†ç </span></span>
<span class="line"><span style="color:#B392F0;">echo aHN1aW5nLmhhbkBvdXRsb29rLmNvbTpoeDEzMjMxMj |base64 -d</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">#æˆ–è€…,æ‹¿åˆ°.dockerconfigjsonè¿›è¡Œ</span></span>
<span class="line"><span style="color:#B392F0;">echo ...|base64 -d</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">#å¯¹auth åŠ å¯†</span></span>
<span class="line"><span style="color:#B392F0;">echo han:123456 |base64</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">secret</span><span style="color:#24292E;"> </span><span style="color:#032F62;">regcred</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--output=</span><span style="color:#032F62;">&quot;jsonpath={.data.\\.dockerconfigjson}&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">base64</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span></span>
<span class="line"><span style="color:#24292E;">{</span><span style="color:#6F42C1;">&quot;auths&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;">{&quot;</span><span style="color:#6F42C1;">registry.cn-zhangjiakou.aliyuncs.com</span><span style="color:#6F42C1;">&quot;:{&quot;</span><span style="color:#6F42C1;">username</span><span style="color:#6F42C1;">&quot;:&quot;</span><span style="color:#6F42C1;">hsuing.han@outlook.com</span><span style="color:#6F42C1;">&quot;,&quot;</span><span style="color:#6F42C1;">password</span><span style="color:#6F42C1;">&quot;:&quot;</span><span style="color:#6F42C1;">123456</span><span style="color:#6F42C1;">&quot;,&quot;</span><span style="color:#6F42C1;">email</span><span style="color:#6F42C1;">&quot;:&quot;</span><span style="color:#6F42C1;">hsuing.han@outlook.com</span><span style="color:#6F42C1;">&quot;,&quot;</span><span style="color:#6F42C1;">auth</span><span style="color:#6F42C1;">&quot;:&quot;</span><span style="color:#6F42C1;">aHN1aW5nLmhhbkBvdXRsb29rLmNvbTpoeDEzMjMxMj</span><span style="color:#6F42C1;">&quot;}}}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">#æŸ¥çœ‹ç”¨æˆ·å’Œå¯†ç </span></span>
<span class="line"><span style="color:#6F42C1;">echo aHN1aW5nLmhhbkBvdXRsb29rLmNvbTpoeDEzMjMxMj |base64 -d</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">#æˆ–è€…,æ‹¿åˆ°.dockerconfigjsonè¿›è¡Œ</span></span>
<span class="line"><span style="color:#6F42C1;">echo ...|base64 -d</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">#å¯¹auth åŠ å¯†</span></span>
<span class="line"><span style="color:#6F42C1;">echo han:123456 |base64</span></span></code></pre></div><p>2.æŸ¥çœ‹secret,èµ„æºç±»å‹ä¸º<code>kubernetes.io/dockerconfigjson</code></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master secret]# kubectl get secrets</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                  </span><span style="color:#9ECBFF;">TYPE</span><span style="color:#E1E4E8;">                                  </span><span style="color:#9ECBFF;">DATA</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">AGE</span></span>
<span class="line"><span style="color:#B392F0;">local-registry</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">kubernetes.io/dockerconfigjson</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">47</span><span style="color:#9ECBFF;">s</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master secret]# kubectl get secrets</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                  </span><span style="color:#032F62;">TYPE</span><span style="color:#24292E;">                                  </span><span style="color:#032F62;">DATA</span><span style="color:#24292E;">   </span><span style="color:#032F62;">AGE</span></span>
<span class="line"><span style="color:#6F42C1;">local-registry</span><span style="color:#24292E;">        </span><span style="color:#032F62;">kubernetes.io/dockerconfigjson</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">47</span><span style="color:#032F62;">s</span></span></code></pre></div><p>3.Podå¼•ç”¨Secretèµ„æºï¼›</p><p>imagePullSecretåœ¨specå­—æ®µä¸­ï¼›å’Œcontaineræ˜¯å¹³çº§çš„ï¼›</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">explain</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pod.spec.imagePullSecrets</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">KIND:</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Pod</span></span>
<span class="line"><span style="color:#B392F0;">VERSION:</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">RESOURCE:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">imagePullSecrets</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">[]Objec</span><span style="color:#E1E4E8;">t</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">DESCRIPTION:</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#B392F0;">ImagePullSecrets</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">an</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">optional</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">list</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">references</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">secrets</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">same</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#B392F0;">namespace</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">use</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">for</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pulling</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">any</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">images</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">used</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">by</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">this</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PodSpec.</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">If</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#B392F0;">specified,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">these</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">secrets</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">will</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">be</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">passed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">individual</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">puller</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#B392F0;">implementations</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">for</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">them</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">use.</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">For</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">example,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">case</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">only</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#B392F0;">DockerConfig</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">secrets</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">are</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">honored.</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">More</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">info:</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#B392F0;">https://kubernetes.io/docs/concepts/containers/images#specifying-imagepullsecrets-on-a-pod</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#B392F0;">LocalObjectReference</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">contains</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">enough</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">information</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">let</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">you</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">locate</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#B392F0;">referenced</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">object</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">inside</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">same</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">namespace.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">FIELDS:</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">name</span><span style="color:#E1E4E8;">	</span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">strin</span><span style="color:#E1E4E8;">g</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#B392F0;">Name</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">referent.</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">More</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">info:</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#B392F0;">https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">explain</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pod.spec.imagePullSecrets</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">KIND:</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Pod</span></span>
<span class="line"><span style="color:#6F42C1;">VERSION:</span><span style="color:#24292E;">  </span><span style="color:#032F62;">v1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">RESOURCE:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">imagePullSecrets</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">[]Objec</span><span style="color:#24292E;">t</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">DESCRIPTION:</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#6F42C1;">ImagePullSecrets</span><span style="color:#24292E;"> </span><span style="color:#032F62;">is</span><span style="color:#24292E;"> </span><span style="color:#032F62;">an</span><span style="color:#24292E;"> </span><span style="color:#032F62;">optional</span><span style="color:#24292E;"> </span><span style="color:#032F62;">list</span><span style="color:#24292E;"> </span><span style="color:#032F62;">of</span><span style="color:#24292E;"> </span><span style="color:#032F62;">references</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">secrets</span><span style="color:#24292E;"> </span><span style="color:#032F62;">in</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">same</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#6F42C1;">namespace</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">use</span><span style="color:#24292E;"> </span><span style="color:#032F62;">for</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pulling</span><span style="color:#24292E;"> </span><span style="color:#032F62;">any</span><span style="color:#24292E;"> </span><span style="color:#032F62;">of</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">images</span><span style="color:#24292E;"> </span><span style="color:#032F62;">used</span><span style="color:#24292E;"> </span><span style="color:#032F62;">by</span><span style="color:#24292E;"> </span><span style="color:#032F62;">this</span><span style="color:#24292E;"> </span><span style="color:#032F62;">PodSpec.</span><span style="color:#24292E;"> </span><span style="color:#032F62;">If</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#6F42C1;">specified,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">these</span><span style="color:#24292E;"> </span><span style="color:#032F62;">secrets</span><span style="color:#24292E;"> </span><span style="color:#032F62;">will</span><span style="color:#24292E;"> </span><span style="color:#032F62;">be</span><span style="color:#24292E;"> </span><span style="color:#032F62;">passed</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">individual</span><span style="color:#24292E;"> </span><span style="color:#032F62;">puller</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#6F42C1;">implementations</span><span style="color:#24292E;"> </span><span style="color:#032F62;">for</span><span style="color:#24292E;"> </span><span style="color:#032F62;">them</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">use.</span><span style="color:#24292E;"> </span><span style="color:#032F62;">For</span><span style="color:#24292E;"> </span><span style="color:#032F62;">example,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">in</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">case</span><span style="color:#24292E;"> </span><span style="color:#032F62;">of</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">only</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#6F42C1;">DockerConfig</span><span style="color:#24292E;"> </span><span style="color:#032F62;">type</span><span style="color:#24292E;"> </span><span style="color:#032F62;">secrets</span><span style="color:#24292E;"> </span><span style="color:#032F62;">are</span><span style="color:#24292E;"> </span><span style="color:#032F62;">honored.</span><span style="color:#24292E;"> </span><span style="color:#032F62;">More</span><span style="color:#24292E;"> </span><span style="color:#032F62;">info:</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#6F42C1;">https://kubernetes.io/docs/concepts/containers/images#specifying-imagepullsecrets-on-a-pod</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#6F42C1;">LocalObjectReference</span><span style="color:#24292E;"> </span><span style="color:#032F62;">contains</span><span style="color:#24292E;"> </span><span style="color:#032F62;">enough</span><span style="color:#24292E;"> </span><span style="color:#032F62;">information</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">let</span><span style="color:#24292E;"> </span><span style="color:#032F62;">you</span><span style="color:#24292E;"> </span><span style="color:#032F62;">locate</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#6F42C1;">referenced</span><span style="color:#24292E;"> </span><span style="color:#032F62;">object</span><span style="color:#24292E;"> </span><span style="color:#032F62;">inside</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">same</span><span style="color:#24292E;"> </span><span style="color:#032F62;">namespace.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">FIELDS:</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">name</span><span style="color:#24292E;">	</span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">strin</span><span style="color:#24292E;">g</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#6F42C1;">Name</span><span style="color:#24292E;"> </span><span style="color:#032F62;">of</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">referent.</span><span style="color:#24292E;"> </span><span style="color:#032F62;">More</span><span style="color:#24292E;"> </span><span style="color:#032F62;">info:</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#6F42C1;">https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names</span></span></code></pre></div><p>4.å¼•å…¥imagePullSecrets</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#éœ€è¦åˆ›å»ºhubä»“åº“çš„secret</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">secret</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-registry</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-regsitry-auth</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--docker-server=</span><span style="color:#9ECBFF;">&quot;hub.cropy.cn&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--docker-username=</span><span style="color:#9ECBFF;">&quot;admin&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--docker-password=</span><span style="color:#9ECBFF;">&quot;Harbor12345&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">test</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#éœ€è¦åˆ›å»ºhubä»“åº“çš„secret</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">secret</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-registry</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-regsitry-auth</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--docker-server=</span><span style="color:#032F62;">&quot;hub.cropy.cn&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--docker-username=</span><span style="color:#032F62;">&quot;admin&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--docker-password=</span><span style="color:#032F62;">&quot;Harbor12345&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-n</span><span style="color:#24292E;"> </span><span style="color:#032F62;">test</span></span></code></pre></div><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">apps/v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Deployment</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">java-demo</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">namespace</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">test</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">replicas</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">selector</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">matchLabels</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">project</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">www</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">app</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">java-demo</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">labels</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">project</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">www</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">app</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">java-demo</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">imagePullSecrets</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;docker-regsitry-auth&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">containers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">hub.cropy.cn/demo/java-demo:v1</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">java-demo</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">imagePullPolicy</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Always</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">ports</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">          - </span><span style="color:#85E89D;">containerPort</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">8080</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">web</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">protocol</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">TCP</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">resources</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">requests</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">cpu</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.5</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">memory</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">0.5Gi</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">limits</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">cpu</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">1</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">memory</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">2Gi</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">livenessProbe</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">httpGet</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">path</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">port</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">8080</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">initialDelaySeconds</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">60</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">timeoutSeconds</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">20</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">readinessProbe</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">httpGet</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">path</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">port</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">8080</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">initialDelaySeconds</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">60</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">timeoutSeconds</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">20</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">apps/v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Deployment</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">java-demo</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">namespace</span><span style="color:#24292E;">: </span><span style="color:#032F62;">test</span></span>
<span class="line"><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">replicas</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">2</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">selector</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">matchLabels</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">project</span><span style="color:#24292E;">: </span><span style="color:#032F62;">www</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">app</span><span style="color:#24292E;">: </span><span style="color:#032F62;">java-demo</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">template</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">labels</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">project</span><span style="color:#24292E;">: </span><span style="color:#032F62;">www</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">app</span><span style="color:#24292E;">: </span><span style="color:#032F62;">java-demo</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">imagePullSecrets</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;docker-regsitry-auth&quot;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">containers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">hub.cropy.cn/demo/java-demo:v1</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">java-demo</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">imagePullPolicy</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Always</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">ports</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">          - </span><span style="color:#22863A;">containerPort</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">8080</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">web</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">protocol</span><span style="color:#24292E;">: </span><span style="color:#032F62;">TCP</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">resources</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">requests</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">cpu</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.5</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">memory</span><span style="color:#24292E;">: </span><span style="color:#032F62;">0.5Gi</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">limits</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">cpu</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">1</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">memory</span><span style="color:#24292E;">: </span><span style="color:#032F62;">2Gi</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">livenessProbe</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">httpGet</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">path</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">port</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">8080</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">initialDelaySeconds</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">60</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">timeoutSeconds</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">20</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">readinessProbe</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">httpGet</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">path</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">port</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">8080</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">initialDelaySeconds</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">60</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">timeoutSeconds</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">20</span></span></code></pre></div><p>æˆ–è€…</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># é…ç½®.docker/config.jsonæ–‡ä»¶ï¼ŒåŒ…å«äº†ä¸ Docker Hub æˆ–å…¶ä»–ç§æœ‰ä»“åº“è¿›è¡Œèº«ä»½éªŒè¯æ‰€éœ€çš„å‡­æ®ä¿¡æ¯ã€‚</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/.docker/config.json</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">&quot;auths&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">		</span><span style="color:#B392F0;">&quot;registry.test.com&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">			</span><span style="color:#B392F0;">&quot;auth&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;dmlwZXIucm9ib3QuZG9ja2VyOlNUYW&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">		}</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#6A737D;"># åˆ›å»ºsecretç»™podä½¿ç”¨</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">secret</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">generic</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">secret-nam</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--from-file=.dockerconfigjson=.docker/config.json</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--type=kubernetes.io/dockerconfigjson</span></span>
<span class="line"><span style="color:#6A737D;"># è¿™é‡Œï¼Œåˆ›å»ºçš„secretå¯ä»¥åœ¨podä¸­é€šè¿‡imagePullSecretså¼•ç”¨</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># é…ç½®.docker/config.jsonæ–‡ä»¶ï¼ŒåŒ…å«äº†ä¸ Docker Hub æˆ–å…¶ä»–ç§æœ‰ä»“åº“è¿›è¡Œèº«ä»½éªŒè¯æ‰€éœ€çš„å‡­æ®ä¿¡æ¯ã€‚</span></span>
<span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/.docker/config.json</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">&quot;auths&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#24292E;">		</span><span style="color:#6F42C1;">&quot;registry.test.com&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#24292E;">			</span><span style="color:#6F42C1;">&quot;auth&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;dmlwZXIucm9ib3QuZG9ja2VyOlNUYW&quot;</span></span>
<span class="line"><span style="color:#24292E;">		}</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#6A737D;"># åˆ›å»ºsecretç»™podä½¿ç”¨</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">secret</span><span style="color:#24292E;"> </span><span style="color:#032F62;">generic</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">secret-nam</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--from-file=.dockerconfigjson=.docker/config.json</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--type=kubernetes.io/dockerconfigjson</span></span>
<span class="line"><span style="color:#6A737D;"># è¿™é‡Œï¼Œåˆ›å»ºçš„secretå¯ä»¥åœ¨podä¸­é€šè¿‡imagePullSecretså¼•ç”¨</span></span></code></pre></div><h2 id="_4-1-imagepullpolicy" tabindex="-1">4.1 ImagePullPolicy <a class="header-anchor" href="#_4-1-imagepullpolicy" aria-label="Permalink to &quot;4.1 ImagePullPolicy&quot;">â€‹</a></h2><p>å®˜æ–¹æ–‡æ¡£: <a href="https://kubernetes.io/zh-cn/docs/concepts/containers/images/" target="_blank" rel="noreferrer">https://kubernetes.io/zh-cn/docs/concepts/containers/images/</a></p><p>åœ¨æŒ‡å®šå®¹å™¨é•œåƒæ—¶ï¼Œå¿…é¡»è¦æä¾›é•œåƒå€¼(Image Value)è¿™æ˜¯ä¸€ä¸ªä¾›å®¹å™¨è¿è¡Œæ—¶(å¦‚Containerd)ä»é•œåƒä»“åº“æ‹‰å–é•œåƒçš„åœ°å€ï¼› å…³é”®é…ç½®: ImagePullPolicyå’ŒImagePullSecretsè¿™ä¸¤ä¸ªéƒ½æ˜¯ä¾›å®¹å™¨è¿è¡Œæ—¶ä½¿ç”¨çš„ï¼›</p><p>imagePullPolicyè®¾ç½®çš„æ˜¯kubernetesèŠ‚ç‚¹æ‹‰å–é•œåƒç­–ç•¥ï¼Œè¿™ä¸ªè®¾ç½®å¾ˆé‡è¦ã€‚å®ƒæœ‰ä¸‰ä¸ªå€¼å¯ä»¥è®¾ç½®ï¼ŒAlwaysã€Neverã€IfNotPresentï¼›</p><ul><li>IfNotPresent: æœ¬åœ°æœ‰é•œåƒåˆ™ä½¿ç”¨æœ¬åœ°é•œåƒï¼Œæœ¬åœ°ä¸å­˜åœ¨åˆ™æ‹‰å–é•œåƒï¼›(é»˜è®¤å€¼)</li><li>Always: æ¯æ¬¡éƒ½å°è¯•æ‹‰å–é•œåƒï¼Œå¿½ç•¥å®¹å™¨è¿è¡Œæ—¶ç»´æŠ¤çš„æ‰€æœ‰æœ¬åœ°ç¼“å­˜ï¼›</li><li>Never: æ°¸ä¸æ‹‰å–ï¼Œç¦æ­¢ä»ä»“åº“ä¸‹è½½é•œåƒï¼Œå¦‚æœæœ¬åœ°é•œåƒå·²ç»å­˜åœ¨ï¼Œkubeletä¼šå°è¯•å¯åŠ¨å®¹å™¨ï¼Œå¦åˆ™ï¼Œå¯åŠ¨å¤±è´¥ï¼›</li></ul><p>æŸ¥çœ‹å±æ€§</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">kubectl explain pod.spec.containers.imagePullPolicy</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">KIND:     Pod</span></span>
<span class="line"><span style="color:#e1e4e8;">VERSION:  v1</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">FIELD:    imagePullPolicy &lt;string&gt;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">DESCRIPTION:</span></span>
<span class="line"><span style="color:#e1e4e8;">     Image pull policy. One of Always, Never, IfNotPresent. Defaults to Always</span></span>
<span class="line"><span style="color:#e1e4e8;">     if :latest tag is specified, or IfNotPresent otherwise. Cannot be updated.</span></span>
<span class="line"><span style="color:#e1e4e8;">     More info:</span></span>
<span class="line"><span style="color:#e1e4e8;">     https://kubernetes.io/docs/concepts/containers/images#updating-images</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">kubectl explain pod.spec.containers.imagePullPolicy</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">KIND:     Pod</span></span>
<span class="line"><span style="color:#24292e;">VERSION:  v1</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">FIELD:    imagePullPolicy &lt;string&gt;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">DESCRIPTION:</span></span>
<span class="line"><span style="color:#24292e;">     Image pull policy. One of Always, Never, IfNotPresent. Defaults to Always</span></span>
<span class="line"><span style="color:#24292e;">     if :latest tag is specified, or IfNotPresent otherwise. Cannot be updated.</span></span>
<span class="line"><span style="color:#24292e;">     More info:</span></span>
<span class="line"><span style="color:#24292e;">     https://kubernetes.io/docs/concepts/containers/images#updating-images</span></span></code></pre></div><p>æ¡ˆä¾‹</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">cat httpdpod-test.yaml</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Pod</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">httpd-testpod</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">namespace</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">default</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">containers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">httpd</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">imagePullPolicy</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">IfNotPresent</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">cat httpdpod-test.yaml</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Pod</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">httpd-testpod</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">namespace</span><span style="color:#24292E;">: </span><span style="color:#032F62;">default</span></span>
<span class="line"><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">containers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">httpd</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">imagePullPolicy</span><span style="color:#24292E;">: </span><span style="color:#032F62;">IfNotPresent</span></span></code></pre></div><h1 id="_5-serviceaccountæ‹‰å–ç§æœ‰é•œåƒ" tabindex="-1">5. ServiceAccountæ‹‰å–ç§æœ‰é•œåƒ <a class="header-anchor" href="#_5-serviceaccountæ‹‰å–ç§æœ‰é•œåƒ" aria-label="Permalink to &quot;5. ServiceAccountæ‹‰å–ç§æœ‰é•œåƒ&quot;">â€‹</a></h1><p>å¯ä»¥é€šè¿‡ImagPullPolicyå’ŒImageullSecretsæŒ‡å®šä¸‹è½½é•œåƒçš„ç­–ç•¥ï¼ŒServiceAccountä¹Ÿå¯ä»¥åŸºäº</p><p>spec.imagePullSecretå­—æ®µé™„å¸¦ä¸€ä¸ªç”±ä¸‹è½½é•œåƒä¸“ç”¨çš„Secretèµ„æºç»„æˆçš„åˆ—è¡¨ï¼Œç”¨äºåœ¨å®¹å™¨åˆ›å»ºæ—¶ï¼Œä»æŸä¸ªç§æœ‰é•œåƒä»“åº“ä¸‹è½½é•œåƒæ–‡ä»¶ä¹‹å‰çš„æœåŠ¡è®¤è¯</p><h2 id="_5-2-åˆ›å»ºsecretsèµ„æº" tabindex="-1">5.2 åˆ›å»ºSecretsèµ„æº <a class="header-anchor" href="#_5-2-åˆ›å»ºsecretsèµ„æº" aria-label="Permalink to &quot;5.2 åˆ›å»ºSecretsèµ„æº&quot;">â€‹</a></h2><p>è¿™é‡Œæ ¹æ®è‡ªå·±çš„å®é™…å»å®šä¹‰å³å¯ï¼›ä¸€å®šè¦æ˜¯å¯¹çš„åœ°å€å’Œè®¤è¯ä¿¡æ¯ï¼›å¦åˆ™æ— æ³•pull/push</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">secret</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-registry</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">aliyun-registry </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">--docker-server=registry.cn-hangzhou.aliyuncs.com </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">--docker-username=xxxxxxx </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">--docker-password=xxxxxx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">secret</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-registry</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">aliyun-registry </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">--docker-server=registry.cn-hangzhou.aliyuncs.com </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">--docker-username=xxxxxxx </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">--docker-password=xxxxxx</span></span></code></pre></div><h2 id="_5-3-æŸ¥çœ‹secrets" tabindex="-1">5.3 æŸ¥çœ‹Secrets <a class="header-anchor" href="#_5-3-æŸ¥çœ‹secrets" aria-label="Permalink to &quot;5.3 æŸ¥çœ‹Secrets&quot;">â€‹</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master secret]# kubectl get secrets</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                                 </span><span style="color:#9ECBFF;">TYPE</span><span style="color:#E1E4E8;">                                  </span><span style="color:#9ECBFF;">DATA</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">AGE</span></span>
<span class="line"><span style="color:#B392F0;">aliyun-registry</span><span style="color:#E1E4E8;">                      </span><span style="color:#9ECBFF;">kubernetes.io/dockerconfigjson</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">16</span><span style="color:#9ECBFF;">s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master secret]# kubectl describe secrets aliyun-registry</span></span>
<span class="line"><span style="color:#B392F0;">Name:</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">aliyun-registry</span></span>
<span class="line"><span style="color:#B392F0;">Namespace:</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">default</span></span>
<span class="line"><span style="color:#B392F0;">Labels:</span><span style="color:#E1E4E8;">       </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">Annotations:</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Type:</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">kubernetes.io/dockerconfigjson</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Data</span></span>
<span class="line"><span style="color:#E1E4E8;">====</span></span>
<span class="line"><span style="color:#B392F0;">.dockerconfigjson:</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">173</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bytes</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master secret]# kubectl get secrets</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                                 </span><span style="color:#032F62;">TYPE</span><span style="color:#24292E;">                                  </span><span style="color:#032F62;">DATA</span><span style="color:#24292E;">   </span><span style="color:#032F62;">AGE</span></span>
<span class="line"><span style="color:#6F42C1;">aliyun-registry</span><span style="color:#24292E;">                      </span><span style="color:#032F62;">kubernetes.io/dockerconfigjson</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">16</span><span style="color:#032F62;">s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@kube-master secret]# kubectl describe secrets aliyun-registry</span></span>
<span class="line"><span style="color:#6F42C1;">Name:</span><span style="color:#24292E;">         </span><span style="color:#032F62;">aliyun-registry</span></span>
<span class="line"><span style="color:#6F42C1;">Namespace:</span><span style="color:#24292E;">    </span><span style="color:#032F62;">default</span></span>
<span class="line"><span style="color:#6F42C1;">Labels:</span><span style="color:#24292E;">       </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">Annotations:</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Type:</span><span style="color:#24292E;">  </span><span style="color:#032F62;">kubernetes.io/dockerconfigjson</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Data</span></span>
<span class="line"><span style="color:#24292E;">====</span></span>
<span class="line"><span style="color:#6F42C1;">.dockerconfigjson:</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">173</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bytes</span></span></code></pre></div><h2 id="_5-4-åˆ›å»ºserviceaccount" tabindex="-1">5.4 åˆ›å»ºServiceAccount <a class="header-anchor" href="#_5-4-åˆ›å»ºserviceaccount" aria-label="Permalink to &quot;5.4 åˆ›å»ºServiceAccount&quot;">â€‹</a></h2><h3 id="_5-4-1-ä¸è®¾ç½®ä»»ä½•ç­–ç•¥-æµ‹è¯•æ˜¯å¦èƒ½æ‹‰å–ç§æœ‰ä»“åº“é•œåƒ" tabindex="-1">5.4.1 ä¸è®¾ç½®ä»»ä½•ç­–ç•¥ï¼Œæµ‹è¯•æ˜¯å¦èƒ½æ‹‰å–ç§æœ‰ä»“åº“é•œåƒ <a class="header-anchor" href="#_5-4-1-ä¸è®¾ç½®ä»»ä½•ç­–ç•¥-æµ‹è¯•æ˜¯å¦èƒ½æ‹‰å–ç§æœ‰ä»“åº“é•œåƒ" aria-label="Permalink to &quot;5.4.1 ä¸è®¾ç½®ä»»ä½•ç­–ç•¥ï¼Œæµ‹è¯•æ˜¯å¦èƒ½æ‹‰å–ç§æœ‰ä»“åº“é•œåƒ&quot;">â€‹</a></h3><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">root@kube-master secret</span><span style="color:#E1E4E8;">]# </span><span style="color:#9ECBFF;">cat pod-serviceaccount-secret.yaml</span></span>
<span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Pod</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">stree-serviceaccount</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">containers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">stree</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">registry.cn-zhangjiakou.aliyuncs.com/hsuing/test:v1</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[</span><span style="color:#032F62;">root@kube-master secret</span><span style="color:#24292E;">]# </span><span style="color:#032F62;">cat pod-serviceaccount-secret.yaml</span></span>
<span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Pod</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">stree-serviceaccount</span></span>
<span class="line"><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">containers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">stree</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">registry.cn-zhangjiakou.aliyuncs.com/hsuing/test:v1</span></span></code></pre></div><ul><li>æŸ¥çœ‹</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master secret]# kubectl describe pod stree-serviceaccount</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Events:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Type</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Reason</span><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">Age</span><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">From</span><span style="color:#E1E4E8;">               </span><span style="color:#9ECBFF;">Message</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">----</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">------</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">----</span><span style="color:#E1E4E8;">               </span><span style="color:#79B8FF;">----</span><span style="color:#E1E4E8;">               </span><span style="color:#79B8FF;">-------</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Normal</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Scheduled</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">25</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">default-scheduler</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">Successfully</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">assigned</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">default/stree-serviceaccount</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kube-node01</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Normal</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">SandboxChanged</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">22</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;"> (x2 </span><span style="color:#9ECBFF;">over</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">24</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">)  kubelet            Pod sandbox changed, it will be killed and re-created.</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Normal</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">BackOff</span><span style="color:#E1E4E8;">         </span><span style="color:#79B8FF;">19</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;"> (x4 </span><span style="color:#9ECBFF;">over</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">23</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">)  kubelet            Back-off pulling image </span><span style="color:#9ECBFF;">&quot;registry.cn-zhangjiakou.aliyuncs.com/hsuing/test:v1&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Warning</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">Failed</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">19</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;"> (x4 </span><span style="color:#9ECBFF;">over</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">23</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">)  kubelet            Error: ImagePullBackOff</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Normal</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Pulling</span><span style="color:#E1E4E8;">         </span><span style="color:#79B8FF;">8</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;"> (x2 </span><span style="color:#9ECBFF;">over</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">25</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">)   kubelet            Pulling image </span><span style="color:#9ECBFF;">&quot;registry.cn-zhangjiakou.aliyuncs.com/hsuing/test:v1&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Warning</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">Failed</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">7</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;"> (x2 </span><span style="color:#9ECBFF;">over</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">24</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">)   kubelet            Failed to pull image </span><span style="color:#9ECBFF;">&quot;registry.cn-zhangjiakou.aliyuncs.com/hsuing/test:v1&quot;</span><span style="color:#E1E4E8;">: rpc error: code = Unknown desc = Error response from daemon: pull access denied </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> registry.cn-zhangjiakou.aliyuncs.com/hsuing/test, repository does not exist or may require </span><span style="color:#9ECBFF;">&#39;docker login&#39;</span><span style="color:#E1E4E8;">: denied: requested access to the resource is denied</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Warning</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">Failed</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">7</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;"> (x2 </span><span style="color:#9ECBFF;">over</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">24</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">)   kubelet            Error: ErrImagePull</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master secret]# kubectl describe pod stree-serviceaccount</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Events:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Type</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Reason</span><span style="color:#24292E;">          </span><span style="color:#032F62;">Age</span><span style="color:#24292E;">                </span><span style="color:#032F62;">From</span><span style="color:#24292E;">               </span><span style="color:#032F62;">Message</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">----</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">------</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">----</span><span style="color:#24292E;">               </span><span style="color:#005CC5;">----</span><span style="color:#24292E;">               </span><span style="color:#005CC5;">-------</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Normal</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Scheduled</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">25</span><span style="color:#032F62;">s</span><span style="color:#24292E;">                </span><span style="color:#032F62;">default-scheduler</span><span style="color:#24292E;">  </span><span style="color:#032F62;">Successfully</span><span style="color:#24292E;"> </span><span style="color:#032F62;">assigned</span><span style="color:#24292E;"> </span><span style="color:#032F62;">default/stree-serviceaccount</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kube-node01</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Normal</span><span style="color:#24292E;">   </span><span style="color:#032F62;">SandboxChanged</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">22</span><span style="color:#032F62;">s</span><span style="color:#24292E;"> (x2 </span><span style="color:#032F62;">over</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">24</span><span style="color:#032F62;">s</span><span style="color:#24292E;">)  kubelet            Pod sandbox changed, it will be killed and re-created.</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Normal</span><span style="color:#24292E;">   </span><span style="color:#032F62;">BackOff</span><span style="color:#24292E;">         </span><span style="color:#005CC5;">19</span><span style="color:#032F62;">s</span><span style="color:#24292E;"> (x4 </span><span style="color:#032F62;">over</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">23</span><span style="color:#032F62;">s</span><span style="color:#24292E;">)  kubelet            Back-off pulling image </span><span style="color:#032F62;">&quot;registry.cn-zhangjiakou.aliyuncs.com/hsuing/test:v1&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Warning</span><span style="color:#24292E;">  </span><span style="color:#032F62;">Failed</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">19</span><span style="color:#032F62;">s</span><span style="color:#24292E;"> (x4 </span><span style="color:#032F62;">over</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">23</span><span style="color:#032F62;">s</span><span style="color:#24292E;">)  kubelet            Error: ImagePullBackOff</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Normal</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Pulling</span><span style="color:#24292E;">         </span><span style="color:#005CC5;">8</span><span style="color:#032F62;">s</span><span style="color:#24292E;"> (x2 </span><span style="color:#032F62;">over</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">25</span><span style="color:#032F62;">s</span><span style="color:#24292E;">)   kubelet            Pulling image </span><span style="color:#032F62;">&quot;registry.cn-zhangjiakou.aliyuncs.com/hsuing/test:v1&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Warning</span><span style="color:#24292E;">  </span><span style="color:#032F62;">Failed</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">7</span><span style="color:#032F62;">s</span><span style="color:#24292E;"> (x2 </span><span style="color:#032F62;">over</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">24</span><span style="color:#032F62;">s</span><span style="color:#24292E;">)   kubelet            Failed to pull image </span><span style="color:#032F62;">&quot;registry.cn-zhangjiakou.aliyuncs.com/hsuing/test:v1&quot;</span><span style="color:#24292E;">: rpc error: code = Unknown desc = Error response from daemon: pull access denied </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> registry.cn-zhangjiakou.aliyuncs.com/hsuing/test, repository does not exist or may require </span><span style="color:#032F62;">&#39;docker login&#39;</span><span style="color:#24292E;">: denied: requested access to the resource is denied</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Warning</span><span style="color:#24292E;">  </span><span style="color:#032F62;">Failed</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">7</span><span style="color:#032F62;">s</span><span style="color:#24292E;"> (x2 </span><span style="color:#032F62;">over</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">24</span><span style="color:#032F62;">s</span><span style="color:#24292E;">)   kubelet            Error: ErrImagePull</span></span></code></pre></div><h3 id="_5-4-2æŸ¥çœ‹pod-å¤„äºerrimage" tabindex="-1">5.4.2æŸ¥çœ‹Podï¼Œå¤„äºErrImage <a class="header-anchor" href="#_5-4-2æŸ¥çœ‹pod-å¤„äºerrimage" aria-label="Permalink to &quot;5.4.2æŸ¥çœ‹Podï¼Œå¤„äºErrImage&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master secret]# kubectl get pod</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                                      </span><span style="color:#9ECBFF;">READY</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">             </span><span style="color:#9ECBFF;">RESTARTS</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">AGE</span></span>
<span class="line"><span style="color:#B392F0;">stree-serviceaccount</span><span style="color:#E1E4E8;">                      </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">ImagePullBackOff</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">              </span><span style="color:#79B8FF;">2</span><span style="color:#9ECBFF;">m6s</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master secret]# kubectl get pod</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                                      </span><span style="color:#032F62;">READY</span><span style="color:#24292E;">   </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">             </span><span style="color:#032F62;">RESTARTS</span><span style="color:#24292E;">       </span><span style="color:#032F62;">AGE</span></span>
<span class="line"><span style="color:#6F42C1;">stree-serviceaccount</span><span style="color:#24292E;">                      </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">ImagePullBackOff</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">              </span><span style="color:#005CC5;">2</span><span style="color:#032F62;">m6s</span></span></code></pre></div><h3 id="_5-4-3-åˆ›å»ºserviceaccount" tabindex="-1">5.4.3 åˆ›å»ºServiceAccount <a class="header-anchor" href="#_5-4-3-åˆ›å»ºserviceaccount" aria-label="Permalink to &quot;5.4.3 åˆ›å»ºServiceAccount&quot;">â€‹</a></h3><p>aliyun-registryæ˜¯docker-registryç±»å‹çš„Secretså¯¹è±¡ï¼Œç”±ç”¨æˆ·æå‰æ‰‹åŠ¨åˆ›å»ºï¼Œå®ƒå¯ä»¥é€šè¿‡é”®å€¼æ•°æ®æä¾›dockerä»“åº“æœåŠ¡å™¨çš„åœ°å€ï¼Œæ¥å…¥æœåŠ¡å™¨çš„ç”¨æˆ·åï¼Œå¯†ç åŠç”¨æˆ·çš„ç”µå­é‚®ä»¶ä¿¡æ¯ç­‰ï¼Œè®¤è¯é€šè¿‡åï¼Œå¼•ç”¨ServiceAccountçš„Podèµ„æºå³å¯ä»æŒ‡å®šçš„é•œåƒä»“åº“ä¸‹è½½image</p><ul><li>åˆ›å»º</li></ul><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">root@kube-master secret</span><span style="color:#E1E4E8;">]# </span><span style="color:#9ECBFF;">cat serviceaccount-imagepullsecret.yaml</span></span>
<span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">ServiceAccount</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">imagepull-aliyun-sa</span></span>
<span class="line"><span style="color:#85E89D;">imagePullSecrets</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">- </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">aliyun-registry</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[</span><span style="color:#032F62;">root@kube-master secret</span><span style="color:#24292E;">]# </span><span style="color:#032F62;">cat serviceaccount-imagepullsecret.yaml</span></span>
<span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">ServiceAccount</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">imagepull-aliyun-sa</span></span>
<span class="line"><span style="color:#22863A;">imagePullSecrets</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">- </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">aliyun-registry</span></span></code></pre></div><ul><li>æŸ¥çœ‹</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">kubectl get sa imagepull-aliyun-sa -o yaml</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">kubectl get sa imagepull-aliyun-sa -o yaml</span></span></code></pre></div><ul><li><h4 id="podå¼•ç”¨serviceaccount" tabindex="-1">Podå¼•ç”¨ServiceAccount <a class="header-anchor" href="#podå¼•ç”¨serviceaccount" aria-label="Permalink to &quot;Podå¼•ç”¨ServiceAccount&quot;">â€‹</a></h4></li></ul><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">root@kube-master secret</span><span style="color:#E1E4E8;">]# </span><span style="color:#9ECBFF;">cat pod-serviceaccount-secret.yaml</span></span>
<span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Pod</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">stree-serviceaccount</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">serviceAccount</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">imagepull-aliyun-sa</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># è¿™é‡Œåˆ™æ˜¯åˆ›å»ºçš„saçš„åç§°</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">containers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">stree</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">registry.cn-zhangjiakou.aliyuncs.com/hsuing/test:v1</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[</span><span style="color:#032F62;">root@kube-master secret</span><span style="color:#24292E;">]# </span><span style="color:#032F62;">cat pod-serviceaccount-secret.yaml</span></span>
<span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Pod</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">stree-serviceaccount</span></span>
<span class="line"><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">serviceAccount</span><span style="color:#24292E;">: </span><span style="color:#032F62;">imagepull-aliyun-sa</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># è¿™é‡Œåˆ™æ˜¯åˆ›å»ºçš„saçš„åç§°</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">containers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">stree</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">registry.cn-zhangjiakou.aliyuncs.com/hsuing/test:v1</span></span></code></pre></div><ul><li>æŸ¥çœ‹</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master secret]# kubectl get pod</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                                      </span><span style="color:#9ECBFF;">READY</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">RESTARTS</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">AGE</span></span>
<span class="line"><span style="color:#B392F0;">stree-serviceaccount</span><span style="color:#E1E4E8;">                      </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">              </span><span style="color:#79B8FF;">3</span><span style="color:#9ECBFF;">s</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master secret]# kubectl get pod</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                                      </span><span style="color:#032F62;">READY</span><span style="color:#24292E;">   </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">    </span><span style="color:#032F62;">RESTARTS</span><span style="color:#24292E;">       </span><span style="color:#032F62;">AGE</span></span>
<span class="line"><span style="color:#6F42C1;">stree-serviceaccount</span><span style="color:#24292E;">                      </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">              </span><span style="color:#005CC5;">3</span><span style="color:#032F62;">s</span></span></code></pre></div><h1 id="_6-secretå®è·µ" tabindex="-1">6. Secretå®è·µ <a class="header-anchor" href="#_6-secretå®è·µ" aria-label="Permalink to &quot;6. Secretå®è·µ&quot;">â€‹</a></h1><p>ä¸»è¦ç”¨äºå­˜å‚¨æ•æ„Ÿä¿¡æ¯ï¼Œä¾‹å¦‚å¯†ç ã€ç§˜é’¥ã€è¯ä¹¦ç­‰</p><ol><li>é¦–å…ˆä½¿ç”¨base64å¯¹æ•°æ®è¿›è¡Œç¼–ç </li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@k8s-master01 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# echo -n </span><span style="color:#9ECBFF;">&#39;admin&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">base64</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#å‡†å¤‡username</span></span>
<span class="line"><span style="color:#E1E4E8;">YWRtaW4</span><span style="color:#F97583;">=</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s-master01 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# echo -n </span><span style="color:#9ECBFF;">&#39;123456&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">base64</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#å‡†å¤‡password</span></span>
<span class="line"><span style="color:#B392F0;">MTIzNDU2</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@k8s-master01 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# echo -n </span><span style="color:#032F62;">&#39;admin&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">base64</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#å‡†å¤‡username</span></span>
<span class="line"><span style="color:#24292E;">YWRtaW4</span><span style="color:#D73A49;">=</span></span>
<span class="line"><span style="color:#24292E;">[root@k8s-master01 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# echo -n </span><span style="color:#032F62;">&#39;123456&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">base64</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#å‡†å¤‡password</span></span>
<span class="line"><span style="color:#6F42C1;">MTIzNDU2</span></span></code></pre></div><p>2.æ¥ä¸‹æ¥ç¼–å†™secret.yamlï¼Œå¹¶åˆ›å»ºSecret</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Secret</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">secret</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">namespace</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">dev</span></span>
<span class="line"><span style="color:#85E89D;">type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Opaque</span></span>
<span class="line"><span style="color:#85E89D;">data</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">username</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">YWRtaW4=</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">password</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">MTIzNDU2</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Secret</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">secret</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">namespace</span><span style="color:#24292E;">: </span><span style="color:#032F62;">dev</span></span>
<span class="line"><span style="color:#22863A;">type</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Opaque</span></span>
<span class="line"><span style="color:#22863A;">data</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">username</span><span style="color:#24292E;">: </span><span style="color:#032F62;">YWRtaW4=</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">password</span><span style="color:#24292E;">: </span><span style="color:#032F62;">MTIzNDU2</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># åˆ›å»ºsecret</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s-master01 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl create -f secret.yaml</span></span>
<span class="line"><span style="color:#B392F0;">secret/secret</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># æŸ¥çœ‹secretè¯¦æƒ…</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s-master01 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl describe secret secret -n dev</span></span>
<span class="line"><span style="color:#B392F0;">Name:</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">secret</span></span>
<span class="line"><span style="color:#B392F0;">Namespace:</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">dev</span></span>
<span class="line"><span style="color:#B392F0;">Labels:</span><span style="color:#E1E4E8;">       </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">Annotations:</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">Type:</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">Opaque</span></span>
<span class="line"><span style="color:#B392F0;">Data</span></span>
<span class="line"><span style="color:#E1E4E8;">====</span></span>
<span class="line"><span style="color:#B392F0;">password:</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bytes</span></span>
<span class="line"><span style="color:#B392F0;">username:</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bytes</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># åˆ›å»ºsecret</span></span>
<span class="line"><span style="color:#24292E;">[root@k8s-master01 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl create -f secret.yaml</span></span>
<span class="line"><span style="color:#6F42C1;">secret/secret</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># æŸ¥çœ‹secretè¯¦æƒ…</span></span>
<span class="line"><span style="color:#24292E;">[root@k8s-master01 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl describe secret secret -n dev</span></span>
<span class="line"><span style="color:#6F42C1;">Name:</span><span style="color:#24292E;">         </span><span style="color:#032F62;">secret</span></span>
<span class="line"><span style="color:#6F42C1;">Namespace:</span><span style="color:#24292E;">    </span><span style="color:#032F62;">dev</span></span>
<span class="line"><span style="color:#6F42C1;">Labels:</span><span style="color:#24292E;">       </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">Annotations:</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">Type:</span><span style="color:#24292E;">  </span><span style="color:#032F62;">Opaque</span></span>
<span class="line"><span style="color:#6F42C1;">Data</span></span>
<span class="line"><span style="color:#24292E;">====</span></span>
<span class="line"><span style="color:#6F42C1;">password:</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">6</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bytes</span></span>
<span class="line"><span style="color:#6F42C1;">username:</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">5</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bytes</span></span></code></pre></div><p>3.åˆ›å»ºpod-secret.yamlï¼Œå°†ä¸Šé¢åˆ›å»ºçš„secretæŒ‚è½½è¿›å»ï¼š</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Pod</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">pod-secret</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">namespace</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">dev</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">containers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx:1.17.1</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">volumeMounts</span><span style="color:#E1E4E8;">: </span><span style="color:#6A737D;"># å°†secretæŒ‚è½½åˆ°ç›®å½•</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">config</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">mountPath</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/secret/config</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">volumes</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">config</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">secret</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">secretName</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">secret</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Pod</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">pod-secret</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">namespace</span><span style="color:#24292E;">: </span><span style="color:#032F62;">dev</span></span>
<span class="line"><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">containers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx:1.17.1</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">volumeMounts</span><span style="color:#24292E;">: </span><span style="color:#6A737D;"># å°†secretæŒ‚è½½åˆ°ç›®å½•</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">config</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">mountPath</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/secret/config</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">volumes</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">config</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">secret</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">secretName</span><span style="color:#24292E;">: </span><span style="color:#032F62;">secret</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># åˆ›å»ºpod</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s-master01 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl create -f pod-secret.yaml</span></span>
<span class="line"><span style="color:#B392F0;">pod/pod-secret</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># æŸ¥çœ‹pod</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s-master01 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl get pod pod-secret -n dev</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">READY</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">RESTARTS</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">AGE</span></span>
<span class="line"><span style="color:#B392F0;">pod-secret</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">2</span><span style="color:#9ECBFF;">m28s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># è¿›å…¥å®¹å™¨ï¼ŒæŸ¥çœ‹secretä¿¡æ¯ï¼Œå‘ç°å·²ç»è‡ªåŠ¨è§£ç äº†</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s-master01 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl exec -it pod-secret /bin/sh -n dev</span></span>
<span class="line"><span style="color:#B392F0;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># ls /secret/config/</span></span>
<span class="line"><span style="color:#B392F0;">password</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">username</span></span>
<span class="line"><span style="color:#B392F0;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># more /secret/config/username</span></span>
<span class="line"><span style="color:#B392F0;">admin</span></span>
<span class="line"><span style="color:#B392F0;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># more /secret/config/password</span></span>
<span class="line"><span style="color:#B392F0;">123456</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># åˆ›å»ºpod</span></span>
<span class="line"><span style="color:#24292E;">[root@k8s-master01 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl create -f pod-secret.yaml</span></span>
<span class="line"><span style="color:#6F42C1;">pod/pod-secret</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># æŸ¥çœ‹pod</span></span>
<span class="line"><span style="color:#24292E;">[root@k8s-master01 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl get pod pod-secret -n dev</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">            </span><span style="color:#032F62;">READY</span><span style="color:#24292E;">   </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">    </span><span style="color:#032F62;">RESTARTS</span><span style="color:#24292E;">   </span><span style="color:#032F62;">AGE</span></span>
<span class="line"><span style="color:#6F42C1;">pod-secret</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">2</span><span style="color:#032F62;">m28s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># è¿›å…¥å®¹å™¨ï¼ŒæŸ¥çœ‹secretä¿¡æ¯ï¼Œå‘ç°å·²ç»è‡ªåŠ¨è§£ç äº†</span></span>
<span class="line"><span style="color:#24292E;">[root@k8s-master01 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl exec -it pod-secret /bin/sh -n dev</span></span>
<span class="line"><span style="color:#6F42C1;">/</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># ls /secret/config/</span></span>
<span class="line"><span style="color:#6F42C1;">password</span><span style="color:#24292E;">  </span><span style="color:#032F62;">username</span></span>
<span class="line"><span style="color:#6F42C1;">/</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># more /secret/config/username</span></span>
<span class="line"><span style="color:#6F42C1;">admin</span></span>
<span class="line"><span style="color:#6F42C1;">/</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># more /secret/config/password</span></span>
<span class="line"><span style="color:#6F42C1;">123456</span></span></code></pre></div>`,149),e=[o];function c(t,r,E,y,i,F){return a(),n("div",null,e)}const C=s(p,[["render",c]]);export{u as __pageData,C as default};
