import{_ as s,o as a,c as n,R as l}from"./chunks/framework.zUbWieqp.js";const h=JSON.parse('{"title":"1. nerdctl简介","description":"","frontmatter":{},"headers":[],"relativePath":"guide/container/containerd/5-nerdctl.md","filePath":"guide/container/containerd/5-nerdctl.md","lastUpdated":1731157838000}'),p={name:"guide/container/containerd/5-nerdctl.md"},o=l(`<h1 id="_1-nerdctl简介" tabindex="-1">1. nerdctl简介 <a class="header-anchor" href="#_1-nerdctl简介" aria-label="Permalink to &quot;1. nerdctl简介&quot;">​</a></h1><p>命令基本与docker兼容,nerdctl自带compose,nerdctl &gt;= 0.8才有 <code>生产推荐使用nerdctl</code></p><p><code>nerdctl</code> 是用于 <code>containerd</code> 的与 <code>Docker</code>兼容的 CLI。主要适用于 <code>Docker</code>转到 <code>Containerd</code> 的用户，操作 <code>Containerd</code> 的命令行工具 <code>ctr 和 crictl</code> 不怎么好用，所以出现了 <code>nerdctl</code>工具.</p><p>nerdctl 操作的是 containerd 而非 docker，但它只是用法保持了 docker cli 的习惯，实质上操作的是 containerd</p><blockquote><p>实际上nerdctl compose实现的是<a href="https://github.com/compose-spec/compose-spec" target="_blank" rel="noreferrer">Compose Specification</a>规范， 这个规范是从自<a href="https://docs.docker.com/compose/compose-file/compose-file-v3/" target="_blank" rel="noreferrer">Docker Compose file version 3 specification</a>规范发展而来的。</p></blockquote><h1 id="_2-部署" tabindex="-1">2. 部署 <a class="header-anchor" href="#_2-部署" aria-label="Permalink to &quot;2. 部署&quot;">​</a></h1><h2 id="_2-1-下载" tabindex="-1">2.1 下载 <a class="header-anchor" href="#_2-1-下载" aria-label="Permalink to &quot;2.1 下载&quot;">​</a></h2><ul><li>基于<code>Rocklinux9.x</code></li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">wget</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://github.com/containerd/nerdctl/releases/download/v1.7.7/nerdctl-full-1.7.7-linux-amd64.tar.gz</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">wget</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://github.com/containerd/nerdctl/releases/download/v1.7.7/nerdctl-full-1.7.7-linux-amd64.tar.gz</span></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">❌ 注意</p><p>安装 nerdctl-full 版本集成了 containerd 。如主机已安装 containerd 请选择 nerdctl简易版</p></div><h2 id="_2-2-安装" tabindex="-1">2.2 安装 <a class="header-anchor" href="#_2-2-安装" aria-label="Permalink to &quot;2.2 安装&quot;">​</a></h2><p>由于安装包是基于二进制,直接解压即可使用</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zxvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nerdctl-full-1.7.7-linux-amd64.tar.gz</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-C</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/local/bin</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">tar</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zxvf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nerdctl-full-1.7.7-linux-amd64.tar.gz</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-C</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/local/bin</span></span></code></pre></div><h3 id="_2-2-1-配置内核参数" tabindex="-1">2.2.1 配置内核参数 <a class="header-anchor" href="#_2-2-1-配置内核参数" aria-label="Permalink to &quot;2.2.1 配置内核参数&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">echo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;net.bridge.bridge-nf-call-ip6tables = 1&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/sysctl.conf</span></span>
<span class="line"><span style="color:#79B8FF;">echo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;net.bridge.bridge-nf-call-iptables = 1&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/sysctl.conf</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">echo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;net.bridge.bridge-nf-call-ip6tables = 1&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/sysctl.conf</span></span>
<span class="line"><span style="color:#005CC5;">echo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;net.bridge.bridge-nf-call-iptables = 1&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/sysctl.conf</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">modprobe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">br_netfilter</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">sysctl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">modprobe</span><span style="color:#24292E;"> </span><span style="color:#032F62;">br_netfilter</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">sysctl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span></span></code></pre></div><h3 id="_2-2-2-命令补全" tabindex="-1">2.2.2 命令补全 <a class="header-anchor" href="#_2-2-2-命令补全" aria-label="Permalink to &quot;2.2.2 命令补全&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bash-completion</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bash-completion</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">vim</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/profile</span></span>
<span class="line"><span style="color:#79B8FF;">source</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;(</span><span style="color:#B392F0;">nerdctl</span><span style="color:#9ECBFF;"> completion bash)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#执行生效</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master-01 init_pack]#source /etc/profile</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 生成自动补全文件</span></span>
<span class="line"><span style="color:#B392F0;">nerdctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">completion</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bash</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/bash_completion.d/nerdctl</span></span>
<span class="line"><span style="color:#B392F0;">nerdctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">completion</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bash</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/bash_completion.d/docker</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">vim</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/profile</span></span>
<span class="line"><span style="color:#005CC5;">source</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;(</span><span style="color:#6F42C1;">nerdctl</span><span style="color:#032F62;"> completion bash)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#执行生效</span></span>
<span class="line"><span style="color:#24292E;">[root@kube-master-01 init_pack]#source /etc/profile</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 生成自动补全文件</span></span>
<span class="line"><span style="color:#6F42C1;">nerdctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">completion</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bash</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/bash_completion.d/nerdctl</span></span>
<span class="line"><span style="color:#6F42C1;">nerdctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">completion</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bash</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/bash_completion.d/docker</span></span></code></pre></div><h3 id="_2-2-3-nerdctl更名为-docker" tabindex="-1">2.2.3 <strong>nerdctl更名为 docker</strong> <a class="header-anchor" href="#_2-2-3-nerdctl更名为-docker" aria-label="Permalink to &quot;2.2.3 **nerdctl更名为 docker**&quot;">​</a></h3><p>看个人需要</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#E1E4E8;"> &#39;</span><span style="color:#9ECBFF;">EOF</span><span style="color:#E1E4E8;">&#39; </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> /usr/local/bin/docker</span></span>
<span class="line"><span style="color:#9ECBFF;">#!/bin/bash</span></span>
<span class="line"><span style="color:#9ECBFF;">/usr/local/bin/nerdctl $@</span></span>
<span class="line"><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#t添加权限</span></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+x</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/local/bin/docker</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#24292E;"> &#39;</span><span style="color:#032F62;">EOF</span><span style="color:#24292E;">&#39; </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> /usr/local/bin/docker</span></span>
<span class="line"><span style="color:#032F62;">#!/bin/bash</span></span>
<span class="line"><span style="color:#032F62;">/usr/local/bin/nerdctl $@</span></span>
<span class="line"><span style="color:#032F62;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#t添加权限</span></span>
<span class="line"><span style="color:#6F42C1;">chmod</span><span style="color:#24292E;"> </span><span style="color:#032F62;">+x</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/local/bin/docker</span></span></code></pre></div><h3 id="_2-2-3-查看版本" tabindex="-1">2.2.3 查看版本 <a class="header-anchor" href="#_2-2-3-查看版本" aria-label="Permalink to &quot;2.2.3 查看版本&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master-01 init_pack]# nerdctl info</span></span>
<span class="line"><span style="color:#B392F0;">Client:</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Namespace:</span><span style="color:#E1E4E8;">	</span><span style="color:#9ECBFF;">default</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Debug</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Mode:</span><span style="color:#E1E4E8;">	</span><span style="color:#79B8FF;">false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Server:</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Server</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Version:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">v1.7.22</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Storage</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Driver:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">overlayfs</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Logging</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Driver:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">json-file</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Cgroup</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Driver:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">systemd</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Cgroup</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Version:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Plugins:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Log:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">fluentd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">journald</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">json-file</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">syslog</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Storage:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">native</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">overlayfs</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Security</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Options:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">seccomp</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">Profile:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">builtin</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">cgroupns</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Kernel</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Version:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5.14</span><span style="color:#9ECBFF;">.0-427.33.1.el9_4.x86_64</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Operating</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">System:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Rocky</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Linux</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">9.4</span><span style="color:#E1E4E8;"> (Blue </span><span style="color:#9ECBFF;">Onyx</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">OSType:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">linux</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Architecture:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">x86_64</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">CPUs:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Total</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Memory:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3.543</span><span style="color:#9ECBFF;">GiB</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Name:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kube-master-01</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ID:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">e99af880-4220-489a-b0a0-6ae2fb786877</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master-01 init_pack]# nerdctl info</span></span>
<span class="line"><span style="color:#6F42C1;">Client:</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Namespace:</span><span style="color:#24292E;">	</span><span style="color:#032F62;">default</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Debug</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Mode:</span><span style="color:#24292E;">	</span><span style="color:#005CC5;">false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Server:</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Server</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Version:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">v1.7.22</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Storage</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Driver:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">overlayfs</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Logging</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Driver:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">json-file</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Cgroup</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Driver:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">systemd</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Cgroup</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Version:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Plugins:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Log:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">fluentd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">journald</span><span style="color:#24292E;"> </span><span style="color:#032F62;">json-file</span><span style="color:#24292E;"> </span><span style="color:#032F62;">syslog</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Storage:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">native</span><span style="color:#24292E;"> </span><span style="color:#032F62;">overlayfs</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Security</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Options:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">seccomp</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">Profile:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">builtin</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">cgroupns</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Kernel</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Version:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5.14</span><span style="color:#032F62;">.0-427.33.1.el9_4.x86_64</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Operating</span><span style="color:#24292E;"> </span><span style="color:#032F62;">System:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Rocky</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Linux</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">9.4</span><span style="color:#24292E;"> (Blue </span><span style="color:#032F62;">Onyx</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">OSType:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">linux</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Architecture:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">x86_64</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">CPUs:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Total</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Memory:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">3.543</span><span style="color:#032F62;">GiB</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Name:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kube-master-01</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ID:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">e99af880-4220-489a-b0a0-6ae2fb786877</span></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">❌ 注意</p><p>如果安装containerd不是完全安装,此处的安装网络插件</p><p><a href="https://github.com/containernetworking/plugins/releases/tag/v1.5.1" target="_blank" rel="noreferrer">https://github.com/containernetworking/plugins/releases/tag/v1.5.1</a></p></div><h3 id="_2-2-4-部署buildkit服务" tabindex="-1">2.2.4 部署buildkit服务 <a class="header-anchor" href="#_2-2-4-部署buildkit服务" aria-label="Permalink to &quot;2.2.4 部署buildkit服务&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#看先前文章</span></span>
<span class="line"><span style="color:#B392F0;">cp</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">/usr/local/lib/systemd/system/buildkit.service</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/systemd/system/buildkitd.service</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 重新加载Unit file</span></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">daemon-reload</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#开机启动,并启动服务</span></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">enable</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--now</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">containerd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">buildkit</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#看先前文章</span></span>
<span class="line"><span style="color:#6F42C1;">cp</span><span style="color:#24292E;">  </span><span style="color:#032F62;">/usr/local/lib/systemd/system/buildkit.service</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/systemd/system/buildkitd.service</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 重新加载Unit file</span></span>
<span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">daemon-reload</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#开机启动,并启动服务</span></span>
<span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">enable</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--now</span><span style="color:#24292E;"> </span><span style="color:#032F62;">containerd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">buildkit</span></span></code></pre></div><h1 id="_3-基本命令" tabindex="-1">3. 基本命令 <a class="header-anchor" href="#_3-基本命令" aria-label="Permalink to &quot;3. 基本命令&quot;">​</a></h1><p><a href="https://github.com/containerd/nerdctl" target="_blank" rel="noreferrer">https://github.com/containerd/nerdctl</a></p><h2 id="_3-1-创建容器" tabindex="-1">3.1 创建容器 <a class="header-anchor" href="#_3-1-创建容器" aria-label="Permalink to &quot;3.1 创建容器&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master-01 init_pack]# nerdctl run -d -p 80:80 --name=nginx --restart=always nginx</span></span>
<span class="line"><span style="color:#B392F0;">docker.io/library/nginx:latest:</span><span style="color:#E1E4E8;">                                                   </span><span style="color:#9ECBFF;">resolved</span><span style="color:#E1E4E8;">       </span></span>
<span class="line"><span style="color:#79B8FF;">....</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#B392F0;">++++++++++++++++++++++++++++++++++++++</span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">layer-sha256:bbfaa25db775e54ec75dabe7986451cb99911b082d63bbf983ab20fc6f7faaf4:</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">done</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">|</span><span style="color:#B392F0;">++++++++++++++++++++++++++++++++++++++</span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">layer-sha256:7bb6fb0cfb2b319dee79e476c11620e7fa47f22ecdedc999e207984f62a4554c:</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">done</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">|</span><span style="color:#B392F0;">++++++++++++++++++++++++++++++++++++++</span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">layer-sha256:0723edc10c178df9245f49c9b8e503c4223a959ee5a072f043d71669132bc5e9:</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">done</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">|</span><span style="color:#B392F0;">++++++++++++++++++++++++++++++++++++++</span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">layer-sha256:24b3fdc4d1e3b419643068364b3d4e1b7e280f5a8a3c1e3651e9e67363e6434b:</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">done</span><span style="color:#E1E4E8;">           </span><span style="color:#F97583;">|</span><span style="color:#B392F0;">++++++++++++++++++++++++++++++++++++++</span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">elapsed:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">37.3</span><span style="color:#9ECBFF;">s</span><span style="color:#E1E4E8;">                                                                    </span><span style="color:#9ECBFF;">total:</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">67.7</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">M</span><span style="color:#E1E4E8;"> (1.8 </span><span style="color:#9ECBFF;">MiB/s</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#B392F0;">380924631b3af4a82da1877891eaf5348a59116c7630e39fefffd766bf40f90b</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#启动容器并指定特定网络(使用宿主机网络直接启动容器)</span></span>
<span class="line"><span style="color:#B392F0;">nerdctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--name</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--net</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">host</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx:alpine</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master-01 init_pack]# nerdctl run -d -p 80:80 --name=nginx --restart=always nginx</span></span>
<span class="line"><span style="color:#6F42C1;">docker.io/library/nginx:latest:</span><span style="color:#24292E;">                                                   </span><span style="color:#032F62;">resolved</span><span style="color:#24292E;">       </span></span>
<span class="line"><span style="color:#005CC5;">....</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">++++++++++++++++++++++++++++++++++++++</span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">layer-sha256:bbfaa25db775e54ec75dabe7986451cb99911b082d63bbf983ab20fc6f7faaf4:</span><span style="color:#24292E;">    </span><span style="color:#032F62;">done</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">++++++++++++++++++++++++++++++++++++++</span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">layer-sha256:7bb6fb0cfb2b319dee79e476c11620e7fa47f22ecdedc999e207984f62a4554c:</span><span style="color:#24292E;">    </span><span style="color:#032F62;">done</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">++++++++++++++++++++++++++++++++++++++</span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">layer-sha256:0723edc10c178df9245f49c9b8e503c4223a959ee5a072f043d71669132bc5e9:</span><span style="color:#24292E;">    </span><span style="color:#032F62;">done</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">++++++++++++++++++++++++++++++++++++++</span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">layer-sha256:24b3fdc4d1e3b419643068364b3d4e1b7e280f5a8a3c1e3651e9e67363e6434b:</span><span style="color:#24292E;">    </span><span style="color:#032F62;">done</span><span style="color:#24292E;">           </span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">++++++++++++++++++++++++++++++++++++++</span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">elapsed:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">37.3</span><span style="color:#032F62;">s</span><span style="color:#24292E;">                                                                    </span><span style="color:#032F62;">total:</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">67.7</span><span style="color:#24292E;"> </span><span style="color:#032F62;">M</span><span style="color:#24292E;"> (1.8 </span><span style="color:#032F62;">MiB/s</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#6F42C1;">380924631b3af4a82da1877891eaf5348a59116c7630e39fefffd766bf40f90b</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#启动容器并指定特定网络(使用宿主机网络直接启动容器)</span></span>
<span class="line"><span style="color:#6F42C1;">nerdctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--name</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--net</span><span style="color:#24292E;"> </span><span style="color:#032F62;">host</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx:alpine</span></span></code></pre></div><h2 id="_3-2-列出容器" tabindex="-1">3.2 列出容器 <a class="header-anchor" href="#_3-2-列出容器" aria-label="Permalink to &quot;3.2 列出容器&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master-01 init_pack]# nerdctl ps</span></span>
<span class="line"><span style="color:#B392F0;">CONTAINER</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ID</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">IMAGE</span><span style="color:#E1E4E8;">                             </span><span style="color:#9ECBFF;">COMMAND</span><span style="color:#E1E4E8;">                   </span><span style="color:#9ECBFF;">CREATED</span><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">PORTS</span><span style="color:#E1E4E8;">                 </span><span style="color:#9ECBFF;">NAMES</span></span>
<span class="line"><span style="color:#B392F0;">380924631b3a</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">docker.io/library/nginx:latest</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;/docker-entrypoint.…&quot;</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">minutes</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ago</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">Up</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#指定namespace</span></span>
<span class="line"><span style="color:#B392F0;">nerdctl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">k8s.io</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ps</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master-01 init_pack]# nerdctl ps</span></span>
<span class="line"><span style="color:#6F42C1;">CONTAINER</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ID</span><span style="color:#24292E;">    </span><span style="color:#032F62;">IMAGE</span><span style="color:#24292E;">                             </span><span style="color:#032F62;">COMMAND</span><span style="color:#24292E;">                   </span><span style="color:#032F62;">CREATED</span><span style="color:#24292E;">          </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">    </span><span style="color:#032F62;">PORTS</span><span style="color:#24292E;">                 </span><span style="color:#032F62;">NAMES</span></span>
<span class="line"><span style="color:#6F42C1;">380924631b3a</span><span style="color:#24292E;">    </span><span style="color:#032F62;">docker.io/library/nginx:latest</span><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;/docker-entrypoint.…&quot;</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> </span><span style="color:#032F62;">minutes</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ago</span><span style="color:#24292E;">    </span><span style="color:#032F62;">Up</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#指定namespace</span></span>
<span class="line"><span style="color:#6F42C1;">nerdctl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-n</span><span style="color:#24292E;"> </span><span style="color:#032F62;">k8s.io</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ps</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-a</span></span></code></pre></div><h2 id="_3-3-进入容器" tabindex="-1">3.3 进入容器 <a class="header-anchor" href="#_3-3-进入容器" aria-label="Permalink to &quot;3.3 进入容器&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master-01 init_pack]# nerdctl ps</span></span>
<span class="line"><span style="color:#B392F0;">CONTAINER</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ID</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">IMAGE</span><span style="color:#E1E4E8;">                             </span><span style="color:#9ECBFF;">COMMAND</span><span style="color:#E1E4E8;">                   </span><span style="color:#9ECBFF;">CREATED</span><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">PORTS</span><span style="color:#E1E4E8;">                 </span><span style="color:#9ECBFF;">NAMES</span></span>
<span class="line"><span style="color:#B392F0;">380924631b3a</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">docker.io/library/nginx:latest</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;/docker-entrypoint.…&quot;</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">minutes</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ago</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">Up</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">0.0</span><span style="color:#9ECBFF;">.0.0:80</span><span style="color:#E1E4E8;">-</span><span style="color:#F97583;">&gt;</span><span style="color:#9ECBFF;">80/tcp</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">nginx</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master-01 init_pack]# nerdctl exec -it 380924631b3a /bin/sh</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master-01 init_pack]# nerdctl ps</span></span>
<span class="line"><span style="color:#6F42C1;">CONTAINER</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ID</span><span style="color:#24292E;">    </span><span style="color:#032F62;">IMAGE</span><span style="color:#24292E;">                             </span><span style="color:#032F62;">COMMAND</span><span style="color:#24292E;">                   </span><span style="color:#032F62;">CREATED</span><span style="color:#24292E;">          </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">    </span><span style="color:#032F62;">PORTS</span><span style="color:#24292E;">                 </span><span style="color:#032F62;">NAMES</span></span>
<span class="line"><span style="color:#6F42C1;">380924631b3a</span><span style="color:#24292E;">    </span><span style="color:#032F62;">docker.io/library/nginx:latest</span><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;/docker-entrypoint.…&quot;</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> </span><span style="color:#032F62;">minutes</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ago</span><span style="color:#24292E;">    </span><span style="color:#032F62;">Up</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">0.0</span><span style="color:#032F62;">.0.0:80</span><span style="color:#24292E;">-</span><span style="color:#D73A49;">&gt;</span><span style="color:#032F62;">80/tcp</span><span style="color:#24292E;">    </span><span style="color:#032F62;">nginx</span></span>
<span class="line"><span style="color:#24292E;">[root@kube-master-01 init_pack]# nerdctl exec -it 380924631b3a /bin/sh</span></span></code></pre></div><h2 id="_3-4-删除容器" tabindex="-1">3.4 删除容器 <a class="header-anchor" href="#_3-4-删除容器" aria-label="Permalink to &quot;3.4 删除容器&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">nerdctl rm -f nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">nerdctl rm -f nginx</span></span></code></pre></div><h2 id="_3-4-删除镜像" tabindex="-1">3.4 删除镜像 <a class="header-anchor" href="#_3-4-删除镜像" aria-label="Permalink to &quot;3.4 删除镜像&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">nerdctl rmi -f &lt;IMAGE ID&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">nerdctl rmi -f &lt;IMAGE ID&gt;</span></span></code></pre></div><h2 id="_3-5-列出镜像" tabindex="-1">3.5 列出镜像 <a class="header-anchor" href="#_3-5-列出镜像" aria-label="Permalink to &quot;3.5 列出镜像&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">nerdctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">images</span></span>
<span class="line"><span style="color:#B392F0;">nerdctl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n=k8s.io</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">images</span></span>
<span class="line"><span style="color:#B392F0;">nerdctl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n=k8s.io</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">images</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;&lt;none&gt;&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">nerdctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">images</span></span>
<span class="line"><span style="color:#6F42C1;">nerdctl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-n=k8s.io</span><span style="color:#24292E;"> </span><span style="color:#032F62;">images</span></span>
<span class="line"><span style="color:#6F42C1;">nerdctl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-n=k8s.io</span><span style="color:#24292E;"> </span><span style="color:#032F62;">images</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">grep</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;&lt;none&gt;&#39;</span></span></code></pre></div><h2 id="_3-6-拉取镜像" tabindex="-1">3.6 拉取镜像 <a class="header-anchor" href="#_3-6-拉取镜像" aria-label="Permalink to &quot;3.6 拉取镜像&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">nerdctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span></span>
<span class="line"><span style="color:#B392F0;">nerdctl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">k8s.io</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#使用 nerdctl login --username xxx --password xxx 进行登录</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#登陆</span></span>
<span class="line"><span style="color:#B392F0;">nerdctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">login</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#注销</span></span>
<span class="line"><span style="color:#B392F0;">nerdctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">logout</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">nerdctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span></span>
<span class="line"><span style="color:#6F42C1;">nerdctl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-n</span><span style="color:#24292E;"> </span><span style="color:#032F62;">k8s.io</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#使用 nerdctl login --username xxx --password xxx 进行登录</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#登陆</span></span>
<span class="line"><span style="color:#6F42C1;">nerdctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">login</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#注销</span></span>
<span class="line"><span style="color:#6F42C1;">nerdctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">logout</span></span></code></pre></div><h2 id="_3-7-标签" tabindex="-1">3.7 标签 <a class="header-anchor" href="#_3-7-标签" aria-label="Permalink to &quot;3.7 标签&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#打标签，必须指定namespace 否则kubectl无法使用, 默认使用default命名空间下</span></span>
<span class="line"><span style="color:#B392F0;">nerdctl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">k8s.io</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">tag</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">old_image</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">new_image</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#打标签，必须指定namespace 否则kubectl无法使用, 默认使用default命名空间下</span></span>
<span class="line"><span style="color:#6F42C1;">nerdctl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-n</span><span style="color:#24292E;"> </span><span style="color:#032F62;">k8s.io</span><span style="color:#24292E;"> </span><span style="color:#032F62;">tag</span><span style="color:#24292E;"> </span><span style="color:#032F62;">old_image</span><span style="color:#24292E;">  </span><span style="color:#032F62;">new_image</span></span></code></pre></div><h2 id="_3-8-镜像导出" tabindex="-1">3.8 镜像导出 <a class="header-anchor" href="#_3-8-镜像导出" aria-label="Permalink to &quot;3.8 镜像导出&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">nerdctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">save</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-o</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">busybox.tar.gz</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">busybox:latest</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">nerdctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">save</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-o</span><span style="color:#24292E;"> </span><span style="color:#032F62;">busybox.tar.gz</span><span style="color:#24292E;"> </span><span style="color:#032F62;">busybox:latest</span></span></code></pre></div><h2 id="_3-9-镜像导入" tabindex="-1">3.9 镜像导入 <a class="header-anchor" href="#_3-9-镜像导入" aria-label="Permalink to &quot;3.9 镜像导入&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">nerdctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">load</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">busybox.tar.gz</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">或者</span></span>
<span class="line"><span style="color:#B392F0;">nerdctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">load</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">busybox.tar.gz</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">nerdctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">load</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">busybox.tar.gz</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">或者</span></span>
<span class="line"><span style="color:#6F42C1;">nerdctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">load</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">busybox.tar.gz</span></span></code></pre></div><h2 id="_4-0-镜像构建" tabindex="-1">4.0 镜像构建 <a class="header-anchor" href="#_4-0-镜像构建" aria-label="Permalink to &quot;4.0 镜像构建&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#指定dockerfile文件，默认使用default命名空间下</span></span>
<span class="line"><span style="color:#B392F0;">nerdctl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">k8s.io</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">build</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">centos:v1.0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">centos.dockerfile</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#默认</span></span>
<span class="line"><span style="color:#B392F0;">nerdctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">build</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">centos:v1.0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#指定dockerfile文件，默认使用default命名空间下</span></span>
<span class="line"><span style="color:#6F42C1;">nerdctl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-n</span><span style="color:#24292E;"> </span><span style="color:#032F62;">k8s.io</span><span style="color:#24292E;"> </span><span style="color:#032F62;">build</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-t</span><span style="color:#24292E;"> </span><span style="color:#032F62;">centos:v1.0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">centos.dockerfile</span><span style="color:#24292E;"> </span><span style="color:#032F62;">.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#默认</span></span>
<span class="line"><span style="color:#6F42C1;">nerdctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">build</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-t</span><span style="color:#24292E;"> </span><span style="color:#032F62;">centos:v1.0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">.</span></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">❌ 注意</p><p>ctr和nerdctl命令需要指定名字空间，管理k8s创建的容器，需要使用k8s.io名字空间，即ctr/nerdctl -n k8s.io</p></div><h2 id="_4-1-推送镜像" tabindex="-1">4.1 推送镜像 <a class="header-anchor" href="#_4-1-推送镜像" aria-label="Permalink to &quot;4.1 推送镜像&quot;">​</a></h2><h3 id="_1-登录" tabindex="-1">1.登录 <a class="header-anchor" href="#_1-登录" aria-label="Permalink to &quot;1.登录&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">echo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Harbor12345</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">nerdctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">login</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--username</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;admin&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--password-stdin</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">myharbor-minio.com:443</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">或者</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">nerdctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">login</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--username</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;admin&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--password</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Harbor12345</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">myharbor-minio.com:443</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 退出</span></span>
<span class="line"><span style="color:#B392F0;">nerdctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">logout</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">echo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Harbor12345</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">nerdctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">login</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--username</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;admin&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--password-stdin</span><span style="color:#24292E;">  </span><span style="color:#032F62;">myharbor-minio.com:443</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">或者</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">nerdctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">login</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--username</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;admin&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--password</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Harbor12345</span><span style="color:#24292E;"> </span><span style="color:#032F62;">myharbor-minio.com:443</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 退出</span></span>
<span class="line"><span style="color:#6F42C1;">nerdctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">logout</span></span></code></pre></div><h3 id="_2-推送" tabindex="-1">2.推送 <a class="header-anchor" href="#_2-推送" aria-label="Permalink to &quot;2.推送&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">### 推送到Harbor</span></span>
<span class="line"><span style="color:#6A737D;"># --insecure-registry        skips verifying HTTPS certs, and allows falling back to plain HTTP</span></span>
<span class="line"><span style="color:#B392F0;">nerdctl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--insecure-registry</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--namespace=k8s.io</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">push</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xxx.com/bigdata/nginx:nerctl</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">ctr</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--namespace=k8s.io</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">images</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">push</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xxx.com/bigdata/nginx:nerctl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--skip-verify</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--user</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">admin:Harbor12345</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># --namespace=k8s.io 指定命名空间，跟-n一样，不是必须，根据环境而定</span></span>
<span class="line"><span style="color:#6A737D;"># --skip-verify 跳过认证</span></span>
<span class="line"><span style="color:#6A737D;"># --user 指定harbor用户名及密码</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">### 推送到Harbor</span></span>
<span class="line"><span style="color:#6A737D;"># --insecure-registry        skips verifying HTTPS certs, and allows falling back to plain HTTP</span></span>
<span class="line"><span style="color:#6F42C1;">nerdctl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--insecure-registry</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--namespace=k8s.io</span><span style="color:#24292E;"> </span><span style="color:#032F62;">push</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xxx.com/bigdata/nginx:nerctl</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">ctr</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--namespace=k8s.io</span><span style="color:#24292E;"> </span><span style="color:#032F62;">images</span><span style="color:#24292E;"> </span><span style="color:#032F62;">push</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xxx.com/bigdata/nginx:nerctl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--skip-verify</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--user</span><span style="color:#24292E;"> </span><span style="color:#032F62;">admin:Harbor12345</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># --namespace=k8s.io 指定命名空间，跟-n一样，不是必须，根据环境而定</span></span>
<span class="line"><span style="color:#6A737D;"># --skip-verify 跳过认证</span></span>
<span class="line"><span style="color:#6A737D;"># --user 指定harbor用户名及密码</span></span></code></pre></div><p>或者</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 以下两个哪个都可以</span></span>
<span class="line"><span style="color:#6A737D;"># mkdir -p /etc/docker/certs.d/myharbor-minio.com:443</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/containerd/certs.d/domain.com:443</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/containerd/certs.d/domain.com</span><span style="color:#79B8FF;">\\:</span><span style="color:#9ECBFF;">443/hosts.toml</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"><span style="color:#9ECBFF;">server = &quot;https://domain.com&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">[host.&quot;https://domain.com:443&quot;]</span></span>
<span class="line"><span style="color:#9ECBFF;">  capabilities = [&quot;pull&quot;, &quot;resolve&quot;,&quot;push&quot;]</span></span>
<span class="line"><span style="color:#9ECBFF;">  skip_verify = true</span></span>
<span class="line"><span style="color:#9ECBFF;">  #ca = &quot;ca.crt&quot;   #相对路径</span></span>
<span class="line"><span style="color:#9ECBFF;">  #ca = &quot;/opt/auth/ca.crt&quot;  #绝对路径</span></span>
<span class="line"><span style="color:#9ECBFF;">  #ca = [&quot;/opt/auth/ca.crt&quot;]</span></span>
<span class="line"><span style="color:#9ECBFF;">  ca = [&quot;/etc/containerd/domain.com/ca.crt&quot;]</span></span>
<span class="line"><span style="color:#9ECBFF;">  #client = [[&quot;/opt/auth/nginx.cclinux.cn.crt&quot;, &quot;/opt/auth/nginx.cclinux.cn.key&quot;]]</span></span>
<span class="line"><span style="color:#9ECBFF;">EOF</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 以下两个哪个都可以</span></span>
<span class="line"><span style="color:#6A737D;"># mkdir -p /etc/docker/certs.d/myharbor-minio.com:443</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/containerd/certs.d/domain.com:443</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/containerd/certs.d/domain.com</span><span style="color:#005CC5;">\\:</span><span style="color:#032F62;">443/hosts.toml</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#032F62;">EOF</span></span>
<span class="line"><span style="color:#032F62;">server = &quot;https://domain.com&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">[host.&quot;https://domain.com:443&quot;]</span></span>
<span class="line"><span style="color:#032F62;">  capabilities = [&quot;pull&quot;, &quot;resolve&quot;,&quot;push&quot;]</span></span>
<span class="line"><span style="color:#032F62;">  skip_verify = true</span></span>
<span class="line"><span style="color:#032F62;">  #ca = &quot;ca.crt&quot;   #相对路径</span></span>
<span class="line"><span style="color:#032F62;">  #ca = &quot;/opt/auth/ca.crt&quot;  #绝对路径</span></span>
<span class="line"><span style="color:#032F62;">  #ca = [&quot;/opt/auth/ca.crt&quot;]</span></span>
<span class="line"><span style="color:#032F62;">  ca = [&quot;/etc/containerd/domain.com/ca.crt&quot;]</span></span>
<span class="line"><span style="color:#032F62;">  #client = [[&quot;/opt/auth/nginx.cclinux.cn.crt&quot;, &quot;/opt/auth/nginx.cclinux.cn.key&quot;]]</span></span>
<span class="line"><span style="color:#032F62;">EOF</span></span></code></pre></div>`,59),e=[o];function c(t,r,y,E,i,F){return a(),n("div",null,e)}const C=s(p,[["render",c]]);export{h as __pageData,C as default};
