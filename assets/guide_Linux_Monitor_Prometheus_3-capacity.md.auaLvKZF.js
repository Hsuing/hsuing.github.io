import{_ as e,o as t,c as o,R as s}from"./chunks/framework.zUbWieqp.js";const u=JSON.parse('{"title":"1. Prometheus容量管理","description":"","frontmatter":{},"headers":[],"relativePath":"guide/Linux/Monitor/Prometheus/3-capacity.md","filePath":"guide/Linux/Monitor/Prometheus/3-capacity.md","lastUpdated":1739873505000}'),a={name:"guide/Linux/Monitor/Prometheus/3-capacity.md"},d=s('<h1 id="_1-prometheus容量管理" tabindex="-1">1. Prometheus容量管理 <a class="header-anchor" href="#_1-prometheus容量管理" aria-label="Permalink to &quot;1. Prometheus容量管理&quot;">​</a></h1><p>对Prometheus的容量来进行评估</p><p>按照官方数据，每个样本指标平均占用存储空间为1-2 字节，我们通过下面的公式可对总容量进行粗略的计算：</p><p><code>needed_disk_space = retention_time_seconds * ingested_samples_per_second * bytes_per_sample</code></p><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>retention_time_seconds</td><td>为数据保留时间范围内的总时间数</td></tr><tr><td>ingested_samples_per_second</td><td>为平均每秒获取的指标数量</td></tr><tr><td>bytes_per_sample</td><td>每条样本数据占用的空间大小，此处取2 字节</td></tr></tbody></table><p>ingested_samples_per_second的数量可以采用下面的PromQL表达式获取，该表达式会计算出最近5分钟平均每秒获取的样本数量</p><p><code>rate(prometheus_tsdb_head_samples_appended_total[5m])</code></p><p>假设系统平均每秒获取的指标数量为10万个，按照默认样本保留 15天计算，那么需要的空间至少为259G。</p><p><code>（3600*24*15）* 100000 * 2 ≈ 259G</code></p>',9),r=[d];function _(p,n,c,i,m,h){return t(),o("div",null,r)}const P=e(a,[["render",_]]);export{u as __pageData,P as default};
