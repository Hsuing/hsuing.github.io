import{_ as s,o as a,c as n,R as l}from"./chunks/framework.zUbWieqp.js";const u=JSON.parse('{"title":"1. 存储卷基础","description":"","frontmatter":{},"headers":[],"relativePath":"guide/container/k8s/存储/Volume/1-volume.md","filePath":"guide/container/k8s/存储/Volume/1-volume.md","lastUpdated":1733304370000}'),p={name:"guide/container/k8s/存储/Volume/1-volume.md"},o=l(`<h1 id="_1-存储卷基础" tabindex="-1">1. 存储卷基础 <a class="header-anchor" href="#_1-存储卷基础" aria-label="Permalink to &quot;1. 存储卷基础&quot;">​</a></h1><h2 id="_1-1-为何需要volumes" tabindex="-1">1.1 为何需要Volumes <a class="header-anchor" href="#_1-1-为何需要volumes" aria-label="Permalink to &quot;1.1 为何需要Volumes&quot;">​</a></h2><p><code>Container</code>中的⽂件在磁盘上是临时存放的，这给<code>Container</code>中运⾏的较重要的应⽤程序带来⼀些问题。</p><p>1、当容器崩溃时，<code>kubelet</code>将重新启动⼀个&quot;全新的容器&quot;，⽽容器中的此前保存的数据则会丢失。</p><p>2、当同⼀Pod运⾏多个容器时，通常需要在这些容器之间共享⽂件。</p><p><code>Volume</code> 是 Kubernetes 抽象出来的对象，主要⽤于解决Pod运⾏时⽂件存放的问题，以及pod中多容器数据共享问题。</p><h2 id="_1-2-什么是volume" tabindex="-1">1.2 什么是Volume <a class="header-anchor" href="#_1-2-什么是volume" aria-label="Permalink to &quot;1.2 什么是Volume&quot;">​</a></h2><p>Volume的核心是一个目录，其中可能存有数据，Pod中的容器可以访问该目录中的数据。使用不同的Volume类型将决定该目录如何形成，以及使用何种介质（Disk、Memory）来存储数据。当然不同的卷类型有着不同的生命周期;</p><p><code>临时卷</code>：临时卷类型的生命周期与Pod 相同，当Pod 不再存在时，Kubernetes 会销毁临时卷； (一般用作缓存场景)</p><p><code>持久卷</code>：持久卷可以比 Pod 的存活期长，因为Kubernetes不会销毁持久卷。</p><div class="warning custom-block"><p class="custom-block-title">💡 说明</p><p>任何类型的卷，在容器重启期间数据都不会丢失</p></div><h2 id="_1-3-volume的功能" tabindex="-1">1.3 Volume的功能 <a class="header-anchor" href="#_1-3-volume的功能" aria-label="Permalink to &quot;1.3 Volume的功能&quot;">​</a></h2><p>1.Volume是Pod中能够被多个容器访问的共享目录，可以让容器的数据写到宿主机上或者写文件到网络存储中</p><p>2.可以实现容器配置文件集中化定义与管理，通过ConfigMap资源对象来实现.</p><h2 id="_1-4-volume的特点" tabindex="-1">1.4 Volume的特点 <a class="header-anchor" href="#_1-4-volume的特点" aria-label="Permalink to &quot;1.4 Volume的特点&quot;">​</a></h2><p>k8s中的Volume与Docker的Volume相似，但不完全相同。</p><ol><li>k8s上Volume定义在Pod上，然后被一个Pod中的多个容器挂载到具体的文件目录下。</li><li>k8s的Volume与Pod生命周期相关而不是容器是生命周期，即容器挂掉，数据不会丢失但是Pod挂掉，数据则会丢失。</li><li>k8s中的Volume支持多种类型的Volume：Ceph、GlusterFS等分布式系统</li></ol><h2 id="_1-5-pod配置volume" tabindex="-1">1.5 Pod配置Volume <a class="header-anchor" href="#_1-5-pod配置volume" aria-label="Permalink to &quot;1.5 Pod配置Volume&quot;">​</a></h2><p>Pod使⽤卷方式：</p><p>1、第⼀步：在<code>pod.spec.volumes</code> 字段中申明，申明该卷提供的卷类型以及卷名字</p><p>2、第二步：在<code>.spec.containers[*].voLumeMounts</code>字段中声明，将卷挂载到容器的哪个位置。</p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202405311025604.png" alt="image-20240531102533666"></p><h1 id="_2-volume类型" tabindex="-1">2. Volume类型 <a class="header-anchor" href="#_2-volume类型" aria-label="Permalink to &quot;2. Volume类型&quot;">​</a></h1><p>先在Pod上声明一个Volume，然后容器引用该Volume并Mount到容器的某个目录</p><h2 id="_2-1-临时存储" tabindex="-1">2.1 临时存储 <a class="header-anchor" href="#_2-1-临时存储" aria-label="Permalink to &quot;2.1 临时存储&quot;">​</a></h2><p>官方文档,<a href="https://kubernetes.io/docs/concepts/storage/volumes/#emptydir" target="_blank" rel="noreferrer">https://kubernetes.io/docs/concepts/storage/volumes/#emptydir</a></p><h3 id="emptydir定义" tabindex="-1">emptyDir定义 <a class="header-anchor" href="#emptydir定义" aria-label="Permalink to &quot;emptyDir定义&quot;">​</a></h3><p>emptyDir是一个临时存储卷，与Pod的生命周期绑定到一起，如果Pod被删除了，这意味着数据也被随之删除.</p><p>emptyDir主要有如下两个字段</p><ul><li>medium：存储介质的类型，有defaut、Memory, <ul><li>default：表示使用节点的磁盘存储介质。 (默认)</li><li>Memory：表示使用基于内存临时文件系统，性能高、但整体可用空间受限于内存，一般用于缓存场景。</li></ul></li><li>sizeLimit：存储卷的空间限额，默认nil表示不限制，如果medium为Memory时，建议配置此值。</li></ul><h4 id="emptydir作用" tabindex="-1">emptyDir作用 <a class="header-anchor" href="#emptydir作用" aria-label="Permalink to &quot;emptyDir作用&quot;">​</a></h4><p>(1)可以实现持久化;</p><p>(2)同一个Pod的多个容器可以实现数据共享，多个不同的Pod之间不能进行数据通信;</p><p>(3)随着Pod的生命周期而存在，当我们删除Pod时，其数据也会被随之删除;</p><h4 id="emptydir优缺点" tabindex="-1">emptyDir优缺点 <a class="header-anchor" href="#emptydir优缺点" aria-label="Permalink to &quot;emptyDir优缺点&quot;">​</a></h4><p>优点：</p><p>(1)可以实现同一个Pod内多个容器之间数据共享;</p><p>(2)当Pod内的某个容器被强制删除时，数据并不会丢失，因为Pod没有删除;</p><p>缺点:</p><p>(1)当Pod被删除时，数据也会被随之删除;</p><p>(2)不同的Pod之间无法实现数据共享;</p><div class="danger custom-block"><p class="custom-block-title">❌ 注意</p><p>启动pods后，使用emptyDir其数据存储在&quot;/var/lib/kubelet/pods&quot;路径下对应的POD_ID目录</p><p>如,/var/lib/kubelet/pods/\${POD_ID}/volumes/kubernetes.io~empty-dir/</p></div><h3 id="emptydir场景1" tabindex="-1">emptyDir场景1 <a class="header-anchor" href="#emptydir场景1" aria-label="Permalink to &quot;emptyDir场景1&quot;">​</a></h3><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">root@kube-master volumes</span><span style="color:#E1E4E8;">]# </span><span style="color:#9ECBFF;">cat 1.nginx-emptydir.yaml</span></span>
<span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Pod</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">volume-pod</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">volumes</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">my-volume</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">emptyDir</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">medium</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Memory</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">sizeLimit</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;1Gi&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">containers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">volume-container</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx:latest</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">volumeMounts</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">my-volume</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">mountPath</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/usr/share/nginx/html</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">initContainers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">init-container</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">busybox</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">command</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&quot;sh&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;-c&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;echo &#39;&lt;html&gt;&lt;body&gt;&lt;h1&gt;Welcome to my website&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&#39; &gt; /data/index.html&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">volumeMounts</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">my-volume</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">mountPath</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/data</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[</span><span style="color:#032F62;">root@kube-master volumes</span><span style="color:#24292E;">]# </span><span style="color:#032F62;">cat 1.nginx-emptydir.yaml</span></span>
<span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Pod</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">volume-pod</span></span>
<span class="line"><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">volumes</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">my-volume</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">emptyDir</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">medium</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Memory</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">sizeLimit</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;1Gi&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">containers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">volume-container</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx:latest</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">volumeMounts</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">my-volume</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">mountPath</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/usr/share/nginx/html</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">initContainers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">init-container</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">busybox</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">command</span><span style="color:#24292E;">: [</span><span style="color:#032F62;">&quot;sh&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;-c&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;echo &#39;&lt;html&gt;&lt;body&gt;&lt;h1&gt;Welcome to my website&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&#39; &gt; /data/index.html&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">volumeMounts</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">my-volume</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">mountPath</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/data</span></span></code></pre></div><h3 id="emptydir场景2" tabindex="-1">emptyDir场景2 <a class="header-anchor" href="#emptydir场景2" aria-label="Permalink to &quot;emptyDir场景2&quot;">​</a></h3><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Pod</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">test-pd</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">containers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">k8s.gcr.io/test-webserver</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">test-container</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">volumeMounts</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">mountPath</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/cache</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">cache-volume</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">volumes</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">cache-volume</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">emptyDir</span><span style="color:#E1E4E8;">: {}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Pod</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">test-pd</span></span>
<span class="line"><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">containers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">k8s.gcr.io/test-webserver</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">test-container</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">volumeMounts</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">mountPath</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/cache</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">cache-volume</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">volumes</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">cache-volume</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">emptyDir</span><span style="color:#24292E;">: {}</span></span></code></pre></div><h2 id="_2-2-本地存储" tabindex="-1">2.2 本地存储 <a class="header-anchor" href="#_2-2-本地存储" aria-label="Permalink to &quot;2.2 本地存储&quot;">​</a></h2><p>官方文档,<a href="https://kubernetes.io/docs/concepts/storage/volumes/#hostpath" target="_blank" rel="noreferrer">https://kubernetes.io/docs/concepts/storage/volumes/#hostpath</a></p><h3 id="hostpath" tabindex="-1">hostPath <a class="header-anchor" href="#hostpath" aria-label="Permalink to &quot;hostPath&quot;">​</a></h3><p>会将Pod部署所在<code>宿主机</code>的目录或文件挂载到Pod中去</p><p><strong>作用</strong>：</p><ol><li>容器应用日志需要持久化时，可以使用宿主机的高速文件系统进行存储</li><li>需要访问宿主机上Docker引擎内部数据结构的容器应用时，可以通过定义hostPath为宿主机/var/lib/docker目录，使容器内部应用可以直接访问Docker的文件系统</li><li>挂载时区</li></ol><blockquote><p>1.在不同的Node上具有相同配置的Pod可能会因为宿主机上的目录或文件不同导致对Volume上目录或文件的访问结果不一致。</p><p>2.如果使用了资源配额管理，则kubernetes无法将hostPath在宿主机上使用的资源纳入管理</p></blockquote><p>type<a href="https://kubernetes.io/zh-cn/docs/concepts/storage/volumes/#emptydir" target="_blank" rel="noreferrer">类型</a>：</p><table><thead><tr><th>type类型</th><th>说明</th></tr></thead><tbody><tr><td>DirectoryOrCreate</td><td>卷映射对象是一个目录，如果不存在就创建它</td></tr><tr><td>Directory</td><td>卷映射对象是一个目录，且必须存在</td></tr><tr><td>FileOrCreate</td><td>卷映射对象是一个文件，如果不存在创建它</td></tr><tr><td>File</td><td>卷映射对象是一个文件，且必须存在</td></tr><tr><td>Socket</td><td>卷映射对象是一个Socket套接字，且必须存在</td></tr><tr><td>CharDevice</td><td>卷映射对象是一个字符设备，且必须存在（仅 Linux 节点）</td></tr><tr><td>BlockDevice</td><td>卷映射对象是一个块设备，且必须存在（仅 Linux 节点）</td></tr></tbody></table><p>案例</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">root@kube-master volumes</span><span style="color:#E1E4E8;">]# </span><span style="color:#9ECBFF;">cat 2.hostpath.yaml</span></span>
<span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Pod</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">pod-hostpath</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">volumes</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">hostpath-volume</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">hostPath</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">path</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/data/hostpathdir/</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 宿主上⽬录位置</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Directory</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">containers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">container-hostpath</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx:latest</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">volumeMounts</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">hostpath-volume</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">mountPath</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/usr/share/nginx/html/</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[</span><span style="color:#032F62;">root@kube-master volumes</span><span style="color:#24292E;">]# </span><span style="color:#032F62;">cat 2.hostpath.yaml</span></span>
<span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Pod</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">pod-hostpath</span></span>
<span class="line"><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">volumes</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">hostpath-volume</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">hostPath</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">path</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/data/hostpathdir/</span><span style="color:#24292E;">    </span><span style="color:#6A737D;"># 宿主上⽬录位置</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">type</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Directory</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">containers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">container-hostpath</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx:latest</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">volumeMounts</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">hostpath-volume</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">mountPath</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/usr/share/nginx/html/</span></span></code></pre></div>`,57),e=[o];function t(c,r,E,y,i,m){return a(),n("div",null,e)}const h=s(p,[["render",t]]);export{u as __pageData,h as default};
