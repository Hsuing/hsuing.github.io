import{_ as e,o as t,c as o,R as a}from"./chunks/framework.zUbWieqp.js";const u=JSON.parse('{"title":"1.Helm 升级应用后部分功能异常","description":"","frontmatter":{},"headers":[],"relativePath":"guide/container/k8s/troubleshooting/9-Helm.md","filePath":"guide/container/k8s/troubleshooting/9-Helm.md","lastUpdated":1713263180000}'),l={name:"guide/container/k8s/troubleshooting/9-Helm.md"},r=a('<h1 id="_1-helm-升级应用后部分功能异常" tabindex="-1">1.<strong>Helm 升级应用后部分功能异常</strong> <a class="header-anchor" href="#_1-helm-升级应用后部分功能异常" aria-label="Permalink to &quot;1.**Helm 升级应用后部分功能异常**&quot;">​</a></h1><h2 id="_1-1-问题" tabindex="-1">1.1 问题 <a class="header-anchor" href="#_1-1-问题" aria-label="Permalink to &quot;1.1 问题&quot;">​</a></h2><p>使用 Helm 升级 Kubernetes 应用后，部分功能出现异常，如服务不可用、接口返回错误、数据不一致等</p><p><strong>影响范围：</strong></p><ul><li>直接影响：升级后的应用无法正常提供全部功能，可能影响用户访问、数据处理、业务流程等。</li><li>间接影响：可能导致信任度下降、运维复杂度增加、回滚成本增大</li></ul><h2 id="_1-2-排查方案" tabindex="-1">1.2 排查方案 <a class="header-anchor" href="#_1-2-排查方案" aria-label="Permalink to &quot;1.2 排查方案&quot;">​</a></h2><ol><li><strong>对比旧版与新版资源定义</strong>：使用 <code>helm get values &lt;release-name&gt;</code> 和 <code>helm get manifest &lt;release-name&gt;</code> 获取升级前后的资源定义和配置值，对比差异，看是否有误删、误改的关键配置。</li><li><strong>检查滚动更新策略</strong>：使用 <code>helm get all &lt;release-name&gt;</code> 查看 Helm Release 的详细信息，确认滚动更新策略（如 <code>maxUnavailable</code>、<code>maxSurge</code>）是否合理，是否可能导致服务中断。</li><li><strong>检查应用日志与状态</strong>：使用 <code>kubectl logs</code> 和 <code>kubectl describe</code> 查看升级后 Pod 的日志和状态，定位具体出错的服务或组件。</li><li><strong>验证数据迁移或迁移脚本</strong>：如果升级涉及数据迁移，检查迁移脚本或工具的执行结果，确认数据是否正确迁移。对于有状态应用，确认新旧版本能否正确共享存储。</li><li><strong>回滚并逐步升级验证</strong>：如果问题难以定位，可先回滚到旧版本，然后逐步升级部分组件或功能，观察问题是否重现，缩小排查范围</li></ol>',7),s=[r];function n(i,c,d,_,m,g){return t(),o("div",null,s)}const p=e(l,[["render",n]]);export{u as __pageData,p as default};
