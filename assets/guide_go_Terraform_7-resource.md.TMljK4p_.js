import{_ as s,o as a,c as n,R as l}from"./chunks/framework.zUbWieqp.js";const _=JSON.parse('{"title":"1. 什么是resource？✅","description":"","frontmatter":{},"headers":[],"relativePath":"guide/go/Terraform/7-resource.md","filePath":"guide/go/Terraform/7-resource.md","lastUpdated":1753370025000}'),o={name:"guide/go/Terraform/7-resource.md"},p=l(`<h1 id="_1-什么是resource-✅" tabindex="-1">1. 什么是<a href="https://developer.hashicorp.com/terraform/tutorials/configuration-language/resource" target="_blank" rel="noreferrer">resource</a>？✅ <a class="header-anchor" href="#_1-什么是resource-✅" aria-label="Permalink to &quot;1. 什么是[resource](https://developer.hashicorp.com/terraform/tutorials/configuration-language/resource)？✅&quot;">​</a></h1><p>​ 资源是Terraform中最重要的部分，资源由资源块定义，而资源由provider提供。在Terraform中，一个具体的资源或者云产品/组件称为<strong>resource</strong>，比如一个<strong>ECS、SLB、<strong>RDS</strong>、VPC</strong>等。一个资源可以定义一个或多个基础设施资源对象。每个特定的resource包含了若干可用于描述对应资源或服务的属性字段，通过这些字段来定义一个完整的资源或者服务。</p><h2 id="_1-1-语法✅" tabindex="-1">1.1 语法✅ <a class="header-anchor" href="#_1-1-语法✅" aria-label="Permalink to &quot;1.1 语法✅&quot;">​</a></h2><ul><li>资源来自 <code>Provider</code> ，是 <code>Terraform</code> 中最重要的元素。每个资源块描述一个或多个基础对象，例如网络、计算实例或更高级别的组件，例如 <code>DNS</code> 记录。</li><li>资源名称必须以字母或下划线开头，并且只能包含字母、数宇、下划线和破折号。</li></ul><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">resource &quot;resource_type&quot; &quot;name&quot; {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">// resource_config</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">resource &quot;resource_type&quot; &quot;name&quot; {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">// resource_config</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h2 id="_1-2-使用说明✅" tabindex="-1">1.2 使用说明✅ <a class="header-anchor" href="#_1-2-使用说明✅" aria-label="Permalink to &quot;1.2 使用说明✅&quot;">​</a></h2><p>各字段解释及使用说明：</p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/20250710105459472.png" alt="image.png"></p><p>其中第一个，<code>**resource**</code>是资源的代码块的固定值，描述资源是什么。如，在Terraform模块中是有六大block：</p><p><code>provider</code><strong>：配置块</strong></p><p><code>resource</code>：<strong>资源</strong></p><p><code>data</code><strong>：数据源</strong></p><p><code>variable</code><strong>：变量</strong></p><p><code>output</code><strong>：输出</strong></p><p><code>locals</code><strong>：本地变量</strong></p><p>第二个，<code>alicloud_vswitch</code>是每个厂商定义好的资源名称，如：</p><p><code>alicloud_vpc</code><strong>：vpc</strong></p><p><code>alicloud_vswitch</code><strong>：vswitch（交换机）</strong></p><p><code>alicloud_security_group</code><strong>：安全组</strong></p><p><code>alicloud_security_group_rule</code><strong>：安全组规则</strong></p><p><code>alicloud_instance</code><strong>：ECS实例</strong></p><p>在HashiCorp官方文档中找对应每个云厂商的的资源名称：<a href="https://registry.terraform.io/providers/aliyun/alicloud/latest/docs/resources/ecs_disk" target="_blank" rel="noreferrer">https://registry.terraform.io/providers/aliyun/alicloud/latest/docs/resources/ecs_disk</a></p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/20250710105720276.png" alt="image.png"></p><p>第三个，<code>vsw_terraform1</code>是文件中自定义的资源的唯一名称，不可重复。如果有多个，即用不同的值，如：</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#创建第一个vsw_terraform1</span></span>
<span class="line"><span style="color:#6A737D;">#&quot;字段&quot;是tf文件中的资源名称,vswitch_name字段是在阿里云上的备注名</span></span>
<span class="line"><span style="color:#9ECBFF;">resource &quot;alicloud_vswitch&quot; &quot;vsw_terraform1&quot; {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">vswitch_name = &quot;vsw_aliyun1&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">vpc_id       = alicloud_vpc.vpc.id</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">cidr_block   = &quot;10.0.0.0/24&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">zone_id      = &quot;cn-shanghai-b&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#6A737D;">#创建第二个vsw_terraform2</span></span>
<span class="line"><span style="color:#9ECBFF;">resource &quot;alicloud_vswitch&quot; &quot;vsw_terraform2&quot; {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">vswitch_name = &quot;vsw_aliyun2&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">vpc_id       = alicloud_vpc.vpc.id</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">cidr_block   = &quot;10.0.1.0/24&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">zone_id      = &quot;cn-shanghai-b&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#创建第N个vsw_terraform_jinitaimei666</span></span>
<span class="line"><span style="color:#9ECBFF;">resource &quot;alicloud_vswitch&quot; &quot;vsw_terraform_jinitaimei666&quot; {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">vswitch_name = &quot;vsw_aliyunN&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">vpc_id       = alicloud_vpc.vpc.id</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">cidr_block   = &quot;10.0.6.0/24&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">zone_id      = &quot;cn-shanghai-b&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#创建第一个vsw_terraform1</span></span>
<span class="line"><span style="color:#6A737D;">#&quot;字段&quot;是tf文件中的资源名称,vswitch_name字段是在阿里云上的备注名</span></span>
<span class="line"><span style="color:#032F62;">resource &quot;alicloud_vswitch&quot; &quot;vsw_terraform1&quot; {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">vswitch_name = &quot;vsw_aliyun1&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">vpc_id       = alicloud_vpc.vpc.id</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">cidr_block   = &quot;10.0.0.0/24&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">zone_id      = &quot;cn-shanghai-b&quot;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#6A737D;">#创建第二个vsw_terraform2</span></span>
<span class="line"><span style="color:#032F62;">resource &quot;alicloud_vswitch&quot; &quot;vsw_terraform2&quot; {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">vswitch_name = &quot;vsw_aliyun2&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">vpc_id       = alicloud_vpc.vpc.id</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">cidr_block   = &quot;10.0.1.0/24&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">zone_id      = &quot;cn-shanghai-b&quot;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#创建第N个vsw_terraform_jinitaimei666</span></span>
<span class="line"><span style="color:#032F62;">resource &quot;alicloud_vswitch&quot; &quot;vsw_terraform_jinitaimei666&quot; {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">vswitch_name = &quot;vsw_aliyunN&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">vpc_id       = alicloud_vpc.vpc.id</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">cidr_block   = &quot;10.0.6.0/24&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">zone_id      = &quot;cn-shanghai-b&quot;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><blockquote><ul><li>资源是Terraform中最重要的部分，resource是Terraform中使用最多的块，所有资源由resource创建。</li><li>在Terraform中，一个具体的资源或者云产品/组件称为resource。</li><li>一个resource可以定义一个或多个基础设施资源对象。</li><li>每个resource有唯一确定的名称。</li></ul></blockquote><h3 id="resource-ecs-资源" tabindex="-1"><code>Resource-ECS</code> 资源 <a class="header-anchor" href="#resource-ecs-资源" aria-label="Permalink to &quot;\`Resource-ECS\` 资源&quot;">​</a></h3><p><a href="https://registry.terraform.io/providers/aliyun/alicloud/latest/docs/resources/instance" target="_blank" rel="noreferrer">https://registry.terraform.io/providers/aliyun/alicloud/latest/docs/resources/instance</a></p><p>定义一台 <code>ECS</code> 实例</p><ul><li>可用区</li><li>安全组</li><li>实例规格</li><li>系统盘类型</li><li>名称描达</li><li>镜像</li><li>实例名称</li><li>交换机</li><li>带宽</li><li>付费类型</li><li>账户密码</li></ul><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">## alicloud_ecs.tf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">resource </span><span style="color:#9ECBFF;">&quot;alicloud_instance&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;myecs&quot;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 可用区</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">availability_zone</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">var.region</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 安全组，需要提前定义生成</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">security_groups</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">alicloud_security_group.group.*.id</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 实例规格</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">instance_type</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;ecs.n1.tiny&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 系统磁盘类型</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">system_disk_category</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;cloud_efficiency&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 系统磁盘名称</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">svstem_disk_name</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;tf_svstem_disk_name&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 系统盘描述</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">system_disk_description</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;tf_system_disk_description&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 系统镜像ID</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">image_id</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;centos7_5_X64_206_allbase_20211130.vhd&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 实例名称</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">instance_name</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;mytestecs&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 交换机，需要提前定义生成</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">switch_id</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">alicloud_vswitch.vsw.id</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 带宽</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">internet_max_bandwidth_out</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">1</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 付费类型</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">internet_charge_type</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;PayByTraffic&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 账号密码</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">password</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;root@123&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">## alicloud_ecs.tf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">resource </span><span style="color:#032F62;">&quot;alicloud_instance&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;myecs&quot;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 可用区</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">availability_zone</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">var.region</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 安全组，需要提前定义生成</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">security_groups</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">alicloud_security_group.group.*.id</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 实例规格</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">instance_type</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;ecs.n1.tiny&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 系统磁盘类型</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">system_disk_category</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;cloud_efficiency&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 系统磁盘名称</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">svstem_disk_name</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;tf_svstem_disk_name&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 系统盘描述</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">system_disk_description</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;tf_system_disk_description&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 系统镜像ID</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">image_id</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;centos7_5_X64_206_allbase_20211130.vhd&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 实例名称</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">instance_name</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;mytestecs&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 交换机，需要提前定义生成</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">switch_id</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">alicloud_vswitch.vsw.id</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 带宽</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">internet_max_bandwidth_out</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">1</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 付费类型</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">internet_charge_type</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;PayByTraffic&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 账号密码</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">password</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;root@123&quot;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="resource-dns-资源" tabindex="-1"><code>Resource-DNS</code> 资源 <a class="header-anchor" href="#resource-dns-资源" aria-label="Permalink to &quot;\`Resource-DNS\` 资源&quot;">​</a></h3><p><a href="https://registry.terraform.io/providers/aliyun/alicloud/latest/docs/resources/alidns_record" target="_blank" rel="noreferrer">https://registry.terraform.io/providers/aliyun/alicloud/latest/docs/resources/alidns_record</a></p><p>定义一条 <code>DNS</code> 解析记录</p><ul><li>ZoneName: xxx.site</li><li>Type: A</li><li>Record: demo</li><li>完整域名：demo.xxx.com</li></ul><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">## alicloud_dns.tf</span></span>
<span class="line"><span style="color:#E1E4E8;">## TYPE A</span></span>
<span class="line"><span style="color:#E1E4E8;">## demo.evescn.com</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;"># 老版本 API</span></span>
<span class="line"><span style="color:#E1E4E8;">resource </span><span style="color:#9ECBFF;">&quot;alicloud_dns_record&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;record&quot;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FDAEB7;font-style:italic;">name</span><span style="color:#E1E4E8;">        </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;xxx.com&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FDAEB7;font-style:italic;">host_record</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;demo&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FDAEB7;font-style:italic;">type</span><span style="color:#E1E4E8;">        </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;A&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FDAEB7;font-style:italic;">value</span><span style="color:#E1E4E8;">       </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">alicloud_instance.mytestecs.public_ip</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;"># 新版本 API</span></span>
<span class="line"><span style="color:#E1E4E8;">resource </span><span style="color:#9ECBFF;">&quot;alicloud_alidns_record&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;record&quot;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FDAEB7;font-style:italic;">domain_name</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;xxx.com&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FDAEB7;font-style:italic;">rr</span><span style="color:#E1E4E8;">          </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;demo&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FDAEB7;font-style:italic;">type</span><span style="color:#E1E4E8;">        </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;A&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FDAEB7;font-style:italic;">value</span><span style="color:#E1E4E8;">       </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">alicloud_instance.mytestecs.public_ip</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FDAEB7;font-style:italic;">remark</span><span style="color:#E1E4E8;">      </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;demo-web&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FDAEB7;font-style:italic;">status</span><span style="color:#E1E4E8;">      </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;ENABLE&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">## alicloud_dns.tf</span></span>
<span class="line"><span style="color:#24292E;">## TYPE A</span></span>
<span class="line"><span style="color:#24292E;">## demo.evescn.com</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;"># 老版本 API</span></span>
<span class="line"><span style="color:#24292E;">resource </span><span style="color:#032F62;">&quot;alicloud_dns_record&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;record&quot;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#B31D28;font-style:italic;">name</span><span style="color:#24292E;">        </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;xxx.com&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#B31D28;font-style:italic;">host_record</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;demo&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#B31D28;font-style:italic;">type</span><span style="color:#24292E;">        </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;A&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#B31D28;font-style:italic;">value</span><span style="color:#24292E;">       </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">alicloud_instance.mytestecs.public_ip</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;"># 新版本 API</span></span>
<span class="line"><span style="color:#24292E;">resource </span><span style="color:#032F62;">&quot;alicloud_alidns_record&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;record&quot;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#B31D28;font-style:italic;">domain_name</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;xxx.com&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#B31D28;font-style:italic;">rr</span><span style="color:#24292E;">          </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;demo&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#B31D28;font-style:italic;">type</span><span style="color:#24292E;">        </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;A&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#B31D28;font-style:italic;">value</span><span style="color:#24292E;">       </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">alicloud_instance.mytestecs.public_ip</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#B31D28;font-style:italic;">remark</span><span style="color:#24292E;">      </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;demo-web&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#B31D28;font-style:italic;">status</span><span style="color:#24292E;">      </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;ENABLE&quot;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="datsource-数据源" tabindex="-1"><code>DatSource</code> 数据源 <a class="header-anchor" href="#datsource-数据源" aria-label="Permalink to &quot;\`DatSource\` 数据源&quot;">​</a></h3><p><a href="https://registry.terraform.io/providers/aliyun/alicloud/latest/docs/data-sources/images" target="_blank" rel="noreferrer">https://registry.terraform.io/providers/aliyun/alicloud/latest/docs/data-sources/images</a></p><p><code>datasource</code> 提供资源的数据，可以通过参数过滤数据并供其他模块引用；使用 <code>data</code> 块声明</p><ul><li>过滤阿里云上 centos_7 x86_64 镜像</li></ul><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">data </span><span style="color:#9ECBFF;">&quot;alicloud_images&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;images_ds&quot;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FDAEB7;font-style:italic;">owners</span><span style="color:#E1E4E8;">     </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;system&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FDAEB7;font-style:italic;">name_regex</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;^centos_7&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FDAEB7;font-style:italic;">architecture</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;x86_64&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// output 把值传递出去，给其他地方引用</span></span>
<span class="line"><span style="color:#E1E4E8;">output </span><span style="color:#9ECBFF;">&quot;first_image_id&quot;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FDAEB7;font-style:italic;">value</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;\${data.alicloud_images.images_ds.images.0.id}&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">data </span><span style="color:#032F62;">&quot;alicloud_images&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;images_ds&quot;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#B31D28;font-style:italic;">owners</span><span style="color:#24292E;">     </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;system&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#B31D28;font-style:italic;">name_regex</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;^centos_7&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#B31D28;font-style:italic;">architecture</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;x86_64&quot;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// output 把值传递出去，给其他地方引用</span></span>
<span class="line"><span style="color:#24292E;">output </span><span style="color:#032F62;">&quot;first_image_id&quot;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#B31D28;font-style:italic;">value</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;\${data.alicloud_images.images_ds.images.0.id}&quot;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h4 id="datsource-引用" tabindex="-1"><code>DatSource</code> 引用 <a class="header-anchor" href="#datsource-引用" aria-label="Permalink to &quot;\`DatSource\` 引用&quot;">​</a></h4><p>ecs<code>配置创建替换</code>image_id</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">resource </span><span style="color:#9ECBFF;">&quot;alicloud_instance&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;myecs&quot;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">availability_zone</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">var.region</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">security_groups</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">alicloud_security_group.group.*.id</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">instance_type</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;ecs.n1.tiny&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">system_disk_category</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;cloud_efficiency&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">svstem_disk_name</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;tf_svstem_disk_name&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">system_disk_description</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;tf_system_disk_description&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 私有 datasource output 变量，替换此处</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">image_id</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">data.alicloud_images.images_ds.images.0.id</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">instance_name</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;mytestecs&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">switch_id</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">alicloud_vswitch.vsw.id</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">internet_max_bandwidth_out</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">1</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">internet_charge_type</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;PayByTraffic&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#FDAEB7;font-style:italic;">password</span><span style="color:#E1E4E8;"> </span><span style="color:#FDAEB7;font-style:italic;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">&quot;root@123&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">resource </span><span style="color:#032F62;">&quot;alicloud_instance&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;myecs&quot;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">availability_zone</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">var.region</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">security_groups</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">alicloud_security_group.group.*.id</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">instance_type</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;ecs.n1.tiny&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">system_disk_category</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;cloud_efficiency&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">svstem_disk_name</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;tf_svstem_disk_name&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">system_disk_description</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;tf_system_disk_description&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 私有 datasource output 变量，替换此处</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">image_id</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">data.alicloud_images.images_ds.images.0.id</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">instance_name</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;mytestecs&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">switch_id</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">alicloud_vswitch.vsw.id</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">internet_max_bandwidth_out</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">1</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">internet_charge_type</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;PayByTraffic&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#B31D28;font-style:italic;">password</span><span style="color:#24292E;"> </span><span style="color:#B31D28;font-style:italic;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">&quot;root@123&quot;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div>`,44),t=[p];function e(c,r,i,y,E,u){return a(),n("div",null,t)}const f=s(o,[["render",e]]);export{_ as __pageData,f as default};
