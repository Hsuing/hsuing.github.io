import{_ as s,o as n,c as a,R as l}from"./chunks/framework.zUbWieqp.js";const B=JSON.parse('{"title":"1. PSQL概述","description":"","frontmatter":{},"headers":[],"relativePath":"guide/Database/pgSql/base/13-PSQL.md","filePath":"guide/Database/pgSql/base/13-PSQL.md","lastUpdated":1728986210000}'),p={name:"guide/Database/pgSql/base/13-PSQL.md"},o=l(`<h1 id="_1-psql概述" tabindex="-1">1. PSQL概述 <a class="header-anchor" href="#_1-psql概述" aria-label="Permalink to &quot;1. PSQL概述&quot;">​</a></h1><p>psql是PostgreSQL的一个命令行交互式的客户端，它可以通过内置的元命令或者sql语句查看和管理数据库对象。它是一个纯字符界面，能够通过tab键自动补全命令。</p><h1 id="_2-psql使用" tabindex="-1">2. PSQL使用 <a class="header-anchor" href="#_2-psql使用" aria-label="Permalink to &quot;2. PSQL使用&quot;">​</a></h1><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"></span>
<span class="line"><span style="color:#B392F0;">使用方法:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">psql</span><span style="color:#E1E4E8;"> [选项]... [数据库名称 [用户名称]]</span></span>
<span class="line"><span style="color:#B392F0;">通用选项:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-c,--command</span><span style="color:#E1E4E8;">=命令        </span><span style="color:#9ECBFF;">执行单一命令</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">SQL或内部指令</span><span style="color:#E1E4E8;">)</span><span style="color:#9ECBFF;">然后结束</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-d,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dbname=DBNAME</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">指定要连接的数据库</span><span style="color:#E1E4E8;"> (默认：</span><span style="color:#9ECBFF;">&quot;postgres&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-f,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--file=文件名</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">从文件中执行命令然后退出</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-l,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--list</span><span style="color:#E1E4E8;">               </span><span style="color:#9ECBFF;">列出所有可用的数据库,然后退出</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-v,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--set=,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--variable=NAME=VALUE</span></span>
<span class="line"><span style="color:#E1E4E8;">                           </span><span style="color:#B392F0;">设置psql变量NAME为VALUE</span></span>
<span class="line"><span style="color:#E1E4E8;">                           (</span><span style="color:#B392F0;">例如，-v</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ON_ERROR_STOP=</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-V,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--version</span><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">输出版本信息,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">然后退出</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-X,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--no-psqlrc</span><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">不读取启动文档</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">~/.psqlrc</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-1</span><span style="color:#E1E4E8;"> (</span><span style="color:#9ECBFF;">&quot;one&quot;</span><span style="color:#E1E4E8;">), --single-transaction</span></span>
<span class="line"><span style="color:#E1E4E8;">                           </span><span style="color:#B392F0;">作为一个单一事务来执行命令文件(如果是非交互型的</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-?,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--help[</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">options]</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">显示此帮助，然后退出</span></span>
<span class="line"><span style="color:#E1E4E8;">      --help</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">commands</span><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">列出反斜线命令，然后退出</span></span>
<span class="line"><span style="color:#E1E4E8;">      --help</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">variables</span><span style="color:#E1E4E8;">     </span><span style="color:#B392F0;">列出特殊变量，然后退出</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">输入和输出选项：</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-a,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--echo-all</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">显示所有来自于脚本的输入</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-b,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--echo-errors</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">回显失败的命令</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-e,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--echo-queries</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">显示发送给服务器的命令</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-E,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--echo-hidden</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">显示内部命令产生的查询</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-L,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--log-file=文件名</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">将会话日志写入文件</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-n,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--no-readline</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">禁用增强命令行编辑功能</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">readline</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-o,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--output=FILENAME</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">将查询结果写入文件</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">或</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#B392F0;">管道</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-q,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--quiet</span><span style="color:#E1E4E8;">              </span><span style="color:#9ECBFF;">以沉默模式运行</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">不显示消息，只有查询结果</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-s,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--single-step</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">单步模式</span><span style="color:#E1E4E8;"> (确认每个查询)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-S,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--single-line</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">单行模式</span><span style="color:#E1E4E8;"> (一行就是一条 </span><span style="color:#9ECBFF;">SQL</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">命令</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">输出格式选项</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-A,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--no-align</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">使用非对齐表格输出模式</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-F,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--field-separator=STRING</span></span>
<span class="line"><span style="color:#E1E4E8;">                           </span><span style="color:#B392F0;">为字段设置分隔符,用于不整齐的输出(默认：</span><span style="color:#B392F0;">&quot;|&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-H,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--html</span><span style="color:#E1E4E8;">               </span><span style="color:#9ECBFF;">HTML</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">表格输出模式</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-P,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--pset=变量[</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">参数]</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">设置将变量打印到参数的选项</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">查阅</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\p</span><span style="color:#9ECBFF;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">命令</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-R,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--record-separator=STRING</span></span>
<span class="line"><span style="color:#E1E4E8;">                           </span><span style="color:#B392F0;">为不整齐的输出设置字录的分隔符(默认：换行符号</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-t,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--tuples-only</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">只打印记录i</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-T,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--table-attr=文本</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">设定</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">HTML</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">表格标记属性（例如,宽度,边界</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-x,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--expanded</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">打开扩展表格输出</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-z,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--field-separator-zero</span></span>
<span class="line"><span style="color:#E1E4E8;">                           </span><span style="color:#B392F0;">为不整齐的输出设置字段分隔符为字节0</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-0,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--record-separator-zero</span></span>
<span class="line"><span style="color:#E1E4E8;">                           </span><span style="color:#B392F0;">为不整齐的输出设置记录分隔符为字节0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">联接选项:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-h,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--host=主机名</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">数据库服务器主机或socket目录</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">默认：</span><span style="color:#B392F0;">&quot;本地接口&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-p,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--port=端口</span><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">数据库服务器的端口</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">默认：</span><span style="color:#B392F0;">&quot;5432&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-U,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--username=用户名</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">指定数据库用户名</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">默认：</span><span style="color:#B392F0;">&quot;postgres&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-w,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--no-password</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">永远不提示输入口令</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-W,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--password</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">强制口令提示</span><span style="color:#E1E4E8;"> (自动)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">更多信息，请在psql中输入</span><span style="color:#B392F0;">&quot;\\?&quot;</span><span style="color:#B392F0;">(用于内部指令</span><span style="color:#E1E4E8;">)或者 </span><span style="color:#9ECBFF;">&quot;\\help&quot;</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">用于SQL命令</span><span style="color:#E1E4E8;">)，</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"></span>
<span class="line"><span style="color:#6F42C1;">使用方法:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">psql</span><span style="color:#24292E;"> [选项]... [数据库名称 [用户名称]]</span></span>
<span class="line"><span style="color:#6F42C1;">通用选项:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-c,--command</span><span style="color:#24292E;">=命令        </span><span style="color:#032F62;">执行单一命令</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">SQL或内部指令</span><span style="color:#24292E;">)</span><span style="color:#032F62;">然后结束</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-d,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dbname=DBNAME</span><span style="color:#24292E;">      </span><span style="color:#032F62;">指定要连接的数据库</span><span style="color:#24292E;"> (默认：</span><span style="color:#032F62;">&quot;postgres&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-f,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--file=文件名</span><span style="color:#24292E;">        </span><span style="color:#032F62;">从文件中执行命令然后退出</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-l,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--list</span><span style="color:#24292E;">               </span><span style="color:#032F62;">列出所有可用的数据库,然后退出</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-v,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--set=,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--variable=NAME=VALUE</span></span>
<span class="line"><span style="color:#24292E;">                           </span><span style="color:#6F42C1;">设置psql变量NAME为VALUE</span></span>
<span class="line"><span style="color:#24292E;">                           (</span><span style="color:#6F42C1;">例如，-v</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ON_ERROR_STOP=</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-V,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--version</span><span style="color:#24292E;">            </span><span style="color:#032F62;">输出版本信息,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">然后退出</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-X,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--no-psqlrc</span><span style="color:#24292E;">          </span><span style="color:#032F62;">不读取启动文档</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">~/.psqlrc</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-1</span><span style="color:#24292E;"> (</span><span style="color:#032F62;">&quot;one&quot;</span><span style="color:#24292E;">), --single-transaction</span></span>
<span class="line"><span style="color:#24292E;">                           </span><span style="color:#6F42C1;">作为一个单一事务来执行命令文件(如果是非交互型的</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-?,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--help[</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">options]</span><span style="color:#24292E;">     </span><span style="color:#032F62;">显示此帮助，然后退出</span></span>
<span class="line"><span style="color:#24292E;">      --help</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">commands</span><span style="color:#24292E;">      </span><span style="color:#6F42C1;">列出反斜线命令，然后退出</span></span>
<span class="line"><span style="color:#24292E;">      --help</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">variables</span><span style="color:#24292E;">     </span><span style="color:#6F42C1;">列出特殊变量，然后退出</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">输入和输出选项：</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-a,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--echo-all</span><span style="color:#24292E;">           </span><span style="color:#032F62;">显示所有来自于脚本的输入</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-b,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--echo-errors</span><span style="color:#24292E;">        </span><span style="color:#032F62;">回显失败的命令</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-e,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--echo-queries</span><span style="color:#24292E;">       </span><span style="color:#032F62;">显示发送给服务器的命令</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-E,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--echo-hidden</span><span style="color:#24292E;">        </span><span style="color:#032F62;">显示内部命令产生的查询</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-L,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--log-file=文件名</span><span style="color:#24292E;">    </span><span style="color:#032F62;">将会话日志写入文件</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-n,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--no-readline</span><span style="color:#24292E;">        </span><span style="color:#032F62;">禁用增强命令行编辑功能</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">readline</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-o,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--output=FILENAME</span><span style="color:#24292E;">    </span><span style="color:#032F62;">将查询结果写入文件</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">或</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">管道</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-q,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--quiet</span><span style="color:#24292E;">              </span><span style="color:#032F62;">以沉默模式运行</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">不显示消息，只有查询结果</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-s,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--single-step</span><span style="color:#24292E;">        </span><span style="color:#032F62;">单步模式</span><span style="color:#24292E;"> (确认每个查询)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-S,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--single-line</span><span style="color:#24292E;">        </span><span style="color:#032F62;">单行模式</span><span style="color:#24292E;"> (一行就是一条 </span><span style="color:#032F62;">SQL</span><span style="color:#24292E;"> </span><span style="color:#032F62;">命令</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">输出格式选项</span><span style="color:#24292E;"> </span><span style="color:#032F62;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-A,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--no-align</span><span style="color:#24292E;">           </span><span style="color:#032F62;">使用非对齐表格输出模式</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-F,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--field-separator=STRING</span></span>
<span class="line"><span style="color:#24292E;">                           </span><span style="color:#6F42C1;">为字段设置分隔符,用于不整齐的输出(默认：</span><span style="color:#6F42C1;">&quot;|&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-H,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--html</span><span style="color:#24292E;">               </span><span style="color:#032F62;">HTML</span><span style="color:#24292E;"> </span><span style="color:#032F62;">表格输出模式</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-P,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--pset=变量[</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">参数]</span><span style="color:#24292E;">   </span><span style="color:#032F62;">设置将变量打印到参数的选项</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">查阅</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\p</span><span style="color:#032F62;">set</span><span style="color:#24292E;"> </span><span style="color:#032F62;">命令</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-R,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--record-separator=STRING</span></span>
<span class="line"><span style="color:#24292E;">                           </span><span style="color:#6F42C1;">为不整齐的输出设置字录的分隔符(默认：换行符号</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-t,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--tuples-only</span><span style="color:#24292E;">        </span><span style="color:#032F62;">只打印记录i</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-T,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--table-attr=文本</span><span style="color:#24292E;">    </span><span style="color:#032F62;">设定</span><span style="color:#24292E;"> </span><span style="color:#032F62;">HTML</span><span style="color:#24292E;"> </span><span style="color:#032F62;">表格标记属性（例如,宽度,边界</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-x,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--expanded</span><span style="color:#24292E;">           </span><span style="color:#032F62;">打开扩展表格输出</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-z,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--field-separator-zero</span></span>
<span class="line"><span style="color:#24292E;">                           </span><span style="color:#6F42C1;">为不整齐的输出设置字段分隔符为字节0</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-0,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--record-separator-zero</span></span>
<span class="line"><span style="color:#24292E;">                           </span><span style="color:#6F42C1;">为不整齐的输出设置记录分隔符为字节0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">联接选项:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-h,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--host=主机名</span><span style="color:#24292E;">        </span><span style="color:#032F62;">数据库服务器主机或socket目录</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">默认：</span><span style="color:#6F42C1;">&quot;本地接口&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-p,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--port=端口</span><span style="color:#24292E;">          </span><span style="color:#032F62;">数据库服务器的端口</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">默认：</span><span style="color:#6F42C1;">&quot;5432&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-U,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--username=用户名</span><span style="color:#24292E;">    </span><span style="color:#032F62;">指定数据库用户名</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">默认：</span><span style="color:#6F42C1;">&quot;postgres&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-w,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--no-password</span><span style="color:#24292E;">        </span><span style="color:#032F62;">永远不提示输入口令</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-W,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--password</span><span style="color:#24292E;">           </span><span style="color:#032F62;">强制口令提示</span><span style="color:#24292E;"> (自动)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">更多信息，请在psql中输入</span><span style="color:#6F42C1;">&quot;\\?&quot;</span><span style="color:#6F42C1;">(用于内部指令</span><span style="color:#24292E;">)或者 </span><span style="color:#032F62;">&quot;\\help&quot;</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">用于SQL命令</span><span style="color:#24292E;">)，</span></span></code></pre></div><blockquote><p><a href="https://www.postgresql.org/docs/current/static/app-psql.html" target="_blank" rel="noreferrer">https://www.postgresql.org/docs/current/static/app-psql.html</a></p></blockquote><h1 id="_3-psql元命令" tabindex="-1">3. <strong>PSQL元命令</strong> <a class="header-anchor" href="#_3-psql元命令" aria-label="Permalink to &quot;3. **PSQL元命令**&quot;">​</a></h1><ul><li>语法</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"></span>
<span class="line"><span style="color:#6A737D;">## 查看SQL元命令</span></span>
<span class="line"><span style="color:#E1E4E8;">postgres</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">#</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">\\?</span></span>
<span class="line"><span style="color:#B392F0;">一般性</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\copyright</span><span style="color:#E1E4E8;">              </span><span style="color:#9ECBFF;">显示PostgreSQL的使用和发行许可条款</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\crosstabview</span><span style="color:#E1E4E8;"> [COLUMNS] 执行查询并且以交叉表显示结果</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\errverbose</span><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">以最冗长的形式显示最近的错误消息</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\g</span><span style="color:#E1E4E8;"> [文件] or;          </span><span style="color:#B392F0;">执行查询</span><span style="color:#E1E4E8;"> (并把结果写入文件或 </span><span style="color:#F97583;">|</span><span style="color:#B392F0;">管道</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\gdesc</span><span style="color:#E1E4E8;">                 </span><span style="color:#9ECBFF;">描述查询结果，而不执行它</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\gexec</span><span style="color:#E1E4E8;">                 </span><span style="color:#9ECBFF;">执行策略，然后执行其结果中的每个值</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\gset</span><span style="color:#E1E4E8;"> [PREFIX]         执行查询并把结果存到psql变量中</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\gx</span><span style="color:#E1E4E8;"> [FILE]             就像</span><span style="color:#79B8FF;">\\g</span><span style="color:#E1E4E8;">,但强制扩展输出模式</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\q</span><span style="color:#E1E4E8;">             </span><span style="color:#9ECBFF;">退出</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">psql</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\watch</span><span style="color:#E1E4E8;"> [SEC]          每隔SEC秒执行一次查询</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">帮助</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\?</span><span style="color:#E1E4E8;"> [commands]          显示反斜线命令的帮助</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">options</span><span style="color:#E1E4E8;">             </span><span style="color:#9ECBFF;">显示</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">psql</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">命令行选项的帮助</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">variables</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">显示特殊变量的帮助</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\h</span><span style="color:#E1E4E8;"> [名称]          SQL命令语法上的说明，用</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">显示全部命令的语法说明</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">查询缓存区</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\e</span><span style="color:#E1E4E8;"> [FILE] [LINE]        使用外部编辑器编辑查询缓存区(</span><span style="color:#B392F0;">或文件</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\ef</span><span style="color:#E1E4E8;"> [FUNCNAME [LINE]]   使用外部编辑器编辑函数定义</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\ev</span><span style="color:#E1E4E8;"> [VIEWNAME [LINE]]  用外部编辑器编辑视图定义</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\p</span><span style="color:#E1E4E8;">                    </span><span style="color:#9ECBFF;">显示查询缓存区的内容</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\r</span><span style="color:#E1E4E8;">                     </span><span style="color:#9ECBFF;">重置</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">清除</span><span style="color:#E1E4E8;">)</span><span style="color:#9ECBFF;">查询缓存区</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\s</span><span style="color:#E1E4E8;"> [文件]              显示历史记录或将历史记录保存在文件中</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\w</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">文件</span><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">将查询缓存区的内容写入文件</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">输入/输出</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\copy</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">...</span><span style="color:#E1E4E8;">              </span><span style="color:#9ECBFF;">执行</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">SQL</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">COPY，将数据流发送到客户端主机</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\echo</span><span style="color:#E1E4E8;"> [字符串]         将字符串写到标准输出</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">文件</span><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">从文件中执行命令</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\ir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">FILE</span><span style="color:#E1E4E8;">               </span><span style="color:#9ECBFF;">与</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\i</span><span style="color:#9ECBFF;">类似,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">但是相对于当前脚本的位置</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\o</span><span style="color:#E1E4E8;"> [文件]              将全部查询结果写入文件或 </span><span style="color:#F97583;">|</span><span style="color:#B392F0;">管道</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\qecho</span><span style="color:#E1E4E8;"> [字符串]        将字符串写到查询输出串流(</span><span style="color:#B392F0;">参考</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\o</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">条件</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\if</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">EXPR</span><span style="color:#E1E4E8;">               </span><span style="color:#9ECBFF;">开始条件块</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\elif</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">EXPR</span><span style="color:#E1E4E8;">             </span><span style="color:#9ECBFF;">当前条件块内的备选方案</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\else</span><span style="color:#E1E4E8;">                  </span><span style="color:#9ECBFF;">当前条件块内的最终备选方案</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\endif</span><span style="color:#E1E4E8;">                 </span><span style="color:#9ECBFF;">条件块的结尾</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">资讯性</span></span>
<span class="line"><span style="color:#E1E4E8;">  (</span><span style="color:#B392F0;">选项:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">S</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">显示系统对象,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">其余的详细信息</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\d[S+]</span><span style="color:#E1E4E8;">                 </span><span style="color:#9ECBFF;">列出表,视图和序列</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\d[S+]</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">名称</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">描述表，视图，序列，或索引</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\da[S]</span><span style="color:#E1E4E8;">  [模式]         列出聚合函数</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dA[+]</span><span style="color:#E1E4E8;">  [模式]         列出访问方法</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\db[+]</span><span style="color:#E1E4E8;">  [模式]         列出表空间</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dc[S+]</span><span style="color:#E1E4E8;"> [模式]         列表转换</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dC[+]</span><span style="color:#E1E4E8;">  [模式]         列出类型强制转换</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dd[S]</span><span style="color:#E1E4E8;">  [模式]         显示没有在别处显示的对象描述</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dD[S+]</span><span style="color:#E1E4E8;"> [模式]         列出共同值域</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\ddp</span><span style="color:#E1E4E8;">    [模式]         列出默认权限</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dE[S+]</span><span style="color:#E1E4E8;"> [模式]         列出引用表</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\det[+]</span><span style="color:#E1E4E8;"> [模式]         列出引用表</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\des[+]</span><span style="color:#E1E4E8;"> [模式]         列出外部服务器</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\deu[+]</span><span style="color:#E1E4E8;"> [模式]         列出用户映射</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">\\dew[+]</span><span style="color:#E1E4E8;"> [模式]          列出外部数据封装器</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\df[anptw][S+]</span><span style="color:#E1E4E8;"> [PATRN] 列出[只包括 聚合/常规/程序/触发器/窗口]函数 </span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dF[+]</span><span style="color:#E1E4E8;">  [模式]         列出文本搜索配置</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dFd[+]</span><span style="color:#E1E4E8;"> [模式]         列出文本搜索字典</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">\\dFp[+]</span><span style="color:#E1E4E8;"> [模式]          列出文本搜索解析器</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dFt[+]</span><span style="color:#E1E4E8;"> [模式]         列出文本搜索模版</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dg[S+]</span><span style="color:#E1E4E8;"> [模式]         列出角色</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">\\di[S+]</span><span style="color:#E1E4E8;"> [模式]          列出索引</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dl</span><span style="color:#E1E4E8;">                    </span><span style="color:#9ECBFF;">列出大对象，</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">功能与</span><span style="color:#79B8FF;">\\l</span><span style="color:#9ECBFF;">o_list相同</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dL[S+]</span><span style="color:#E1E4E8;"> [模式]         列出所有过程语言</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dm[S+]</span><span style="color:#E1E4E8;"> [模式]         列出所有物化视图</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dn[S+]</span><span style="color:#E1E4E8;"> [模式]         列出所有模式</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\do[S+]</span><span style="color:#E1E4E8;"> [PATTERN]      list operators</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dO[S+]</span><span style="color:#E1E4E8;"> [模式]         列出所有校对规则</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dp</span><span style="color:#E1E4E8;">     [模式]         列出表，视图和序列的访问权限</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\drds</span><span style="color:#E1E4E8;"> [模式1 [模式2]]  列出每个数据库的角色设置</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dRp[+]</span><span style="color:#E1E4E8;"> [模式]         列出复制出版物</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dRs[+]</span><span style="color:#E1E4E8;"> [模式]         列出复制订阅</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\ds[S+]</span><span style="color:#E1E4E8;"> [模式]         列出序列</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dt[S+]</span><span style="color:#E1E4E8;"> [模式]         列出表</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dT[S+]</span><span style="color:#E1E4E8;"> [模式]         列出数据类型</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\du[S+]</span><span style="color:#E1E4E8;"> [模式]         列出角色</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dv[S+]</span><span style="color:#E1E4E8;"> [模式]         列出视图</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dx[+]</span><span style="color:#E1E4E8;">  [模式]         列出扩展</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\dy[+]</span><span style="color:#E1E4E8;">  [PATTERN]      list event triggers</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\l[+]</span><span style="color:#E1E4E8;">   [模式]         列出所有数据库</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\sf[+]</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">FUNCNAME</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">显示一个函数的定义</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\sv[+]</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">VIEWNAME</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">显示一个视图的定义</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\z</span><span style="color:#E1E4E8;">      [模式]         和</span><span style="color:#79B8FF;">\\d</span><span style="color:#E1E4E8;">p的功能相同</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">格式化</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\a</span><span style="color:#E1E4E8;">                     </span><span style="color:#9ECBFF;">在非对齐模式和对齐模式之间切换</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\C</span><span style="color:#E1E4E8;"> [字符串]            设置表的标题，或如果没有的标题就取消</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\f</span><span style="color:#E1E4E8;"> [字符串]            显示或设定非对齐模式查询输出的字段分隔符</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\H</span><span style="color:#E1E4E8;">                     </span><span style="color:#9ECBFF;">切换HTML输出模式</span><span style="color:#E1E4E8;"> (目前是 </span><span style="color:#9ECBFF;">关闭</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\pset</span><span style="color:#E1E4E8;"> [NAME [VALUE]]   设置表输出选项</span></span>
<span class="line"><span style="color:#E1E4E8;">                         (</span><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">:=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{border</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">columns</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">expanded</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">fieldsep</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">fieldsep_zero</span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#E1E4E8;">                         </span><span style="color:#B392F0;">footer</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">format</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">linestyle</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">null</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">numericlocale</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">pager</span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#E1E4E8;">                         </span><span style="color:#B392F0;">pager_min_lines</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">recordsep</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">recordsep_zero</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">tableattr</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">title</span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#E1E4E8;">                         </span><span style="color:#B392F0;">tuples_only</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">unicode_border_linestyle</span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#E1E4E8;">                         </span><span style="color:#B392F0;">unicode_column_linestyle</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">unicode_header_linestyle}</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\t</span><span style="color:#E1E4E8;"> [开</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">关]</span><span style="color:#E1E4E8;">             </span><span style="color:#9ECBFF;">只显示记录</span><span style="color:#E1E4E8;"> (目前是 </span><span style="color:#9ECBFF;">关闭</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\T</span><span style="color:#E1E4E8;"> [字符串]            设置HTML </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">表格</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">标签属性, 或者如果没有的话取消设置</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\x</span><span style="color:#E1E4E8;"> [on</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">off</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">auto]</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">切换扩展输出模式</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">目前是</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">关闭</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">连接</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\c[onnect]</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{[DBNAME</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">USER</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">HOST</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PORT</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">-]</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">conninfo}</span></span>
<span class="line"><span style="color:#E1E4E8;">                         </span><span style="color:#B392F0;">连接到新数据库（当前是</span><span style="color:#B392F0;">&quot;postgres&quot;</span><span style="color:#B392F0;">）</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\conninfo</span><span style="color:#E1E4E8;">              </span><span style="color:#9ECBFF;">显示当前连接的相关信息</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\encoding</span><span style="color:#E1E4E8;"> [编码名称]  显示或设定客户端编码</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\password</span><span style="color:#E1E4E8;"> [USERNAME]   安全地为用户更改口令</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">操作系统</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\cd</span><span style="color:#E1E4E8;"> [目录]             更改目前的工作目录</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\setenv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">NAME</span><span style="color:#E1E4E8;"> [VALUE]   设置或清空环境变量</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">\\timing</span><span style="color:#E1E4E8;"> [开</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">关]</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">切换命令计时开关</span><span style="color:#E1E4E8;"> (目前是 </span><span style="color:#9ECBFF;">关闭</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\!</span><span style="color:#E1E4E8;"> [命令]              在 shell中执行命令或启动一个交互式shell</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">变量</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\prompt</span><span style="color:#E1E4E8;"> [文本] 名称    提示用户设定内部变量</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\set</span><span style="color:#E1E4E8;"> [名称 [值数]]     设定内部变量，若无参数则列出全部变量</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\unset</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">名称</span><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">清空</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">删除</span><span style="color:#E1E4E8;">)</span><span style="color:#9ECBFF;">内部变量</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">大对象</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\lo_export</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">LOBOID</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">文件</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\lo_import</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">文件</span><span style="color:#E1E4E8;"> [注释]</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\lo_list</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">\\lo_unlink</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">LOBOID</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">大对象运算</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"></span>
<span class="line"><span style="color:#6A737D;">## 查看SQL元命令</span></span>
<span class="line"><span style="color:#24292E;">postgres</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">#</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">\\?</span></span>
<span class="line"><span style="color:#6F42C1;">一般性</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\copyright</span><span style="color:#24292E;">              </span><span style="color:#032F62;">显示PostgreSQL的使用和发行许可条款</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\crosstabview</span><span style="color:#24292E;"> [COLUMNS] 执行查询并且以交叉表显示结果</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\errverbose</span><span style="color:#24292E;">            </span><span style="color:#032F62;">以最冗长的形式显示最近的错误消息</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\g</span><span style="color:#24292E;"> [文件] or;          </span><span style="color:#6F42C1;">执行查询</span><span style="color:#24292E;"> (并把结果写入文件或 </span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">管道</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\gdesc</span><span style="color:#24292E;">                 </span><span style="color:#032F62;">描述查询结果，而不执行它</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\gexec</span><span style="color:#24292E;">                 </span><span style="color:#032F62;">执行策略，然后执行其结果中的每个值</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\gset</span><span style="color:#24292E;"> [PREFIX]         执行查询并把结果存到psql变量中</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\gx</span><span style="color:#24292E;"> [FILE]             就像</span><span style="color:#005CC5;">\\g</span><span style="color:#24292E;">,但强制扩展输出模式</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\q</span><span style="color:#24292E;">             </span><span style="color:#032F62;">退出</span><span style="color:#24292E;"> </span><span style="color:#032F62;">psql</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\watch</span><span style="color:#24292E;"> [SEC]          每隔SEC秒执行一次查询</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">帮助</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\?</span><span style="color:#24292E;"> [commands]          显示反斜线命令的帮助</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\?</span><span style="color:#24292E;"> </span><span style="color:#032F62;">options</span><span style="color:#24292E;">             </span><span style="color:#032F62;">显示</span><span style="color:#24292E;"> </span><span style="color:#032F62;">psql</span><span style="color:#24292E;"> </span><span style="color:#032F62;">命令行选项的帮助</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\?</span><span style="color:#24292E;"> </span><span style="color:#032F62;">variables</span><span style="color:#24292E;">           </span><span style="color:#032F62;">显示特殊变量的帮助</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\h</span><span style="color:#24292E;"> [名称]          SQL命令语法上的说明，用</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">显示全部命令的语法说明</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">查询缓存区</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\e</span><span style="color:#24292E;"> [FILE] [LINE]        使用外部编辑器编辑查询缓存区(</span><span style="color:#6F42C1;">或文件</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\ef</span><span style="color:#24292E;"> [FUNCNAME [LINE]]   使用外部编辑器编辑函数定义</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\ev</span><span style="color:#24292E;"> [VIEWNAME [LINE]]  用外部编辑器编辑视图定义</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\p</span><span style="color:#24292E;">                    </span><span style="color:#032F62;">显示查询缓存区的内容</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\r</span><span style="color:#24292E;">                     </span><span style="color:#032F62;">重置</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">清除</span><span style="color:#24292E;">)</span><span style="color:#032F62;">查询缓存区</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\s</span><span style="color:#24292E;"> [文件]              显示历史记录或将历史记录保存在文件中</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\w</span><span style="color:#24292E;"> </span><span style="color:#032F62;">文件</span><span style="color:#24292E;">                </span><span style="color:#032F62;">将查询缓存区的内容写入文件</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">输入/输出</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\copy</span><span style="color:#24292E;"> </span><span style="color:#032F62;">...</span><span style="color:#24292E;">              </span><span style="color:#032F62;">执行</span><span style="color:#24292E;"> </span><span style="color:#032F62;">SQL</span><span style="color:#24292E;"> </span><span style="color:#032F62;">COPY，将数据流发送到客户端主机</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\echo</span><span style="color:#24292E;"> [字符串]         将字符串写到标准输出</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">文件</span><span style="color:#24292E;">                </span><span style="color:#032F62;">从文件中执行命令</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\ir</span><span style="color:#24292E;"> </span><span style="color:#032F62;">FILE</span><span style="color:#24292E;">               </span><span style="color:#032F62;">与</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\i</span><span style="color:#032F62;">类似,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">但是相对于当前脚本的位置</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\o</span><span style="color:#24292E;"> [文件]              将全部查询结果写入文件或 </span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">管道</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\qecho</span><span style="color:#24292E;"> [字符串]        将字符串写到查询输出串流(</span><span style="color:#6F42C1;">参考</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\o</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">条件</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\if</span><span style="color:#24292E;"> </span><span style="color:#032F62;">EXPR</span><span style="color:#24292E;">               </span><span style="color:#032F62;">开始条件块</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\elif</span><span style="color:#24292E;"> </span><span style="color:#032F62;">EXPR</span><span style="color:#24292E;">             </span><span style="color:#032F62;">当前条件块内的备选方案</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\else</span><span style="color:#24292E;">                  </span><span style="color:#032F62;">当前条件块内的最终备选方案</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\endif</span><span style="color:#24292E;">                 </span><span style="color:#032F62;">条件块的结尾</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">资讯性</span></span>
<span class="line"><span style="color:#24292E;">  (</span><span style="color:#6F42C1;">选项:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">S</span><span style="color:#24292E;"> </span><span style="color:#032F62;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">显示系统对象,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">其余的详细信息</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\d[S+]</span><span style="color:#24292E;">                 </span><span style="color:#032F62;">列出表,视图和序列</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\d[S+]</span><span style="color:#24292E;">  </span><span style="color:#032F62;">名称</span><span style="color:#24292E;">           </span><span style="color:#032F62;">描述表，视图，序列，或索引</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\da[S]</span><span style="color:#24292E;">  [模式]         列出聚合函数</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dA[+]</span><span style="color:#24292E;">  [模式]         列出访问方法</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\db[+]</span><span style="color:#24292E;">  [模式]         列出表空间</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dc[S+]</span><span style="color:#24292E;"> [模式]         列表转换</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dC[+]</span><span style="color:#24292E;">  [模式]         列出类型强制转换</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dd[S]</span><span style="color:#24292E;">  [模式]         显示没有在别处显示的对象描述</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dD[S+]</span><span style="color:#24292E;"> [模式]         列出共同值域</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\ddp</span><span style="color:#24292E;">    [模式]         列出默认权限</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dE[S+]</span><span style="color:#24292E;"> [模式]         列出引用表</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\det[+]</span><span style="color:#24292E;"> [模式]         列出引用表</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\des[+]</span><span style="color:#24292E;"> [模式]         列出外部服务器</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\deu[+]</span><span style="color:#24292E;"> [模式]         列出用户映射</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">\\dew[+]</span><span style="color:#24292E;"> [模式]          列出外部数据封装器</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\df[anptw][S+]</span><span style="color:#24292E;"> [PATRN] 列出[只包括 聚合/常规/程序/触发器/窗口]函数 </span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dF[+]</span><span style="color:#24292E;">  [模式]         列出文本搜索配置</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dFd[+]</span><span style="color:#24292E;"> [模式]         列出文本搜索字典</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">\\dFp[+]</span><span style="color:#24292E;"> [模式]          列出文本搜索解析器</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dFt[+]</span><span style="color:#24292E;"> [模式]         列出文本搜索模版</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dg[S+]</span><span style="color:#24292E;"> [模式]         列出角色</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">\\di[S+]</span><span style="color:#24292E;"> [模式]          列出索引</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dl</span><span style="color:#24292E;">                    </span><span style="color:#032F62;">列出大对象，</span><span style="color:#24292E;"> </span><span style="color:#032F62;">功能与</span><span style="color:#005CC5;">\\l</span><span style="color:#032F62;">o_list相同</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dL[S+]</span><span style="color:#24292E;"> [模式]         列出所有过程语言</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dm[S+]</span><span style="color:#24292E;"> [模式]         列出所有物化视图</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dn[S+]</span><span style="color:#24292E;"> [模式]         列出所有模式</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\do[S+]</span><span style="color:#24292E;"> [PATTERN]      list operators</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dO[S+]</span><span style="color:#24292E;"> [模式]         列出所有校对规则</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dp</span><span style="color:#24292E;">     [模式]         列出表，视图和序列的访问权限</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\drds</span><span style="color:#24292E;"> [模式1 [模式2]]  列出每个数据库的角色设置</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dRp[+]</span><span style="color:#24292E;"> [模式]         列出复制出版物</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dRs[+]</span><span style="color:#24292E;"> [模式]         列出复制订阅</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\ds[S+]</span><span style="color:#24292E;"> [模式]         列出序列</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dt[S+]</span><span style="color:#24292E;"> [模式]         列出表</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dT[S+]</span><span style="color:#24292E;"> [模式]         列出数据类型</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\du[S+]</span><span style="color:#24292E;"> [模式]         列出角色</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dv[S+]</span><span style="color:#24292E;"> [模式]         列出视图</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dx[+]</span><span style="color:#24292E;">  [模式]         列出扩展</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\dy[+]</span><span style="color:#24292E;">  [PATTERN]      list event triggers</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\l[+]</span><span style="color:#24292E;">   [模式]         列出所有数据库</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\sf[+]</span><span style="color:#24292E;">  </span><span style="color:#032F62;">FUNCNAME</span><span style="color:#24292E;">       </span><span style="color:#032F62;">显示一个函数的定义</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\sv[+]</span><span style="color:#24292E;">  </span><span style="color:#032F62;">VIEWNAME</span><span style="color:#24292E;">       </span><span style="color:#032F62;">显示一个视图的定义</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\z</span><span style="color:#24292E;">      [模式]         和</span><span style="color:#005CC5;">\\d</span><span style="color:#24292E;">p的功能相同</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">格式化</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\a</span><span style="color:#24292E;">                     </span><span style="color:#032F62;">在非对齐模式和对齐模式之间切换</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\C</span><span style="color:#24292E;"> [字符串]            设置表的标题，或如果没有的标题就取消</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\f</span><span style="color:#24292E;"> [字符串]            显示或设定非对齐模式查询输出的字段分隔符</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\H</span><span style="color:#24292E;">                     </span><span style="color:#032F62;">切换HTML输出模式</span><span style="color:#24292E;"> (目前是 </span><span style="color:#032F62;">关闭</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\pset</span><span style="color:#24292E;"> [NAME [VALUE]]   设置表输出选项</span></span>
<span class="line"><span style="color:#24292E;">                         (</span><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;"> </span><span style="color:#032F62;">:=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{border</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">columns</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">expanded</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">fieldsep</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">fieldsep_zero</span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#24292E;">                         </span><span style="color:#6F42C1;">footer</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">format</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">linestyle</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">null</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">numericlocale</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">pager</span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#24292E;">                         </span><span style="color:#6F42C1;">pager_min_lines</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">recordsep</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">recordsep_zero</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">tableattr</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">title</span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#24292E;">                         </span><span style="color:#6F42C1;">tuples_only</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">unicode_border_linestyle</span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#24292E;">                         </span><span style="color:#6F42C1;">unicode_column_linestyle</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">unicode_header_linestyle}</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\t</span><span style="color:#24292E;"> [开</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">关]</span><span style="color:#24292E;">             </span><span style="color:#032F62;">只显示记录</span><span style="color:#24292E;"> (目前是 </span><span style="color:#032F62;">关闭</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\T</span><span style="color:#24292E;"> [字符串]            设置HTML </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">表格</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">标签属性, 或者如果没有的话取消设置</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\x</span><span style="color:#24292E;"> [on</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">off</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">auto]</span><span style="color:#24292E;">       </span><span style="color:#032F62;">切换扩展输出模式</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">目前是</span><span style="color:#24292E;"> </span><span style="color:#032F62;">关闭</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">连接</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\c[onnect]</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{[DBNAME</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">USER</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">HOST</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">PORT</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">-]</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">conninfo}</span></span>
<span class="line"><span style="color:#24292E;">                         </span><span style="color:#6F42C1;">连接到新数据库（当前是</span><span style="color:#6F42C1;">&quot;postgres&quot;</span><span style="color:#6F42C1;">）</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\conninfo</span><span style="color:#24292E;">              </span><span style="color:#032F62;">显示当前连接的相关信息</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\encoding</span><span style="color:#24292E;"> [编码名称]  显示或设定客户端编码</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\password</span><span style="color:#24292E;"> [USERNAME]   安全地为用户更改口令</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">操作系统</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\cd</span><span style="color:#24292E;"> [目录]             更改目前的工作目录</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\setenv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">NAME</span><span style="color:#24292E;"> [VALUE]   设置或清空环境变量</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">\\timing</span><span style="color:#24292E;"> [开</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">关]</span><span style="color:#24292E;">         </span><span style="color:#032F62;">切换命令计时开关</span><span style="color:#24292E;"> (目前是 </span><span style="color:#032F62;">关闭</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\!</span><span style="color:#24292E;"> [命令]              在 shell中执行命令或启动一个交互式shell</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">变量</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\prompt</span><span style="color:#24292E;"> [文本] 名称    提示用户设定内部变量</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\set</span><span style="color:#24292E;"> [名称 [值数]]     设定内部变量，若无参数则列出全部变量</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\unset</span><span style="color:#24292E;"> </span><span style="color:#032F62;">名称</span><span style="color:#24292E;">            </span><span style="color:#032F62;">清空</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">删除</span><span style="color:#24292E;">)</span><span style="color:#032F62;">内部变量</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">大对象</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\lo_export</span><span style="color:#24292E;"> </span><span style="color:#032F62;">LOBOID</span><span style="color:#24292E;"> </span><span style="color:#032F62;">文件</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\lo_import</span><span style="color:#24292E;"> </span><span style="color:#032F62;">文件</span><span style="color:#24292E;"> [注释]</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\lo_list</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">\\lo_unlink</span><span style="color:#24292E;"> </span><span style="color:#032F62;">LOBOID</span><span style="color:#24292E;">      </span><span style="color:#032F62;">大对象运算</span></span></code></pre></div><h1 id="_4-常用操作" tabindex="-1">4. 常用操作 <a class="header-anchor" href="#_4-常用操作" aria-label="Permalink to &quot;4. 常用操作&quot;">​</a></h1><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">## 查看客户端工具版本信息</span></span>
<span class="line"><span style="color:#B392F0;">psql</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">## 使用-c参数执行查询数据库版本信息</span></span>
<span class="line"><span style="color:#B392F0;">psql -c &quot;select version</span><span style="color:#E1E4E8;">()</span><span style="color:#9ECBFF;">&quot;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">## psql登录到数据库后去执行操作系统的命令</span></span>
<span class="line"><span style="color:#9ECBFF;">\\! top</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">## psql登录到数据库</span></span>
<span class="line"><span style="color:#9ECBFF;">psql -h 127.0.0.1 -U postgres -d postgres </span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">## 查看当前连接状态</span></span>
<span class="line"><span style="color:#9ECBFF;">\\conninfo</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">## 查看当前数据库</span></span>
<span class="line"><span style="color:#9ECBFF;">select current_database();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">## 查看当前连接用户</span></span>
<span class="line"><span style="color:#9ECBFF;">select * from current_user;select user;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">## 查看所有数据库</span></span>
<span class="line"><span style="color:#9ECBFF;">select * from pg_database;\\l+</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">## 查看数据库用户情况</span></span>
<span class="line"><span style="color:#9ECBFF;">\\du </span></span>
<span class="line"><span style="color:#9ECBFF;">select * from pg_user;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">## 切换数据库</span></span>
<span class="line"><span style="color:#9ECBFF;">\\c &lt;dbname&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">## 使用某个用户连接到某个数据库</span></span>
<span class="line"><span style="color:#9ECBFF;">\\c &lt;dbname&gt; &lt;username&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">## 查看当前数据库下的对象</span></span>
<span class="line"><span style="color:#9ECBFF;">\\d+</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">## 查看当数数据库下的表</span></span>
<span class="line"><span style="color:#9ECBFF;">\\dt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">## 查看当前数据库下的索引</span></span>
<span class="line"><span style="color:#9ECBFF;">\\di</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">#查看命令执行时间</span></span>
<span class="line"><span style="color:#9ECBFF;">\\timing on</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">## 设置自动提交（默认情况）</span></span>
<span class="line"><span style="color:#9ECBFF;">\\set autocommit on</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">## 查看客户端工具版本信息</span></span>
<span class="line"><span style="color:#6F42C1;">psql</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span><span style="color:#24292E;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">## 使用-c参数执行查询数据库版本信息</span></span>
<span class="line"><span style="color:#6F42C1;">psql -c &quot;select version</span><span style="color:#24292E;">()</span><span style="color:#032F62;">&quot;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">## psql登录到数据库后去执行操作系统的命令</span></span>
<span class="line"><span style="color:#032F62;">\\! top</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">## psql登录到数据库</span></span>
<span class="line"><span style="color:#032F62;">psql -h 127.0.0.1 -U postgres -d postgres </span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">## 查看当前连接状态</span></span>
<span class="line"><span style="color:#032F62;">\\conninfo</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">## 查看当前数据库</span></span>
<span class="line"><span style="color:#032F62;">select current_database();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">## 查看当前连接用户</span></span>
<span class="line"><span style="color:#032F62;">select * from current_user;select user;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">## 查看所有数据库</span></span>
<span class="line"><span style="color:#032F62;">select * from pg_database;\\l+</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">## 查看数据库用户情况</span></span>
<span class="line"><span style="color:#032F62;">\\du </span></span>
<span class="line"><span style="color:#032F62;">select * from pg_user;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">## 切换数据库</span></span>
<span class="line"><span style="color:#032F62;">\\c &lt;dbname&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">## 使用某个用户连接到某个数据库</span></span>
<span class="line"><span style="color:#032F62;">\\c &lt;dbname&gt; &lt;username&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">## 查看当前数据库下的对象</span></span>
<span class="line"><span style="color:#032F62;">\\d+</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">## 查看当数数据库下的表</span></span>
<span class="line"><span style="color:#032F62;">\\dt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">## 查看当前数据库下的索引</span></span>
<span class="line"><span style="color:#032F62;">\\di</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">#查看命令执行时间</span></span>
<span class="line"><span style="color:#032F62;">\\timing on</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">## 设置自动提交（默认情况）</span></span>
<span class="line"><span style="color:#032F62;">\\set autocommit on</span></span></code></pre></div><h1 id="_5-psql定制脚本" tabindex="-1">5.PSql定制脚本 <a class="header-anchor" href="#_5-psql定制脚本" aria-label="Permalink to &quot;5.PSql定制脚本&quot;">​</a></h1><p><a href="https://github.com/NikolayS/postgres_dba" target="_blank" rel="noreferrer">https://github.com/NikolayS/postgres_dba</a></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[ptgres@db_prod </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]$ cat .psqlrc</span></span>
<span class="line"><span style="color:#B392F0;">\\echo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">🧐</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">🐘</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">postgres_dba</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">6.0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">installed.</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Use</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;:dba&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">see</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">menu</span></span>
<span class="line"><span style="color:#B392F0;">\\set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dba</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;\\\\i /home/ptgres/postgres_dba-6.0/start.psql&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[ptgres@db_prod </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]$ cat .psqlrc</span></span>
<span class="line"><span style="color:#6F42C1;">\\echo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">🧐</span><span style="color:#24292E;"> </span><span style="color:#032F62;">🐘</span><span style="color:#24292E;"> </span><span style="color:#032F62;">postgres_dba</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">6.0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">installed.</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Use</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;:dba&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">see</span><span style="color:#24292E;"> </span><span style="color:#032F62;">menu</span></span>
<span class="line"><span style="color:#6F42C1;">\\set</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dba</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;\\\\i /home/ptgres/postgres_dba-6.0/start.psql&#39;</span></span></code></pre></div><h3 id="脚本扩展方法" tabindex="-1">脚本扩展方法 <a class="header-anchor" href="#脚本扩展方法" aria-label="Permalink to &quot;脚本扩展方法&quot;">​</a></h3><p>只需要将自己的sql脚本添加到sql/这个目录下面即可</p><p>然后执行generate.sh脚本初始化：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">./init/generate.sh</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">./init/generate.sh</span></span></code></pre></div><p>然后我们去start.psql中可以为我们新增的选项加点注释：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">...</span></span>
<span class="line"><span style="color:#B392F0;">\\echo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;  c1 – List the count of objects for each Database Schema&#39;</span></span>
<span class="line"><span style="color:#79B8FF;">...</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">...</span></span>
<span class="line"><span style="color:#6F42C1;">\\echo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;  c1 – List the count of objects for each Database Schema&#39;</span></span>
<span class="line"><span style="color:#005CC5;">...</span></span></code></pre></div><h2 id="_5-1-第二种方式" tabindex="-1">5.1 第二种方式 <a class="header-anchor" href="#_5-1-第二种方式" aria-label="Permalink to &quot;5.1 第二种方式&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">[postgres@localhost ~]$ cat ~/.psqlrc</span></span>
<span class="line"><span style="color:#e1e4e8;">\\set active_session &#39; select pid,usename,datname,query,client_addr from pg_stat_activity where pid &lt;&gt; pg_backend_pid() and state=\\&#39;active\\&#39; order by query;&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">[postgres@localhost ~]$ cat ~/.psqlrc</span></span>
<span class="line"><span style="color:#24292e;">\\set active_session &#39; select pid,usename,datname,query,client_addr from pg_stat_activity where pid &lt;&gt; pg_backend_pid() and state=\\&#39;active\\&#39; order by query;&#39;</span></span></code></pre></div><ul><li>调用</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">使用方法：冒号后面接变量名</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">postgres</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">#</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">:active_session</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">pid</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">usename</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">datname</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">query</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">client_addr</span></span>
<span class="line"><span style="color:#B392F0;">-----+---------+---------+-------+-------------</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rows</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">使用方法：冒号后面接变量名</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">postgres</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">#</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">:active_session</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">pid</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">usename</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">datname</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">query</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">client_addr</span></span>
<span class="line"><span style="color:#6F42C1;">-----+---------+---------+-------+-------------</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#6F42C1;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rows</span><span style="color:#24292E;">)</span></span></code></pre></div>`,23),e=[o];function c(t,r,E,y,F,i){return n(),a("div",null,e)}const d=s(p,[["render",c]]);export{B as __pageData,d as default};
