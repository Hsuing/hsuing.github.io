import{_ as s,o as a,c as n,R as l}from"./chunks/framework.zUbWieqp.js";const h=JSON.parse('{"title":"概述 #","description":"","frontmatter":{},"headers":[],"relativePath":"guide/go/交叉编译.md","filePath":"guide/go/交叉编译.md","lastUpdated":1701928035000}'),o={name:"guide/go/交叉编译.md"},p=l(`<h1 id="概述" tabindex="-1">概述 <a href="https://golang.dbwu.tech/engineering/compiling_cross_platform/#%E6%A6%82%E8%BF%B0" target="_blank" rel="noreferrer">#</a> <a class="header-anchor" href="#概述" aria-label="Permalink to &quot;概述 [#](https://golang.dbwu.tech/engineering/compiling_cross_platform/#概述)&quot;">​</a></h1><p>交叉编译，也称跨平台编译，就是在一个平台上编译源代码，生成结果为另一个平台上的可执行代码。 这里的平台包含两个概念：体系架构 (如 AMD, ARM) 和 操作系统 (如 Linux, Windows）。 同一个体系架构可以运行不同的操作系统，反过来，同一个操作系统也可以运行在不同的体系架构上。</p><blockquote><p>Go 实现跨平台编译的思想其实很简单：通过保存可以生成最终机器码的多份翻译代码， 在编译时根据 GOARCH=体系架构 和GOOS=操作系统参数进行初始化设置， 最终调用对应平台编写的特定方法来生成机器码，从而实现跨平台编译。</p></blockquote><h1 id="例子" tabindex="-1">例子 <a href="https://golang.dbwu.tech/engineering/compiling_cross_platform/#%E4%BE%8B%E5%AD%90" target="_blank" rel="noreferrer">#</a> <a class="header-anchor" href="#例子" aria-label="Permalink to &quot;例子 [#](https://golang.dbwu.tech/engineering/compiling_cross_platform/#例子)&quot;">​</a></h1><p>下面的例子统一以 <code>amd64</code> 作为体系架构参数，读者请根据自己的环境更换对应参数，比如 <code>386</code>。</p><h2 id="mac" tabindex="-1">Mac <a class="header-anchor" href="#mac" aria-label="Permalink to &quot;Mac&quot;">​</a></h2><h3 id="编译为-linux-代码" tabindex="-1">编译为 Linux 代码 <a href="https://golang.dbwu.tech/engineering/compiling_cross_platform/#%E7%BC%96%E8%AF%91%E4%B8%BA-linux-%E4%BB%A3%E7%A0%81" target="_blank" rel="noreferrer">#</a> <a class="header-anchor" href="#编译为-linux-代码" aria-label="Permalink to &quot;编译为 Linux 代码 [#](https://golang.dbwu.tech/engineering/compiling_cross_platform/#编译为-linux-代码)&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">CGO_ENABLED</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> GOOS</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">linux</span><span style="color:#E1E4E8;"> GOARCH</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">amd64</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">go</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">build</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">main.go</span></span>
<span class="line"><span style="color:#6A737D;"># 也可以是 386 平台</span></span>
<span class="line"><span style="color:#6A737D;"># CGO_ENABLED=0 GOOS=linux GOARCH=386 go build main.go</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">CGO_ENABLED</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> GOOS</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">linux</span><span style="color:#24292E;"> GOARCH</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">amd64</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">go</span><span style="color:#24292E;"> </span><span style="color:#032F62;">build</span><span style="color:#24292E;"> </span><span style="color:#032F62;">main.go</span></span>
<span class="line"><span style="color:#6A737D;"># 也可以是 386 平台</span></span>
<span class="line"><span style="color:#6A737D;"># CGO_ENABLED=0 GOOS=linux GOARCH=386 go build main.go</span></span></code></pre></div><h3 id="编译为-windows-代码" tabindex="-1">编译为 Windows 代码 <a href="https://golang.dbwu.tech/engineering/compiling_cross_platform/#%E7%BC%96%E8%AF%91%E4%B8%BA-windows-%E4%BB%A3%E7%A0%81" target="_blank" rel="noreferrer">#</a> <a class="header-anchor" href="#编译为-windows-代码" aria-label="Permalink to &quot;编译为 Windows 代码 [#](https://golang.dbwu.tech/engineering/compiling_cross_platform/#编译为-windows-代码)&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">CGO_ENABLED</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> GOOS</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">windows</span><span style="color:#E1E4E8;"> GOARCH</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">amd64</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">go</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">build</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">main.go</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">CGO_ENABLED</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> GOOS</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">windows</span><span style="color:#24292E;"> GOARCH</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">amd64</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">go</span><span style="color:#24292E;"> </span><span style="color:#032F62;">build</span><span style="color:#24292E;"> </span><span style="color:#032F62;">main.go</span></span></code></pre></div><h2 id="linux" tabindex="-1">Linux <a class="header-anchor" href="#linux" aria-label="Permalink to &quot;Linux&quot;">​</a></h2><h3 id="编译为-mac-代码" tabindex="-1">编译为 Mac 代码 <a href="https://golang.dbwu.tech/engineering/compiling_cross_platform/#%E7%BC%96%E8%AF%91%E4%B8%BA-mac-%E4%BB%A3%E7%A0%81" target="_blank" rel="noreferrer">#</a> <a class="header-anchor" href="#编译为-mac-代码" aria-label="Permalink to &quot;编译为 Mac 代码 [#](https://golang.dbwu.tech/engineering/compiling_cross_platform/#编译为-mac-代码)&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">CGO_ENABLED</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> GOOS</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">darwin</span><span style="color:#E1E4E8;"> GOARCH</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">amd64</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">go</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">build</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">main.go</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">CGO_ENABLED</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> GOOS</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">darwin</span><span style="color:#24292E;"> GOARCH</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">amd64</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">go</span><span style="color:#24292E;"> </span><span style="color:#032F62;">build</span><span style="color:#24292E;"> </span><span style="color:#032F62;">main.go</span></span></code></pre></div><h3 id="编译为-windows-代码-1" tabindex="-1">编译为 Windows 代码 <a href="https://golang.dbwu.tech/engineering/compiling_cross_platform/#%E7%BC%96%E8%AF%91%E4%B8%BA-windows-%E4%BB%A3%E7%A0%81-1" target="_blank" rel="noreferrer">#</a> <a class="header-anchor" href="#编译为-windows-代码-1" aria-label="Permalink to &quot;编译为 Windows 代码 [#](https://golang.dbwu.tech/engineering/compiling_cross_platform/#编译为-windows-代码-1)&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">CGO_ENABLED</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> GOOS</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">windows</span><span style="color:#E1E4E8;"> GOARCH</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">amd64</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">go</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">build</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">main.go</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">CGO_ENABLED</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> GOOS</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">windows</span><span style="color:#24292E;"> GOARCH</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">amd64</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">go</span><span style="color:#24292E;"> </span><span style="color:#032F62;">build</span><span style="color:#24292E;"> </span><span style="color:#032F62;">main.go</span></span></code></pre></div><h2 id="windows" tabindex="-1">Windows <a class="header-anchor" href="#windows" aria-label="Permalink to &quot;Windows&quot;">​</a></h2><h3 id="编译为-mac-代码-1" tabindex="-1">编译为 Mac 代码 <a href="https://golang.dbwu.tech/engineering/compiling_cross_platform/#%E7%BC%96%E8%AF%91%E4%B8%BA-mac-%E4%BB%A3%E7%A0%81-1" target="_blank" rel="noreferrer">#</a> <a class="header-anchor" href="#编译为-mac-代码-1" aria-label="Permalink to &quot;编译为 Mac 代码 [#](https://golang.dbwu.tech/engineering/compiling_cross_platform/#编译为-mac-代码-1)&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">SET</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">CGO_ENABLED=</span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#B392F0;">SET</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">GOOS=darwin</span></span>
<span class="line"><span style="color:#B392F0;">SET</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">GOARCH=amd64</span></span>
<span class="line"><span style="color:#B392F0;">go</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">build</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">main.go</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">SET</span><span style="color:#24292E;"> </span><span style="color:#032F62;">CGO_ENABLED=</span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#6F42C1;">SET</span><span style="color:#24292E;"> </span><span style="color:#032F62;">GOOS=darwin</span></span>
<span class="line"><span style="color:#6F42C1;">SET</span><span style="color:#24292E;"> </span><span style="color:#032F62;">GOARCH=amd64</span></span>
<span class="line"><span style="color:#6F42C1;">go</span><span style="color:#24292E;"> </span><span style="color:#032F62;">build</span><span style="color:#24292E;"> </span><span style="color:#032F62;">main.go</span></span></code></pre></div><h3 id="编译为-linux-代码-1" tabindex="-1">编译为 Linux 代码 <a href="https://golang.dbwu.tech/engineering/compiling_cross_platform/#%E7%BC%96%E8%AF%91%E4%B8%BA-linux-%E4%BB%A3%E7%A0%81-1" target="_blank" rel="noreferrer">#</a> <a class="header-anchor" href="#编译为-linux-代码-1" aria-label="Permalink to &quot;编译为 Linux 代码 [#](https://golang.dbwu.tech/engineering/compiling_cross_platform/#编译为-linux-代码-1)&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">SET</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">CGO_ENABLED=</span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#B392F0;">SET</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">GOOS=linux</span></span>
<span class="line"><span style="color:#B392F0;">SET</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">GOARCH=amd64</span></span>
<span class="line"><span style="color:#B392F0;">go</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">build</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">main.go</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">SET</span><span style="color:#24292E;"> </span><span style="color:#032F62;">CGO_ENABLED=</span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#6F42C1;">SET</span><span style="color:#24292E;"> </span><span style="color:#032F62;">GOOS=linux</span></span>
<span class="line"><span style="color:#6F42C1;">SET</span><span style="color:#24292E;"> </span><span style="color:#032F62;">GOARCH=amd64</span></span>
<span class="line"><span style="color:#6F42C1;">go</span><span style="color:#24292E;"> </span><span style="color:#032F62;">build</span><span style="color:#24292E;"> </span><span style="color:#032F62;">main.go</span></span></code></pre></div>`,20),e=[p];function t(r,c,i,E,y,d){return a(),n("div",null,e)}const F=s(o,[["render",t]]);export{h as __pageData,F as default};
