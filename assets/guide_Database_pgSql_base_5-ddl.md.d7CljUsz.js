import{_ as s,o as a,c as n,R as l}from"./chunks/framework.zUbWieqp.js";const C=JSON.parse('{"title":"PostgreSQL的使用向导","description":"","frontmatter":{},"headers":[],"relativePath":"guide/Database/pgSql/base/5-ddl.md","filePath":"guide/Database/pgSql/base/5-ddl.md","lastUpdated":1711535325000}'),p={name:"guide/Database/pgSql/base/5-ddl.md"},o=l(`<h1 id="postgresql的使用向导" tabindex="-1">PostgreSQL的使用向导 <a class="header-anchor" href="#postgresql的使用向导" aria-label="Permalink to &quot;PostgreSQL的使用向导&quot;">​</a></h1><h2 id="_0-快捷键" tabindex="-1">0.快捷键 <a class="header-anchor" href="#_0-快捷键" aria-label="Permalink to &quot;0.快捷键&quot;">​</a></h2><ul><li>显示所有数据库</li></ul><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">\\l 显示所有数据库</span></span>
<span class="line"><span style="color:#E1E4E8;">postgres</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># \\l</span></span>
<span class="line"><span style="color:#E1E4E8;">                                 List of databases</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">Name</span><span style="color:#E1E4E8;">    |  </span><span style="color:#F97583;">Owner</span><span style="color:#E1E4E8;">   | </span><span style="color:#F97583;">Encoding</span><span style="color:#E1E4E8;"> |  </span><span style="color:#F97583;">Collate</span><span style="color:#E1E4E8;">   |   Ctype    |   Access privileges   </span></span>
<span class="line"><span style="color:#6A737D;">-----------+----------+----------+------------+------------+-----------------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> postgres  | postgres | UTF8     | </span><span style="color:#79B8FF;">en_US</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">utf8</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">en_US</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">utf8</span><span style="color:#E1E4E8;"> | </span></span>
<span class="line"><span style="color:#E1E4E8;"> template0 | postgres | UTF8     | </span><span style="color:#79B8FF;">en_US</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">utf8</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">en_US</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">utf8</span><span style="color:#E1E4E8;"> | </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">c</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">postgres          </span><span style="color:#F97583;">+</span></span>
<span class="line"><span style="color:#E1E4E8;">           |          |          |            |            | postgres</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">CTc</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">postgres</span></span>
<span class="line"><span style="color:#E1E4E8;"> template1 | postgres | UTF8     | </span><span style="color:#79B8FF;">en_US</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">utf8</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">en_US</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">utf8</span><span style="color:#E1E4E8;"> | </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">c</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">postgres          </span><span style="color:#F97583;">+</span></span>
<span class="line"><span style="color:#E1E4E8;">           |          |          |            |            | postgres</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">CTc</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">postgres</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">\\l 显示所有数据库</span></span>
<span class="line"><span style="color:#24292E;">postgres</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># \\l</span></span>
<span class="line"><span style="color:#24292E;">                                 List of databases</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">Name</span><span style="color:#24292E;">    |  </span><span style="color:#D73A49;">Owner</span><span style="color:#24292E;">   | </span><span style="color:#D73A49;">Encoding</span><span style="color:#24292E;"> |  </span><span style="color:#D73A49;">Collate</span><span style="color:#24292E;">   |   Ctype    |   Access privileges   </span></span>
<span class="line"><span style="color:#6A737D;">-----------+----------+----------+------------+------------+-----------------------</span></span>
<span class="line"><span style="color:#24292E;"> postgres  | postgres | UTF8     | </span><span style="color:#005CC5;">en_US</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">utf8</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">en_US</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">utf8</span><span style="color:#24292E;"> | </span></span>
<span class="line"><span style="color:#24292E;"> template0 | postgres | UTF8     | </span><span style="color:#005CC5;">en_US</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">utf8</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">en_US</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">utf8</span><span style="color:#24292E;"> | </span><span style="color:#D73A49;">=</span><span style="color:#24292E;">c</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">postgres          </span><span style="color:#D73A49;">+</span></span>
<span class="line"><span style="color:#24292E;">           |          |          |            |            | postgres</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">CTc</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">postgres</span></span>
<span class="line"><span style="color:#24292E;"> template1 | postgres | UTF8     | </span><span style="color:#005CC5;">en_US</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">utf8</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">en_US</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">utf8</span><span style="color:#24292E;"> | </span><span style="color:#D73A49;">=</span><span style="color:#24292E;">c</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">postgres          </span><span style="color:#D73A49;">+</span></span>
<span class="line"><span style="color:#24292E;">           |          |          |            |            | postgres</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">CTc</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">postgres</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span></code></pre></div><ul><li>切换当前数据库</li></ul><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">postgres</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># \\c test</span></span>
<span class="line"><span style="color:#E1E4E8;">You are </span><span style="color:#F97583;">now</span><span style="color:#E1E4E8;"> connected </span><span style="color:#F97583;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">database</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;test&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> user </span><span style="color:#9ECBFF;">&quot;postgres&quot;</span><span style="color:#E1E4E8;">.</span></span>
<span class="line"><span style="color:#E1E4E8;">test</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">#</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">postgres</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># \\c test</span></span>
<span class="line"><span style="color:#24292E;">You are </span><span style="color:#D73A49;">now</span><span style="color:#24292E;"> connected </span><span style="color:#D73A49;">to</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">database</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;test&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> user </span><span style="color:#032F62;">&quot;postgres&quot;</span><span style="color:#24292E;">.</span></span>
<span class="line"><span style="color:#24292E;">test</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">#</span></span></code></pre></div><ul><li>显示数据库中有哪些表</li></ul><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">test</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># \\d</span></span>
<span class="line"><span style="color:#E1E4E8;">         List of relations</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">Schema</span><span style="color:#E1E4E8;"> | </span><span style="color:#F97583;">Name</span><span style="color:#E1E4E8;">  | </span><span style="color:#F97583;">Type</span><span style="color:#E1E4E8;">  |  </span><span style="color:#F97583;">Owner</span><span style="color:#E1E4E8;">   </span></span>
<span class="line"><span style="color:#6A737D;">--------+-------+-------+----------</span></span>
<span class="line"><span style="color:#E1E4E8;"> public | test1 | </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;"> | postgres</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">row</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">test</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># \\d</span></span>
<span class="line"><span style="color:#24292E;">         List of relations</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">Schema</span><span style="color:#24292E;"> | </span><span style="color:#D73A49;">Name</span><span style="color:#24292E;">  | </span><span style="color:#D73A49;">Type</span><span style="color:#24292E;">  |  </span><span style="color:#D73A49;">Owner</span><span style="color:#24292E;">   </span></span>
<span class="line"><span style="color:#6A737D;">--------+-------+-------+----------</span></span>
<span class="line"><span style="color:#24292E;"> public | test1 | </span><span style="color:#D73A49;">table</span><span style="color:#24292E;"> | postgres</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">row</span><span style="color:#24292E;">)</span></span></code></pre></div><ul><li>显示表 tb_name的定义</li></ul><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">test</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># \\d test1</span></span>
<span class="line"><span style="color:#E1E4E8;">                  </span><span style="color:#F97583;">Table</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;public.test1&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;"> Column |     </span><span style="color:#F97583;">Type</span><span style="color:#E1E4E8;">     | Collation | Nullable | </span><span style="color:#F97583;">Default</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#6A737D;">--------+--------------+-----------+----------+---------</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;">   | </span><span style="color:#F97583;">character</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">) |           |          |</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">test</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># \\d test1</span></span>
<span class="line"><span style="color:#24292E;">                  </span><span style="color:#D73A49;">Table</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;public.test1&quot;</span></span>
<span class="line"><span style="color:#24292E;"> Column |     </span><span style="color:#D73A49;">Type</span><span style="color:#24292E;">     | Collation | Nullable | </span><span style="color:#D73A49;">Default</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6A737D;">--------+--------------+-----------+----------+---------</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;">   | </span><span style="color:#D73A49;">character</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">) |           |          |</span></span></code></pre></div><ul><li>显示更表详细信息</li></ul><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">test</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># \\d</span><span style="color:#F97583;">+</span></span>
<span class="line"><span style="color:#E1E4E8;">                     List of relations</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">Schema</span><span style="color:#E1E4E8;"> | </span><span style="color:#F97583;">Name</span><span style="color:#E1E4E8;">  | </span><span style="color:#F97583;">Type</span><span style="color:#E1E4E8;">  |  </span><span style="color:#F97583;">Owner</span><span style="color:#E1E4E8;">   |  </span><span style="color:#F97583;">Size</span><span style="color:#E1E4E8;">   | </span><span style="color:#F97583;">Description</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#6A737D;">--------+-------+-------+----------+---------+-------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> public | test1 | </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;"> | postgres | </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> bytes |</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">test</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># \\d</span><span style="color:#D73A49;">+</span></span>
<span class="line"><span style="color:#24292E;">                     List of relations</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">Schema</span><span style="color:#24292E;"> | </span><span style="color:#D73A49;">Name</span><span style="color:#24292E;">  | </span><span style="color:#D73A49;">Type</span><span style="color:#24292E;">  |  </span><span style="color:#D73A49;">Owner</span><span style="color:#24292E;">   |  </span><span style="color:#D73A49;">Size</span><span style="color:#24292E;">   | </span><span style="color:#D73A49;">Description</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6A737D;">--------+-------+-------+----------+---------+-------------</span></span>
<span class="line"><span style="color:#24292E;"> public | test1 | </span><span style="color:#D73A49;">table</span><span style="color:#24292E;"> | postgres | </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> bytes |</span></span></code></pre></div><ul><li>只显示表</li></ul><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">test</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># \\dt</span></span>
<span class="line"><span style="color:#E1E4E8;">         List of relations</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">Schema</span><span style="color:#E1E4E8;"> | </span><span style="color:#F97583;">Name</span><span style="color:#E1E4E8;">  | </span><span style="color:#F97583;">Type</span><span style="color:#E1E4E8;">  |  </span><span style="color:#F97583;">Owner</span><span style="color:#E1E4E8;">   </span></span>
<span class="line"><span style="color:#6A737D;">--------+-------+-------+----------</span></span>
<span class="line"><span style="color:#E1E4E8;"> public | test1 | </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;"> | postgres</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">row</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">test</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># \\dt</span></span>
<span class="line"><span style="color:#24292E;">         List of relations</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">Schema</span><span style="color:#24292E;"> | </span><span style="color:#D73A49;">Name</span><span style="color:#24292E;">  | </span><span style="color:#D73A49;">Type</span><span style="color:#24292E;">  |  </span><span style="color:#D73A49;">Owner</span><span style="color:#24292E;">   </span></span>
<span class="line"><span style="color:#6A737D;">--------+-------+-------+----------</span></span>
<span class="line"><span style="color:#24292E;"> public | test1 | </span><span style="color:#D73A49;">table</span><span style="color:#24292E;"> | postgres</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">row</span><span style="color:#24292E;">)</span></span></code></pre></div><ul><li>只显示索引</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">\\di 只显示索引</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">\\ds 只显示序列</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">\\dv 只显示视图</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">\\du 或者 \\dg 显示所有角色或用户</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">\\di 只显示索引</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">\\ds 只显示序列</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">\\dv 只显示视图</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">\\du 或者 \\dg 显示所有角色或用户</span></span></code></pre></div><ul><li>显示表的权限分配情况</li></ul><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">\\dp tb_name</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">test</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># \\dp test1</span></span>
<span class="line"><span style="color:#E1E4E8;">                             Access privileges</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">Schema</span><span style="color:#E1E4E8;"> | </span><span style="color:#F97583;">Name</span><span style="color:#E1E4E8;">  | </span><span style="color:#F97583;">Type</span><span style="color:#E1E4E8;">  | Access privileges | Column privileges | Policies </span></span>
<span class="line"><span style="color:#6A737D;">--------+-------+-------+-------------------+-------------------+----------</span></span>
<span class="line"><span style="color:#E1E4E8;"> public | test1 | </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;"> |                   |                   | </span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">row</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">\\dp tb_name</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">test</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># \\dp test1</span></span>
<span class="line"><span style="color:#24292E;">                             Access privileges</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">Schema</span><span style="color:#24292E;"> | </span><span style="color:#D73A49;">Name</span><span style="color:#24292E;">  | </span><span style="color:#D73A49;">Type</span><span style="color:#24292E;">  | Access privileges | Column privileges | Policies </span></span>
<span class="line"><span style="color:#6A737D;">--------+-------+-------+-------------------+-------------------+----------</span></span>
<span class="line"><span style="color:#24292E;"> public | test1 | </span><span style="color:#D73A49;">table</span><span style="color:#24292E;"> |                   |                   | </span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">row</span><span style="color:#24292E;">)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">\\timing on 显示sql执行的时间</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">\\timing off</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">\\encoding utf8 指定客户端字符编码</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">\\pset border 0 输出内容无边框</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">\\pset border 1 边框只在内部</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">\\pset border 2 内部、外部都有边框</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">\\x 一行数据的每一列，单行显示，相当于 mysql的 \\G</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">\\s 显示执行的命令历史记录</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">\\? 显示帮助信息</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">\\timing on 显示sql执行的时间</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">\\timing off</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">\\encoding utf8 指定客户端字符编码</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">\\pset border 0 输出内容无边框</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">\\pset border 1 边框只在内部</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">\\pset border 2 内部、外部都有边框</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">\\x 一行数据的每一列，单行显示，相当于 mysql的 \\G</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">\\s 显示执行的命令历史记录</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">\\? 显示帮助信息</span></span></code></pre></div><p><a href="https://www.modb.pro/doc/446#pf46" target="_blank" rel="noreferrer">https://www.modb.pro/doc/446#pf46</a></p><p><strong>DDL（表结构操控）</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">CREATE、ALTER、DROP、RENAME、TRUNCATE</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">CREATE、ALTER、DROP、RENAME、TRUNCATE</span></span></code></pre></div><p><strong>DML（数据操作）</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">INSERT、UPDATE、DELETE CALL（ 调用过程）、MERGE（合并（插入或修改））、</span></span>
<span class="line"><span style="color:#e1e4e8;">COMMIT（事务提交）、ROLLBACK（事务回滚）</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">INSERT、UPDATE、DELETE CALL（ 调用过程）、MERGE（合并（插入或修改））、</span></span>
<span class="line"><span style="color:#24292e;">COMMIT（事务提交）、ROLLBACK（事务回滚）</span></span></code></pre></div><p><strong>DCL（数据控制语言）</strong></p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">CRANT（权限授予）、</span><span style="color:#F97583;">REVOKE</span><span style="color:#E1E4E8;">（权限回收）</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">CRANT（权限授予）、</span><span style="color:#D73A49;">REVOKE</span><span style="color:#24292E;">（权限回收）</span></span></code></pre></div><p><strong>DQL（数据查询语言）</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">SELECT、FROM 、WHERE</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">SELECT、FROM 、WHERE</span></span></code></pre></div><p>常用操作：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">\\help命令——用于查看各个子命令的语法帮助</span></span>
<span class="line"><span style="color:#e1e4e8;">\\help create</span></span>
<span class="line"><span style="color:#e1e4e8;">\\help create databse </span></span>
<span class="line"><span style="color:#e1e4e8;">\\help create user</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">\\l命令——也就是list，用于列出所有已创建的数据库，支持通配符过滤</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">\\d 命令——也就是display，用于查看数据库信息，支持通配符过滤</span></span>
<span class="line"><span style="color:#e1e4e8;">\\d #列出当前库下的所有表 </span></span>
<span class="line"><span style="color:#e1e4e8;">\\d table_name #跟上表名显示表结构，支持通配符 </span></span>
<span class="line"><span style="color:#e1e4e8;">\\db #显示所有表空间 </span></span>
<span class="line"><span style="color:#e1e4e8;">\\dn #列出所有schema </span></span>
<span class="line"><span style="color:#e1e4e8;">\\du #显示所有用户或角色，也可以写为\\dg </span></span>
<span class="line"><span style="color:#e1e4e8;">\\dp table_name #显示表的权限分配情况，也可以跟+号显示更详细</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">\\i命令——也就是import，执行指定SQL文件</span></span>
<span class="line"><span style="color:#e1e4e8;">\\i /data/test.sql</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">\\help命令——用于查看各个子命令的语法帮助</span></span>
<span class="line"><span style="color:#24292e;">\\help create</span></span>
<span class="line"><span style="color:#24292e;">\\help create databse </span></span>
<span class="line"><span style="color:#24292e;">\\help create user</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">\\l命令——也就是list，用于列出所有已创建的数据库，支持通配符过滤</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">\\d 命令——也就是display，用于查看数据库信息，支持通配符过滤</span></span>
<span class="line"><span style="color:#24292e;">\\d #列出当前库下的所有表 </span></span>
<span class="line"><span style="color:#24292e;">\\d table_name #跟上表名显示表结构，支持通配符 </span></span>
<span class="line"><span style="color:#24292e;">\\db #显示所有表空间 </span></span>
<span class="line"><span style="color:#24292e;">\\dn #列出所有schema </span></span>
<span class="line"><span style="color:#24292e;">\\du #显示所有用户或角色，也可以写为\\dg </span></span>
<span class="line"><span style="color:#24292e;">\\dp table_name #显示表的权限分配情况，也可以跟+号显示更详细</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">\\i命令——也就是import，执行指定SQL文件</span></span>
<span class="line"><span style="color:#24292e;">\\i /data/test.sql</span></span></code></pre></div><p>\\l 查看所有数据库</p><p>\\d 查看当前数据库中所有表名字</p><p>\\dn 列出所有schema</p><p>\\x 把表中的每一行数据拆分为单元，与mysql中\\G 类似</p><p>\\echo 输出信息</p><h2 id="_1-数据库" tabindex="-1">1.数据库 <a class="header-anchor" href="#_1-数据库" aria-label="Permalink to &quot;1.数据库&quot;">​</a></h2><h3 id="创建数据库" tabindex="-1">创建数据库 <a class="header-anchor" href="#创建数据库" aria-label="Permalink to &quot;创建数据库&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">??</span></span>
<span class="line"><span style="color:#E1E4E8;">[postgres@db </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]$ createdb zsddb</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">??</span></span>
<span class="line"><span style="color:#24292E;">[postgres@db </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]$ createdb zsddb</span></span></code></pre></div><h3 id="查看版本" tabindex="-1">查看版本 <a class="header-anchor" href="#查看版本" aria-label="Permalink to &quot;查看版本&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">#</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">version</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">                                                 </span><span style="color:#B392F0;">version</span><span style="color:#E1E4E8;">                                                 </span></span>
<span class="line"><span style="color:#B392F0;">---------------------------------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">PostgreSQL</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">12.1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">on</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">x86_64-pc-linux-gnu,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">compiled</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">by</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">gcc</span><span style="color:#E1E4E8;"> (GCC) 4.4.7 20120313 (</span><span style="color:#B392F0;">Red</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Hat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">4.4</span><span style="color:#9ECBFF;">.7-23</span><span style="color:#E1E4E8;">), 64-bit</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">row</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">--</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">或者</span></span>
<span class="line"><span style="color:#B392F0;">postgres@postgres</span><span style="color:#E1E4E8;">=&gt; </span><span style="color:#9ECBFF;">show</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">server_version</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">server_version</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">----------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">12.2</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">row</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">--</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">或者</span></span>
<span class="line"><span style="color:#B392F0;">postgres@postgres</span><span style="color:#E1E4E8;">=&gt;select </span><span style="color:#9ECBFF;">current_setting</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">&#39;server_version_num&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">current_setting</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">-----------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">120002</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">row</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">postgres@postgres</span><span style="color:#E1E4E8;">=&gt;show </span><span style="color:#9ECBFF;">server_version_num</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">server_version_num</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">--------------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">120002</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">row</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">#</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#032F62;">version</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">                                                 </span><span style="color:#6F42C1;">version</span><span style="color:#24292E;">                                                 </span></span>
<span class="line"><span style="color:#6F42C1;">---------------------------------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">PostgreSQL</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">12.1</span><span style="color:#24292E;"> </span><span style="color:#032F62;">on</span><span style="color:#24292E;"> </span><span style="color:#032F62;">x86_64-pc-linux-gnu,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">compiled</span><span style="color:#24292E;"> </span><span style="color:#032F62;">by</span><span style="color:#24292E;"> </span><span style="color:#032F62;">gcc</span><span style="color:#24292E;"> (GCC) 4.4.7 20120313 (</span><span style="color:#6F42C1;">Red</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Hat</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">4.4</span><span style="color:#032F62;">.7-23</span><span style="color:#24292E;">), 64-bit</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#6F42C1;">1</span><span style="color:#24292E;"> </span><span style="color:#032F62;">row</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">--</span><span style="color:#24292E;"> </span><span style="color:#032F62;">或者</span></span>
<span class="line"><span style="color:#6F42C1;">postgres@postgres</span><span style="color:#24292E;">=&gt; </span><span style="color:#032F62;">show</span><span style="color:#24292E;"> </span><span style="color:#032F62;">server_version</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">server_version</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">----------------</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">12.2</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#6F42C1;">1</span><span style="color:#24292E;"> </span><span style="color:#032F62;">row</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">--</span><span style="color:#24292E;"> </span><span style="color:#032F62;">或者</span></span>
<span class="line"><span style="color:#6F42C1;">postgres@postgres</span><span style="color:#24292E;">=&gt;select </span><span style="color:#032F62;">current_setting</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">&#39;server_version_num&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">current_setting</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">-----------------</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">120002</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#6F42C1;">1</span><span style="color:#24292E;"> </span><span style="color:#032F62;">row</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">postgres@postgres</span><span style="color:#24292E;">=&gt;show </span><span style="color:#032F62;">server_version_num</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">server_version_num</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">--------------------</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">120002</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#6F42C1;">1</span><span style="color:#24292E;"> </span><span style="color:#032F62;">row</span><span style="color:#24292E;">)</span></span></code></pre></div><h3 id="查看当前时间日期" tabindex="-1">查看当前时间日期 <a class="header-anchor" href="#查看当前时间日期" aria-label="Permalink to &quot;查看当前时间日期&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">#</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">current_date</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">current_date</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">--------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">2019-12-02</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">row</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">#</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#032F62;">current_date</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">current_date</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">--------------</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">2019-12-02</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#6F42C1;">1</span><span style="color:#24292E;"> </span><span style="color:#032F62;">row</span><span style="color:#24292E;">)</span></span></code></pre></div><h3 id="获得帮助命令" tabindex="-1">获得帮助命令 <a class="header-anchor" href="#获得帮助命令" aria-label="Permalink to &quot;获得帮助命令&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">#</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">\\h</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">#</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">\\h</span></span></code></pre></div><h3 id="退出psql客户端" tabindex="-1">退出psql客户端 <a class="header-anchor" href="#退出psql客户端" aria-label="Permalink to &quot;退出psql客户端&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">两种方式，如下:</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">#</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">quit</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">#</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">\\q</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">两种方式，如下:</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">#</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">quit</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">#</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">\\q</span></span></code></pre></div><h3 id="查看所有数据库" tabindex="-1">查看所有数据库 <a class="header-anchor" href="#查看所有数据库" aria-label="Permalink to &quot;查看所有数据库&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">查看所有数据库：</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">#\\l</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">切换数据库：</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">#\\c databasename</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">查看所有数据库（包括详细参数）：</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">#</span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> pg_database;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">查看所有数据库：</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">#\\l</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">切换数据库：</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">#\\c databasename</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">查看所有数据库（包括详细参数）：</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">#</span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> pg_database;</span></span></code></pre></div><h3 id="查看某数据库下表" tabindex="-1">查看某数据库下表 <a class="header-anchor" href="#查看某数据库下表" aria-label="Permalink to &quot;查看某数据库下表&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">用户自定义的表，如果未经特殊处理，默认都是放在名为public的schema下</span></span>
<span class="line"><span style="color:#E1E4E8;">konga</span><span style="color:#F97583;">=&gt;select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> pg_tables </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> schemaname </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;public&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">或者</span></span>
<span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> tablename </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> pg_tables </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> schemaname</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;public&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">#获取db中所有的表信息</span></span>
<span class="line"><span style="color:#E1E4E8;">konga</span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> pg_tables;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">#查看表结构</span></span>
<span class="line"><span style="color:#E1E4E8;">konga</span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> \\d routes;</span></span>
<span class="line"><span style="color:#E1E4E8;">                                 </span><span style="color:#F97583;">Table</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;public.routes&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">           Column           |           </span><span style="color:#F97583;">Type</span><span style="color:#E1E4E8;">           | Collation | Nullable | </span><span style="color:#F97583;">Default</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#6A737D;">----------------------------+--------------------------+-----------+----------+---------</span></span>
<span class="line"><span style="color:#E1E4E8;"> id                         | uuid                     |           | </span><span style="color:#F97583;">not null</span><span style="color:#E1E4E8;"> | </span></span>
<span class="line"><span style="color:#E1E4E8;"> created_at                 | </span><span style="color:#F97583;">timestamp with time zone</span><span style="color:#E1E4E8;"> |           |          | </span></span>
<span class="line"><span style="color:#E1E4E8;"> updated_at                 | </span><span style="color:#F97583;">timestamp with time zone</span><span style="color:#E1E4E8;"> |           |          |</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">用户自定义的表，如果未经特殊处理，默认都是放在名为public的schema下</span></span>
<span class="line"><span style="color:#24292E;">konga</span><span style="color:#D73A49;">=&gt;select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> pg_tables </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> schemaname </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;public&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">或者</span></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> tablename </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> pg_tables </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> schemaname</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;public&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">#获取db中所有的表信息</span></span>
<span class="line"><span style="color:#24292E;">konga</span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> pg_tables;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">#查看表结构</span></span>
<span class="line"><span style="color:#24292E;">konga</span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> \\d routes;</span></span>
<span class="line"><span style="color:#24292E;">                                 </span><span style="color:#D73A49;">Table</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;public.routes&quot;</span></span>
<span class="line"><span style="color:#24292E;">           Column           |           </span><span style="color:#D73A49;">Type</span><span style="color:#24292E;">           | Collation | Nullable | </span><span style="color:#D73A49;">Default</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6A737D;">----------------------------+--------------------------+-----------+----------+---------</span></span>
<span class="line"><span style="color:#24292E;"> id                         | uuid                     |           | </span><span style="color:#D73A49;">not null</span><span style="color:#24292E;"> | </span></span>
<span class="line"><span style="color:#24292E;"> created_at                 | </span><span style="color:#D73A49;">timestamp with time zone</span><span style="color:#24292E;"> |           |          | </span></span>
<span class="line"><span style="color:#24292E;"> updated_at                 | </span><span style="color:#D73A49;">timestamp with time zone</span><span style="color:#24292E;"> |           |          |</span></span></code></pre></div><h3 id="查看表大小" tabindex="-1">查看表大小 <a class="header-anchor" href="#查看表大小" aria-label="Permalink to &quot;查看表大小&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">konga</span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> \\d</span><span style="color:#F97583;">+</span></span>
<span class="line"><span style="color:#E1E4E8;">                                      List of relations</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">Schema</span><span style="color:#E1E4E8;"> |                 </span><span style="color:#F97583;">Name</span><span style="color:#E1E4E8;">                 |   </span><span style="color:#F97583;">Type</span><span style="color:#E1E4E8;">   | </span><span style="color:#F97583;">Owner</span><span style="color:#E1E4E8;"> |    </span><span style="color:#F97583;">Size</span><span style="color:#E1E4E8;">    | </span><span style="color:#F97583;">Description</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#6A737D;">--------+--------------------------------------+----------+-------+------------+-------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> public | acls                                 | </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;">    | konga | </span><span style="color:#79B8FF;">8192</span><span style="color:#E1E4E8;"> bytes | </span></span>
<span class="line"><span style="color:#E1E4E8;"> public | apis                                 | </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;">    | konga | </span><span style="color:#79B8FF;">8192</span><span style="color:#E1E4E8;"> bytes | </span></span>
<span class="line"><span style="color:#E1E4E8;"> public | basicauth_credentials                | </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;">    | konga | </span><span style="color:#79B8FF;">8192</span><span style="color:#E1E4E8;"> bytes | </span></span>
<span class="line"><span style="color:#E1E4E8;"> public | ca_certificates                      | </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;">    | konga | </span><span style="color:#79B8FF;">8192</span><span style="color:#E1E4E8;"> bytes | </span></span>
<span class="line"><span style="color:#E1E4E8;"> public | certificates                         | </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;">    | konga | </span><span style="color:#79B8FF;">8192</span><span style="color:#E1E4E8;"> bytes | </span></span>
<span class="line"><span style="color:#E1E4E8;"> public | cluster_ca                           | </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;">    | konga | </span><span style="color:#79B8FF;">32</span><span style="color:#E1E4E8;"> kB      | </span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#E1E4E8;">#查看单个表大小</span></span>
<span class="line"><span style="color:#E1E4E8;"> konga</span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> pg_size_pretty(pg_relation_size(</span><span style="color:#9ECBFF;">&#39;表名字&#39;</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"><span style="color:#E1E4E8;"> pg_size_pretty </span></span>
<span class="line"><span style="color:#6A737D;">----------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">8192</span><span style="color:#E1E4E8;"> bytes</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">row</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">#查看单个数据库大小</span></span>
<span class="line"><span style="color:#E1E4E8;">konga</span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> pg_size_pretty(pg_database_size(</span><span style="color:#9ECBFF;">&#39;数据库名字&#39;</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"><span style="color:#E1E4E8;"> pg_size_pretty </span></span>
<span class="line"><span style="color:#6A737D;">----------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">11</span><span style="color:#E1E4E8;"> MB</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">row</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">#查看所有表大小</span></span>
<span class="line"><span style="color:#E1E4E8;">test01</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">#</span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> schemaname,tablename,pg_table_size(schemaname</span><span style="color:#F97583;">||</span><span style="color:#9ECBFF;">&#39;.&#39;</span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;">tablename) </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> tabsize </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> pg_tables </span><span style="color:#F97583;">order by</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">desc</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">konga</span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> \\d</span><span style="color:#D73A49;">+</span></span>
<span class="line"><span style="color:#24292E;">                                      List of relations</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">Schema</span><span style="color:#24292E;"> |                 </span><span style="color:#D73A49;">Name</span><span style="color:#24292E;">                 |   </span><span style="color:#D73A49;">Type</span><span style="color:#24292E;">   | </span><span style="color:#D73A49;">Owner</span><span style="color:#24292E;"> |    </span><span style="color:#D73A49;">Size</span><span style="color:#24292E;">    | </span><span style="color:#D73A49;">Description</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6A737D;">--------+--------------------------------------+----------+-------+------------+-------------</span></span>
<span class="line"><span style="color:#24292E;"> public | acls                                 | </span><span style="color:#D73A49;">table</span><span style="color:#24292E;">    | konga | </span><span style="color:#005CC5;">8192</span><span style="color:#24292E;"> bytes | </span></span>
<span class="line"><span style="color:#24292E;"> public | apis                                 | </span><span style="color:#D73A49;">table</span><span style="color:#24292E;">    | konga | </span><span style="color:#005CC5;">8192</span><span style="color:#24292E;"> bytes | </span></span>
<span class="line"><span style="color:#24292E;"> public | basicauth_credentials                | </span><span style="color:#D73A49;">table</span><span style="color:#24292E;">    | konga | </span><span style="color:#005CC5;">8192</span><span style="color:#24292E;"> bytes | </span></span>
<span class="line"><span style="color:#24292E;"> public | ca_certificates                      | </span><span style="color:#D73A49;">table</span><span style="color:#24292E;">    | konga | </span><span style="color:#005CC5;">8192</span><span style="color:#24292E;"> bytes | </span></span>
<span class="line"><span style="color:#24292E;"> public | certificates                         | </span><span style="color:#D73A49;">table</span><span style="color:#24292E;">    | konga | </span><span style="color:#005CC5;">8192</span><span style="color:#24292E;"> bytes | </span></span>
<span class="line"><span style="color:#24292E;"> public | cluster_ca                           | </span><span style="color:#D73A49;">table</span><span style="color:#24292E;">    | konga | </span><span style="color:#005CC5;">32</span><span style="color:#24292E;"> kB      | </span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#24292E;">#查看单个表大小</span></span>
<span class="line"><span style="color:#24292E;"> konga</span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> pg_size_pretty(pg_relation_size(</span><span style="color:#032F62;">&#39;表名字&#39;</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#24292E;"> pg_size_pretty </span></span>
<span class="line"><span style="color:#6A737D;">----------------</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">8192</span><span style="color:#24292E;"> bytes</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">row</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">#查看单个数据库大小</span></span>
<span class="line"><span style="color:#24292E;">konga</span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> pg_size_pretty(pg_database_size(</span><span style="color:#032F62;">&#39;数据库名字&#39;</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#24292E;"> pg_size_pretty </span></span>
<span class="line"><span style="color:#6A737D;">----------------</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">11</span><span style="color:#24292E;"> MB</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">row</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">#查看所有表大小</span></span>
<span class="line"><span style="color:#24292E;">test01</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">#</span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> schemaname,tablename,pg_table_size(schemaname</span><span style="color:#D73A49;">||</span><span style="color:#032F62;">&#39;.&#39;</span><span style="color:#D73A49;">||</span><span style="color:#24292E;">tablename) </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> tabsize </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> pg_tables </span><span style="color:#D73A49;">order by</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">desc</span><span style="color:#24292E;">;</span></span></code></pre></div><h3 id="pg查看系统表" tabindex="-1">pg查看系统表 <a class="header-anchor" href="#pg查看系统表" aria-label="Permalink to &quot;pg查看系统表&quot;">​</a></h3><p>\\dS显示有哪些系统表</p><p>\\d pg_class显示某一个系统表</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">konga</span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> \\dS</span></span>
<span class="line"><span style="color:#E1E4E8;">                            List of relations</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">Schema</span><span style="color:#E1E4E8;">   |                 </span><span style="color:#F97583;">Name</span><span style="color:#E1E4E8;">                 |   </span><span style="color:#F97583;">Type</span><span style="color:#E1E4E8;">   |  </span><span style="color:#F97583;">Owner</span><span style="color:#E1E4E8;">   </span></span>
<span class="line"><span style="color:#6A737D;">------------+--------------------------------------+----------+----------</span></span>
<span class="line"><span style="color:#E1E4E8;"> pg_catalog | pg_aggregate                         | </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;">    | postgres</span></span>
<span class="line"><span style="color:#E1E4E8;"> pg_catalog | pg_am                                | </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;">    | postgres</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;"> konga</span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> \\d pg_class</span></span>
<span class="line"><span style="color:#E1E4E8;">                     </span><span style="color:#F97583;">Table</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;pg_catalog.pg_class&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">       Column        |     </span><span style="color:#F97583;">Type</span><span style="color:#E1E4E8;">     | Collation | Nullable | </span><span style="color:#F97583;">Default</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#6A737D;">---------------------+--------------+-----------+----------+---------</span></span>
<span class="line"><span style="color:#E1E4E8;"> relname             | </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;">         |           | </span><span style="color:#F97583;">not null</span><span style="color:#E1E4E8;"> | </span></span>
<span class="line"><span style="color:#E1E4E8;"> relnamespace        | </span><span style="color:#F97583;">oid</span><span style="color:#E1E4E8;">          |           | </span><span style="color:#F97583;">not null</span><span style="color:#E1E4E8;"> | </span></span>
<span class="line"><span style="color:#E1E4E8;"> reltype             | </span><span style="color:#F97583;">oid</span><span style="color:#E1E4E8;">          |           | </span><span style="color:#F97583;">not null</span><span style="color:#E1E4E8;"> | </span></span>
<span class="line"><span style="color:#E1E4E8;"> reloftype           | </span><span style="color:#F97583;">oid</span><span style="color:#E1E4E8;">          |           | </span><span style="color:#F97583;">not null</span><span style="color:#E1E4E8;"> | </span></span>
<span class="line"><span style="color:#E1E4E8;"> relowner            | </span><span style="color:#F97583;">oid</span><span style="color:#E1E4E8;">          |           | </span><span style="color:#F97583;">not null</span><span style="color:#E1E4E8;"> | </span></span>
<span class="line"><span style="color:#E1E4E8;"> relam               | </span><span style="color:#F97583;">oid</span><span style="color:#E1E4E8;">          |           | </span><span style="color:#F97583;">not null</span><span style="color:#E1E4E8;"> |</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">konga</span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> \\dS</span></span>
<span class="line"><span style="color:#24292E;">                            List of relations</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">Schema</span><span style="color:#24292E;">   |                 </span><span style="color:#D73A49;">Name</span><span style="color:#24292E;">                 |   </span><span style="color:#D73A49;">Type</span><span style="color:#24292E;">   |  </span><span style="color:#D73A49;">Owner</span><span style="color:#24292E;">   </span></span>
<span class="line"><span style="color:#6A737D;">------------+--------------------------------------+----------+----------</span></span>
<span class="line"><span style="color:#24292E;"> pg_catalog | pg_aggregate                         | </span><span style="color:#D73A49;">table</span><span style="color:#24292E;">    | postgres</span></span>
<span class="line"><span style="color:#24292E;"> pg_catalog | pg_am                                | </span><span style="color:#D73A49;">table</span><span style="color:#24292E;">    | postgres</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;"> konga</span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> \\d pg_class</span></span>
<span class="line"><span style="color:#24292E;">                     </span><span style="color:#D73A49;">Table</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;pg_catalog.pg_class&quot;</span></span>
<span class="line"><span style="color:#24292E;">       Column        |     </span><span style="color:#D73A49;">Type</span><span style="color:#24292E;">     | Collation | Nullable | </span><span style="color:#D73A49;">Default</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6A737D;">---------------------+--------------+-----------+----------+---------</span></span>
<span class="line"><span style="color:#24292E;"> relname             | </span><span style="color:#D73A49;">name</span><span style="color:#24292E;">         |           | </span><span style="color:#D73A49;">not null</span><span style="color:#24292E;"> | </span></span>
<span class="line"><span style="color:#24292E;"> relnamespace        | </span><span style="color:#D73A49;">oid</span><span style="color:#24292E;">          |           | </span><span style="color:#D73A49;">not null</span><span style="color:#24292E;"> | </span></span>
<span class="line"><span style="color:#24292E;"> reltype             | </span><span style="color:#D73A49;">oid</span><span style="color:#24292E;">          |           | </span><span style="color:#D73A49;">not null</span><span style="color:#24292E;"> | </span></span>
<span class="line"><span style="color:#24292E;"> reloftype           | </span><span style="color:#D73A49;">oid</span><span style="color:#24292E;">          |           | </span><span style="color:#D73A49;">not null</span><span style="color:#24292E;"> | </span></span>
<span class="line"><span style="color:#24292E;"> relowner            | </span><span style="color:#D73A49;">oid</span><span style="color:#24292E;">          |           | </span><span style="color:#D73A49;">not null</span><span style="color:#24292E;"> | </span></span>
<span class="line"><span style="color:#24292E;"> relam               | </span><span style="color:#D73A49;">oid</span><span style="color:#24292E;">          |           | </span><span style="color:#D73A49;">not null</span><span style="color:#24292E;"> |</span></span></code></pre></div><h3 id="查看配置文件位置" tabindex="-1">查看配置文件位置 <a class="header-anchor" href="#查看配置文件位置" aria-label="Permalink to &quot;查看配置文件位置&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">postgres</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;">,setting </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> pg_settings </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> category</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;File Locations&#39;</span><span style="color:#E1E4E8;">; </span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;">        |              setting              </span></span>
<span class="line"><span style="color:#6A737D;">-------------------+-----------------------------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> config_file       | </span><span style="color:#F97583;">/data/</span><span style="color:#E1E4E8;">pgdata</span><span style="color:#F97583;">/data/</span><span style="color:#79B8FF;">postgresql</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">conf</span></span>
<span class="line"><span style="color:#E1E4E8;"> data_directory    | </span><span style="color:#F97583;">/data/</span><span style="color:#E1E4E8;">pgdata</span><span style="color:#F97583;">/data</span></span>
<span class="line"><span style="color:#E1E4E8;"> external_pid_file | </span></span>
<span class="line"><span style="color:#E1E4E8;"> hba_file          | </span><span style="color:#F97583;">/data/</span><span style="color:#E1E4E8;">pgdata</span><span style="color:#F97583;">/data/</span><span style="color:#79B8FF;">pg_hba</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">conf</span></span>
<span class="line"><span style="color:#E1E4E8;"> ident_file        | </span><span style="color:#F97583;">/data/</span><span style="color:#E1E4E8;">pgdata</span><span style="color:#F97583;">/data/</span><span style="color:#79B8FF;">pg_ident</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">conf</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">postgres</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;">,setting </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> pg_settings </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> category</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;File Locations&#39;</span><span style="color:#24292E;">; </span></span>
<span class="line"><span style="color:#24292E;">       </span><span style="color:#D73A49;">name</span><span style="color:#24292E;">        |              setting              </span></span>
<span class="line"><span style="color:#6A737D;">-------------------+-----------------------------------</span></span>
<span class="line"><span style="color:#24292E;"> config_file       | </span><span style="color:#D73A49;">/data/</span><span style="color:#24292E;">pgdata</span><span style="color:#D73A49;">/data/</span><span style="color:#005CC5;">postgresql</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">conf</span></span>
<span class="line"><span style="color:#24292E;"> data_directory    | </span><span style="color:#D73A49;">/data/</span><span style="color:#24292E;">pgdata</span><span style="color:#D73A49;">/data</span></span>
<span class="line"><span style="color:#24292E;"> external_pid_file | </span></span>
<span class="line"><span style="color:#24292E;"> hba_file          | </span><span style="color:#D73A49;">/data/</span><span style="color:#24292E;">pgdata</span><span style="color:#D73A49;">/data/</span><span style="color:#005CC5;">pg_hba</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">conf</span></span>
<span class="line"><span style="color:#24292E;"> ident_file        | </span><span style="color:#D73A49;">/data/</span><span style="color:#24292E;">pgdata</span><span style="color:#D73A49;">/data/</span><span style="color:#005CC5;">pg_ident</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">conf</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">5</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span></code></pre></div><p><strong>字符串用单引号扩起来，结尾使用分号结束</strong></p><h3 id="查看port" tabindex="-1">查看port <a class="header-anchor" href="#查看port" aria-label="Permalink to &quot;查看port&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">postgres@postgres</span><span style="color:#F97583;">=&gt;select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> current_setting(</span><span style="color:#9ECBFF;">&#39;port&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;"> current_setting </span></span>
<span class="line"><span style="color:#6A737D;">-----------------</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5532</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">row</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">postgres@postgres</span><span style="color:#D73A49;">=&gt;select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> current_setting(</span><span style="color:#032F62;">&#39;port&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;"> current_setting </span></span>
<span class="line"><span style="color:#6A737D;">-----------------</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">5532</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">row</span><span style="color:#24292E;">)</span></span></code></pre></div><h3 id="查看数据库对应的目录" tabindex="-1">查看数据库对应的目录 <a class="header-anchor" href="#查看数据库对应的目录" aria-label="Permalink to &quot;查看数据库对应的目录&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">-- 根据oid 查找</span></span>
<span class="line"><span style="color:#E1E4E8;">han_db</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">oid</span><span style="color:#E1E4E8;">,datname </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> pg_database;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">oid</span><span style="color:#E1E4E8;">  |  datname  </span></span>
<span class="line"><span style="color:#6A737D;">-------+-----------</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13447</span><span style="color:#E1E4E8;"> | postgres</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">16385</span><span style="color:#E1E4E8;"> | han_db</span></span>
<span class="line"><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> | template1</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13446</span><span style="color:#E1E4E8;"> | template0</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 根据oid 查找</span></span>
<span class="line"><span style="color:#24292E;">han_db</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">oid</span><span style="color:#24292E;">,datname </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> pg_database;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">oid</span><span style="color:#24292E;">  |  datname  </span></span>
<span class="line"><span style="color:#6A737D;">-------+-----------</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">13447</span><span style="color:#24292E;"> | postgres</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">16385</span><span style="color:#24292E;"> | han_db</span></span>
<span class="line"><span style="color:#24292E;">     </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> | template1</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">13446</span><span style="color:#24292E;"> | template0</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">4</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span></code></pre></div><h2 id="关闭数据库连接" tabindex="-1">关闭数据库连接 <a class="header-anchor" href="#关闭数据库连接" aria-label="Permalink to &quot;关闭数据库连接&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">#查看所有</span></span>
<span class="line"><span style="color:#e1e4e8;">postgres=#SELECT datname,pid FROM pg_stat_activity;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">postgres=# select pid from pg_stat_activity where datname = &#39;agile&#39; ; </span></span>
<span class="line"><span style="color:#e1e4e8;">   pid   </span></span>
<span class="line"><span style="color:#e1e4e8;">---------</span></span>
<span class="line"><span style="color:#e1e4e8;"> 2544156</span></span>
<span class="line"><span style="color:#e1e4e8;">(1 row)</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">postgres=# select pg_terminate_backend(2544156) ; </span></span>
<span class="line"><span style="color:#e1e4e8;"> pg_terminate_backend </span></span>
<span class="line"><span style="color:#e1e4e8;">----------------------</span></span>
<span class="line"><span style="color:#e1e4e8;"> t</span></span>
<span class="line"><span style="color:#e1e4e8;">(1 row)</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">#或者</span></span>
<span class="line"><span style="color:#e1e4e8;">-- 关闭数据库连接，Database_Name为数据库名称</span></span>
<span class="line"><span style="color:#e1e4e8;">select pg_terminate_backend(pid) from (select pid from pg_stat_activity where datname = &#39;Database_Name&#39; ) a;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;"> -- 删除数据库</span></span>
<span class="line"><span style="color:#e1e4e8;">DROP DATABASE Database_Name;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">#查看所有</span></span>
<span class="line"><span style="color:#24292e;">postgres=#SELECT datname,pid FROM pg_stat_activity;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">postgres=# select pid from pg_stat_activity where datname = &#39;agile&#39; ; </span></span>
<span class="line"><span style="color:#24292e;">   pid   </span></span>
<span class="line"><span style="color:#24292e;">---------</span></span>
<span class="line"><span style="color:#24292e;"> 2544156</span></span>
<span class="line"><span style="color:#24292e;">(1 row)</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">postgres=# select pg_terminate_backend(2544156) ; </span></span>
<span class="line"><span style="color:#24292e;"> pg_terminate_backend </span></span>
<span class="line"><span style="color:#24292e;">----------------------</span></span>
<span class="line"><span style="color:#24292e;"> t</span></span>
<span class="line"><span style="color:#24292e;">(1 row)</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">#或者</span></span>
<span class="line"><span style="color:#24292e;">-- 关闭数据库连接，Database_Name为数据库名称</span></span>
<span class="line"><span style="color:#24292e;">select pg_terminate_backend(pid) from (select pid from pg_stat_activity where datname = &#39;Database_Name&#39; ) a;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;"> -- 删除数据库</span></span>
<span class="line"><span style="color:#24292e;">DROP DATABASE Database_Name;</span></span></code></pre></div><h2 id="_2-表" tabindex="-1">2.表 <a class="header-anchor" href="#_2-表" aria-label="Permalink to &quot;2.表&quot;">​</a></h2><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">#创建表</span></span>
<span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">TABLE</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">weather</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    city            </span><span style="color:#F97583;">varchar</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">    temp_lo         </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;">,           </span><span style="color:#6A737D;">-- low temperature</span></span>
<span class="line"><span style="color:#E1E4E8;">    temp_hi         </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;">,           </span><span style="color:#6A737D;">-- high temperature</span></span>
<span class="line"><span style="color:#E1E4E8;">    prcp            </span><span style="color:#F97583;">real</span><span style="color:#E1E4E8;">,          </span><span style="color:#6A737D;">-- precipitation</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">date</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">TABLE</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">cities</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">varchar</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;">),</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">point</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">#创建表</span></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">weather</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    city            </span><span style="color:#D73A49;">varchar</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">80</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">    temp_lo         </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">,           </span><span style="color:#6A737D;">-- low temperature</span></span>
<span class="line"><span style="color:#24292E;">    temp_hi         </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">,           </span><span style="color:#6A737D;">-- high temperature</span></span>
<span class="line"><span style="color:#24292E;">    prcp            </span><span style="color:#D73A49;">real</span><span style="color:#24292E;">,          </span><span style="color:#6A737D;">-- precipitation</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">            </span><span style="color:#D73A49;">date</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">cities</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">name</span><span style="color:#24292E;">            </span><span style="color:#D73A49;">varchar</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">80</span><span style="color:#24292E;">),</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">location</span><span style="color:#24292E;">        </span><span style="color:#D73A49;">point</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre></div><h3 id="删除表" tabindex="-1">删除表 <a class="header-anchor" href="#删除表" aria-label="Permalink to &quot;删除表&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">DROP</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">TABLE</span><span style="color:#E1E4E8;"> tablename;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">#清空表里内容</span></span>
<span class="line"><span style="color:#F97583;">truncate</span><span style="color:#E1E4E8;"> locktest ; </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 注意，adg 表名字</span></span>
<span class="line"><span style="color:#E1E4E8;">han_db</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> pg_relation_filepath(</span><span style="color:#9ECBFF;">&#39;adg&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;"> pg_relation_filepath </span></span>
<span class="line"><span style="color:#6A737D;">----------------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> base</span><span style="color:#F97583;">/</span><span style="color:#79B8FF;">16385</span><span style="color:#F97583;">/</span><span style="color:#79B8FF;">16386</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">row</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">han_db</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">#</span><span style="color:#F97583;">drop</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">adg</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#6A737D;">-- postgres drop table后会删除物理文件</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">DROP</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">TABLE</span><span style="color:#24292E;"> tablename;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">#清空表里内容</span></span>
<span class="line"><span style="color:#D73A49;">truncate</span><span style="color:#24292E;"> locktest ; </span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">-- 注意，adg 表名字</span></span>
<span class="line"><span style="color:#24292E;">han_db</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> pg_relation_filepath(</span><span style="color:#032F62;">&#39;adg&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;"> pg_relation_filepath </span></span>
<span class="line"><span style="color:#6A737D;">----------------------</span></span>
<span class="line"><span style="color:#24292E;"> base</span><span style="color:#D73A49;">/</span><span style="color:#005CC5;">16385</span><span style="color:#D73A49;">/</span><span style="color:#005CC5;">16386</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">row</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">han_db</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">#</span><span style="color:#D73A49;">drop</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">table</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">adg</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6A737D;">-- postgres drop table后会删除物理文件</span></span></code></pre></div><h3 id="插入数据" tabindex="-1">插入数据 <a class="header-anchor" href="#插入数据" aria-label="Permalink to &quot;插入数据&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">INSERT INTO</span><span style="color:#E1E4E8;"> weather </span><span style="color:#F97583;">VALUES</span><span style="color:#E1E4E8;"> (</span><span style="color:#9ECBFF;">&#39;San Francisco&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">46</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;1994-11-27&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">The </span><span style="color:#F97583;">point</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">type</span><span style="color:#E1E4E8;"> requires a coordinate pair </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> input, </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> shown here:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">INSERT INTO</span><span style="color:#E1E4E8;"> cities </span><span style="color:#F97583;">VALUES</span><span style="color:#E1E4E8;"> (</span><span style="color:#9ECBFF;">&#39;San Francisco&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;(-194.0, 53.0)&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">INSERT INTO</span><span style="color:#E1E4E8;"> weather (city, temp_lo, temp_hi, prcp, </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">VALUES</span><span style="color:#E1E4E8;"> (</span><span style="color:#9ECBFF;">&#39;San Francisco&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">43</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">57</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;1994-11-29&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">INSERT INTO</span><span style="color:#E1E4E8;"> weather (</span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">, city, temp_hi, temp_lo)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">VALUES</span><span style="color:#E1E4E8;"> (</span><span style="color:#9ECBFF;">&#39;1994-11-29&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;Hayward&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">54</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">37</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> weather </span><span style="color:#D73A49;">VALUES</span><span style="color:#24292E;"> (</span><span style="color:#032F62;">&#39;San Francisco&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">46</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">50</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">25</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;1994-11-27&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">The </span><span style="color:#D73A49;">point</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">type</span><span style="color:#24292E;"> requires a coordinate pair </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> input, </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> shown here:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> cities </span><span style="color:#D73A49;">VALUES</span><span style="color:#24292E;"> (</span><span style="color:#032F62;">&#39;San Francisco&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;(-194.0, 53.0)&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> weather (city, temp_lo, temp_hi, prcp, </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">VALUES</span><span style="color:#24292E;"> (</span><span style="color:#032F62;">&#39;San Francisco&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">43</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">57</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;1994-11-29&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">INSERT INTO</span><span style="color:#24292E;"> weather (</span><span style="color:#D73A49;">date</span><span style="color:#24292E;">, city, temp_hi, temp_lo)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">VALUES</span><span style="color:#24292E;"> (</span><span style="color:#032F62;">&#39;1994-11-29&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;Hayward&#39;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">54</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">37</span><span style="color:#24292E;">);</span></span></code></pre></div><h3 id="数据库导出成csv文本文件" tabindex="-1">数据库导出成csv文本文件 <a class="header-anchor" href="#数据库导出成csv文本文件" aria-label="Permalink to &quot;数据库导出成csv文本文件&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">copy</span><span style="color:#E1E4E8;"> weather </span><span style="color:#F97583;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/home/postgres/weather.csv&#39;</span><span style="color:#E1E4E8;"> delimiter </span><span style="color:#9ECBFF;">&#39;,&#39;</span><span style="color:#E1E4E8;"> csv header;</span></span>
<span class="line"><span style="color:#F97583;">COPY</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># exit</span></span>
<span class="line"><span style="color:#E1E4E8;">[postgres@db ~]$ cat </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">home</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">postgres</span><span style="color:#F97583;">/</span><span style="color:#79B8FF;">weather</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">csv</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">city,temp_lo,temp_hi,prcp,</span><span style="color:#F97583;">date</span></span>
<span class="line"><span style="color:#E1E4E8;">San Francisco,</span><span style="color:#79B8FF;">46</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">27</span></span>
<span class="line"><span style="color:#E1E4E8;">San Francisco,</span><span style="color:#79B8FF;">43</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">57</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span></span>
<span class="line"><span style="color:#E1E4E8;">Hayward,</span><span style="color:#79B8FF;">37</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">54</span><span style="color:#E1E4E8;">,,</span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">copy</span><span style="color:#24292E;"> weather </span><span style="color:#D73A49;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;/home/postgres/weather.csv&#39;</span><span style="color:#24292E;"> delimiter </span><span style="color:#032F62;">&#39;,&#39;</span><span style="color:#24292E;"> csv header;</span></span>
<span class="line"><span style="color:#D73A49;">COPY</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">3</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># exit</span></span>
<span class="line"><span style="color:#24292E;">[postgres@db ~]$ cat </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">home</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">postgres</span><span style="color:#D73A49;">/</span><span style="color:#005CC5;">weather</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">csv</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">city,temp_lo,temp_hi,prcp,</span><span style="color:#D73A49;">date</span></span>
<span class="line"><span style="color:#24292E;">San Francisco,</span><span style="color:#005CC5;">46</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">50</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">25</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">27</span></span>
<span class="line"><span style="color:#24292E;">San Francisco,</span><span style="color:#005CC5;">43</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">57</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span></span>
<span class="line"><span style="color:#24292E;">Hayward,</span><span style="color:#005CC5;">37</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">54</span><span style="color:#24292E;">,,</span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span></span></code></pre></div><h3 id="复制一张表" tabindex="-1">复制一张表 <a class="header-anchor" href="#复制一张表" aria-label="Permalink to &quot;复制一张表&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">test</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">into</span><span style="color:#E1E4E8;"> tbl_insert1  </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> tbl_insert ; </span></span>
<span class="line"><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">14</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">test</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">into</span><span style="color:#E1E4E8;"> tbl_insert1  </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> tbl_insert ; </span></span>
<span class="line"><span style="color:#E1E4E8;">ERROR:  relation </span><span style="color:#9ECBFF;">&quot;tbl_insert1&quot;</span><span style="color:#E1E4E8;"> already </span><span style="color:#F97583;">exists</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">test</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">into</span><span style="color:#24292E;"> tbl_insert1  </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> tbl_insert ; </span></span>
<span class="line"><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">14</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">test</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">into</span><span style="color:#24292E;"> tbl_insert1  </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> tbl_insert ; </span></span>
<span class="line"><span style="color:#24292E;">ERROR:  relation </span><span style="color:#032F62;">&quot;tbl_insert1&quot;</span><span style="color:#24292E;"> already </span><span style="color:#D73A49;">exists</span></span></code></pre></div><h2 id="_3-查询表的语句" tabindex="-1">3.查询表的语句 <a class="header-anchor" href="#_3-查询表的语句" aria-label="Permalink to &quot;3.查询表的语句&quot;">​</a></h2><h3 id="查询所有的数据" tabindex="-1">查询所有的数据 <a class="header-anchor" href="#查询所有的数据" aria-label="Permalink to &quot;查询所有的数据&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather;</span></span>
<span class="line"><span style="color:#E1E4E8;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">46</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">27</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">43</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">57</span><span style="color:#E1E4E8;"> |    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span></span>
<span class="line"><span style="color:#E1E4E8;"> Hayward       |      </span><span style="color:#79B8FF;">37</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">54</span><span style="color:#E1E4E8;"> |      | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather;</span></span>
<span class="line"><span style="color:#24292E;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">46</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">50</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">25</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">27</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">43</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">57</span><span style="color:#24292E;"> |    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span></span>
<span class="line"><span style="color:#24292E;"> Hayward       |      </span><span style="color:#005CC5;">37</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">54</span><span style="color:#24292E;"> |      | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span></code></pre></div><h3 id="查看指定列" tabindex="-1">查看指定列 <a class="header-anchor" href="#查看指定列" aria-label="Permalink to &quot;查看指定列&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> city, temp_lo, temp_hi, prcp, </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather;</span></span>
<span class="line"><span style="color:#E1E4E8;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">46</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">27</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">43</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">57</span><span style="color:#E1E4E8;"> |    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span></span>
<span class="line"><span style="color:#E1E4E8;"> Hayward       |      </span><span style="color:#79B8FF;">37</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">54</span><span style="color:#E1E4E8;"> |      | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> city, temp_lo, temp_hi, prcp, </span><span style="color:#D73A49;">date</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather;</span></span>
<span class="line"><span style="color:#24292E;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">46</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">50</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">25</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">27</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">43</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">57</span><span style="color:#24292E;"> |    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span></span>
<span class="line"><span style="color:#24292E;"> Hayward       |      </span><span style="color:#005CC5;">37</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">54</span><span style="color:#24292E;"> |      | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span></code></pre></div><h3 id="查看平均温度" tabindex="-1">查看平均温度 <a class="header-anchor" href="#查看平均温度" aria-label="Permalink to &quot;查看平均温度&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> city, (temp_hi</span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;">temp_lo)</span><span style="color:#F97583;">/</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">AS</span><span style="color:#E1E4E8;"> temp_avg, </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather;</span></span>
<span class="line"><span style="color:#E1E4E8;">     city      | temp_avg |    </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#6A737D;">---------------+----------+------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |       </span><span style="color:#79B8FF;">48</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">27</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |       </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span></span>
<span class="line"><span style="color:#E1E4E8;"> Hayward       |       </span><span style="color:#79B8FF;">45</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> city, (temp_hi</span><span style="color:#D73A49;">+</span><span style="color:#24292E;">temp_lo)</span><span style="color:#D73A49;">/</span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">AS</span><span style="color:#24292E;"> temp_avg, </span><span style="color:#D73A49;">date</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather;</span></span>
<span class="line"><span style="color:#24292E;">     city      | temp_avg |    </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#6A737D;">---------------+----------+------------</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |       </span><span style="color:#005CC5;">48</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">27</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |       </span><span style="color:#005CC5;">50</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span></span>
<span class="line"><span style="color:#24292E;"> Hayward       |       </span><span style="color:#005CC5;">45</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span></code></pre></div><h3 id="查看城市是-san-francisco-降水率大于0的数据" tabindex="-1">查看城市是&#39;San Francisco&#39;,降水率大于0的数据 <a class="header-anchor" href="#查看城市是-san-francisco-降水率大于0的数据" aria-label="Permalink to &quot;查看城市是&#39;San Francisco&#39;,降水率大于0的数据&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> city </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;San Francisco&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">AND</span><span style="color:#E1E4E8;"> prcp </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">46</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">27</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">row</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">WHERE</span><span style="color:#24292E;"> city </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;San Francisco&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">AND</span><span style="color:#24292E;"> prcp </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">46</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">50</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">25</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">27</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">row</span><span style="color:#24292E;">)</span></span></code></pre></div><h3 id="对城市排序" tabindex="-1">对城市排序 <a class="header-anchor" href="#对城市排序" aria-label="Permalink to &quot;对城市排序&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">ORDER BY</span><span style="color:#E1E4E8;"> city;</span></span>
<span class="line"><span style="color:#E1E4E8;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> Hayward       |      </span><span style="color:#79B8FF;">37</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">54</span><span style="color:#E1E4E8;"> |      | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">46</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">27</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">43</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">57</span><span style="color:#E1E4E8;"> |    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">#城市排序后，对温度再排序</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">ORDER BY</span><span style="color:#E1E4E8;"> city, temp_lo;</span></span>
<span class="line"><span style="color:#E1E4E8;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> Hayward       |      </span><span style="color:#79B8FF;">37</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">54</span><span style="color:#E1E4E8;"> |      | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">43</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">57</span><span style="color:#E1E4E8;"> |    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">46</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">27</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">ORDER BY</span><span style="color:#24292E;"> city;</span></span>
<span class="line"><span style="color:#24292E;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------</span></span>
<span class="line"><span style="color:#24292E;"> Hayward       |      </span><span style="color:#005CC5;">37</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">54</span><span style="color:#24292E;"> |      | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">46</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">50</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">25</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">27</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">43</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">57</span><span style="color:#24292E;"> |    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">#城市排序后，对温度再排序</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">ORDER BY</span><span style="color:#24292E;"> city, temp_lo;</span></span>
<span class="line"><span style="color:#24292E;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------</span></span>
<span class="line"><span style="color:#24292E;"> Hayward       |      </span><span style="color:#005CC5;">37</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">54</span><span style="color:#24292E;"> |      | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">43</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">57</span><span style="color:#24292E;"> |    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">46</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">50</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">25</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">27</span></span></code></pre></div><h3 id="城市去重distinct" tabindex="-1">城市去重DISTINCT <a class="header-anchor" href="#城市去重distinct" aria-label="Permalink to &quot;城市去重DISTINCT&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT DISTINCT</span><span style="color:#E1E4E8;"> city</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather;</span></span>
<span class="line"><span style="color:#E1E4E8;">     city      </span></span>
<span class="line"><span style="color:#6A737D;">---------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> Hayward</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">#去重</span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;">排序</span></span>
<span class="line"><span style="color:#F97583;">SELECT DISTINCT</span><span style="color:#E1E4E8;"> city</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">ORDER BY</span><span style="color:#E1E4E8;"> city;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT DISTINCT</span><span style="color:#24292E;"> city</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather;</span></span>
<span class="line"><span style="color:#24292E;">     city      </span></span>
<span class="line"><span style="color:#6A737D;">---------------</span></span>
<span class="line"><span style="color:#24292E;"> Hayward</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">#去重</span><span style="color:#D73A49;">+</span><span style="color:#24292E;">排序</span></span>
<span class="line"><span style="color:#D73A49;">SELECT DISTINCT</span><span style="color:#24292E;"> city</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">ORDER BY</span><span style="color:#24292E;"> city;</span></span></code></pre></div><h2 id="_4-表连接查询" tabindex="-1">4.表连接查询 <a class="header-anchor" href="#_4-表连接查询" aria-label="Permalink to &quot;4.表连接查询&quot;">​</a></h2><h3 id="查看zsddb数据库下的表名称" tabindex="-1">查看zsddb数据库下的表名称 <a class="header-anchor" href="#查看zsddb数据库下的表名称" aria-label="Permalink to &quot;查看zsddb数据库下的表名称&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># \\dt</span></span>
<span class="line"><span style="color:#E1E4E8;">          List of relations</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">Schema</span><span style="color:#E1E4E8;"> |  </span><span style="color:#F97583;">Name</span><span style="color:#E1E4E8;">   | </span><span style="color:#F97583;">Type</span><span style="color:#E1E4E8;">  |  </span><span style="color:#F97583;">Owner</span><span style="color:#E1E4E8;">   </span></span>
<span class="line"><span style="color:#6A737D;">--------+---------+-------+----------</span></span>
<span class="line"><span style="color:#E1E4E8;"> public | cities  | </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;"> | postgres</span></span>
<span class="line"><span style="color:#E1E4E8;"> public | weather | </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;"> | postgres</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># \\dt</span></span>
<span class="line"><span style="color:#24292E;">          List of relations</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">Schema</span><span style="color:#24292E;"> |  </span><span style="color:#D73A49;">Name</span><span style="color:#24292E;">   | </span><span style="color:#D73A49;">Type</span><span style="color:#24292E;">  |  </span><span style="color:#D73A49;">Owner</span><span style="color:#24292E;">   </span></span>
<span class="line"><span style="color:#6A737D;">--------+---------+-------+----------</span></span>
<span class="line"><span style="color:#24292E;"> public | cities  | </span><span style="color:#D73A49;">table</span><span style="color:#24292E;"> | postgres</span></span>
<span class="line"><span style="color:#24292E;"> public | weather | </span><span style="color:#D73A49;">table</span><span style="color:#24292E;"> | postgres</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span></code></pre></div><h3 id="查看表结构" tabindex="-1">查看表结构 <a class="header-anchor" href="#查看表结构" aria-label="Permalink to &quot;查看表结构&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># \\d weather</span></span>
<span class="line"><span style="color:#F97583;">Table</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;public.weather&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;"> Column  |         </span><span style="color:#F97583;">Type</span><span style="color:#E1E4E8;">          | Collation | Nullable | </span><span style="color:#F97583;">Default</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#6A737D;">---------+-----------------------+-----------+----------+---------</span></span>
<span class="line"><span style="color:#E1E4E8;"> city    | </span><span style="color:#F97583;">character varying</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;">) |           |          | </span></span>
<span class="line"><span style="color:#E1E4E8;"> temp_lo | </span><span style="color:#F97583;">integer</span><span style="color:#E1E4E8;">               |           |          | </span></span>
<span class="line"><span style="color:#E1E4E8;"> temp_hi | </span><span style="color:#F97583;">integer</span><span style="color:#E1E4E8;">               |           |          | </span></span>
<span class="line"><span style="color:#E1E4E8;"> prcp    | </span><span style="color:#F97583;">real</span><span style="color:#E1E4E8;">                  |           |          | </span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">    | </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">                  |           |          | </span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># \\d cities</span></span>
<span class="line"><span style="color:#F97583;">Table</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;public.cities&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  Column  |         </span><span style="color:#F97583;">Type</span><span style="color:#E1E4E8;">          | Collation | Nullable | </span><span style="color:#F97583;">Default</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#6A737D;">----------+-----------------------+-----------+----------+---------</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;">     | </span><span style="color:#F97583;">character varying</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;">) |           |          | </span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;"> | </span><span style="color:#F97583;">point</span><span style="color:#E1E4E8;">                 |           |          |</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># \\d weather</span></span>
<span class="line"><span style="color:#D73A49;">Table</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;public.weather&quot;</span></span>
<span class="line"><span style="color:#24292E;"> Column  |         </span><span style="color:#D73A49;">Type</span><span style="color:#24292E;">          | Collation | Nullable | </span><span style="color:#D73A49;">Default</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6A737D;">---------+-----------------------+-----------+----------+---------</span></span>
<span class="line"><span style="color:#24292E;"> city    | </span><span style="color:#D73A49;">character varying</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">80</span><span style="color:#24292E;">) |           |          | </span></span>
<span class="line"><span style="color:#24292E;"> temp_lo | </span><span style="color:#D73A49;">integer</span><span style="color:#24292E;">               |           |          | </span></span>
<span class="line"><span style="color:#24292E;"> temp_hi | </span><span style="color:#D73A49;">integer</span><span style="color:#24292E;">               |           |          | </span></span>
<span class="line"><span style="color:#24292E;"> prcp    | </span><span style="color:#D73A49;">real</span><span style="color:#24292E;">                  |           |          | </span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">    | </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">                  |           |          | </span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># \\d cities</span></span>
<span class="line"><span style="color:#D73A49;">Table</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;public.cities&quot;</span></span>
<span class="line"><span style="color:#24292E;">  Column  |         </span><span style="color:#D73A49;">Type</span><span style="color:#24292E;">          | Collation | Nullable | </span><span style="color:#D73A49;">Default</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6A737D;">----------+-----------------------+-----------+----------+---------</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;">     | </span><span style="color:#D73A49;">character varying</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">80</span><span style="color:#24292E;">) |           |          | </span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">location</span><span style="color:#24292E;"> | </span><span style="color:#D73A49;">point</span><span style="color:#24292E;">                 |           |          |</span></span></code></pre></div><h3 id="表连接查询" tabindex="-1">表连接查询 <a class="header-anchor" href="#表连接查询" aria-label="Permalink to &quot;表连接查询&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather, cities</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> city </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">    |     </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;">      | </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------+---------------+-----------</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">46</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">27</span><span style="color:#E1E4E8;"> | San Francisco | (</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">194</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">53</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">43</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">57</span><span style="color:#E1E4E8;"> |    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span><span style="color:#E1E4E8;"> | San Francisco | (</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">194</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">53</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">#一般来说，你可能会输出你想要的列而不是</span><span style="color:#9ECBFF;">&quot;*&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> city, temp_lo, temp_hi, prcp, </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">location</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather, cities</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> city </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">    | </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------+-----------</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">46</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">27</span><span style="color:#E1E4E8;"> | (</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">194</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">53</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">43</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">57</span><span style="color:#E1E4E8;"> |    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span><span style="color:#E1E4E8;"> | (</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">194</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">53</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather, cities</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">WHERE</span><span style="color:#24292E;"> city </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">    |     </span><span style="color:#D73A49;">name</span><span style="color:#24292E;">      | </span><span style="color:#D73A49;">location</span><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------+---------------+-----------</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">46</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">50</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">25</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">27</span><span style="color:#24292E;"> | San Francisco | (</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">194</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">53</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">43</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">57</span><span style="color:#24292E;"> |    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span><span style="color:#24292E;"> | San Francisco | (</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">194</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">53</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">#一般来说，你可能会输出你想要的列而不是</span><span style="color:#032F62;">&quot;*&quot;</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> city, temp_lo, temp_hi, prcp, </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">location</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather, cities</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">WHERE</span><span style="color:#24292E;"> city </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">    | </span><span style="color:#D73A49;">location</span><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------+-----------</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">46</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">50</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">25</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">27</span><span style="color:#24292E;"> | (</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">194</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">53</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">43</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">57</span><span style="color:#24292E;"> |    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span><span style="color:#24292E;"> | (</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">194</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">53</span><span style="color:#24292E;">)</span></span></code></pre></div><p>虽然pg的parser会自动分析city和name是属于哪个表的列。但是如果有同名的列话，还需手动指定，如下:</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">weather</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">city</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">weather</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">temp_lo</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">weather</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">temp_hi</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#        </span><span style="color:#79B8FF;">weather</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">prcp</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">weather</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">date</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">cities</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">location</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather, cities</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">cities</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">weather</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">city</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">    | </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------+-----------</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">46</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">27</span><span style="color:#E1E4E8;"> | (</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">194</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">53</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">43</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">57</span><span style="color:#E1E4E8;"> |    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span><span style="color:#E1E4E8;"> | (</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">194</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">53</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">#一种替代写法如下</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather </span><span style="color:#F97583;">INNER JOIN</span><span style="color:#E1E4E8;"> cities </span><span style="color:#F97583;">ON</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">weather</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">city</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">cities</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">name</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">    |     </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;">      | </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------+---------------+-----------</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">46</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">27</span><span style="color:#E1E4E8;"> | San Francisco | (</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">194</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">53</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">43</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">57</span><span style="color:#E1E4E8;"> |    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span><span style="color:#E1E4E8;"> | San Francisco | (</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">194</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">53</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">weather</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">city</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">weather</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">temp_lo</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">weather</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">temp_hi</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#        </span><span style="color:#005CC5;">weather</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">prcp</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">weather</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">date</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">cities</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">location</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather, cities</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">WHERE</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">cities</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">weather</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">city</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">    | </span><span style="color:#D73A49;">location</span><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------+-----------</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">46</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">50</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">25</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">27</span><span style="color:#24292E;"> | (</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">194</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">53</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">43</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">57</span><span style="color:#24292E;"> |    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span><span style="color:#24292E;"> | (</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">194</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">53</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">#一种替代写法如下</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather </span><span style="color:#D73A49;">INNER JOIN</span><span style="color:#24292E;"> cities </span><span style="color:#D73A49;">ON</span><span style="color:#24292E;"> (</span><span style="color:#005CC5;">weather</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">city</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">cities</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">name</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">    |     </span><span style="color:#D73A49;">name</span><span style="color:#24292E;">      | </span><span style="color:#D73A49;">location</span><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------+---------------+-----------</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">46</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">50</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">25</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">27</span><span style="color:#24292E;"> | San Francisco | (</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">194</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">53</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">43</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">57</span><span style="color:#24292E;"> |    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span><span style="color:#24292E;"> | San Francisco | (</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">194</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">53</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span></code></pre></div><h3 id="inner-join的表连接" tabindex="-1">inner join的表连接 <a class="header-anchor" href="#inner-join的表连接" aria-label="Permalink to &quot;inner join的表连接&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather </span><span style="color:#F97583;">INNER JOIN</span><span style="color:#E1E4E8;"> cities </span><span style="color:#F97583;">ON</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">weather</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">city</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">cities</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">name</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">    |     </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;">      | </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------+---------------+-----------</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">46</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">27</span><span style="color:#E1E4E8;"> | San Francisco | (</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">194</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">53</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">43</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">57</span><span style="color:#E1E4E8;"> |    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span><span style="color:#E1E4E8;"> | San Francisco | (</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">194</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">53</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather </span><span style="color:#D73A49;">INNER JOIN</span><span style="color:#24292E;"> cities </span><span style="color:#D73A49;">ON</span><span style="color:#24292E;"> (</span><span style="color:#005CC5;">weather</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">city</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">cities</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">name</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">    |     </span><span style="color:#D73A49;">name</span><span style="color:#24292E;">      | </span><span style="color:#D73A49;">location</span><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------+---------------+-----------</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">46</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">50</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">25</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">27</span><span style="color:#24292E;"> | San Francisco | (</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">194</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">53</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">43</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">57</span><span style="color:#24292E;"> |    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span><span style="color:#24292E;"> | San Francisco | (</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">194</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">53</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span></code></pre></div><h3 id="outer-join" tabindex="-1">outer join <a class="header-anchor" href="#outer-join" aria-label="Permalink to &quot;outer join&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">现在我们要把 Hayward那条记录找回来，我们需要对weather 表中每条记录与cities的表的记录相匹配，如果</span></span>
<span class="line"><span style="color:#E1E4E8;">匹配不到，就用</span><span style="color:#9ECBFF;">&quot;empty value&quot;</span><span style="color:#E1E4E8;">来显示，这个就需要用到outer </span><span style="color:#F97583;">join</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather </span><span style="color:#F97583;">LEFT OUTER JOIN</span><span style="color:#E1E4E8;"> cities </span><span style="color:#F97583;">ON</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">weather</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">city</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">cities</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">name</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">    |     </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;">      | </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------+---------------+-----------</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">46</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">27</span><span style="color:#E1E4E8;"> | San Francisco | (</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">194</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">53</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">43</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">57</span><span style="color:#E1E4E8;"> |    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span><span style="color:#E1E4E8;"> | San Francisco | (</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">194</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">53</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;"> Hayward       |      </span><span style="color:#79B8FF;">37</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">54</span><span style="color:#E1E4E8;"> |      | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span><span style="color:#E1E4E8;"> |               | </span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">现在我们要把 Hayward那条记录找回来，我们需要对weather 表中每条记录与cities的表的记录相匹配，如果</span></span>
<span class="line"><span style="color:#24292E;">匹配不到，就用</span><span style="color:#032F62;">&quot;empty value&quot;</span><span style="color:#24292E;">来显示，这个就需要用到outer </span><span style="color:#D73A49;">join</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather </span><span style="color:#D73A49;">LEFT OUTER JOIN</span><span style="color:#24292E;"> cities </span><span style="color:#D73A49;">ON</span><span style="color:#24292E;"> (</span><span style="color:#005CC5;">weather</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">city</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">cities</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">name</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">    |     </span><span style="color:#D73A49;">name</span><span style="color:#24292E;">      | </span><span style="color:#D73A49;">location</span><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------+---------------+-----------</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">46</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">50</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">25</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">27</span><span style="color:#24292E;"> | San Francisco | (</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">194</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">53</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">43</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">57</span><span style="color:#24292E;"> |    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span><span style="color:#24292E;"> | San Francisco | (</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">194</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">53</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;"> Hayward       |      </span><span style="color:#005CC5;">37</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">54</span><span style="color:#24292E;"> |      | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span><span style="color:#24292E;"> |               | </span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span></code></pre></div><h3 id="right-outer-joins" tabindex="-1">right outer joins <a class="header-anchor" href="#right-outer-joins" aria-label="Permalink to &quot;right outer joins&quot;">​</a></h3><h3 id="full-outer-joins" tabindex="-1">full outer joins <a class="header-anchor" href="#full-outer-joins" aria-label="Permalink to &quot;full outer joins&quot;">​</a></h3><h3 id="self-join" tabindex="-1">self join <a class="header-anchor" href="#self-join" aria-label="Permalink to &quot;self join&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">#可以对表自身做一个表连接</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">W1</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">city</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">W1</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">temp_lo</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">AS</span><span style="color:#E1E4E8;"> low, </span><span style="color:#79B8FF;">W1</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">temp_hi</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">AS</span><span style="color:#E1E4E8;"> high,</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#79B8FF;">W2</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">city</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">W2</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">temp_lo</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">AS</span><span style="color:#E1E4E8;"> low, </span><span style="color:#79B8FF;">W2</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">temp_hi</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">AS</span><span style="color:#E1E4E8;"> high</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather W1, weather W2</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">W1</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">temp_lo</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">W2</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">temp_lo</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">AND</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">W1</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">temp_hi</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">W2</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">temp_hi</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">     city      | low | high |     city      | low | high </span></span>
<span class="line"><span style="color:#6A737D;">---------------+-----+------+---------------+-----+------</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |  </span><span style="color:#79B8FF;">43</span><span style="color:#E1E4E8;"> |   </span><span style="color:#79B8FF;">57</span><span style="color:#E1E4E8;"> | San Francisco |  </span><span style="color:#79B8FF;">46</span><span style="color:#E1E4E8;"> |   </span><span style="color:#79B8FF;">50</span></span>
<span class="line"><span style="color:#E1E4E8;"> Hayward       |  </span><span style="color:#79B8FF;">37</span><span style="color:#E1E4E8;"> |   </span><span style="color:#79B8FF;">54</span><span style="color:#E1E4E8;"> | San Francisco |  </span><span style="color:#79B8FF;">46</span><span style="color:#E1E4E8;"> |   </span><span style="color:#79B8FF;">50</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">#可以对表自身做一个表连接</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">W1</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">city</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">W1</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">temp_lo</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">AS</span><span style="color:#24292E;"> low, </span><span style="color:#005CC5;">W1</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">temp_hi</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">AS</span><span style="color:#24292E;"> high,</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#005CC5;">W2</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">city</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">W2</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">temp_lo</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">AS</span><span style="color:#24292E;"> low, </span><span style="color:#005CC5;">W2</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">temp_hi</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">AS</span><span style="color:#24292E;"> high</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather W1, weather W2</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">WHERE</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">W1</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">temp_lo</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">W2</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">temp_lo</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">AND</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">W1</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">temp_hi</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">W2</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">temp_hi</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">     city      | low | high |     city      | low | high </span></span>
<span class="line"><span style="color:#6A737D;">---------------+-----+------+---------------+-----+------</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |  </span><span style="color:#005CC5;">43</span><span style="color:#24292E;"> |   </span><span style="color:#005CC5;">57</span><span style="color:#24292E;"> | San Francisco |  </span><span style="color:#005CC5;">46</span><span style="color:#24292E;"> |   </span><span style="color:#005CC5;">50</span></span>
<span class="line"><span style="color:#24292E;"> Hayward       |  </span><span style="color:#005CC5;">37</span><span style="color:#24292E;"> |   </span><span style="color:#005CC5;">54</span><span style="color:#24292E;"> | San Francisco |  </span><span style="color:#005CC5;">46</span><span style="color:#24292E;"> |   </span><span style="color:#005CC5;">50</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span></code></pre></div><h3 id="alias" tabindex="-1">alias <a class="header-anchor" href="#alias" aria-label="Permalink to &quot;alias&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">#减少select打query的数量</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather w, cities c</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">w</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">city</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">c</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">name</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">    |     </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;">      | </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------+---------------+-----------</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">46</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">27</span><span style="color:#E1E4E8;"> | San Francisco | (</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">194</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">53</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">43</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">57</span><span style="color:#E1E4E8;"> |    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span><span style="color:#E1E4E8;"> | San Francisco | (</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">194</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">53</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">#减少select打query的数量</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather w, cities c</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">WHERE</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">w</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">city</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">c</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">name</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">    |     </span><span style="color:#D73A49;">name</span><span style="color:#24292E;">      | </span><span style="color:#D73A49;">location</span><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------+---------------+-----------</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">46</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">50</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">25</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">27</span><span style="color:#24292E;"> | San Francisco | (</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">194</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">53</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">43</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">57</span><span style="color:#24292E;"> |    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span><span style="color:#24292E;"> | San Francisco | (</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">194</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">53</span><span style="color:#24292E;">)</span></span></code></pre></div><h2 id="_5-aggregate-functions-聚合函数" tabindex="-1">5.Aggregate Functions 聚合函数 <a class="header-anchor" href="#_5-aggregate-functions-聚合函数" aria-label="Permalink to &quot;5.Aggregate Functions 聚合函数&quot;">​</a></h2><h3 id="max" tabindex="-1">max <a class="header-anchor" href="#max" aria-label="Permalink to &quot;max&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">#天气最大值</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">max</span><span style="color:#E1E4E8;">(temp_lo) </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather;</span></span>
<span class="line"><span style="color:#E1E4E8;"> max </span></span>
<span class="line"><span style="color:#6A737D;">-----</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">46</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">row</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">#想知道temp_lo最大值对应的城市</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> city </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> temp_lo </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">max</span><span style="color:#E1E4E8;">(temp_lo) </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather);</span></span>
<span class="line"><span style="color:#E1E4E8;">     city      </span></span>
<span class="line"><span style="color:#6A737D;">---------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">row</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">#天气最大值</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">max</span><span style="color:#24292E;">(temp_lo) </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather;</span></span>
<span class="line"><span style="color:#24292E;"> max </span></span>
<span class="line"><span style="color:#6A737D;">-----</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">46</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">row</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">#想知道temp_lo最大值对应的城市</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> city </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">WHERE</span><span style="color:#24292E;"> temp_lo </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">max</span><span style="color:#24292E;">(temp_lo) </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather);</span></span>
<span class="line"><span style="color:#24292E;">     city      </span></span>
<span class="line"><span style="color:#6A737D;">---------------</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">row</span><span style="color:#24292E;">)</span></span></code></pre></div><h3 id="聚合函数-需要group-by来进行分组" tabindex="-1">聚合函数，需要group by来进行分组 <a class="header-anchor" href="#聚合函数-需要group-by来进行分组" aria-label="Permalink to &quot;聚合函数，需要group by来进行分组&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> city, </span><span style="color:#79B8FF;">max</span><span style="color:#E1E4E8;">(temp_lo)</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">GROUP BY</span><span style="color:#E1E4E8;"> city;</span></span>
<span class="line"><span style="color:#E1E4E8;">     city      | max </span></span>
<span class="line"><span style="color:#6A737D;">---------------+-----</span></span>
<span class="line"><span style="color:#E1E4E8;"> Hayward       |  </span><span style="color:#79B8FF;">37</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |  </span><span style="color:#79B8FF;">46</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">#聚合函数，需要group </span><span style="color:#F97583;">by</span><span style="color:#E1E4E8;">，再加where条件，挑选出小于40的</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> city, </span><span style="color:#79B8FF;">max</span><span style="color:#E1E4E8;">(temp_lo)</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">GROUP BY</span><span style="color:#E1E4E8;"> city</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">HAVING</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">max</span><span style="color:#E1E4E8;">(temp_lo) </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">40</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  city   | max </span></span>
<span class="line"><span style="color:#6A737D;">---------+-----</span></span>
<span class="line"><span style="color:#E1E4E8;"> Hayward |  </span><span style="color:#79B8FF;">37</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">row</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> city, </span><span style="color:#005CC5;">max</span><span style="color:#24292E;">(temp_lo)</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">GROUP BY</span><span style="color:#24292E;"> city;</span></span>
<span class="line"><span style="color:#24292E;">     city      | max </span></span>
<span class="line"><span style="color:#6A737D;">---------------+-----</span></span>
<span class="line"><span style="color:#24292E;"> Hayward       |  </span><span style="color:#005CC5;">37</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |  </span><span style="color:#005CC5;">46</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">#聚合函数，需要group </span><span style="color:#D73A49;">by</span><span style="color:#24292E;">，再加where条件，挑选出小于40的</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> city, </span><span style="color:#005CC5;">max</span><span style="color:#24292E;">(temp_lo)</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">GROUP BY</span><span style="color:#24292E;"> city</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">HAVING</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">max</span><span style="color:#24292E;">(temp_lo) </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">40</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  city   | max </span></span>
<span class="line"><span style="color:#6A737D;">---------+-----</span></span>
<span class="line"><span style="color:#24292E;"> Hayward |  </span><span style="color:#005CC5;">37</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">row</span><span style="color:#24292E;">)</span></span></code></pre></div><h2 id="_6-update语句的应用" tabindex="-1">6.update语句的应用 <a class="header-anchor" href="#_6-update语句的应用" aria-label="Permalink to &quot;6.update语句的应用&quot;">​</a></h2><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather;</span></span>
<span class="line"><span style="color:#E1E4E8;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">46</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">27</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">43</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">57</span><span style="color:#E1E4E8;"> |    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span></span>
<span class="line"><span style="color:#E1E4E8;"> Hayward       |      </span><span style="color:#79B8FF;">37</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">54</span><span style="color:#E1E4E8;"> |      | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">UPDATE</span><span style="color:#E1E4E8;"> weather</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">SET</span><span style="color:#E1E4E8;"> temp_hi </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> temp_hi </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">,  temp_lo </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> temp_lo </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">#     </span><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;1994-11-28&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">UPDATE</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather;</span></span>
<span class="line"><span style="color:#E1E4E8;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">46</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">27</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">41</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">55</span><span style="color:#E1E4E8;"> |    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span></span>
<span class="line"><span style="color:#E1E4E8;"> Hayward       |      </span><span style="color:#79B8FF;">35</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">52</span><span style="color:#E1E4E8;"> |      | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather;</span></span>
<span class="line"><span style="color:#24292E;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">46</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">50</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">25</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">27</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">43</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">57</span><span style="color:#24292E;"> |    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span></span>
<span class="line"><span style="color:#24292E;"> Hayward       |      </span><span style="color:#005CC5;">37</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">54</span><span style="color:#24292E;"> |      | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">UPDATE</span><span style="color:#24292E;"> weather</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">SET</span><span style="color:#24292E;"> temp_hi </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> temp_hi </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">,  temp_lo </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> temp_lo </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">#     </span><span style="color:#D73A49;">WHERE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">date</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;1994-11-28&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">UPDATE</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather;</span></span>
<span class="line"><span style="color:#24292E;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">46</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">50</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">25</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">27</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">41</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">55</span><span style="color:#24292E;"> |    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span></span>
<span class="line"><span style="color:#24292E;"> Hayward       |      </span><span style="color:#005CC5;">35</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">52</span><span style="color:#24292E;"> |      | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span></span></code></pre></div><p><strong>修改数据库名字</strong></p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">-- 将数据库的名称由database2改成database1 </span></span>
<span class="line"><span style="color:#F97583;">UPDATE</span><span style="color:#E1E4E8;"> pg_database </span><span style="color:#F97583;">SET</span><span style="color:#E1E4E8;"> datname </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;database1&#39;</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> datname </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;database2&#39;</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 将数据库的名称由database2改成database1 </span></span>
<span class="line"><span style="color:#D73A49;">UPDATE</span><span style="color:#24292E;"> pg_database </span><span style="color:#D73A49;">SET</span><span style="color:#24292E;"> datname </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;database1&#39;</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">WHERE</span><span style="color:#24292E;"> datname </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;database2&#39;</span><span style="color:#24292E;">;</span></span></code></pre></div><h2 id="_7-delete语句的应用" tabindex="-1">7.delete语句的应用 <a class="header-anchor" href="#_7-delete语句的应用" aria-label="Permalink to &quot;7.delete语句的应用&quot;">​</a></h2><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather;</span></span>
<span class="line"><span style="color:#E1E4E8;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">46</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">27</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">41</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">55</span><span style="color:#E1E4E8;"> |    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span></span>
<span class="line"><span style="color:#E1E4E8;"> Hayward       |      </span><span style="color:#79B8FF;">35</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">52</span><span style="color:#E1E4E8;"> |      | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">#删除指定</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">DELETE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather </span><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> city </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;Hayward&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">DELETE</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">#删除所有</span></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">DELETE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather;</span></span>
<span class="line"><span style="color:#F97583;">DELETE</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather;</span></span>
<span class="line"><span style="color:#E1E4E8;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">46</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">27</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">41</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">55</span><span style="color:#E1E4E8;"> |    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather;</span></span>
<span class="line"><span style="color:#24292E;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">46</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">50</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">25</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">27</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">41</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">55</span><span style="color:#24292E;"> |    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span></span>
<span class="line"><span style="color:#24292E;"> Hayward       |      </span><span style="color:#005CC5;">35</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">52</span><span style="color:#24292E;"> |      | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">#删除指定</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">DELETE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather </span><span style="color:#D73A49;">WHERE</span><span style="color:#24292E;"> city </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;Hayward&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">DELETE</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">#删除所有</span></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">DELETE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather;</span></span>
<span class="line"><span style="color:#D73A49;">DELETE</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather;</span></span>
<span class="line"><span style="color:#24292E;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">46</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">50</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">25</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">27</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">41</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">55</span><span style="color:#24292E;"> |    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span></code></pre></div><h2 id="_8-视图" tabindex="-1">8.视图 <a class="header-anchor" href="#_8-视图" aria-label="Permalink to &quot;8.视图&quot;">​</a></h2><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">CREATE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">VIEW</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">myview</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">AS</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> city, temp_lo, temp_hi, prcp, </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">location</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> weather, cities</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> city </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">zsddb</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> myview;</span></span>
<span class="line"><span style="color:#E1E4E8;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#F97583;">date</span><span style="color:#E1E4E8;">    | </span><span style="color:#F97583;">location</span><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------+-----------</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">46</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">27</span><span style="color:#E1E4E8;"> | (</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">194</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">53</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;"> San Francisco |      </span><span style="color:#79B8FF;">41</span><span style="color:#E1E4E8;"> |      </span><span style="color:#79B8FF;">55</span><span style="color:#E1E4E8;"> |    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> | </span><span style="color:#79B8FF;">1994</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">11</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">29</span><span style="color:#E1E4E8;"> | (</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">194</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">53</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">CREATE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">VIEW</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">myview</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">AS</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> city, temp_lo, temp_hi, prcp, </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">location</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> weather, cities</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">WHERE</span><span style="color:#24292E;"> city </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">zsddb</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> myview;</span></span>
<span class="line"><span style="color:#24292E;">     city      | temp_lo | temp_hi | prcp |    </span><span style="color:#D73A49;">date</span><span style="color:#24292E;">    | </span><span style="color:#D73A49;">location</span><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#6A737D;">---------------+---------+---------+------+------------+-----------</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">46</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">50</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">25</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">27</span><span style="color:#24292E;"> | (</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">194</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">53</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;"> San Francisco |      </span><span style="color:#005CC5;">41</span><span style="color:#24292E;"> |      </span><span style="color:#005CC5;">55</span><span style="color:#24292E;"> |    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> | </span><span style="color:#005CC5;">1994</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">11</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">29</span><span style="color:#24292E;"> | (</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">194</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">53</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span></code></pre></div><h2 id="_9-事务" tabindex="-1">9.事务 <a class="header-anchor" href="#_9-事务" aria-label="Permalink to &quot;9.事务&quot;">​</a></h2><p>PostgreSQL通过<code>BEGIN</code>和<code>COMMIT</code>这一对代表事务的开启</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">BEGIN</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">UPDATE</span><span style="color:#E1E4E8;"> accounts </span><span style="color:#F97583;">SET</span><span style="color:#E1E4E8;"> balance </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> balance </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">00</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;Alice&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#6A737D;">-- etc etc</span></span>
<span class="line"><span style="color:#F97583;">COMMIT</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">BEGIN</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">UPDATE</span><span style="color:#24292E;"> accounts </span><span style="color:#D73A49;">SET</span><span style="color:#24292E;"> balance </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> balance </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">100</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">00</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">WHERE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;Alice&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6A737D;">-- etc etc</span></span>
<span class="line"><span style="color:#D73A49;">COMMIT</span><span style="color:#24292E;">;</span></span></code></pre></div><h2 id="_10-替换字段" tabindex="-1">10.替换字段 <a class="header-anchor" href="#_10-替换字段" aria-label="Permalink to &quot;10.替换字段&quot;">​</a></h2><p>语法：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">UPDATE</span><span style="color:#E1E4E8;"> table_name </span><span style="color:#F97583;">SET</span><span style="color:#E1E4E8;"> column_name </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">REPLACE</span><span style="color:#E1E4E8;">(column_name, </span><span style="color:#9ECBFF;">&#39;old&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;new&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> ....</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">UPDATE</span><span style="color:#24292E;"> table_name </span><span style="color:#D73A49;">SET</span><span style="color:#24292E;"> column_name </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">REPLACE</span><span style="color:#24292E;">(column_name, </span><span style="color:#032F62;">&#39;old&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;new&#39;</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">WHERE</span><span style="color:#24292E;"> ....</span></span></code></pre></div><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">update</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;VideoInfo&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;CoverImage&quot;</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">REPLACE</span><span style="color:#E1E4E8;"> (</span><span style="color:#9ECBFF;">&quot;CoverImage&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;old&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;new&#39;</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">update</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;VideoInfo&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">set</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;CoverImage&quot;</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">REPLACE</span><span style="color:#24292E;"> (</span><span style="color:#032F62;">&quot;CoverImage&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;old&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;new&#39;</span><span style="color:#24292E;">)</span></span></code></pre></div><h2 id="_11-alter" tabindex="-1">11.alter <a class="header-anchor" href="#_11-alter" aria-label="Permalink to &quot;11.alter&quot;">​</a></h2><ul><li>修改字段类型</li></ul><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">ALTER TABLE </span><span style="color:#9ECBFF;">&#39;</span><span style="color:#FDAEB7;font-style:italic;">表名</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#E1E4E8;"> ALTER COLUMN </span><span style="color:#9ECBFF;">&#39;</span><span style="color:#FDAEB7;font-style:italic;">列名</span><span style="color:#9ECBFF;">&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">type</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">新类型</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">ALTER TABLE </span><span style="color:#032F62;">&#39;</span><span style="color:#B31D28;font-style:italic;">表名</span><span style="color:#032F62;">&#39;</span><span style="color:#24292E;"> ALTER COLUMN </span><span style="color:#032F62;">&#39;</span><span style="color:#B31D28;font-style:italic;">列名</span><span style="color:#032F62;">&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">type</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">新类型</span><span style="color:#24292E;">;</span></span></code></pre></div><h1 id="_10-连接管理" tabindex="-1">10.连接管理 <a class="header-anchor" href="#_10-连接管理" aria-label="Permalink to &quot;10.连接管理&quot;">​</a></h1><p>使用以下三个SQL语句来取消正在运行的查询并终止连接</p><p>（1）查出活动连接列表及其进程ID</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> pg_stat_activity;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> pg_stat_activity;</span></span></code></pre></div><p>(2)取消连接上的活动查询</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> pg_cancel_backend(procid);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> pg_cancel_backend(procid);</span></span></code></pre></div><p>该操作不会终止连接本身</p><p>（3）终止该连接</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> pg_terminate_backend(procid);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> pg_terminate_backend(procid);</span></span></code></pre></div><p>如果你未停止某个连接上正在执行的语句就直接终止该连接，那么这些语句此时也会被停止掉。在上述步骤2执行完毕后，客户端应用的挂起状态被解除，即客户端可以重新执行语句，有些着急的用户会在此时再次执行刚刚被终止掉的语句，这又会导致系统陷入之前的状态。为了避免此种情况的发生，可以采用直接</p><p>终止连接的方式。</p><p>如果你希望一次性终止某个用户的所有连接，那么在9.2版及之后的版本上可以执行以下语句：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> pg_terminate_backend(pid) </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> pg_stat_activity </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> username</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;some_role&#39;</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">   </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> pg_terminate_backend(pid) </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> pg_stat_activity </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> username</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;some_role&#39;</span><span style="color:#24292E;">;</span></span></code></pre></div><p>在9.2版之前的版本上可以执行以下语句：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> pg_terminate_backend(procpid) </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> pg_stat_activity </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> username</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;some_role&#39;</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> pg_terminate_backend(procpid) </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> pg_stat_activity </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> username</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;some_role&#39;</span><span style="color:#24292E;">;</span></span></code></pre></div><h1 id="_11-外部调用" tabindex="-1">11.外部调用 <a class="header-anchor" href="#_11-外部调用" aria-label="Permalink to &quot;11.外部调用&quot;">​</a></h1><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">su </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> postgres </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">c </span><span style="color:#9ECBFF;">&#39;psql -U postgres -h 127.0.0.1 -p 5532   -x -c &quot;select * from pg_stat_replication&quot; -d postgres&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">su </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> postgres </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">c </span><span style="color:#032F62;">&#39;psql -U postgres -h 127.0.0.1 -p 5532   -x -c &quot;select * from pg_stat_replication&quot; -d postgres&#39;</span></span></code></pre></div><h1 id="_12-timezone" tabindex="-1">12.timezone <a class="header-anchor" href="#_12-timezone" aria-label="Permalink to &quot;12.timezone&quot;">​</a></h1><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">postgres</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># show timezone;</span></span>
<span class="line"><span style="color:#E1E4E8;"> TimeZone </span></span>
<span class="line"><span style="color:#6A737D;">----------</span></span>
<span class="line"><span style="color:#E1E4E8;"> PRC</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">row</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">or</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">#格式化输出</span></span>
<span class="line"><span style="color:#E1E4E8;">postgres</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># \\x</span></span>
<span class="line"><span style="color:#E1E4E8;">Expanded display </span><span style="color:#F97583;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">on</span><span style="color:#E1E4E8;">.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">postgres</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> pg_settings </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;TimeZone&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">[ RECORD 1 ]</span><span style="color:#6A737D;">---+----------------------------------------------------------------</span></span>
<span class="line"><span style="color:#F97583;">name</span><span style="color:#E1E4E8;">            | TimeZone</span></span>
<span class="line"><span style="color:#E1E4E8;">setting         | PRC</span></span>
<span class="line"><span style="color:#E1E4E8;">unit            | </span></span>
<span class="line"><span style="color:#E1E4E8;">category        | Client Connection Defaults </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;"> Locale </span><span style="color:#F97583;">and</span><span style="color:#E1E4E8;"> Formatting</span></span>
<span class="line"><span style="color:#E1E4E8;">short_desc      | </span><span style="color:#F97583;">Sets</span><span style="color:#E1E4E8;"> the </span><span style="color:#F97583;">time</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">zone</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> displaying </span><span style="color:#F97583;">and</span><span style="color:#E1E4E8;"> interpreting </span><span style="color:#F97583;">time</span><span style="color:#E1E4E8;"> stamps.</span></span>
<span class="line"><span style="color:#E1E4E8;">extra_desc      | </span></span>
<span class="line"><span style="color:#E1E4E8;">context         | user</span></span>
<span class="line"><span style="color:#E1E4E8;">vartype         | string</span></span>
<span class="line"><span style="color:#E1E4E8;">source          | </span><span style="color:#F97583;">configuration</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">file</span></span>
<span class="line"><span style="color:#E1E4E8;">min_val         | </span></span>
<span class="line"><span style="color:#E1E4E8;">max_val         | </span></span>
<span class="line"><span style="color:#E1E4E8;">enumvals        | </span></span>
<span class="line"><span style="color:#E1E4E8;">boot_val        | GMT</span></span>
<span class="line"><span style="color:#E1E4E8;">reset_val       | PRC</span></span>
<span class="line"><span style="color:#E1E4E8;">sourcefile      | </span><span style="color:#F97583;">/data/</span><span style="color:#E1E4E8;">pgdata</span><span style="color:#F97583;">/data/</span><span style="color:#79B8FF;">postgresql</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">conf</span></span>
<span class="line"><span style="color:#E1E4E8;">sourceline      | </span><span style="color:#79B8FF;">15</span></span>
<span class="line"><span style="color:#E1E4E8;">pending_restart | f</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">#查找一个本地timezone名字</span></span>
<span class="line"><span style="color:#E1E4E8;">postgres</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> pg_timezone_names;</span></span>
<span class="line"><span style="color:#E1E4E8;">               </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;">               | abbrev | utc_offset | is_dst </span></span>
<span class="line"><span style="color:#6A737D;">----------------------------------+--------+------------+--------</span></span>
<span class="line"><span style="color:#E1E4E8;"> Africa</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">Malabo                    | WAT    | </span><span style="color:#79B8FF;">01</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">00</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">00</span><span style="color:#E1E4E8;">   | f</span></span>
<span class="line"><span style="color:#E1E4E8;"> Africa</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">Niamey                    | WAT    | </span><span style="color:#79B8FF;">01</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">00</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">00</span><span style="color:#E1E4E8;">   | f</span></span>
<span class="line"><span style="color:#E1E4E8;"> Africa</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">Porto</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">Novo                | WAT    | </span><span style="color:#79B8FF;">01</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">00</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">00</span><span style="color:#E1E4E8;">   | f</span></span>
<span class="line"><span style="color:#E1E4E8;"> Africa</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">Maseru                    | SAST   | </span><span style="color:#79B8FF;">02</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">00</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">00</span><span style="color:#E1E4E8;">   | f</span></span>
<span class="line"><span style="color:#E1E4E8;"> Africa</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">Mbabane                   | SAST   | </span><span style="color:#79B8FF;">02</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">00</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">00</span><span style="color:#E1E4E8;">   | f</span></span>
<span class="line"><span style="color:#E1E4E8;"> Africa</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">Asmera                    | EAT    | </span><span style="color:#79B8FF;">03</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">00</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">00</span><span style="color:#E1E4E8;">   | f</span></span>
<span class="line"><span style="color:#E1E4E8;"> Africa</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">Timbuktu                  | GMT    | </span><span style="color:#79B8FF;">00</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">00</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">00</span><span style="color:#E1E4E8;">   | f</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#E1E4E8;">#　vi </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">opt</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">pgsql</span><span style="color:#F97583;">/data/</span><span style="color:#79B8FF;">postgresql</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">conf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">timezone </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;America/New_York&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">修改成</span></span>
<span class="line"><span style="color:#E1E4E8;">timezone </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;Asia/Shanghai&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">postgres</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> pg_reload_conf();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">postgres</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">#  </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> pg_settings </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;TimeZone&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">另外timezone 还可以有sql 级，user级和db 级. </span><span style="color:#79B8FF;">e</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">g</span><span style="color:#E1E4E8;">. </span><span style="color:#F97583;">ALTER</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">DATABASE</span><span style="color:#E1E4E8;"> postgres </span><span style="color:#F97583;">SET</span><span style="color:#E1E4E8;"> timezone </span><span style="color:#F97583;">TO</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;Europe/Berlin&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">postgres</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">now</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#F97583;">now</span><span style="color:#E1E4E8;">              </span></span>
<span class="line"><span style="color:#6A737D;">-------------------------------</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2020</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">07</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">11</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">22</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">05</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">246962</span><span style="color:#F97583;">+</span><span style="color:#79B8FF;">08</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">row</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">#修改系统时间</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@localhost Asia]# </span><span style="color:#F97583;">date</span></span>
<span class="line"><span style="color:#E1E4E8;">Mon Jun </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">27</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;"> EDT </span><span style="color:#79B8FF;">2019</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@localhost Asia]# ls </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">etc</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">localtime</span></span>
<span class="line"><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">etc</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">localtime</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@localhost ~]# cd </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">usr</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">share</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">zoneinfo</span><span style="color:#F97583;">/</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@localhost zoneinfo]# ls</span></span>
<span class="line"><span style="color:#E1E4E8;">Africa      Chile    GB         Indian       MST         PRC        UTC</span></span>
<span class="line"><span style="color:#E1E4E8;">America     CST6CDT  GB</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">Eire    Iran         MST7MDT     PST8PDT    WET</span></span>
<span class="line"><span style="color:#E1E4E8;">Antarctica  Cuba     GMT        </span><span style="color:#79B8FF;">iso3166</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">tab</span><span style="color:#E1E4E8;">  Navajo      right      W</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">SU</span></span>
<span class="line"><span style="color:#E1E4E8;">Arctic      EET      GMT0       Israel       NZ          ROC        </span><span style="color:#79B8FF;">zone</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">tab</span></span>
<span class="line"><span style="color:#E1E4E8;">Asia        Egypt    GMT</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">      Jamaica      NZ</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">CHAT     ROK        Zulu</span></span>
<span class="line"><span style="color:#E1E4E8;">Atlantic    Eire     GMT</span><span style="color:#F97583;">+</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">      Japan        Pacific     Singapore</span></span>
<span class="line"><span style="color:#E1E4E8;">Australia   EST      Greenwich  Kwajalein    Poland      Turkey</span></span>
<span class="line"><span style="color:#E1E4E8;">Brazil      EST5EDT  Hongkong   Libya        Portugal    UCT</span></span>
<span class="line"><span style="color:#E1E4E8;">Canada      Etc      HST        MET          posix       Universal</span></span>
<span class="line"><span style="color:#E1E4E8;">CET         Europe   Iceland    Mexico       posixrules  US</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@localhost zoneinfo]# cd Asia</span><span style="color:#F97583;">/</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@localhost Asia]# ls</span></span>
<span class="line"><span style="color:#E1E4E8;">Aden       Calcutta     Hong_Kong    Kuala_Lumpur  Pyongyang      Tel_Aviv</span></span>
<span class="line"><span style="color:#E1E4E8;">Almaty     Chita        Hovd         Kuching       Qatar          Thimbu</span></span>
<span class="line"><span style="color:#E1E4E8;">Amman      Choibalsan   Irkutsk      Kuwait        Qyzylorda      Thimphu</span></span>
<span class="line"><span style="color:#E1E4E8;">Anadyr     Chongqing    Istanbul     Macao         Rangoon        Tokyo</span></span>
<span class="line"><span style="color:#E1E4E8;">Aqtau      Chungking    Jakarta      Macau         Riyadh         Tomsk</span></span>
<span class="line"><span style="color:#E1E4E8;">Aqtobe     Colombo      Jayapura     Magadan       Saigon         Ujung_Pandang</span></span>
<span class="line"><span style="color:#E1E4E8;">Ashgabat   Dacca        Jerusalem    Makassar      Sakhalin       Ulaanbaatar</span></span>
<span class="line"><span style="color:#E1E4E8;">Ashkhabad  Damascus     Kabul        Manila        Samarkand      Ulan_Bator</span></span>
<span class="line"><span style="color:#E1E4E8;">Baghdad    Dhaka        Kamchatka    Muscat        Seoul          Urumqi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@localhost Asia]# cp </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">etc</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">localtime </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">etc</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">localtime_bak</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@localhost Asia]# cp Shanghai </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">etc</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">localtime</span></span>
<span class="line"><span style="color:#E1E4E8;">cp: overwrite ‘</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">etc</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">localtime’? yes</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@localhost Asia]# </span><span style="color:#F97583;">date</span></span>
<span class="line"><span style="color:#E1E4E8;">Mon Jun </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">22</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">29</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">23</span><span style="color:#E1E4E8;"> CST </span><span style="color:#79B8FF;">2019</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">postgres</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># show timezone;</span></span>
<span class="line"><span style="color:#24292E;"> TimeZone </span></span>
<span class="line"><span style="color:#6A737D;">----------</span></span>
<span class="line"><span style="color:#24292E;"> PRC</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">row</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">or</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">#格式化输出</span></span>
<span class="line"><span style="color:#24292E;">postgres</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># \\x</span></span>
<span class="line"><span style="color:#24292E;">Expanded display </span><span style="color:#D73A49;">is</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">on</span><span style="color:#24292E;">.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">postgres</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> pg_settings </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;TimeZone&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">-</span><span style="color:#24292E;">[ RECORD 1 ]</span><span style="color:#6A737D;">---+----------------------------------------------------------------</span></span>
<span class="line"><span style="color:#D73A49;">name</span><span style="color:#24292E;">            | TimeZone</span></span>
<span class="line"><span style="color:#24292E;">setting         | PRC</span></span>
<span class="line"><span style="color:#24292E;">unit            | </span></span>
<span class="line"><span style="color:#24292E;">category        | Client Connection Defaults </span><span style="color:#D73A49;">/</span><span style="color:#24292E;"> Locale </span><span style="color:#D73A49;">and</span><span style="color:#24292E;"> Formatting</span></span>
<span class="line"><span style="color:#24292E;">short_desc      | </span><span style="color:#D73A49;">Sets</span><span style="color:#24292E;"> the </span><span style="color:#D73A49;">time</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">zone</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> displaying </span><span style="color:#D73A49;">and</span><span style="color:#24292E;"> interpreting </span><span style="color:#D73A49;">time</span><span style="color:#24292E;"> stamps.</span></span>
<span class="line"><span style="color:#24292E;">extra_desc      | </span></span>
<span class="line"><span style="color:#24292E;">context         | user</span></span>
<span class="line"><span style="color:#24292E;">vartype         | string</span></span>
<span class="line"><span style="color:#24292E;">source          | </span><span style="color:#D73A49;">configuration</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">file</span></span>
<span class="line"><span style="color:#24292E;">min_val         | </span></span>
<span class="line"><span style="color:#24292E;">max_val         | </span></span>
<span class="line"><span style="color:#24292E;">enumvals        | </span></span>
<span class="line"><span style="color:#24292E;">boot_val        | GMT</span></span>
<span class="line"><span style="color:#24292E;">reset_val       | PRC</span></span>
<span class="line"><span style="color:#24292E;">sourcefile      | </span><span style="color:#D73A49;">/data/</span><span style="color:#24292E;">pgdata</span><span style="color:#D73A49;">/data/</span><span style="color:#005CC5;">postgresql</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">conf</span></span>
<span class="line"><span style="color:#24292E;">sourceline      | </span><span style="color:#005CC5;">15</span></span>
<span class="line"><span style="color:#24292E;">pending_restart | f</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">#查找一个本地timezone名字</span></span>
<span class="line"><span style="color:#24292E;">postgres</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> pg_timezone_names;</span></span>
<span class="line"><span style="color:#24292E;">               </span><span style="color:#D73A49;">name</span><span style="color:#24292E;">               | abbrev | utc_offset | is_dst </span></span>
<span class="line"><span style="color:#6A737D;">----------------------------------+--------+------------+--------</span></span>
<span class="line"><span style="color:#24292E;"> Africa</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">Malabo                    | WAT    | </span><span style="color:#005CC5;">01</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">00</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">00</span><span style="color:#24292E;">   | f</span></span>
<span class="line"><span style="color:#24292E;"> Africa</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">Niamey                    | WAT    | </span><span style="color:#005CC5;">01</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">00</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">00</span><span style="color:#24292E;">   | f</span></span>
<span class="line"><span style="color:#24292E;"> Africa</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">Porto</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">Novo                | WAT    | </span><span style="color:#005CC5;">01</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">00</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">00</span><span style="color:#24292E;">   | f</span></span>
<span class="line"><span style="color:#24292E;"> Africa</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">Maseru                    | SAST   | </span><span style="color:#005CC5;">02</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">00</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">00</span><span style="color:#24292E;">   | f</span></span>
<span class="line"><span style="color:#24292E;"> Africa</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">Mbabane                   | SAST   | </span><span style="color:#005CC5;">02</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">00</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">00</span><span style="color:#24292E;">   | f</span></span>
<span class="line"><span style="color:#24292E;"> Africa</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">Asmera                    | EAT    | </span><span style="color:#005CC5;">03</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">00</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">00</span><span style="color:#24292E;">   | f</span></span>
<span class="line"><span style="color:#24292E;"> Africa</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">Timbuktu                  | GMT    | </span><span style="color:#005CC5;">00</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">00</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">00</span><span style="color:#24292E;">   | f</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#24292E;">#　vi </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">opt</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">pgsql</span><span style="color:#D73A49;">/data/</span><span style="color:#005CC5;">postgresql</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">conf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">timezone </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;America/New_York&#39;</span></span>
<span class="line"><span style="color:#24292E;">修改成</span></span>
<span class="line"><span style="color:#24292E;">timezone </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;Asia/Shanghai&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">postgres</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> pg_reload_conf();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">postgres</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">#  </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> pg_settings </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;TimeZone&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">另外timezone 还可以有sql 级，user级和db 级. </span><span style="color:#005CC5;">e</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">g</span><span style="color:#24292E;">. </span><span style="color:#D73A49;">ALTER</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">DATABASE</span><span style="color:#24292E;"> postgres </span><span style="color:#D73A49;">SET</span><span style="color:#24292E;"> timezone </span><span style="color:#D73A49;">TO</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;Europe/Berlin&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">postgres</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">now</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#D73A49;">now</span><span style="color:#24292E;">              </span></span>
<span class="line"><span style="color:#6A737D;">-------------------------------</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">2020</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">07</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">10</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">11</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">22</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">05</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">246962</span><span style="color:#D73A49;">+</span><span style="color:#005CC5;">08</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">row</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">#修改系统时间</span></span>
<span class="line"><span style="color:#24292E;">[root@localhost Asia]# </span><span style="color:#D73A49;">date</span></span>
<span class="line"><span style="color:#24292E;">Mon Jun </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">27</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">16</span><span style="color:#24292E;"> EDT </span><span style="color:#005CC5;">2019</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@localhost Asia]# ls </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">etc</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">localtime</span></span>
<span class="line"><span style="color:#D73A49;">/</span><span style="color:#24292E;">etc</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">localtime</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@localhost ~]# cd </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">usr</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">share</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">zoneinfo</span><span style="color:#D73A49;">/</span></span>
<span class="line"><span style="color:#24292E;">[root@localhost zoneinfo]# ls</span></span>
<span class="line"><span style="color:#24292E;">Africa      Chile    GB         Indian       MST         PRC        UTC</span></span>
<span class="line"><span style="color:#24292E;">America     CST6CDT  GB</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">Eire    Iran         MST7MDT     PST8PDT    WET</span></span>
<span class="line"><span style="color:#24292E;">Antarctica  Cuba     GMT        </span><span style="color:#005CC5;">iso3166</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">tab</span><span style="color:#24292E;">  Navajo      right      W</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">SU</span></span>
<span class="line"><span style="color:#24292E;">Arctic      EET      GMT0       Israel       NZ          ROC        </span><span style="color:#005CC5;">zone</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">tab</span></span>
<span class="line"><span style="color:#24292E;">Asia        Egypt    GMT</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">      Jamaica      NZ</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">CHAT     ROK        Zulu</span></span>
<span class="line"><span style="color:#24292E;">Atlantic    Eire     GMT</span><span style="color:#D73A49;">+</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">      Japan        Pacific     Singapore</span></span>
<span class="line"><span style="color:#24292E;">Australia   EST      Greenwich  Kwajalein    Poland      Turkey</span></span>
<span class="line"><span style="color:#24292E;">Brazil      EST5EDT  Hongkong   Libya        Portugal    UCT</span></span>
<span class="line"><span style="color:#24292E;">Canada      Etc      HST        MET          posix       Universal</span></span>
<span class="line"><span style="color:#24292E;">CET         Europe   Iceland    Mexico       posixrules  US</span></span>
<span class="line"><span style="color:#24292E;">[root@localhost zoneinfo]# cd Asia</span><span style="color:#D73A49;">/</span></span>
<span class="line"><span style="color:#24292E;">[root@localhost Asia]# ls</span></span>
<span class="line"><span style="color:#24292E;">Aden       Calcutta     Hong_Kong    Kuala_Lumpur  Pyongyang      Tel_Aviv</span></span>
<span class="line"><span style="color:#24292E;">Almaty     Chita        Hovd         Kuching       Qatar          Thimbu</span></span>
<span class="line"><span style="color:#24292E;">Amman      Choibalsan   Irkutsk      Kuwait        Qyzylorda      Thimphu</span></span>
<span class="line"><span style="color:#24292E;">Anadyr     Chongqing    Istanbul     Macao         Rangoon        Tokyo</span></span>
<span class="line"><span style="color:#24292E;">Aqtau      Chungking    Jakarta      Macau         Riyadh         Tomsk</span></span>
<span class="line"><span style="color:#24292E;">Aqtobe     Colombo      Jayapura     Magadan       Saigon         Ujung_Pandang</span></span>
<span class="line"><span style="color:#24292E;">Ashgabat   Dacca        Jerusalem    Makassar      Sakhalin       Ulaanbaatar</span></span>
<span class="line"><span style="color:#24292E;">Ashkhabad  Damascus     Kabul        Manila        Samarkand      Ulan_Bator</span></span>
<span class="line"><span style="color:#24292E;">Baghdad    Dhaka        Kamchatka    Muscat        Seoul          Urumqi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@localhost Asia]# cp </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">etc</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">localtime </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">etc</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">localtime_bak</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@localhost Asia]# cp Shanghai </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">etc</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">localtime</span></span>
<span class="line"><span style="color:#24292E;">cp: overwrite ‘</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">etc</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">localtime’? yes</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@localhost Asia]# </span><span style="color:#D73A49;">date</span></span>
<span class="line"><span style="color:#24292E;">Mon Jun </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">22</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">29</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">23</span><span style="color:#24292E;"> CST </span><span style="color:#005CC5;">2019</span></span></code></pre></div><h1 id="_13-pset" tabindex="-1">13.pset <a class="header-anchor" href="#_13-pset" aria-label="Permalink to &quot;13.pset&quot;">​</a></h1><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">highgo</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># \\pset border </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">--无边框</span></span>
<span class="line"><span style="color:#E1E4E8;">Border style </span><span style="color:#F97583;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">.</span></span>
<span class="line"><span style="color:#E1E4E8;">highgo</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> test_a;</span></span>
<span class="line"><span style="color:#E1E4E8;">id </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#6A737D;">-- ----</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> a</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> b</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> c</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;"> d</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> e</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">highgo</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># \\pset border </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;">--边框只在内部</span></span>
<span class="line"><span style="color:#E1E4E8;">Border style </span><span style="color:#F97583;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">.</span></span>
<span class="line"><span style="color:#E1E4E8;">highgo</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> test_a;</span></span>
<span class="line"><span style="color:#E1E4E8;"> id | </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#6A737D;">----+------</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> | a</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> | b</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> | c</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;"> | d</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> | e</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">highgo</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># \\pset border </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">--内外都有边框</span></span>
<span class="line"><span style="color:#E1E4E8;">Border style </span><span style="color:#F97583;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">.</span></span>
<span class="line"><span style="color:#E1E4E8;">highgo</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"># </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> test_a;</span></span>
<span class="line"><span style="color:#F97583;">+</span><span style="color:#6A737D;">----+------+</span></span>
<span class="line"><span style="color:#E1E4E8;">| id | </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;"> |</span></span>
<span class="line"><span style="color:#F97583;">+</span><span style="color:#6A737D;">----+------+</span></span>
<span class="line"><span style="color:#E1E4E8;">|  </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> | a    |</span></span>
<span class="line"><span style="color:#E1E4E8;">|  </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> | b    |</span></span>
<span class="line"><span style="color:#E1E4E8;">|  </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> | c    |</span></span>
<span class="line"><span style="color:#E1E4E8;">|  </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;"> | d    |</span></span>
<span class="line"><span style="color:#E1E4E8;">|  </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> | e    |</span></span>
<span class="line"><span style="color:#F97583;">+</span><span style="color:#6A737D;">----+------+</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">rows</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">highgo</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># \\pset border </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">      </span><span style="color:#6A737D;">--无边框</span></span>
<span class="line"><span style="color:#24292E;">Border style </span><span style="color:#D73A49;">is</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">.</span></span>
<span class="line"><span style="color:#24292E;">highgo</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> test_a;</span></span>
<span class="line"><span style="color:#24292E;">id </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6A737D;">-- ----</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> a</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> b</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> c</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">4</span><span style="color:#24292E;"> d</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">5</span><span style="color:#24292E;"> e</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">5</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">highgo</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># \\pset border </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">     </span><span style="color:#6A737D;">--边框只在内部</span></span>
<span class="line"><span style="color:#24292E;">Border style </span><span style="color:#D73A49;">is</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">.</span></span>
<span class="line"><span style="color:#24292E;">highgo</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> test_a;</span></span>
<span class="line"><span style="color:#24292E;"> id | </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6A737D;">----+------</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> | a</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> | b</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> | c</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">4</span><span style="color:#24292E;"> | d</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">5</span><span style="color:#24292E;"> | e</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">5</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">highgo</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># \\pset border </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">    </span><span style="color:#6A737D;">--内外都有边框</span></span>
<span class="line"><span style="color:#24292E;">Border style </span><span style="color:#D73A49;">is</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">.</span></span>
<span class="line"><span style="color:#24292E;">highgo</span><span style="color:#D73A49;">=</span><span style="color:#24292E;"># </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> test_a;</span></span>
<span class="line"><span style="color:#D73A49;">+</span><span style="color:#6A737D;">----+------+</span></span>
<span class="line"><span style="color:#24292E;">| id | </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> |</span></span>
<span class="line"><span style="color:#D73A49;">+</span><span style="color:#6A737D;">----+------+</span></span>
<span class="line"><span style="color:#24292E;">|  </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> | a    |</span></span>
<span class="line"><span style="color:#24292E;">|  </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> | b    |</span></span>
<span class="line"><span style="color:#24292E;">|  </span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> | c    |</span></span>
<span class="line"><span style="color:#24292E;">|  </span><span style="color:#005CC5;">4</span><span style="color:#24292E;"> | d    |</span></span>
<span class="line"><span style="color:#24292E;">|  </span><span style="color:#005CC5;">5</span><span style="color:#24292E;"> | e    |</span></span>
<span class="line"><span style="color:#D73A49;">+</span><span style="color:#6A737D;">----+------+</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">5</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">rows</span><span style="color:#24292E;">)</span></span></code></pre></div><h1 id="_14-shell中调用sql" tabindex="-1">14.shell中调用sql <a class="header-anchor" href="#_14-shell中调用sql" aria-label="Permalink to &quot;14.shell中调用sql&quot;">​</a></h1><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">[postgres@pg02 ~]$ psql -U postgres -h 127.0.0.1 -p 5532 -c &quot;select version();&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">                                                version                                                 </span></span>
<span class="line"><span style="color:#e1e4e8;">--------------------------------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#e1e4e8;"> PostgreSQL 12.2 on x86_64-pc-linux-gnu, compiled by gcc (GCC) 8.3.1 20190507 (Red Hat 8.3.1-4), 64-bit</span></span>
<span class="line"><span style="color:#e1e4e8;">(1 row)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">[postgres@pg02 ~]$ psql -U postgres -h 127.0.0.1 -p 5532 -c &quot;select version();&quot;</span></span>
<span class="line"><span style="color:#24292e;">                                                version                                                 </span></span>
<span class="line"><span style="color:#24292e;">--------------------------------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#24292e;"> PostgreSQL 12.2 on x86_64-pc-linux-gnu, compiled by gcc (GCC) 8.3.1 20190507 (Red Hat 8.3.1-4), 64-bit</span></span>
<span class="line"><span style="color:#24292e;">(1 row)</span></span></code></pre></div><h1 id="_15-watch" tabindex="-1">15.watch <a class="header-anchor" href="#_15-watch" aria-label="Permalink to &quot;15.watch&quot;">​</a></h1><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">-- 反复查看语句执行结果</span></span>
<span class="line"><span style="color:#E1E4E8;">test</span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">a</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">test</span><span style="color:#E1E4E8;">; \\watch </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">-----单位为秒</span></span>
<span class="line"><span style="color:#E1E4E8;"> id </span></span>
<span class="line"><span style="color:#6A737D;">----</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">1</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">row</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">-- 反复查看语句执行结果</span></span>
<span class="line"><span style="color:#24292E;">test</span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">a</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">test</span><span style="color:#24292E;">; \\watch </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">      </span><span style="color:#6A737D;">-----单位为秒</span></span>
<span class="line"><span style="color:#24292E;"> id </span></span>
<span class="line"><span style="color:#6A737D;">----</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">1</span></span>
<span class="line"><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">row</span><span style="color:#24292E;">)</span></span></code></pre></div><h1 id="_16-update" tabindex="-1">16.update <a class="header-anchor" href="#_16-update" aria-label="Permalink to &quot;16.update&quot;">​</a></h1><p>根据 PostgreSQLL 的 MVCC 机制，在执行 update 命令更新数据时， PG 会在原有基础上复制一份新的复本 tuples 出来，然后在新的 tuples 上进行更新</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">skytf=&gt; create table test_59(id integer,name varchar(32));  </span></span>
<span class="line"><span style="color:#e1e4e8;">CREATE TABLE</span></span>
<span class="line"><span style="color:#e1e4e8;">skytf=&gt; insert into test_59 values (1,&#39;a&#39;),(2,&#39;b&#39;),(3,&#39;c&#39;);  </span></span>
<span class="line"><span style="color:#e1e4e8;">INSERT 0 3</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">skytf=&gt; create table test_59(id integer,name varchar(32));  </span></span>
<span class="line"><span style="color:#24292e;">CREATE TABLE</span></span>
<span class="line"><span style="color:#24292e;">skytf=&gt; insert into test_59 values (1,&#39;a&#39;),(2,&#39;b&#39;),(3,&#39;c&#39;);  </span></span>
<span class="line"><span style="color:#24292e;">INSERT 0 3</span></span></code></pre></div><h2 id="查询表的-ctid" tabindex="-1">查询表的 ctid <a class="header-anchor" href="#查询表的-ctid" aria-label="Permalink to &quot;查询表的 ctid&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">skytf=&gt; select ctid, * from test_59;  </span></span>
<span class="line"><span style="color:#e1e4e8;">ctid | id | name  </span></span>
<span class="line"><span style="color:#e1e4e8;">-------+----+------  </span></span>
<span class="line"><span style="color:#e1e4e8;">(0,1) | 1 | a  </span></span>
<span class="line"><span style="color:#e1e4e8;">(0,2) | 2 | b  </span></span>
<span class="line"><span style="color:#e1e4e8;">(0,3) | 3 | c  </span></span>
<span class="line"><span style="color:#e1e4e8;">(3 rows)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">skytf=&gt; select ctid, * from test_59;  </span></span>
<span class="line"><span style="color:#24292e;">ctid | id | name  </span></span>
<span class="line"><span style="color:#24292e;">-------+----+------  </span></span>
<span class="line"><span style="color:#24292e;">(0,1) | 1 | a  </span></span>
<span class="line"><span style="color:#24292e;">(0,2) | 2 | b  </span></span>
<span class="line"><span style="color:#24292e;">(0,3) | 3 | c  </span></span>
<span class="line"><span style="color:#24292e;">(3 rows)</span></span></code></pre></div><p>备注： ctid 为记录上逻辑标识，ctid 有两个字段组成，第一个字段表示 table 的逻辑 PAGE 编号，第二个字段表示每个逻辑 PAGE 上的第 N 条记录; 例如 ctid =(0,3) 表示这条记录位于这个表的第 0 PAGE 页的第三条记录</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">skytf=&gt; update test_59 set name=&#39;aaa&#39; where id=1;  </span></span>
<span class="line"><span style="color:#e1e4e8;">UPDATE 1</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">#查看</span></span>
<span class="line"><span style="color:#e1e4e8;">skytf=&gt; select ctid, * from test_59;  </span></span>
<span class="line"><span style="color:#e1e4e8;">ctid | id | name  </span></span>
<span class="line"><span style="color:#e1e4e8;">-------+----+------  </span></span>
<span class="line"><span style="color:#e1e4e8;">(0,2) | 2 | b  </span></span>
<span class="line"><span style="color:#e1e4e8;">(0,3) | 3 | c  </span></span>
<span class="line"><span style="color:#e1e4e8;">(0,4) | 1 | aaa  </span></span>
<span class="line"><span style="color:#e1e4e8;">(3 rows)</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">skytf=&gt; select ctid, * from test_59 where id=1;  </span></span>
<span class="line"><span style="color:#e1e4e8;">ctid | id | name  </span></span>
<span class="line"><span style="color:#e1e4e8;">-------+----+------  </span></span>
<span class="line"><span style="color:#e1e4e8;">(0,4) | 1 | aaa</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">skytf=&gt; update test_59 set name=&#39;aaa&#39; where id=1;  </span></span>
<span class="line"><span style="color:#24292e;">UPDATE 1</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">#查看</span></span>
<span class="line"><span style="color:#24292e;">skytf=&gt; select ctid, * from test_59;  </span></span>
<span class="line"><span style="color:#24292e;">ctid | id | name  </span></span>
<span class="line"><span style="color:#24292e;">-------+----+------  </span></span>
<span class="line"><span style="color:#24292e;">(0,2) | 2 | b  </span></span>
<span class="line"><span style="color:#24292e;">(0,3) | 3 | c  </span></span>
<span class="line"><span style="color:#24292e;">(0,4) | 1 | aaa  </span></span>
<span class="line"><span style="color:#24292e;">(3 rows)</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">skytf=&gt; select ctid, * from test_59 where id=1;  </span></span>
<span class="line"><span style="color:#24292e;">ctid | id | name  </span></span>
<span class="line"><span style="color:#24292e;">-------+----+------  </span></span>
<span class="line"><span style="color:#24292e;">(0,4) | 1 | aaa</span></span></code></pre></div><p>备注：id=1 这条记录的 ctid 由原来的 (0,1) 变成现在的 (0,4) 了，说明在 update 时，是在这条记录的复本上进行 update, 同时老记录标识不可见，的记录依然在PAGE里，VACUUM之后才会将老记录清除</p><p><a href="https://postgres.fun/20111021102003.html" target="_blank" rel="noreferrer">https://postgres.fun/20111021102003.html</a></p><h1 id="_17-导入外部sql文件" tabindex="-1">17.导入外部sql文件 <a class="header-anchor" href="#_17-导入外部sql文件" aria-label="Permalink to &quot;17.导入外部sql文件&quot;">​</a></h1><h2 id="_1-进入终端" tabindex="-1">1.进入终端 <a class="header-anchor" href="#_1-进入终端" aria-label="Permalink to &quot;1.进入终端&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">登录到sql里面</span></span>
<span class="line"><span style="color:#e1e4e8;">psql -d db_name -U username</span></span>
<span class="line"><span style="color:#e1e4e8;">&gt;\\i /path/xxx.sql</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">登录到sql里面</span></span>
<span class="line"><span style="color:#24292e;">psql -d db_name -U username</span></span>
<span class="line"><span style="color:#24292e;">&gt;\\i /path/xxx.sql</span></span></code></pre></div><h2 id="_2-终端外部" tabindex="-1">2.终端外部 <a class="header-anchor" href="#_2-终端外部" aria-label="Permalink to &quot;2.终端外部&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">#psql -U username -h 127.0.0.1 -p 5432 -d db_name -U user_name -f /pathA/xxx.sql</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">#psql -U username -h 127.0.0.1 -p 5432 -d db_name -U user_name -f /pathA/xxx.sql</span></span></code></pre></div>`,169),e=[o];function c(t,r,y,E,i,F){return a(),n("div",null,e)}const h=s(p,[["render",c]]);export{C as __pageData,h as default};
