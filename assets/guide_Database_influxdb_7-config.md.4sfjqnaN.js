import{_ as a,o as s,c as e,R as t}from"./chunks/framework.zUbWieqp.js";const m=JSON.parse('{"title":"官方文档","description":"","frontmatter":{},"headers":[],"relativePath":"guide/Database/influxdb/7-config.md","filePath":"guide/Database/influxdb/7-config.md","lastUpdated":1720533756000}'),n={name:"guide/Database/influxdb/7-config.md"},l=t(`<h1 id="官方文档" tabindex="-1">官方文档 <a class="header-anchor" href="#官方文档" aria-label="Permalink to &quot;官方文档&quot;">​</a></h1><p><a href="https://docs.influxdata.com/influxdb/v1.7/administration/config/" target="_blank" rel="noreferrer">https://docs.influxdata.com/influxdb/v1.7/administration/config/</a></p><h2 id="_0-配置文件" tabindex="-1">0. 配置文件 <a class="header-anchor" href="#_0-配置文件" aria-label="Permalink to &quot;0. 配置文件&quot;">​</a></h2><p>默认配置文件安装目录为: <code>/etc/influxdb/influxdb.conf</code></p><p>默认配置查看</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">infuxd config</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">infuxd config</span></span></code></pre></div><h2 id="_1-全局配置" tabindex="-1">1.全局配置 <a class="header-anchor" href="#_1-全局配置" aria-label="Permalink to &quot;1.全局配置&quot;">​</a></h2><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>reporting-disabled = false</td><td>该选项用于上报influxdb的使用信息给InfluxData公司，默认值为false，将此选项设置为true将禁用报告</td></tr><tr><td>bind-address = &quot;127.0.0.1:8088&quot;</td><td>备份恢复时使用，默认值为8088</td></tr></tbody></table><h2 id="_2-meta相关配置" tabindex="-1">2.meta相关配置 <a class="header-anchor" href="#_2-meta相关配置" aria-label="Permalink to &quot;2.meta相关配置&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">[meta]</span></span>
<span class="line"><span style="color:#e1e4e8;">dir = &quot;/var/lib/influxdb/meta&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">retention-autocreate = true</span></span>
<span class="line"><span style="color:#e1e4e8;">logging-enabled = true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">[meta]</span></span>
<span class="line"><span style="color:#24292e;">dir = &quot;/var/lib/influxdb/meta&quot;</span></span>
<span class="line"><span style="color:#24292e;">retention-autocreate = true</span></span>
<span class="line"><span style="color:#24292e;">logging-enabled = true</span></span></code></pre></div><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>dir = &quot;/var/lib/influxdb/meta&quot;</td><td>存储元数据/ raft数据库的目录</td></tr><tr><td>retention-autocreate</td><td>用于控制默认存储策略，数据库创建时，会自动生成autogen的存储策略，默认值：true</td></tr><tr><td>logging-enabled</td><td>为元服务打印日志消息，默认值：true</td></tr></tbody></table><h2 id="_3-data" tabindex="-1">3.data <a class="header-anchor" href="#_3-data" aria-label="Permalink to &quot;3.data&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">[data]</span></span>
<span class="line"><span style="color:#e1e4e8;">dir = &quot;/var/lib/influxdb/data&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">wal-dir = &quot;/var/lib/influxdb/wal&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">wal-fsync-delay = = &quot;0s&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">index-version = &quot;inmem&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">trace-logging-enabled = false</span></span>
<span class="line"><span style="color:#e1e4e8;">query-log-enabled = true</span></span>
<span class="line"><span style="color:#e1e4e8;">cache-max-memory-size = 1048576000  </span></span>
<span class="line"><span style="color:#e1e4e8;">cache-snapshot-memory-size = 26214400</span></span>
<span class="line"><span style="color:#e1e4e8;">cache-snapshot-write-cold-duration = &quot;10m&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">compact-full-write-cold-duration = &quot;4h&quot; </span></span>
<span class="line"><span style="color:#e1e4e8;">max-series-per-database = 1000000  </span></span>
<span class="line"><span style="color:#e1e4e8;">max-values-per-tag = 100000  </span></span>
<span class="line"><span style="color:#e1e4e8;">compact-throughput = &quot;48m&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">compact-throughput-burst = &quot;48m&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">max-index-log-file-size = &quot;1m&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">max-series-per-database = 1000000</span></span>
<span class="line"><span style="color:#e1e4e8;">max-values-per-tag = 100000</span></span>
<span class="line"><span style="color:#e1e4e8;">tsm-use-madv-willneed = false</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">[data]</span></span>
<span class="line"><span style="color:#24292e;">dir = &quot;/var/lib/influxdb/data&quot;</span></span>
<span class="line"><span style="color:#24292e;">wal-dir = &quot;/var/lib/influxdb/wal&quot;</span></span>
<span class="line"><span style="color:#24292e;">wal-fsync-delay = = &quot;0s&quot;</span></span>
<span class="line"><span style="color:#24292e;">index-version = &quot;inmem&quot;</span></span>
<span class="line"><span style="color:#24292e;">trace-logging-enabled = false</span></span>
<span class="line"><span style="color:#24292e;">query-log-enabled = true</span></span>
<span class="line"><span style="color:#24292e;">cache-max-memory-size = 1048576000  </span></span>
<span class="line"><span style="color:#24292e;">cache-snapshot-memory-size = 26214400</span></span>
<span class="line"><span style="color:#24292e;">cache-snapshot-write-cold-duration = &quot;10m&quot;</span></span>
<span class="line"><span style="color:#24292e;">compact-full-write-cold-duration = &quot;4h&quot; </span></span>
<span class="line"><span style="color:#24292e;">max-series-per-database = 1000000  </span></span>
<span class="line"><span style="color:#24292e;">max-values-per-tag = 100000  </span></span>
<span class="line"><span style="color:#24292e;">compact-throughput = &quot;48m&quot;</span></span>
<span class="line"><span style="color:#24292e;">compact-throughput-burst = &quot;48m&quot;</span></span>
<span class="line"><span style="color:#24292e;">max-index-log-file-size = &quot;1m&quot;</span></span>
<span class="line"><span style="color:#24292e;">max-series-per-database = 1000000</span></span>
<span class="line"><span style="color:#24292e;">max-values-per-tag = 100000</span></span>
<span class="line"><span style="color:#24292e;">tsm-use-madv-willneed = false</span></span></code></pre></div><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>dir = &quot;/var/lib/influxdb/data&quot;</td><td>最终数据（TSM文件）存储目录</td></tr><tr><td>wal-dir = &quot;/var/lib/influxdb/wal&quot;</td><td>预写日志存储目录</td></tr><tr><td>wal-fsync-delay = = &quot;0s&quot;</td><td>写入在fsyncing之前等待的时间。 持续时间大于0可用于批量处理多个fsync调用。 这对于较慢的磁盘或看到WAL写入争用时很有用。 每次写入WAL时值为0s fsyncs。 对于非SSD磁盘，建议使用0-100ms范围内的值</td></tr><tr><td>index-version = &quot;inmem&quot;</td><td>用于新分片的分片索引的类型。 默认值是在启动时重新创建的内存中索引。 值“tsi1”将使用支持更高的基于磁盘的索引基数数据集</td></tr><tr><td>trace-logging-enabled = false</td><td>是否开启跟踪（trace）日志，默认值：false</td></tr><tr><td>query-log-enabled = true</td><td>是否开启tsm引擎查询日志，默认值： true</td></tr><tr><td>cache-max-memory-size = 1048576000</td><td>用于限定shard最大值，大于该值时会拒绝写入，默认值：1000MB，单位：byte</td></tr><tr><td>cache-snapshot-memory-size = 26214400</td><td>用于设置快照大小，大于该值时数据会刷新到tsm文件，默认值：25MB，单位：byte</td></tr><tr><td>cache-snapshot-write-cold-duration = &quot;10m&quot;</td><td>tsm引擎 snapshot写盘延迟，默认值：10Minute</td></tr><tr><td>compact-full-write-cold-duration = &quot;4h&quot;</td><td>tsm文件在压缩前可以存储的最大时间，默认值：4Hour</td></tr><tr><td>max-series-per-database</td><td>限制数据库的级数，该值为0时取消限制，默认值：1000000</td></tr><tr><td>max-values-per-tag</td><td>一个tag最大的value数，0取消限制，默认值：100000</td></tr><tr><td>compact-throughput</td><td>是我们允许TSM压缩写入磁盘的速率限制（以字节/秒为单位）。 请注意，短脉冲串允许以可能更大的值发生，由Compact-Throughput-Burst设置，默认值：48m</td></tr><tr><td>compact-throughput-burst</td><td>是我们允许TSM压缩写入磁盘的速率限制，以每秒字节数为单位，默认值：48m</td></tr><tr><td>max-index-log-file-size</td><td>索引预写日志文件压缩到索引文件中时的阈值（以字节为单位）。 较小的大小将导致日志文件更快地压缩，并导致较低的堆使用量，但代价是写入吞吐量。 更高的大小将更少压缩，在内存中存储更多系列，并提供更高的写入吞吐量。有效大小的后缀为k，m或g（不区分大小写，1024 = 1k）。没有大小后缀的值以字节为单位，默认值：1m</td></tr><tr><td>max-series-per-database</td><td>限制数据库的级数，该值为0时取消限制，默认值：1000000</td></tr><tr><td>tsm-use-madv-willneed</td><td>如果为true，则将针对TSM文件向内核提供mmap建议值MADV_WILLNEED。 已发现此设置在某些内核上存在问题，默认值：false。 在某些情况下，它可能会帮助磁盘速度较慢的用户</td></tr></tbody></table><h2 id="_4-coordinator" tabindex="-1">4.coordinator <a class="header-anchor" href="#_4-coordinator" aria-label="Permalink to &quot;4.coordinator&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">#控制群集服务配置</span></span>
<span class="line"><span style="color:#e1e4e8;">[coordinator]</span></span>
<span class="line"><span style="color:#e1e4e8;">write-timeout = &quot;10s&quot; </span></span>
<span class="line"><span style="color:#e1e4e8;">max-concurrent-queries = 0</span></span>
<span class="line"><span style="color:#e1e4e8;">query-timeout = &quot;0s&quot; </span></span>
<span class="line"><span style="color:#e1e4e8;">log-queries-after = &quot;0s&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">max-select-point = 0 </span></span>
<span class="line"><span style="color:#e1e4e8;">max-select-series = 0</span></span>
<span class="line"><span style="color:#e1e4e8;">max-select-buckets = 0</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">#控制群集服务配置</span></span>
<span class="line"><span style="color:#24292e;">[coordinator]</span></span>
<span class="line"><span style="color:#24292e;">write-timeout = &quot;10s&quot; </span></span>
<span class="line"><span style="color:#24292e;">max-concurrent-queries = 0</span></span>
<span class="line"><span style="color:#24292e;">query-timeout = &quot;0s&quot; </span></span>
<span class="line"><span style="color:#24292e;">log-queries-after = &quot;0s&quot;</span></span>
<span class="line"><span style="color:#24292e;">max-select-point = 0 </span></span>
<span class="line"><span style="color:#24292e;">max-select-series = 0</span></span>
<span class="line"><span style="color:#24292e;">max-select-buckets = 0</span></span></code></pre></div><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>write-timeout</td><td>写操作超时时间，默认值： 10s</td></tr><tr><td>max-concurrent-queries</td><td>最大并发查询数，0无限制，默认值： 0</td></tr><tr><td>query-timeout</td><td>查询操作超时时间，0无限制，默认值：0s</td></tr><tr><td>log-queries-after</td><td>慢查询超时时间，0无限制，默认值：0s</td></tr><tr><td>max-select-point</td><td>select语句可以处理的最大点数（points），0无限制，默认值：0。</td></tr><tr><td>max-select-series</td><td>select语句可以处理的最大级数（series），0无限制，默认值：0。</td></tr><tr><td>max-select-buckets</td><td>select语句可以处理的最大&quot;GROUP BY time()&quot;的时间周期，0无限制，默认值：0</td></tr></tbody></table><h2 id="_5-retention" tabindex="-1">5.retention <a class="header-anchor" href="#_5-retention" aria-label="Permalink to &quot;5.retention&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">[retention]</span></span>
<span class="line"><span style="color:#e1e4e8;">enabled = true</span></span>
<span class="line"><span style="color:#e1e4e8;">check-interval = &quot;30m0s&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">[retention]</span></span>
<span class="line"><span style="color:#24292e;">enabled = true</span></span>
<span class="line"><span style="color:#24292e;">check-interval = &quot;30m0s&quot;</span></span></code></pre></div><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>enabled</td><td>是否启用该模块，默认值 ： true。</td></tr><tr><td>check-interval</td><td>检查时间间隔，默认值 ：“30m”</td></tr></tbody></table><h2 id="_6-shard-precreation" tabindex="-1">6.shard-precreation <a class="header-anchor" href="#_6-shard-precreation" aria-label="Permalink to &quot;6.shard-precreation&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">#分区预创建</span></span>
<span class="line"><span style="color:#e1e4e8;">[shard-precreation]</span></span>
<span class="line"><span style="color:#e1e4e8;">enabled = true</span></span>
<span class="line"><span style="color:#e1e4e8;">check-interval = &quot;10m&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">advance-period = &quot;30m&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">#分区预创建</span></span>
<span class="line"><span style="color:#24292e;">[shard-precreation]</span></span>
<span class="line"><span style="color:#24292e;">enabled = true</span></span>
<span class="line"><span style="color:#24292e;">check-interval = &quot;10m&quot;</span></span>
<span class="line"><span style="color:#24292e;">advance-period = &quot;30m&quot;</span></span></code></pre></div><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>enabled</td><td>是否启用该模块，默认值 ： true。</td></tr><tr><td>check-interval</td><td>检查时间间隔，默认值 ：“10m”。</td></tr><tr><td>advance-period</td><td>预创建分区的最大提前时间，默认值 ：30m</td></tr></tbody></table><h2 id="_7-admin忽略" tabindex="-1">7.admin忽略 <a class="header-anchor" href="#_7-admin忽略" aria-label="Permalink to &quot;7.admin忽略&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">[admin]</span></span>
<span class="line"><span style="color:#e1e4e8;">忽略</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">[admin]</span></span>
<span class="line"><span style="color:#24292e;">忽略</span></span></code></pre></div><h2 id="_8-monitor" tabindex="-1">8.monitor <a class="header-anchor" href="#_8-monitor" aria-label="Permalink to &quot;8.monitor&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">[monitor]</span></span>
<span class="line"><span style="color:#e1e4e8;">store-enabled = true</span></span>
<span class="line"><span style="color:#e1e4e8;">store-database = &quot;_internal&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">store-interval = &quot;10s&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">[monitor]</span></span>
<span class="line"><span style="color:#24292e;">store-enabled = true</span></span>
<span class="line"><span style="color:#24292e;">store-database = &quot;_internal&quot;</span></span>
<span class="line"><span style="color:#24292e;">store-interval = &quot;10s&quot;</span></span></code></pre></div><h2 id="_9-http" tabindex="-1">9.http <a class="header-anchor" href="#_9-http" aria-label="Permalink to &quot;9.http&quot;">​</a></h2><p>influxdb的http接口配置</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">[http]</span></span>
<span class="line"><span style="color:#e1e4e8;">enabled = true</span></span>
<span class="line"><span style="color:#e1e4e8;">flux-enabled = false</span></span>
<span class="line"><span style="color:#e1e4e8;">bind-address = &quot;:8086&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">auth-enabled = false</span></span>
<span class="line"><span style="color:#e1e4e8;">realm = &quot;InfluxDB&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">log-enabled = true</span></span>
<span class="line"><span style="color:#e1e4e8;">suppress-write-log = false</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">[http]</span></span>
<span class="line"><span style="color:#24292e;">enabled = true</span></span>
<span class="line"><span style="color:#24292e;">flux-enabled = false</span></span>
<span class="line"><span style="color:#24292e;">bind-address = &quot;:8086&quot;</span></span>
<span class="line"><span style="color:#24292e;">auth-enabled = false</span></span>
<span class="line"><span style="color:#24292e;">realm = &quot;InfluxDB&quot;</span></span>
<span class="line"><span style="color:#24292e;">log-enabled = true</span></span>
<span class="line"><span style="color:#24292e;">suppress-write-log = false</span></span></code></pre></div><h2 id="_10-subscriber" tabindex="-1">10.subscriber <a class="header-anchor" href="#_10-subscriber" aria-label="Permalink to &quot;10.subscriber&quot;">​</a></h2><h2 id="_11-graphite" tabindex="-1">11.graphite <a class="header-anchor" href="#_11-graphite" aria-label="Permalink to &quot;11.graphite&quot;">​</a></h2><h2 id="_12-collectd" tabindex="-1">12.collectd <a class="header-anchor" href="#_12-collectd" aria-label="Permalink to &quot;12.collectd&quot;">​</a></h2><h2 id="_13-opentsdb" tabindex="-1">13.OpenTSDB <a class="header-anchor" href="#_13-opentsdb" aria-label="Permalink to &quot;13.OpenTSDB&quot;">​</a></h2><h2 id="_14-upd" tabindex="-1">14.upd <a class="header-anchor" href="#_14-upd" aria-label="Permalink to &quot;14.upd&quot;">​</a></h2><h2 id="_15-continuous-queries" tabindex="-1">15.continuous_queries <a class="header-anchor" href="#_15-continuous-queries" aria-label="Permalink to &quot;15.continuous_queries&quot;">​</a></h2><h2 id="_16-tls" tabindex="-1">16.tls <a class="header-anchor" href="#_16-tls" aria-label="Permalink to &quot;16.tls&quot;">​</a></h2><p><a href="https://www.cnblogs.com/yinfutao/p/11618892.html" target="_blank" rel="noreferrer">https://www.cnblogs.com/yinfutao/p/11618892.html</a></p><p><a href="https://docs.influxdata.com/influxdb/v1.7/administration/config/#monitoring-settings" target="_blank" rel="noreferrer">https://docs.influxdata.com/influxdb/v1.7/administration/config/#monitoring-settings</a></p><p>#优化</p><p><a href="https://zyun.360.cn/blog/?p=862" target="_blank" rel="noreferrer">https://zyun.360.cn/blog/?p=862</a></p><p><a href="https://www.jianshu.com/p/85ab62aaac70" target="_blank" rel="noreferrer">https://www.jianshu.com/p/85ab62aaac70</a></p><p><a href="https://blog.51cto.com/u_536410/5399323" target="_blank" rel="noreferrer">https://blog.51cto.com/u_536410/5399323</a></p>`,43),o=[l];function p(r,c,i,d,u,h){return s(),e("div",null,o)}const y=a(n,[["render",p]]);export{m as __pageData,y as default};
