import{_ as s,o as n,c as a,R as l}from"./chunks/framework.zUbWieqp.js";const C=JSON.parse('{"title":"1. Pod资源使用资源注解（annotation）","description":"","frontmatter":{},"headers":[],"relativePath":"guide/container/k8s/资源对象/2-pod注解.md","filePath":"guide/container/k8s/资源对象/2-pod注解.md","lastUpdated":1723447113000}'),p={name:"guide/container/k8s/资源对象/2-pod注解.md"},o=l(`<h1 id="_1-pod资源使用资源注解-annotation" tabindex="-1">1. Pod资源使用资源注解（annotation） <a class="header-anchor" href="#_1-pod资源使用资源注解-annotation" aria-label="Permalink to &quot;1. Pod资源使用资源注解（annotation）&quot;">​</a></h1><h2 id="_1-1-简介" tabindex="-1">1.1 简介 <a class="header-anchor" href="#_1-1-简介" aria-label="Permalink to &quot;1.1 简介&quot;">​</a></h2><p>注解（annotation）是 &quot;键值&quot; 类型的数据，不过它不能用于标签及挑选 Kubernetes 对象，仅可用于为资源提供“元数据”信息。另外，注解中的元数据不受字符数量的限制，它可大可小，可以为结构化或非结构化形式，也支持使用在标签中禁止使用的其他字符。</p><p>资源注解（annotation）可以由用户手动添加，也可以由工具程序自动附加冰使用它们。在 Kubernetes 的新版中（alpha 或 beta 阶段）为某资源引入新字段时，常以注解的方式提供，以避免其增删等变动对用户带来困扰，一旦确定支持使用它们，这些新增字段就将再引入到资源中不能给淘汰相关的注解。另外，为资源添加注解也可以让其他用户快速了解资源的相关信息，例如其创建者的身份。以下为常用的场景案例：</p><ul><li>由声明式配置层（如 apply 命令）管理的字段：将这些字段定义为注解有助于识别由服务器或客户端设定的默认值、系统自动生成的字段以及由自动伸缩系统生成的字段。</li><li>构建、发行或镜像等相关的信息，例如，时间戳、发行ID、Git分支、PR号码、镜像哈希及仓库地址等。</li><li>指向日志、监控、分析或审计仓库的指针。</li><li>由客户端或工具程序生成的用于调试目的的信息：如名称、版本、构建信息等。</li><li>用户或工具程序的来源地信息，例如，来自其他生态系统组件的相关对象的 url。</li><li>轻量化滚动升级工具的元数据，如 config 及checkpoints。</li><li>相关人员的电话等联系信息，或者指向类似信息的可寻址的目录条目，如网站站点。</li></ul><h2 id="_1-2-查看" tabindex="-1">1.2 查看 <a class="header-anchor" href="#_1-2-查看" aria-label="Permalink to &quot;1.2 查看&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-o</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">yaml</span></span>
<span class="line"><span style="color:#B392F0;">或者</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">describe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pods</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pod-example</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;Annotations&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">……</span></span>
<span class="line"><span style="color:#B392F0;">Priority:</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#B392F0;">Node:</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">mh-k8s-worker-prd-243.35/10.255.243.35</span></span>
<span class="line"><span style="color:#B392F0;">Start</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Time:</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Tue,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">17</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">May</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2022</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10</span><span style="color:#9ECBFF;">:48:57</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+0800</span></span>
<span class="line"><span style="color:#B392F0;">Labels:</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">app=washingservice-sorting</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">app.kubernetes.io/name</span><span style="color:#E1E4E8;">=washingservice-sorting</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">app.kubernetes.io/version</span><span style="color:#E1E4E8;">=v1</span></span>
<span class="line"><span style="color:#E1E4E8;">              bm-org</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">xxx</span></span>
<span class="line"><span style="color:#E1E4E8;">              pod-template-hash</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">5647</span><span style="color:#9ECBFF;">b86866</span></span>
<span class="line"><span style="color:#E1E4E8;">              version</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#B392F0;">Annotations:</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">cni.projectcalico.org/podIP:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10.233</span><span style="color:#9ECBFF;">.83.59/32</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">cni.projectcalico.org/podIPs:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10.233</span><span style="color:#9ECBFF;">.83.59/32</span></span>
<span class="line"><span style="color:#B392F0;">Status:</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">Running</span></span>
<span class="line"><span style="color:#B392F0;">IP:</span><span style="color:#E1E4E8;">           </span><span style="color:#79B8FF;">10.233</span><span style="color:#9ECBFF;">.83.59</span></span>
<span class="line"><span style="color:#B392F0;">IPs:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">IP:</span><span style="color:#E1E4E8;">           </span><span style="color:#79B8FF;">10.233</span><span style="color:#9ECBFF;">.83.59</span></span>
<span class="line"><span style="color:#B392F0;">Controlled</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">By:</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">ReplicaSet/washingservice-sorting-v1-5647b86866</span></span>
<span class="line"><span style="color:#B392F0;">Init</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Containers:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">sidecar-jmx:</span></span>
<span class="line"><span style="color:#B392F0;">……</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-o</span><span style="color:#24292E;"> </span><span style="color:#032F62;">yaml</span></span>
<span class="line"><span style="color:#6F42C1;">或者</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">describe</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pods</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pod-example</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">grep</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;Annotations&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">……</span></span>
<span class="line"><span style="color:#6F42C1;">Priority:</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#6F42C1;">Node:</span><span style="color:#24292E;">         </span><span style="color:#032F62;">mh-k8s-worker-prd-243.35/10.255.243.35</span></span>
<span class="line"><span style="color:#6F42C1;">Start</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Time:</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Tue,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">17</span><span style="color:#24292E;"> </span><span style="color:#032F62;">May</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2022</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10</span><span style="color:#032F62;">:48:57</span><span style="color:#24292E;"> </span><span style="color:#032F62;">+0800</span></span>
<span class="line"><span style="color:#6F42C1;">Labels:</span><span style="color:#24292E;">       </span><span style="color:#032F62;">app=washingservice-sorting</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6F42C1;">app.kubernetes.io/name</span><span style="color:#24292E;">=washingservice-sorting</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6F42C1;">app.kubernetes.io/version</span><span style="color:#24292E;">=v1</span></span>
<span class="line"><span style="color:#24292E;">              bm-org</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">xxx</span></span>
<span class="line"><span style="color:#24292E;">              pod-template-hash</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">5647</span><span style="color:#032F62;">b86866</span></span>
<span class="line"><span style="color:#24292E;">              version</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#6F42C1;">Annotations:</span><span style="color:#24292E;">  </span><span style="color:#032F62;">cni.projectcalico.org/podIP:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10.233</span><span style="color:#032F62;">.83.59/32</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6F42C1;">cni.projectcalico.org/podIPs:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10.233</span><span style="color:#032F62;">.83.59/32</span></span>
<span class="line"><span style="color:#6F42C1;">Status:</span><span style="color:#24292E;">       </span><span style="color:#032F62;">Running</span></span>
<span class="line"><span style="color:#6F42C1;">IP:</span><span style="color:#24292E;">           </span><span style="color:#005CC5;">10.233</span><span style="color:#032F62;">.83.59</span></span>
<span class="line"><span style="color:#6F42C1;">IPs:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">IP:</span><span style="color:#24292E;">           </span><span style="color:#005CC5;">10.233</span><span style="color:#032F62;">.83.59</span></span>
<span class="line"><span style="color:#6F42C1;">Controlled</span><span style="color:#24292E;"> </span><span style="color:#032F62;">By:</span><span style="color:#24292E;">  </span><span style="color:#032F62;">ReplicaSet/washingservice-sorting-v1-5647b86866</span></span>
<span class="line"><span style="color:#6F42C1;">Init</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Containers:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">sidecar-jmx:</span></span>
<span class="line"><span style="color:#6F42C1;">……</span></span></code></pre></div><h2 id="_1-3-管理注解" tabindex="-1">1.3 管理注解 <a class="header-anchor" href="#_1-3-管理注解" aria-label="Permalink to &quot;1.3 管理注解&quot;">​</a></h2><p>annotatinons 可在资源创建时使用 &quot;metadata.annotations&quot; 字段指定它，也可随时按需在活动的资源上使用 &quot;kubectl annotate&quot; 命令来进行附加：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">#查看帮助</span></span>
<span class="line"><span style="color:#e1e4e8;"> kubectl annotate pods --help</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">#查看帮助</span></span>
<span class="line"><span style="color:#24292e;"> kubectl annotate pods --help</span></span></code></pre></div>`,10),e=[o];function t(c,r,y,i,E,F){return n(),a("div",null,e)}const B=s(p,[["render",t]]);export{C as __pageData,B as default};
