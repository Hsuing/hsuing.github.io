import{_ as s,o as a,c as n,R as e}from"./chunks/framework.zUbWieqp.js";const m=JSON.parse('{"title":"1.Namespace","description":"","frontmatter":{},"headers":[],"relativePath":"guide/container/k8s/èµ„æºå¯¹è±¡/4-namespace.md","filePath":"guide/container/k8s/èµ„æºå¯¹è±¡/4-namespace.md","lastUpdated":1760705628000}'),l={name:"guide/container/k8s/èµ„æºå¯¹è±¡/4-namespace.md"},p=e(`<h1 id="_1-namespace" tabindex="-1">1.Namespace <a class="header-anchor" href="#_1-namespace" aria-label="Permalink to &quot;1.Namespace&quot;">â€‹</a></h1><p>â€‹ åœ¨Kubernetesä¸­ï¼Œåå­—ç©ºé—´ï¼ˆNamespaceï¼‰æä¾›ä¸€ç§æœºåˆ¶ï¼Œå°†åŒä¸€é›†ç¾¤ä¸­çš„èµ„æºåˆ’åˆ†ä¸ºç›¸äº’éš”ç¦»çš„ç»„ã€‚åŒä¸€åå­—ç©ºé—´å†…çš„èµ„æºåç§°è¦å”¯ä¸€ï¼Œä½†è·¨åå­—ç©ºé—´æ—¶æ²¡æœ‰è¿™ä¸ªè¦æ±‚</p><ul><li>å¯¹èµ„æºå¯¹è±¡è¿›è¡Œéš”ç¦»ï¼šæ¯”å¦‚ï¼šPodã€DepLoymentã€Serviceã€å°†å…¶åˆ’åˆ†ä¸ºç›¸äº’éš”ç¦»çš„ç»„</li><li>å¯¹èµ„æºé…é¢è¿›è¡Œéš”ç¦»ï¼šCPUï¼ŒMemoryï¼Œé™åˆ¶æŸä¸ªNSçš„å¯ä»¥ä½¿ç”¨çš„cpuå’Œå†…å­˜</li></ul><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202401231417159.png" alt="image-20240123141724841"></p><p>â€‹ namespaceä»…èƒ½éš”ç¦»å¸¦æœ‰åç§°ç©ºé—´çš„èµ„æºï¼Œè€Œä¸å¸¦åç§°ç©ºé—´çš„èµ„æºä¸æ”¯æŒéš”ç¦»ï¼Œå¯ä»¥é€šè¿‡<strong>kubectlapi-resources</strong>æŸ¥çœ‹å“ªäº›èµ„æºå±äºåç§°ç©ºé—´çº§åˆ«ï¼Œå“ªäº›ä¸å±äºåç§°ç©ºé—´çº§åˆ«ã€‚</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#æŸ¥çœ‹å‘½åç©ºé—´</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">namespace</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#åˆ›å»ºå‘½åç©ºé—´</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">namespacedev</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">deployment</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--replicas=3</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">namespace=dev</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">namespace</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dev</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">namespace</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dev</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--all</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#æŸ¥çœ‹å‘½åç©ºé—´</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">namespace</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#åˆ›å»ºå‘½åç©ºé—´</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">namespacedev</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">deployment</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--replicas=3</span><span style="color:#24292E;"> </span><span style="color:#032F62;">namespace=dev</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">namespace</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-n</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dev</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">namespace</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-n</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dev</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--all</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">ğŸ’¡ è¯´æ˜</p><p>NameSpaceéš”ç¦»å…¶å®å°±æ˜¯åç§°çš„éš”ç¦»ï¼Œå¹¶ä¸æ˜¯ç‰©ç†çš„éš”ç¦»ï¼Œæ‰€ä»¥é‡ç‚¹åœ¨äºèµ„æºéš”ç¦»</p></div><ul><li>å‘½åç©ºé—´åˆ’åˆ†</li></ul><p>æŒ‰ä¸šåŠ¡åˆ’åˆ†ï¼šshopingã€edu</p><p>æŒ‰ç¯å¢ƒåˆ’åˆ†ï¼šdevã€prod</p><p>æŒ‰å›¢é˜Ÿåˆ’åˆ†</p><h2 id="_1-1-ä»€ä¹ˆæ˜¯å‘½åç©ºé—´" tabindex="-1">1.1 ä»€ä¹ˆæ˜¯å‘½åç©ºé—´ <a class="header-anchor" href="#_1-1-ä»€ä¹ˆæ˜¯å‘½åç©ºé—´" aria-label="Permalink to &quot;1.1 ä»€ä¹ˆæ˜¯å‘½åç©ºé—´&quot;">â€‹</a></h2><p><code>Kubernetes</code> æ”¯æŒå¤šä¸ªè™šæ‹Ÿé›†ç¾¤ï¼Œå®ƒä»¬åº•å±‚ä¾èµ–äºåŒä¸€ä¸ªç‰©ç†é›†ç¾¤ã€‚è¿™äº›è™šæ‹Ÿé›†ç¾¤è¢«ç§°ä¸ºå‘½åç©ºé—´ã€‚å‘½åç©ºé—´<code>namespace</code>æ˜¯k8sé›†ç¾¤çº§åˆ«çš„èµ„æºï¼Œå¯ä»¥ç»™ä¸åŒçš„ç”¨æˆ·ã€ç§Ÿæˆ·ã€ç¯å¢ƒæˆ–é¡¹ç›®åˆ›å»ºå¯¹åº”çš„å‘½åç©ºé—´ï¼Œä¾‹å¦‚ï¼Œå¯ä»¥ä¸ºtestã€devlopmentã€productionç¯å¢ƒåˆ†åˆ«åˆ›å»ºå„è‡ªçš„å‘½åç©ºé—´ã€‚</p><h2 id="_1-2-è·¨namespaceè®¿é—®service" tabindex="-1">1.2 è·¨namespaceè®¿é—®service <a class="header-anchor" href="#_1-2-è·¨namespaceè®¿é—®service" aria-label="Permalink to &quot;1.2 è·¨namespaceè®¿é—®service&quot;">â€‹</a></h2><p>æˆ‘ä»¬é€šå¸¸ä¼šæŠŠmysql,redis,rabbitmq,mongodbè¿™äº›å…¬ç”¨ç»„ä»¶æ”¾åœ¨ä¸€ä¸ªnamespaceé‡Œï¼Œæˆ–è€…æ¯ä¸ªå…¬ç”¨ç»„ä»¶éƒ½æœ‰è‡ªå·±çš„namespaceï¼Œè€Œä½ çš„ä¸šåŠ¡ç»„ä»¶ä¼šç»Ÿä¸€æ”¾åœ¨è‡ªå·±çš„namespaceé‡Œï¼Œè¿™æ—¶å°±æ¶‰åŠåˆ°äº†è·¨namespaceçš„æ•°æ®é€šè®¯é—®é¢˜</p><h3 id="k8sçš„æœåŠ¡ådnsè§£æ" tabindex="-1">k8sçš„æœåŠ¡åDNSè§£æ <a class="header-anchor" href="#k8sçš„æœåŠ¡ådnsè§£æ" aria-label="Permalink to &quot;k8sçš„æœåŠ¡åDNSè§£æ&quot;">â€‹</a></h3><p>Kubernetes ç›®å‰ä½¿ç”¨çš„kube-dnsæ¥å®ç°é›†ç¾¤å†…éƒ¨çš„service dnsè®°å½•è§£æã€‚é»˜è®¤æƒ…å†µä¸‹/etc/resolv.confé‡Œï¼Œå®ƒçš„å†…å®¹æ˜¯ç»Ÿä¸€çš„æ ¼å¼ã€‚</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># more /etc/resolv.conf</span></span>
<span class="line"><span style="color:#B392F0;">nameserver</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">172.19</span><span style="color:#9ECBFF;">.0.10</span></span>
<span class="line"><span style="color:#B392F0;">search</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">saas.svc.cluster.local</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">svc.cluster.local</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cluster.local</span></span>
<span class="line"><span style="color:#B392F0;">options</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ndots:5</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">/</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># more /etc/resolv.conf</span></span>
<span class="line"><span style="color:#6F42C1;">nameserver</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">172.19</span><span style="color:#032F62;">.0.10</span></span>
<span class="line"><span style="color:#6F42C1;">search</span><span style="color:#24292E;"> </span><span style="color:#032F62;">saas.svc.cluster.local</span><span style="color:#24292E;"> </span><span style="color:#032F62;">svc.cluster.local</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cluster.local</span></span>
<span class="line"><span style="color:#6F42C1;">options</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ndots:5</span></span></code></pre></div><p>search doaminåˆ—è¡¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒåªåŒ…<code>å«æœ¬åœ°åŸŸå</code>ã€‚è¿™å¯ä»¥é€šè¿‡åœ¨searchå…³é”®å­—åé¢åˆ—å‡ºæ‰€éœ€çš„åŸŸæœç´¢è·¯å¾„æ¥æ·»åŠ ã€‚kubernetesä¸ºæ¯ä¸ªå®¹å™¨é…ç½®é»˜è®¤æ˜¯<code>\${namespace}.svc.cluster.local</code> <code>svc.cluster.local</code> <code>cluster.local</code>ã€‚åœ¨ä¸€æ¬¡dnsåŸŸåæŸ¥è¯¢æ—¶ï¼Œå°†ä¼šå°è¯•ä½¿ç”¨æ¯ä¸ªsearch doaminä¾æ¬¡æœç´¢å°‘äºndotsç‚¹ï¼ˆé»˜è®¤å€¼ä¸º1ï¼‰çš„è§£æå™¨æŸ¥è¯¢ï¼Œç›´åˆ°æ‰¾åˆ°åŒ¹é…é¡¹ã€‚å¯¹äºå…·æœ‰å¤šä¸ªå­åŸŸçš„ç¯å¢ƒï¼Œå»ºè®®è°ƒæ•´é€‰é¡¹ndots:nï¼Œä»¥é¿å…man-in-the-middleæ”»å‡»å’Œroot-dns-serversçš„ä¸å¿…è¦é€šä¿¡ã€‚</p><h3 id="ndots" tabindex="-1">ndots <a class="header-anchor" href="#ndots" aria-label="Permalink to &quot;ndots&quot;">â€‹</a></h3><p>è¿™ä¸ªæˆ‘ä»¬å¯ä»¥æŠŠå®ƒç†è§£æˆæœåŠ¡ådnsè§£æçš„å±‚æ¬¡ï¼Œä¾‹å¦‚{æœåŠ¡å}æ˜¯ä¸€çº§ï¼Œè€Œ{æœåŠ¡å}.{å‘½åç©ºé—´}ä¸ºäºŒå±‚ï¼Œ{æœåŠ¡å}.{å‘½åç©ºé—´}.svc.cluster.localæ˜¯ç¬¬ä¸‰å±‚ï¼Œä¸Šé¢çš„é…ç½®ä¸€å…±æœ‰5å±‚ï¼ŒåŒæ—¶ä¹Ÿå¼€å¯äº†5å±‚ï¼Œè¿™æ ·åšå¯ä»¥ä¿è¯æœ€å¤§é™åº¦çš„æ‰¾åˆ°ä½ çš„æœåŠ¡ï¼Œä½†å¯¹äºè§£æçš„æ€§èƒ½æ˜¯æœ‰å½±å“çš„ã€‚</p><blockquote><p>è¯·æ³¨æ„ï¼Œå¦‚æœæœç´¢åŸŸå¯¹åº”çš„æœåŠ¡å™¨ä¸æ˜¯æœ¬åœ°çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªæŸ¥è¯¢è¿‡ç¨‹å¯èƒ½ä¼šå¾ˆæ…¢ï¼Œå¹¶ä¸”ä¼šäº§ç”Ÿå¤§é‡çš„ç½‘ç»œæµé‡ã€‚å¦‚æœå…¶ä¸­ä¸€ä¸ªæœç´¢åŸŸåŸŸæ²¡æœ‰å¯ç”¨çš„æœåŠ¡å™¨ï¼Œåˆ™æŸ¥è¯¢å°†è¶…æ—¶ã€‚</p></blockquote><h3 id="åŒä¸€é›†ç¾¤è·¨namespaceè®¿é—®" tabindex="-1">åŒä¸€é›†ç¾¤è·¨namespaceè®¿é—® <a class="header-anchor" href="#åŒä¸€é›†ç¾¤è·¨namespaceè®¿é—®" aria-label="Permalink to &quot;åŒä¸€é›†ç¾¤è·¨namespaceè®¿é—®&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">spring:</span></span>
<span class="line"><span style="color:#e1e4e8;">  profiles: redis-prod</span></span>
<span class="line"><span style="color:#e1e4e8;">  redis:</span></span>
<span class="line"><span style="color:#e1e4e8;">    host: redis-master.redis </span></span>
<span class="line"><span style="color:#e1e4e8;">    port: 6379</span></span>
<span class="line"><span style="color:#e1e4e8;">    password: 123456</span></span>
<span class="line"><span style="color:#e1e4e8;">    database: 1</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">spring:</span></span>
<span class="line"><span style="color:#24292e;">  profiles: redis-prod</span></span>
<span class="line"><span style="color:#24292e;">  redis:</span></span>
<span class="line"><span style="color:#24292e;">    host: redis-master.redis </span></span>
<span class="line"><span style="color:#24292e;">    port: 6379</span></span>
<span class="line"><span style="color:#24292e;">    password: 123456</span></span>
<span class="line"><span style="color:#24292e;">    database: 1</span></span></code></pre></div><p>å®ƒé‡‡ç”¨äº†æœåŠ¡å+å‘½åç©ºé—´çš„æ ¼å¼ï¼Œå¦‚æœæ˜¯<code>ç›¸åŒçš„namespace</code>ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨æœåŠ¡åæ¥è§£æã€‚</p>`,25),o=[p];function c(t,r,i,y,d,E){return a(),n("div",null,o)}const u=s(l,[["render",c]]);export{m as __pageData,u as default};
