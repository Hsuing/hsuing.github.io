import{_ as s,o as n,c as a,R as e}from"./chunks/framework.zUbWieqp.js";const m=JSON.parse('{"title":"jenkins跳过构建","description":"","frontmatter":{},"headers":[],"relativePath":"guide/Linux/Jenkins/plus/6-Conditional.md","filePath":"guide/Linux/Jenkins/plus/6-Conditional.md","lastUpdated":1720533756000}'),o={name:"guide/Linux/Jenkins/plus/6-Conditional.md"},l=e(`<h1 id="jenkins跳过构建" tabindex="-1">jenkins跳过构建 <a class="header-anchor" href="#jenkins跳过构建" aria-label="Permalink to &quot;jenkins跳过构建&quot;">​</a></h1><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202406242123529.png" alt=""></p><p>回滚时，不需要进行构建。直接使用备份文件进行覆盖即可！</p><p>因此，需要在回滚时，跳过构建，直接使用备份文件</p><h2 id="安装插件" tabindex="-1">安装插件 <a class="header-anchor" href="#安装插件" aria-label="Permalink to &quot;安装插件&quot;">​</a></h2><p>安装插件：Conditional BuildStep</p><p>插件说明：A buildstep wrapping any number of other buildsteps, controlling their execution based on a defined condition (e.g. BuildParameter).</p><h2 id="新建job" tabindex="-1">新建job <a class="header-anchor" href="#新建job" aria-label="Permalink to &quot;新建job&quot;">​</a></h2><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202406242123893.png" alt=""></p><h3 id="参数化构建" tabindex="-1">参数化构建 <a class="header-anchor" href="#参数化构建" aria-label="Permalink to &quot;参数化构建&quot;">​</a></h3><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202406242123303.png" alt=""></p><h3 id="增加构建步骤" tabindex="-1">增加构建步骤 <a class="header-anchor" href="#增加构建步骤" aria-label="Permalink to &quot;增加构建步骤&quot;">​</a></h3><p>Conditional Step (single)</p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202406242123069.png" alt=""></p><p>择执行shell脚本</p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202406242123364.png" alt=""></p><p>脚本内容如下</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">#!/bin/bash</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">if [ -z $BUILD_ID ];then </span></span>
<span class="line"><span style="color:#e1e4e8;">  echo &quot;No BUILD_ID, no build required&quot; </span></span>
<span class="line"><span style="color:#e1e4e8;">  exit 0</span></span>
<span class="line"><span style="color:#e1e4e8;">else</span></span>
<span class="line"><span style="color:#e1e4e8;">  echo &quot;Need to build&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">  exit -1</span></span>
<span class="line"><span style="color:#e1e4e8;">fi</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">#!/bin/bash</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">if [ -z $BUILD_ID ];then </span></span>
<span class="line"><span style="color:#24292e;">  echo &quot;No BUILD_ID, no build required&quot; </span></span>
<span class="line"><span style="color:#24292e;">  exit 0</span></span>
<span class="line"><span style="color:#24292e;">else</span></span>
<span class="line"><span style="color:#24292e;">  echo &quot;Need to build&quot;</span></span>
<span class="line"><span style="color:#24292e;">  exit -1</span></span>
<span class="line"><span style="color:#24292e;">fi</span></span></code></pre></div><p>脚本解释：当BUILD_ID变量不存在时，不执行构建，退出码为0。否则执行构建，退出码为-1</p><p>再增加构步骤，选择执行shell脚本</p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202406242123431.png" alt=""></p>`,21),p=[l];function i(t,c,r,h,d,u){return n(),a("div",null,p)}const _=s(o,[["render",i]]);export{m as __pageData,_ as default};
