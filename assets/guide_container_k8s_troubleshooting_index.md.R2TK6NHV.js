import{_ as e,o,c as t,R as l}from"./chunks/framework.zUbWieqp.js";const p=JSON.parse('{"title":"1.问题导向&排查","description":"","frontmatter":{},"headers":[],"relativePath":"guide/container/k8s/troubleshooting/index.md","filePath":"guide/container/k8s/troubleshooting/index.md","lastUpdated":1713263180000}'),r={name:"guide/container/k8s/troubleshooting/index.md"},a=l('<div class="danger custom-block"><p class="custom-block-title">❌ 注意</p><p>从现象识别到问题定位，再到深入排查与解决方案制定，形成一套完整的问题解决闭环</p></div><h1 id="_1-问题导向-排查" tabindex="-1">1.问题导向&amp;排查 <a class="header-anchor" href="#_1-问题导向-排查" aria-label="Permalink to &quot;1.问题导向&amp;排查&quot;">​</a></h1><h2 id="_1-1-网络诊断" tabindex="-1">1.1 网络诊断 <a class="header-anchor" href="#_1-1-网络诊断" aria-label="Permalink to &quot;1.1 网络诊断&quot;">​</a></h2><ul><li><strong>连通性测试</strong>：使用 <code>ping</code>、<code>nc</code>、<code>telnet</code> 等工具测试 Pod 间的网络连通性，或通过 <code>curl</code> 检查服务端口是否可达。</li><li><strong>NetworkPolicy 检查</strong>：确认 NetworkPolicy 规则是否过于严格导致通信阻断，使用 <code>kubectl get netpol</code> 查看并分析现有策略。</li><li><strong>CNI 插件排查</strong>：检查 CNI 插件（如 Calico、Flannel 等）的日志，排查网络配置或插件自身问题。</li></ul><h2 id="_1-2-存储问题排查" tabindex="-1">1.2 存储问题排查 <a class="header-anchor" href="#_1-2-存储问题排查" aria-label="Permalink to &quot;1.2 存储问题排查&quot;">​</a></h2><ul><li><strong>PVC/PV 状态检查</strong>：使用 <code>kubectl get pvc,pv</code> 查看 PersistentVolumeClaim 和 PersistentVolume 的绑定状态与容量，确认是否存在未绑定、容量不足等问题。</li><li><strong>存储日志与事件</strong>：检查存储插件（如 Local Volume、CSI Driver 等）日志，以及 PVC/PV 的事件信息，查找存储访问异常。</li><li><strong>数据完整性验证</strong>：必要时，直接在宿主机上挂载存储卷，检查数据完整性和一致性</li></ul><h2 id="_1-3-资源调度与亲和性问题" tabindex="-1">1.3 资源调度与亲和性问题 <a class="header-anchor" href="#_1-3-资源调度与亲和性问题" aria-label="Permalink to &quot;1.3 资源调度与亲和性问题&quot;">​</a></h2><ul><li><strong>节点资源分析</strong>：使用 <code>kubectl top nodes</code> 查看节点资源使用情况，判断是否存在资源瓶颈。</li><li><strong>调度策略检查</strong>：确认 Deployments、StatefulSets 等资源的 <code>.spec.template.spec.nodeSelector</code>、<code>.spec.affinity</code>、<code>.spec.tolerations</code> 等调度相关字段配置，看是否限制了 Pod 的调度范围。</li><li><strong>kube-scheduler 日志</strong>：分析 kube-scheduler 日志，了解调度决策过程，找出影响调度的因素</li></ul><h2 id="_1-4-认证授权与访问控制" tabindex="-1">1.4 认证授权与访问控制 <a class="header-anchor" href="#_1-4-认证授权与访问控制" aria-label="Permalink to &quot;1.4 认证授权与访问控制&quot;">​</a></h2><ul><li><strong>RBAC 规则审查</strong>：使用 <code>kubectl get rolebindings,clusterrolebindings</code> 检查角色绑定关系，确保用户或服务账户具有正确的 API 访问权限。</li><li><strong>API Server 访问日志</strong>：分析 <code>kube-apiserver-audit.log</code>，跟踪特定用户或账户的 API 请求与响应，排查授权问题。</li><li><strong>网络代理与认证配置</strong>：检查 kubeconfig 文件、API Server 配置及网络代理（如 kube-proxy、ingress-nginx 等）的认证设置，确保访问路径无误</li></ul>',10),i=[a];function n(s,c,d,u,g,_){return o(),t("div",null,i)}const b=e(r,[["render",n]]);export{p as __pageData,b as default};
