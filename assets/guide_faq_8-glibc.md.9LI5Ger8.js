import{_ as s,o as a,c as n,R as l}from"./chunks/framework.zUbWieqp.js";const C=JSON.parse('{"title":"1.查看当前版本","description":"","frontmatter":{},"headers":[],"relativePath":"guide/faq/8-glibc.md","filePath":"guide/faq/8-glibc.md","lastUpdated":1740047572000}'),p={name:"guide/faq/8-glibc.md"},o=l(`<blockquote><p>现象</p><p>在Centos上启动某程序的时候报<code>GLIBCXX_3.4.** not found</code>的错误，记录解决错误的过程</p></blockquote><h1 id="_1-查看当前版本" tabindex="-1">1.查看当前版本 <a class="header-anchor" href="#_1-查看当前版本" aria-label="Permalink to &quot;1.查看当前版本&quot;">​</a></h1><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@localhost [</span><span style="color:#79B8FF;">10.10</span><span style="color:#E1E4E8;">.60.21] /]# strings /usr/lib64/libstdc++.so.6 </span><span style="color:#F97583;">|</span><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">GLIBC</span></span>
<span class="line"><span style="color:#B392F0;">GLIBCXX_3.4</span></span>
<span class="line"><span style="color:#B392F0;">GLIBCXX_3.4.1</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">......</span></span>
<span class="line"><span style="color:#B392F0;">GLIBCXX_3.4.12</span></span>
<span class="line"><span style="color:#B392F0;">GLIBCXX_3.4.13</span></span>
<span class="line"><span style="color:#B392F0;">GLIBCXX_3.4.14</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@localhost [</span><span style="color:#79B8FF;">10.10</span><span style="color:#E1E4E8;">.60.21] /]#</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@localhost [</span><span style="color:#005CC5;">10.10</span><span style="color:#24292E;">.60.21] /]# strings /usr/lib64/libstdc++.so.6 </span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">grep</span><span style="color:#24292E;"> </span><span style="color:#032F62;">GLIBC</span></span>
<span class="line"><span style="color:#6F42C1;">GLIBCXX_3.4</span></span>
<span class="line"><span style="color:#6F42C1;">GLIBCXX_3.4.1</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#005CC5;">......</span></span>
<span class="line"><span style="color:#6F42C1;">GLIBCXX_3.4.12</span></span>
<span class="line"><span style="color:#6F42C1;">GLIBCXX_3.4.13</span></span>
<span class="line"><span style="color:#6F42C1;">GLIBCXX_3.4.14</span></span>
<span class="line"><span style="color:#24292E;">[root@localhost [</span><span style="color:#005CC5;">10.10</span><span style="color:#24292E;">.60.21] /]#</span></span></code></pre></div><p>存在相互依赖，所以安装的顺序依次为：gmp，mpfr，mpc</p><h1 id="_2-安装" tabindex="-1">2.安装 <a class="header-anchor" href="#_2-安装" aria-label="Permalink to &quot;2.安装&quot;">​</a></h1><h2 id="_2-1下载" tabindex="-1">2.1下载 <a class="header-anchor" href="#_2-1下载" aria-label="Permalink to &quot;2.1下载&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">wget</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ftp://gcc.gnu.org/pub/gcc/infrastructure/gmp-6.1.0.tar.bz2</span></span>
<span class="line"><span style="color:#B392F0;">wget</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ftp://gcc.gnu.org/pub/gcc/infrastructure/mpfr-3.1.4.tar.bz2</span></span>
<span class="line"><span style="color:#B392F0;">wget</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ftp://gcc.gnu.org/pub/gcc/infrastructure/mpc-1.0.3.tar.gz</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">wget</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ftp://gcc.gnu.org/pub/gcc/infrastructure/gmp-6.1.0.tar.bz2</span></span>
<span class="line"><span style="color:#6F42C1;">wget</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ftp://gcc.gnu.org/pub/gcc/infrastructure/mpfr-3.1.4.tar.bz2</span></span>
<span class="line"><span style="color:#6F42C1;">wget</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ftp://gcc.gnu.org/pub/gcc/infrastructure/mpc-1.0.3.tar.gz</span></span></code></pre></div><h2 id="_2-2依赖安装" tabindex="-1">2.2依赖安装 <a class="header-anchor" href="#_2-2依赖安装" aria-label="Permalink to &quot;2.2依赖安装&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">## 非root用户，因此将安装目录配置到用户目录下</span></span>
<span class="line"><span style="color:#6A737D;">## 未指定将会安装到 /usr/local/lib 目录下</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#### 安装GMP</span></span>
<span class="line"><span style="color:#6A737D;">##################################</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-jxvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">gmp-6.1.0.tar.bz2</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">gmp-6.1.0</span></span>
<span class="line"><span style="color:#B392F0;">./configure</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">--prefix=/data/apps/local/gmp-6.1.0</span></span>
<span class="line"><span style="color:#B392F0;">make</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-j4</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">make</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#### 安装MPFR</span></span>
<span class="line"><span style="color:#6A737D;">##################################</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-jxvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mpfr-3.1.4.tar.bz2</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mpfr-3.1.4</span></span>
<span class="line"><span style="color:#B392F0;">./configure</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">--prefix=/data/apps/local/mpfr-3.1.4</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">             </span><span style="color:#79B8FF;">--with-gmp=/data/apps/local/gmp-6.1.0</span></span>
<span class="line"><span style="color:#B392F0;">make</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">make</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#### 安装MPC</span></span>
<span class="line"><span style="color:#6A737D;">##################################</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-zxvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mpc-1.0.3.tar.gz</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mpc-1.0.3</span></span>
<span class="line"><span style="color:#B392F0;">./configure</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">--prefix=/data/apps/local/mpc-1.0.3</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">             </span><span style="color:#79B8FF;">--with-gmp=/data/apps/local/gmp-6.1.0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">             </span><span style="color:#79B8FF;">--with-mpfr=/data/apps/local/mpfr-3.1.4</span></span>
<span class="line"><span style="color:#B392F0;">make</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">make</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">## 非root用户，因此将安装目录配置到用户目录下</span></span>
<span class="line"><span style="color:#6A737D;">## 未指定将会安装到 /usr/local/lib 目录下</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#### 安装GMP</span></span>
<span class="line"><span style="color:#6A737D;">##################################</span></span>
<span class="line"><span style="color:#6F42C1;">tar</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-jxvf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">gmp-6.1.0.tar.bz2</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">gmp-6.1.0</span></span>
<span class="line"><span style="color:#6F42C1;">./configure</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">--prefix=/data/apps/local/gmp-6.1.0</span></span>
<span class="line"><span style="color:#6F42C1;">make</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-j4</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">make</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#### 安装MPFR</span></span>
<span class="line"><span style="color:#6A737D;">##################################</span></span>
<span class="line"><span style="color:#6F42C1;">tar</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-jxvf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mpfr-3.1.4.tar.bz2</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mpfr-3.1.4</span></span>
<span class="line"><span style="color:#6F42C1;">./configure</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">--prefix=/data/apps/local/mpfr-3.1.4</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">             </span><span style="color:#005CC5;">--with-gmp=/data/apps/local/gmp-6.1.0</span></span>
<span class="line"><span style="color:#6F42C1;">make</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">make</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#### 安装MPC</span></span>
<span class="line"><span style="color:#6A737D;">##################################</span></span>
<span class="line"><span style="color:#6F42C1;">tar</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-zxvf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mpc-1.0.3.tar.gz</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mpc-1.0.3</span></span>
<span class="line"><span style="color:#6F42C1;">./configure</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">--prefix=/data/apps/local/mpc-1.0.3</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">             </span><span style="color:#005CC5;">--with-gmp=/data/apps/local/gmp-6.1.0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">             </span><span style="color:#005CC5;">--with-mpfr=/data/apps/local/mpfr-3.1.4</span></span>
<span class="line"><span style="color:#6F42C1;">make</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">make</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span></code></pre></div><ul><li>安装完以上，添加环境变量</li></ul><p>vim /etc/profile</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> LD_LIBRARY_PATH</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">/usr/local/lib:</span><span style="color:#E1E4E8;">$LD_LIBRARY_PATH</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> LD_LIBRARY_PATH</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">/data/apps/local/mpc-1.0.3/lib:/data/apps/local/gmp-6.1.0/lib:/data/apps/local/mpfr-3.1.4/lib:</span><span style="color:#E1E4E8;">$LD_LIBRARY_PATH</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> LD_LIBRARY_PATH</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">/data/apps/local/gcc5.5.0/lib64:</span><span style="color:#E1E4E8;">$LD_LIBRARY_PATH</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> LD_LIBRARY_PATH</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">/usr/local/lib:</span><span style="color:#24292E;">$LD_LIBRARY_PATH</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> LD_LIBRARY_PATH</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">/data/apps/local/mpc-1.0.3/lib:/data/apps/local/gmp-6.1.0/lib:/data/apps/local/mpfr-3.1.4/lib:</span><span style="color:#24292E;">$LD_LIBRARY_PATH</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> LD_LIBRARY_PATH</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">/data/apps/local/gcc5.5.0/lib64:</span><span style="color:#24292E;">$LD_LIBRARY_PATH</span></span></code></pre></div><p>source /etc/profile</p><h2 id="_2-3gcc安装" tabindex="-1">2.3gcc安装 <a class="header-anchor" href="#_2-3gcc安装" aria-label="Permalink to &quot;2.3gcc安装&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">wget</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ftp://ftp.mirrorservice.org/sites/sourceware.org/pub/gcc/releases/gcc-5.5.0/gcc-5.5.0.tar.gz</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-zxvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">gcc-5.5.0.tar.gz</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">gcc-5.5.0</span></span>
<span class="line"><span style="color:#B392F0;">./configure</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--prefix=/data/apps/local/gcc5.5.0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--enable-checking=release</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--enable-languages=c,c++</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--disable-multilib</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--with-gmp=/data/apps/local/gmp-6.1.0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--with-mpfr=/data/apps/local/mpfr-3.1.4</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--with-mpc=/data/apps/local/mpc-1.0.3</span></span>
<span class="line"><span style="color:#B392F0;">make</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-j4</span></span>
<span class="line"><span style="color:#B392F0;">make</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">----注释</span></span>
<span class="line"><span style="color:#B392F0;">./configure</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">--prefix=/home/xxx/local/gcc5.5.0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\ </span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 指定安装路径</span></span>
<span class="line"><span style="color:#E1E4E8;">    --enable-checking</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">release</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">\\</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 生成的编译器在编译过程中不做额外检查</span></span>
<span class="line"><span style="color:#E1E4E8;">    --enable-languages</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">c,c++,java</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">\\</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 支持的语言</span></span>
<span class="line"><span style="color:#E1E4E8;">    --enable-threads</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">posix</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">\\</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;"># 使用POSIX/Unix98作为线程支持库</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">--disable-multilib</span><span style="color:#E1E4E8;">                  </span><span style="color:#6A737D;"># 不生成编译为其他平台可执行代码的交叉编译器</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">wget</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ftp://ftp.mirrorservice.org/sites/sourceware.org/pub/gcc/releases/gcc-5.5.0/gcc-5.5.0.tar.gz</span></span>
<span class="line"><span style="color:#6F42C1;">tar</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-zxvf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">gcc-5.5.0.tar.gz</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">gcc-5.5.0</span></span>
<span class="line"><span style="color:#6F42C1;">./configure</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--prefix=/data/apps/local/gcc5.5.0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--enable-checking=release</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--enable-languages=c,c++</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--disable-multilib</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--with-gmp=/data/apps/local/gmp-6.1.0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--with-mpfr=/data/apps/local/mpfr-3.1.4</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--with-mpc=/data/apps/local/mpc-1.0.3</span></span>
<span class="line"><span style="color:#6F42C1;">make</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-j4</span></span>
<span class="line"><span style="color:#6F42C1;">make</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">----注释</span></span>
<span class="line"><span style="color:#6F42C1;">./configure</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">--prefix=/home/xxx/local/gcc5.5.0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\ </span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># 指定安装路径</span></span>
<span class="line"><span style="color:#24292E;">    --enable-checking</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">release</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">\\</span><span style="color:#24292E;">         </span><span style="color:#6A737D;"># 生成的编译器在编译过程中不做额外检查</span></span>
<span class="line"><span style="color:#24292E;">    --enable-languages</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">c,c++,java</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">\\</span><span style="color:#24292E;">     </span><span style="color:#6A737D;"># 支持的语言</span></span>
<span class="line"><span style="color:#24292E;">    --enable-threads</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">posix</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">\\</span><span style="color:#24292E;">            </span><span style="color:#6A737D;"># 使用POSIX/Unix98作为线程支持库</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">--disable-multilib</span><span style="color:#24292E;">                  </span><span style="color:#6A737D;"># 不生成编译为其他平台可执行代码的交叉编译器</span></span></code></pre></div><h2 id="_2-3替换原来lib" tabindex="-1">2.3替换原来lib <a class="header-anchor" href="#_2-3替换原来lib" aria-label="Permalink to &quot;2.3替换原来lib&quot;">​</a></h2><ul><li>查找所有lib</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">[root@jump lib64]# find / -name &quot;libstdc++.so*&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;">/opt/rh/devtoolset-9/root/usr/lib/gcc/x86_64-redhat-linux/9/32/libstdc++.so</span></span>
<span class="line"><span style="color:#e1e4e8;">/opt/rh/devtoolset-9/root/usr/lib/gcc/x86_64-redhat-linux/9/libstdc++.so</span></span>
<span class="line"><span style="color:#e1e4e8;">/data/apps/local/gcc5.5.0/lib64/libstdc++.so.6.0.21-gdb.py</span></span>
<span class="line"><span style="color:#e1e4e8;">/data/apps/local/gcc5.5.0/lib64/libstdc++.so.6.0.21</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">#新的</span></span>
<span class="line"><span style="color:#e1e4e8;">/data/apps/local/gcc5.5.0/lib64/libstdc++.so</span></span>
<span class="line"><span style="color:#e1e4e8;">/data/apps/local/gcc5.5.0/lib64/libstdc++.so.6</span></span>
<span class="line"><span style="color:#e1e4e8;">/usr/share/gdb/auto-load/usr/lib64/libstdc++.so.6.0.19-gdb.py</span></span>
<span class="line"><span style="color:#e1e4e8;">/usr/share/gdb/auto-load/usr/lib64/libstdc++.so.6.0.19-gdb.pyo</span></span>
<span class="line"><span style="color:#e1e4e8;">/usr/share/gdb/auto-load/usr/lib64/libstdc++.so.6.0.19-gdb.pyc</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">#旧的</span></span>
<span class="line"><span style="color:#e1e4e8;">/usr/lib64/libstdc++.so.6</span></span>
<span class="line"><span style="color:#e1e4e8;">/usr/lib64/libstdc++.so.6.0.19</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">[root@jump lib64]# find / -name &quot;libstdc++.so*&quot;</span></span>
<span class="line"><span style="color:#24292e;">/opt/rh/devtoolset-9/root/usr/lib/gcc/x86_64-redhat-linux/9/32/libstdc++.so</span></span>
<span class="line"><span style="color:#24292e;">/opt/rh/devtoolset-9/root/usr/lib/gcc/x86_64-redhat-linux/9/libstdc++.so</span></span>
<span class="line"><span style="color:#24292e;">/data/apps/local/gcc5.5.0/lib64/libstdc++.so.6.0.21-gdb.py</span></span>
<span class="line"><span style="color:#24292e;">/data/apps/local/gcc5.5.0/lib64/libstdc++.so.6.0.21</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">#新的</span></span>
<span class="line"><span style="color:#24292e;">/data/apps/local/gcc5.5.0/lib64/libstdc++.so</span></span>
<span class="line"><span style="color:#24292e;">/data/apps/local/gcc5.5.0/lib64/libstdc++.so.6</span></span>
<span class="line"><span style="color:#24292e;">/usr/share/gdb/auto-load/usr/lib64/libstdc++.so.6.0.19-gdb.py</span></span>
<span class="line"><span style="color:#24292e;">/usr/share/gdb/auto-load/usr/lib64/libstdc++.so.6.0.19-gdb.pyo</span></span>
<span class="line"><span style="color:#24292e;">/usr/share/gdb/auto-load/usr/lib64/libstdc++.so.6.0.19-gdb.pyc</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">#旧的</span></span>
<span class="line"><span style="color:#24292e;">/usr/lib64/libstdc++.so.6</span></span>
<span class="line"><span style="color:#24292e;">/usr/lib64/libstdc++.so.6.0.19</span></span></code></pre></div><ul><li>查看旧的版本</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">strings</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/lib64/libstdc++.so.6</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">GLIBC</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">strings</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/lib64/libstdc++.so.6</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">grep</span><span style="color:#24292E;"> </span><span style="color:#032F62;">GLIBC</span></span></code></pre></div><ul><li>替换</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ll</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/lib64/libstdc++.so.6</span></span>
<span class="line"><span style="color:#B392F0;">lrwxrwxrwx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">root</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">root</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">19</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Jan</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">9</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#9ECBFF;">:27</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/lib64/libstdc++.so.6</span><span style="color:#E1E4E8;"> -</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">libstdc++.so.6.0.19</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#删除软链</span></span>
<span class="line"><span style="color:#B392F0;">rm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/lib64/libstdc++.so.6</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#生成新的</span></span>
<span class="line"><span style="color:#B392F0;">ln</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-sv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data/apps/local/gcc5.5.0/lib64/libstdc++.so.6.0.21</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/lib64/libstdc++.so.6</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ll</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/lib64/libstdc++.so.6</span></span>
<span class="line"><span style="color:#6F42C1;">lrwxrwxrwx</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#032F62;">root</span><span style="color:#24292E;"> </span><span style="color:#032F62;">root</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">19</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Jan</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">9</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#032F62;">:27</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/lib64/libstdc++.so.6</span><span style="color:#24292E;"> -</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">libstdc++.so.6.0.19</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#删除软链</span></span>
<span class="line"><span style="color:#6F42C1;">rm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/lib64/libstdc++.so.6</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#生成新的</span></span>
<span class="line"><span style="color:#6F42C1;">ln</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-sv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/data/apps/local/gcc5.5.0/lib64/libstdc++.so.6.0.21</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/lib64/libstdc++.so.6</span></span></code></pre></div><p><code>至此结束</code></p><h1 id="_3-gcc升级" tabindex="-1">3.gcc升级 <a class="header-anchor" href="#_3-gcc升级" aria-label="Permalink to &quot;3.gcc升级&quot;">​</a></h1><h2 id="_3-1alibabacloud2" tabindex="-1">3.1alibabacloud2 <a class="header-anchor" href="#_3-1alibabacloud2" aria-label="Permalink to &quot;3.1alibabacloud2&quot;">​</a></h2><p>运行：<strong><code>yum install centos-release-scl</code></strong></p><p>结果得到：<strong><code>No package centos-release-scl available.</code></strong></p><p>大概是某些不可描述的原因。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/redhat-release</span></span>
<span class="line"><span style="color:#B392F0;">得到的版本是：</span></span>
<span class="line"><span style="color:#9ECBFF;">\`</span><span style="color:#B392F0;">Alibaba</span><span style="color:#9ECBFF;"> Cloud Linux (Aliyun Linux) release 2.1903 LTS (</span><span style="color:#B392F0;">Hunting</span><span style="color:#9ECBFF;"> Beagle)\`</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/redhat-release</span></span>
<span class="line"><span style="color:#6F42C1;">得到的版本是：</span></span>
<span class="line"><span style="color:#032F62;">\`</span><span style="color:#6F42C1;">Alibaba</span><span style="color:#032F62;"> Cloud Linux (Aliyun Linux) release 2.1903 LTS (</span><span style="color:#6F42C1;">Hunting</span><span style="color:#032F62;"> Beagle)\`</span></span></code></pre></div><p>解决方式：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">rpm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-ivh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://cbs.centos.org/kojifiles/packages/centos-release-scl-rh/2/3.el7.centos/noarch/centos-release-scl-rh-2-3.el7.centos.noarch.rpm</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">rpm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-ivh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://cbs.centos.org/kojifiles/packages/centos-release-scl/2/3.el7.centos/noarch/centos-release-scl-2-3.el7.centos.noarch.rpm</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">rpm</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-ivh</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://cbs.centos.org/kojifiles/packages/centos-release-scl-rh/2/3.el7.centos/noarch/centos-release-scl-rh-2-3.el7.centos.noarch.rpm</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">rpm</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-ivh</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://cbs.centos.org/kojifiles/packages/centos-release-scl/2/3.el7.centos/noarch/centos-release-scl-2-3.el7.centos.noarch.rpm</span></span></code></pre></div><p>centos现阶段该方式行不通，</p><p><code>故采用新方式</code>，</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">scl-utils</span></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">alinux-release-experimentals</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">---</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">原先的方式也可以使用，备选方案----</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">devtoolset-7-gcc</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">devtoolset-7-gdb</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">devtoolset-7-binutils</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">devtoolset-7-make</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">devtoolset-8-gcc</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">devtoolset-8-gdb</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">devtoolset-8-binutils</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">devtoolset-8-make</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">devtoolset-9-gcc</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">devtoolset-9-gdb</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">devtoolset-9-binutils</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">devtoolset-9-make</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">scl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">devtoolset-7</span></span>
<span class="line"><span style="color:#B392F0;">scl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">enable</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">devtoolset-7</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;gcc --version&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">scl-utils</span></span>
<span class="line"><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">alinux-release-experimentals</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">---</span><span style="color:#24292E;"> </span><span style="color:#032F62;">原先的方式也可以使用，备选方案----</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">devtoolset-7-gcc</span><span style="color:#24292E;"> </span><span style="color:#032F62;">devtoolset-7-gdb</span><span style="color:#24292E;"> </span><span style="color:#032F62;">devtoolset-7-binutils</span><span style="color:#24292E;"> </span><span style="color:#032F62;">devtoolset-7-make</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">devtoolset-8-gcc</span><span style="color:#24292E;"> </span><span style="color:#032F62;">devtoolset-8-gdb</span><span style="color:#24292E;"> </span><span style="color:#032F62;">devtoolset-8-binutils</span><span style="color:#24292E;"> </span><span style="color:#032F62;">devtoolset-8-make</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">devtoolset-9-gcc</span><span style="color:#24292E;"> </span><span style="color:#032F62;">devtoolset-9-gdb</span><span style="color:#24292E;"> </span><span style="color:#032F62;">devtoolset-9-binutils</span><span style="color:#24292E;"> </span><span style="color:#032F62;">devtoolset-9-make</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">scl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-l</span><span style="color:#24292E;"> </span><span style="color:#032F62;">devtoolset-7</span></span>
<span class="line"><span style="color:#6F42C1;">scl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">enable</span><span style="color:#24292E;"> </span><span style="color:#032F62;">devtoolset-7</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;gcc --version&#39;</span></span></code></pre></div><h2 id="_3-2centos系列" tabindex="-1">3.2centos系列 <a class="header-anchor" href="#_3-2centos系列" aria-label="Permalink to &quot;3.2centos系列&quot;">​</a></h2><h3 id="_1-安装源" tabindex="-1">1.安装源 <a class="header-anchor" href="#_1-安装源" aria-label="Permalink to &quot;1.安装源&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">centos-release-scl</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">devtoolset-9-gcc</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">devtoolset-9-gcc-c++</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">devtoolset-9-binutils</span></span>
<span class="line"><span style="color:#B392F0;">scl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">enable</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">devtoolset-9</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bash</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">centos-release-scl</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">devtoolset-9-gcc</span><span style="color:#24292E;"> </span><span style="color:#032F62;">devtoolset-9-gcc-c++</span><span style="color:#24292E;"> </span><span style="color:#032F62;">devtoolset-9-binutils</span></span>
<span class="line"><span style="color:#6F42C1;">scl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">enable</span><span style="color:#24292E;"> </span><span style="color:#032F62;">devtoolset-9</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bash</span></span></code></pre></div><p>需要注意的是scl命令启用只是临时的，退出shell或重启就会恢复原系统gcc版本。 如果要长期使用gcc 9.3的话：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">echo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;source /opt/rh/devtoolset-9/enable&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#9ECBFF;">/etc/profile</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">echo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;source /opt/rh/devtoolset-9/enable&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#032F62;">/etc/profile</span></span></code></pre></div><h3 id="_2-查看版本" tabindex="-1">2.查看版本 <a class="header-anchor" href="#_2-查看版本" aria-label="Permalink to &quot;2.查看版本&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@k8s-node01 tengine-3.0.0]# gcc -v</span></span>
<span class="line"><span style="color:#B392F0;">Using</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">built-in</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">specs.</span></span>
<span class="line"><span style="color:#E1E4E8;">COLLECT_GCC</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">gcc</span></span>
<span class="line"><span style="color:#E1E4E8;">COLLECT_LTO_WRAPPER</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">/opt/rh/devtoolset-9/root/usr/libexec/gcc/x86_64-redhat-linux/9/lto-wrapper</span></span>
<span class="line"><span style="color:#B392F0;">Target:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">x86_64-redhat-linux</span></span>
<span class="line"><span style="color:#B392F0;">Configured</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">with:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">../configure</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--enable-bootstrap</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--enable-languages=c,c++,fortran,lto</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--prefix=/opt/rh/devtoolset-9/root/usr</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--mandir=/opt/rh/devtoolset-9/root/usr/share/man</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--infodir=/opt/rh/devtoolset-9/root/usr/share/info</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--with-bugurl=http://bugzilla.redhat.com/bugzilla</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--enable-shared</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--enable-threads=posix</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--enable-checking=release</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--enable-multilib</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--with-system-zlib</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--enable-__cxa_atexit</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--disable-libunwind-exceptions</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--enable-gnu-unique-object</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--enable-linker-build-id</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--with-gcc-major-version-only</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--with-linker-hash-style=gnu</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--with-default-libstdcxx-abi=gcc4-compatible</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--enable-plugin</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--enable-initfini-array</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--with-isl=/builddir/build/BUILD/gcc-9.3.1-20200408/obj-x86_64-redhat-linux/isl-install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--disable-libmpx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--enable-gnu-indirect-function</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--with-tune=generic</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--with-arch_32=x86-64</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--build=x86_64-redhat-linux</span></span>
<span class="line"><span style="color:#B392F0;">Thread</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">model:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">posix</span></span>
<span class="line"><span style="color:#B392F0;">gcc</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">version</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">9.3</span><span style="color:#9ECBFF;">.1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">20200408</span><span style="color:#E1E4E8;"> (Red </span><span style="color:#9ECBFF;">Hat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">9.3</span><span style="color:#9ECBFF;">.1-2</span><span style="color:#E1E4E8;">) (</span><span style="color:#B392F0;">GCC</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@k8s-node01 tengine-3.0.0]# gcc -v</span></span>
<span class="line"><span style="color:#6F42C1;">Using</span><span style="color:#24292E;"> </span><span style="color:#032F62;">built-in</span><span style="color:#24292E;"> </span><span style="color:#032F62;">specs.</span></span>
<span class="line"><span style="color:#24292E;">COLLECT_GCC</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">gcc</span></span>
<span class="line"><span style="color:#24292E;">COLLECT_LTO_WRAPPER</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">/opt/rh/devtoolset-9/root/usr/libexec/gcc/x86_64-redhat-linux/9/lto-wrapper</span></span>
<span class="line"><span style="color:#6F42C1;">Target:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">x86_64-redhat-linux</span></span>
<span class="line"><span style="color:#6F42C1;">Configured</span><span style="color:#24292E;"> </span><span style="color:#032F62;">with:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">../configure</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--enable-bootstrap</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--enable-languages=c,c++,fortran,lto</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--prefix=/opt/rh/devtoolset-9/root/usr</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--mandir=/opt/rh/devtoolset-9/root/usr/share/man</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--infodir=/opt/rh/devtoolset-9/root/usr/share/info</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--with-bugurl=http://bugzilla.redhat.com/bugzilla</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--enable-shared</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--enable-threads=posix</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--enable-checking=release</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--enable-multilib</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--with-system-zlib</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--enable-__cxa_atexit</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--disable-libunwind-exceptions</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--enable-gnu-unique-object</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--enable-linker-build-id</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--with-gcc-major-version-only</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--with-linker-hash-style=gnu</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--with-default-libstdcxx-abi=gcc4-compatible</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--enable-plugin</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--enable-initfini-array</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--with-isl=/builddir/build/BUILD/gcc-9.3.1-20200408/obj-x86_64-redhat-linux/isl-install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--disable-libmpx</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--enable-gnu-indirect-function</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--with-tune=generic</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--with-arch_32=x86-64</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--build=x86_64-redhat-linux</span></span>
<span class="line"><span style="color:#6F42C1;">Thread</span><span style="color:#24292E;"> </span><span style="color:#032F62;">model:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">posix</span></span>
<span class="line"><span style="color:#6F42C1;">gcc</span><span style="color:#24292E;"> </span><span style="color:#032F62;">version</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">9.3</span><span style="color:#032F62;">.1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">20200408</span><span style="color:#24292E;"> (Red </span><span style="color:#032F62;">Hat</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">9.3</span><span style="color:#032F62;">.1-2</span><span style="color:#24292E;">) (</span><span style="color:#6F42C1;">GCC</span><span style="color:#24292E;">)</span></span></code></pre></div><h1 id="_4-make升级" tabindex="-1">4.make升级 <a class="header-anchor" href="#_4-make升级" aria-label="Permalink to &quot;4.make升级&quot;">​</a></h1><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">wget</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--no-check-certificate</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://ftp.gnu.org/gnu/make/make-4.3.tar.gz</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-xzvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">make-4.3.tar.gz</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">make-4.3/</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#6A737D;"># 安装到指定目录</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">./configure</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">--prefix=/usr/local/make</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">make</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">make</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#6A737D;"># 创建软链接</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/bin/</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">make</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">make.bak</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># backup</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ln</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-sv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/local/make/bin/make</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/bin/make</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">wget</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--no-check-certificate</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://ftp.gnu.org/gnu/make/make-4.3.tar.gz</span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">tar</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-xzvf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">make-4.3.tar.gz</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">make-4.3/</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6A737D;"># 安装到指定目录</span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">./configure</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">--prefix=/usr/local/make</span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">make</span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">make</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6A737D;"># 创建软链接</span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/bin/</span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">make</span><span style="color:#24292E;"> </span><span style="color:#032F62;">make.bak</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># backup</span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ln</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-sv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/local/make/bin/make</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/bin/make</span></span></code></pre></div><h1 id="_5-升级python" tabindex="-1">5.升级python <a class="header-anchor" href="#_5-升级python" aria-label="Permalink to &quot;5.升级python&quot;">​</a></h1><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@jump node20.10]# which python3</span></span>
<span class="line"><span style="color:#B392F0;">/usr/bin/python3</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@jump node20.10]# rm /usr/bin/python</span></span>
<span class="line"><span style="color:#B392F0;">rm:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">remove</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">symbolic</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">link</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">‘/usr/bin/python’?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">y</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@jump node20.10]# ln -sv /usr/bin/python3 /usr/bin/python</span></span>
<span class="line"><span style="color:#B392F0;">‘/usr/bin/python’</span><span style="color:#E1E4E8;"> -</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">‘/usr/bin/python3’</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@jump node20.10]# which python3</span></span>
<span class="line"><span style="color:#6F42C1;">/usr/bin/python3</span></span>
<span class="line"><span style="color:#24292E;">[root@jump node20.10]# rm /usr/bin/python</span></span>
<span class="line"><span style="color:#6F42C1;">rm:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">remove</span><span style="color:#24292E;"> </span><span style="color:#032F62;">symbolic</span><span style="color:#24292E;"> </span><span style="color:#032F62;">link</span><span style="color:#24292E;"> </span><span style="color:#032F62;">‘/usr/bin/python’?</span><span style="color:#24292E;"> </span><span style="color:#032F62;">y</span></span>
<span class="line"><span style="color:#24292E;">[root@jump node20.10]# ln -sv /usr/bin/python3 /usr/bin/python</span></span>
<span class="line"><span style="color:#6F42C1;">‘/usr/bin/python’</span><span style="color:#24292E;"> -</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">‘/usr/bin/python3’</span></span></code></pre></div><h1 id="_6-glibc升级" tabindex="-1">6.glibc升级 <a class="header-anchor" href="#_6-glibc升级" aria-label="Permalink to &quot;6.glibc升级&quot;">​</a></h1><ul><li>下载</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">wget</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-P</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/opt/tmp/</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">http://ftp.gnu.org/gnu/glibc/glibc-2.30.tar.gz</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">wget</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-P</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/opt/tmp/</span><span style="color:#24292E;"> </span><span style="color:#032F62;">http://ftp.gnu.org/gnu/glibc/glibc-2.30.tar.gz</span></span></code></pre></div><ul><li>解压</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">cd /opt/tmp/</span></span>
<span class="line"><span style="color:#e1e4e8;">tar zxvf glibc-2.30.tar.gz</span></span>
<span class="line"><span style="color:#e1e4e8;">cd glibc-2.30</span></span>
<span class="line"><span style="color:#e1e4e8;">mkdir build</span></span>
<span class="line"><span style="color:#e1e4e8;">cd build</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">cd /opt/tmp/</span></span>
<span class="line"><span style="color:#24292e;">tar zxvf glibc-2.30.tar.gz</span></span>
<span class="line"><span style="color:#24292e;">cd glibc-2.30</span></span>
<span class="line"><span style="color:#24292e;">mkdir build</span></span>
<span class="line"><span style="color:#24292e;">cd build</span></span></code></pre></div><ul><li>编译</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">.</span><span style="color:#E1E4E8;">./configure </span><span style="color:#79B8FF;">--prefix=/usr</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--disable-profile</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--enable-add-ons</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--with-headers=/usr/include</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--with-binutils=/opt/rh/devtoolset-9/root/usr/bin</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">make</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-j</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">num_cpu</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#安装</span></span>
<span class="line"><span style="color:#B392F0;">make</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span>
<span class="line"><span style="color:#79B8FF;">......</span></span>
<span class="line"><span style="color:#E1E4E8;">LD_SO</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">ld-linux-x86-64.so.2</span><span style="color:#E1E4E8;"> CC</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;gcc -B/usr/bin/&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">/usr/bin/perl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">scripts/test-installation.pl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/opt/tmp/glibc-2.30/build/</span></span>
<span class="line"><span style="color:#B392F0;">/usr/bin/ld:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cannot</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">find</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-lnss_test2</span></span>
<span class="line"><span style="color:#B392F0;">collect2:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">error:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ld</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">returned</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">exit</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;"># 此编译错误可以无视</span></span>
<span class="line"><span style="color:#B392F0;">Execution</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">gcc</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-B/usr/bin/</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">failed!</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;"># 此编译错误可以无视</span></span>
<span class="line"><span style="color:#79B8FF;">.....</span></span>
<span class="line"><span style="color:#B392F0;">You</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">should</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">restart</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">this</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">script</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">your</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">build</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">directory</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">after</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">you&#39;ve</span></span>
<span class="line"><span style="color:#9ECBFF;">fixed all problems!</span></span>
<span class="line"><span style="color:#9ECBFF;">Btw. the script doesn&#39;t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">work</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">you&#39;re installing GNU libc not as your</span></span>
<span class="line"><span style="color:#9ECBFF;">primary library!</span></span>
<span class="line"><span style="color:#9ECBFF;">make[1]: *** [Makefile:111: install] Error 1</span></span>
<span class="line"><span style="color:#9ECBFF;">make[1]: Leaving directory &#39;/opt/tmp/glibc-2.30&#39;</span></span>
<span class="line"><span style="color:#9ECBFF;">make: *** [Makefile:12: install] Error 2    # 此编译错误可以无视</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">.</span><span style="color:#24292E;">./configure </span><span style="color:#005CC5;">--prefix=/usr</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--disable-profile</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--enable-add-ons</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--with-headers=/usr/include</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--with-binutils=/opt/rh/devtoolset-9/root/usr/bin</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">make</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-j</span><span style="color:#24292E;"> </span><span style="color:#032F62;">num_cpu</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#安装</span></span>
<span class="line"><span style="color:#6F42C1;">make</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span>
<span class="line"><span style="color:#005CC5;">......</span></span>
<span class="line"><span style="color:#24292E;">LD_SO</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">ld-linux-x86-64.so.2</span><span style="color:#24292E;"> CC</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;gcc -B/usr/bin/&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">/usr/bin/perl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">scripts/test-installation.pl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/opt/tmp/glibc-2.30/build/</span></span>
<span class="line"><span style="color:#6F42C1;">/usr/bin/ld:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cannot</span><span style="color:#24292E;"> </span><span style="color:#032F62;">find</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-lnss_test2</span></span>
<span class="line"><span style="color:#6F42C1;">collect2:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">error:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ld</span><span style="color:#24292E;"> </span><span style="color:#032F62;">returned</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#032F62;">exit</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span><span style="color:#24292E;">   </span><span style="color:#6A737D;"># 此编译错误可以无视</span></span>
<span class="line"><span style="color:#6F42C1;">Execution</span><span style="color:#24292E;"> </span><span style="color:#032F62;">of</span><span style="color:#24292E;"> </span><span style="color:#032F62;">gcc</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-B/usr/bin/</span><span style="color:#24292E;"> </span><span style="color:#032F62;">failed!</span><span style="color:#24292E;">         </span><span style="color:#6A737D;"># 此编译错误可以无视</span></span>
<span class="line"><span style="color:#005CC5;">.....</span></span>
<span class="line"><span style="color:#6F42C1;">You</span><span style="color:#24292E;"> </span><span style="color:#032F62;">should</span><span style="color:#24292E;"> </span><span style="color:#032F62;">restart</span><span style="color:#24292E;"> </span><span style="color:#032F62;">this</span><span style="color:#24292E;"> </span><span style="color:#032F62;">script</span><span style="color:#24292E;"> </span><span style="color:#032F62;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">your</span><span style="color:#24292E;"> </span><span style="color:#032F62;">build</span><span style="color:#24292E;"> </span><span style="color:#032F62;">directory</span><span style="color:#24292E;"> </span><span style="color:#032F62;">after</span><span style="color:#24292E;"> </span><span style="color:#032F62;">you&#39;ve</span></span>
<span class="line"><span style="color:#032F62;">fixed all problems!</span></span>
<span class="line"><span style="color:#032F62;">Btw. the script doesn&#39;t</span><span style="color:#24292E;"> </span><span style="color:#032F62;">work</span><span style="color:#24292E;"> </span><span style="color:#032F62;">if</span><span style="color:#24292E;"> </span><span style="color:#032F62;">you&#39;re installing GNU libc not as your</span></span>
<span class="line"><span style="color:#032F62;">primary library!</span></span>
<span class="line"><span style="color:#032F62;">make[1]: *** [Makefile:111: install] Error 1</span></span>
<span class="line"><span style="color:#032F62;">make[1]: Leaving directory &#39;/opt/tmp/glibc-2.30&#39;</span></span>
<span class="line"><span style="color:#032F62;">make: *** [Makefile:12: install] Error 2    # 此编译错误可以无视</span></span></code></pre></div><blockquote><p>--with-binutils 需要指定gcc命令的路径</p></blockquote><ul><li>检查是否成功</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@jump node20.10]#  ls -l /lib64/libc.so.6</span></span>
<span class="line"><span style="color:#B392F0;">lrwxrwxrwx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">root</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">root</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">12</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Jan</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">9</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">14</span><span style="color:#9ECBFF;">:38</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/lib64/libc.so.6</span><span style="color:#E1E4E8;"> -</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">libc-2.30.so</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@jump node20.10]#  ls -l /lib64/libc.so.6</span></span>
<span class="line"><span style="color:#6F42C1;">lrwxrwxrwx</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#032F62;">root</span><span style="color:#24292E;"> </span><span style="color:#032F62;">root</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">12</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Jan</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">9</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">14</span><span style="color:#032F62;">:38</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/lib64/libc.so.6</span><span style="color:#24292E;"> -</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">libc-2.30.so</span></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">❌ 注意</p><p>最后需要在执行下面命令，先前安装的会被覆盖</p></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/lib64/libstdc++.so.6</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">lrwxrwxrwx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">root</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">root</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">19</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Jan</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">9</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">13</span><span style="color:#9ECBFF;">:27</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/lib64/libstdc++.so.6</span><span style="color:#E1E4E8;"> -</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">libstdc++.so.6.0.19</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#删除软链</span></span>
<span class="line"><span style="color:#B392F0;">rm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/lib64/libstdc++.so.6</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#生成新的</span></span>
<span class="line"><span style="color:#B392F0;">ln</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-sv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data/apps/local/gcc5.5.0/lib64/libstdc++.so.6.0.21</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/lib64/libstdc++.so.6</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#至此node20.10可以执行</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@jump node20.10]# ./bin/node --version</span></span>
<span class="line"><span style="color:#B392F0;">v20.10.0</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ls</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-l</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/lib64/libstdc++.so.6</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">lrwxrwxrwx</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#032F62;">root</span><span style="color:#24292E;"> </span><span style="color:#032F62;">root</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">19</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Jan</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">9</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">13</span><span style="color:#032F62;">:27</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/lib64/libstdc++.so.6</span><span style="color:#24292E;"> -</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">libstdc++.so.6.0.19</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#删除软链</span></span>
<span class="line"><span style="color:#6F42C1;">rm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/lib64/libstdc++.so.6</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#生成新的</span></span>
<span class="line"><span style="color:#6F42C1;">ln</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-sv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/data/apps/local/gcc5.5.0/lib64/libstdc++.so.6.0.21</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/lib64/libstdc++.so.6</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#至此node20.10可以执行</span></span>
<span class="line"><span style="color:#24292E;">[root@jump node20.10]# ./bin/node --version</span></span>
<span class="line"><span style="color:#6F42C1;">v20.10.0</span></span></code></pre></div>`,57),e=[o];function c(t,r,y,E,i,F){return a(),n("div",null,e)}const b=s(p,[["render",c]]);export{C as __pageData,b as default};
