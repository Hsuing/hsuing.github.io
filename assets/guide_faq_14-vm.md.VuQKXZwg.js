import{_ as s,o as n,c as a,R as l}from"./chunks/framework.zUbWieqp.js";const u=JSON.parse('{"title":"1. 重新生成mac地址","description":"","frontmatter":{},"headers":[],"relativePath":"guide/faq/14-vm.md","filePath":"guide/faq/14-vm.md","lastUpdated":1730128120000}'),p={name:"guide/faq/14-vm.md"},o=l(`<p><code>已clone完</code></p><h1 id="_1-重新生成mac地址" tabindex="-1">1. 重新生成mac地址 <a class="header-anchor" href="#_1-重新生成mac地址" aria-label="Permalink to &quot;1. 重新生成mac地址&quot;">​</a></h1><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202404221012660.png" alt="image-20240422101208912"></p><h1 id="_2-修改rules" tabindex="-1">2. 修改rules <a class="header-anchor" href="#_2-修改rules" aria-label="Permalink to &quot;2. 修改rules&quot;">​</a></h1><p>vi /etc/udev/rules.d/70-persistent-ipoib.rules</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#添加一条</span></span>
<span class="line"><span style="color:#E1E4E8;">ACTION</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">=&quot;add&quot;,</span><span style="color:#E1E4E8;"> SUBSYSTEM</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">=&quot;net&quot;,</span><span style="color:#E1E4E8;"> DRIVERS</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">=&quot;?*&quot;,</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ATTR</span><span style="color:#E1E4E8;">{</span><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;">}==</span><span style="color:#B392F0;">&quot;32&quot;</span><span style="color:#B392F0;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ATTR{address}==&quot;00:50:56:31:B3:65&quot;,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">NAME=&quot;ens33&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#注意，attr 需要修改成刚刚新生成的mac地址 ，name根据自己的网卡的名字修改</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#添加一条</span></span>
<span class="line"><span style="color:#24292E;">ACTION</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">=&quot;add&quot;,</span><span style="color:#24292E;"> SUBSYSTEM</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">=&quot;net&quot;,</span><span style="color:#24292E;"> DRIVERS</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">=&quot;?*&quot;,</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ATTR</span><span style="color:#24292E;">{</span><span style="color:#005CC5;">type</span><span style="color:#24292E;">}==</span><span style="color:#6F42C1;">&quot;32&quot;</span><span style="color:#6F42C1;">,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ATTR{address}==&quot;00:50:56:31:B3:65&quot;,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">NAME=&quot;ens33&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#注意，attr 需要修改成刚刚新生成的mac地址 ，name根据自己的网卡的名字修改</span></span></code></pre></div><h1 id="_3-修改网卡" tabindex="-1">3. 修改网卡 <a class="header-anchor" href="#_3-修改网卡" aria-label="Permalink to &quot;3. 修改网卡&quot;">​</a></h1><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# cat /etc/sysconfig/network-scripts/ifcfg-ens33</span></span>
<span class="line"><span style="color:#E1E4E8;">TYPE</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">Ethernet</span></span>
<span class="line"><span style="color:#E1E4E8;">PROXY_METHOD</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">none</span></span>
<span class="line"><span style="color:#E1E4E8;">BROWSER_ONLY</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">no</span></span>
<span class="line"><span style="color:#E1E4E8;">BOOTPROTO</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">static</span><span style="color:#E1E4E8;">			</span><span style="color:#6A737D;">#需修改 </span></span>
<span class="line"><span style="color:#E1E4E8;">DEFROUTE</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">yes</span></span>
<span class="line"><span style="color:#E1E4E8;">IPV4_FAILURE_FATAL</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">no</span></span>
<span class="line"><span style="color:#E1E4E8;">IPV6INIT</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">yes</span></span>
<span class="line"><span style="color:#E1E4E8;">IPV6_AUTOCONF</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">yes</span></span>
<span class="line"><span style="color:#E1E4E8;">IPV6_DEFROUTE</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">yes</span></span>
<span class="line"><span style="color:#E1E4E8;">IPV6_FAILURE_FATAL</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">no</span></span>
<span class="line"><span style="color:#E1E4E8;">IPV6_ADDR_GEN_MODE</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">stable-privacy</span></span>
<span class="line"><span style="color:#E1E4E8;">NAME</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">ens33</span></span>
<span class="line"><span style="color:#E1E4E8;">DEVICE</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">ens33</span></span>
<span class="line"><span style="color:#E1E4E8;">ONBOOT</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">yes</span><span style="color:#E1E4E8;">					 </span><span style="color:#6A737D;">#需修改</span></span>
<span class="line"><span style="color:#E1E4E8;">IPADDR</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">10.103</span><span style="color:#9ECBFF;">.236.201</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">#需修改 </span></span>
<span class="line"><span style="color:#E1E4E8;">NETMASK</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">255.255</span><span style="color:#9ECBFF;">.255.0</span></span>
<span class="line"><span style="color:#E1E4E8;">GATEWAY</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">10.103</span><span style="color:#9ECBFF;">.236.2</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;">#需修改</span></span>
<span class="line"><span style="color:#E1E4E8;">DNS1</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">114.114</span><span style="color:#9ECBFF;">.114.114</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;">#需修改</span></span>
<span class="line"><span style="color:#E1E4E8;">HWADDR</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;00:50:56:31:B3:65&quot;</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;">#需修改</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# cat /etc/sysconfig/network-scripts/ifcfg-ens33</span></span>
<span class="line"><span style="color:#24292E;">TYPE</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">Ethernet</span></span>
<span class="line"><span style="color:#24292E;">PROXY_METHOD</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">none</span></span>
<span class="line"><span style="color:#24292E;">BROWSER_ONLY</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">no</span></span>
<span class="line"><span style="color:#24292E;">BOOTPROTO</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">static</span><span style="color:#24292E;">			</span><span style="color:#6A737D;">#需修改 </span></span>
<span class="line"><span style="color:#24292E;">DEFROUTE</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">yes</span></span>
<span class="line"><span style="color:#24292E;">IPV4_FAILURE_FATAL</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">no</span></span>
<span class="line"><span style="color:#24292E;">IPV6INIT</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">yes</span></span>
<span class="line"><span style="color:#24292E;">IPV6_AUTOCONF</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">yes</span></span>
<span class="line"><span style="color:#24292E;">IPV6_DEFROUTE</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">yes</span></span>
<span class="line"><span style="color:#24292E;">IPV6_FAILURE_FATAL</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">no</span></span>
<span class="line"><span style="color:#24292E;">IPV6_ADDR_GEN_MODE</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">stable-privacy</span></span>
<span class="line"><span style="color:#24292E;">NAME</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">ens33</span></span>
<span class="line"><span style="color:#24292E;">DEVICE</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">ens33</span></span>
<span class="line"><span style="color:#24292E;">ONBOOT</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">yes</span><span style="color:#24292E;">					 </span><span style="color:#6A737D;">#需修改</span></span>
<span class="line"><span style="color:#24292E;">IPADDR</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">10.103</span><span style="color:#032F62;">.236.201</span><span style="color:#24292E;">        </span><span style="color:#6A737D;">#需修改 </span></span>
<span class="line"><span style="color:#24292E;">NETMASK</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">255.255</span><span style="color:#032F62;">.255.0</span></span>
<span class="line"><span style="color:#24292E;">GATEWAY</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">10.103</span><span style="color:#032F62;">.236.2</span><span style="color:#24292E;">         </span><span style="color:#6A737D;">#需修改</span></span>
<span class="line"><span style="color:#24292E;">DNS1</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">114.114</span><span style="color:#032F62;">.114.114</span><span style="color:#24292E;">         </span><span style="color:#6A737D;">#需修改</span></span>
<span class="line"><span style="color:#24292E;">HWADDR</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;00:50:56:31:B3:65&quot;</span><span style="color:#24292E;">   </span><span style="color:#6A737D;">#需修改</span></span></code></pre></div><h1 id="_4-修改uuid-可选" tabindex="-1">4. 修改UUID(可选) <a class="header-anchor" href="#_4-修改uuid-可选" aria-label="Permalink to &quot;4. 修改UUID(可选)&quot;">​</a></h1><p>这个做不做不影响，如果是克隆机器，修改网卡配置文件删除uuid那一行</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#重新生成uuid</span></span>
<span class="line"><span style="color:#B392F0;">uuidgen</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">网卡名</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/sys/class/dmi/id/product_uuid</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 随机生成UUID</span></span>
<span class="line"><span style="color:#E1E4E8;">UUID</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">$(</span><span style="color:#B392F0;">cat</span><span style="color:#9ECBFF;"> /proc/sys/kernel/random/uuid)</span></span>
<span class="line"><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;s/UUID=.*/UUID=\${</span><span style="color:#E1E4E8;">UUID</span><span style="color:#9ECBFF;">}/g&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/sysconfig/network-scripts/ifcfg-ens32</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#重新生成uuid</span></span>
<span class="line"><span style="color:#6F42C1;">uuidgen</span><span style="color:#24292E;"> </span><span style="color:#032F62;">网卡名</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/sys/class/dmi/id/product_uuid</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 随机生成UUID</span></span>
<span class="line"><span style="color:#24292E;">UUID</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">$(</span><span style="color:#6F42C1;">cat</span><span style="color:#032F62;"> /proc/sys/kernel/random/uuid)</span></span>
<span class="line"><span style="color:#6F42C1;">sed</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;s/UUID=.*/UUID=\${</span><span style="color:#24292E;">UUID</span><span style="color:#032F62;">}/g&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/sysconfig/network-scripts/ifcfg-ens32</span></span></code></pre></div><h1 id="_5-网关" tabindex="-1">5. 网关 <a class="header-anchor" href="#_5-网关" aria-label="Permalink to &quot;5. 网关&quot;">​</a></h1><ol><li><p>选中VMnet8</p></li><li><p>选择NAT模式(与虚拟机共享主机的IP地址)(N)</p></li><li><p>勾选将主机虚拟适配器连接到此网络</p></li><li><p>勾选 使用本地DHCP服务器将IP地址分配给虚拟机</p></li><li><p>将子网IP设置为你想要的ip段，<code>不能与宿主机ip段相同</code>，我这里填写的是 10.103.236.0</p></li><li><p>子网掩码填写：255.255.255.0</p></li><li><p>点击NAT设置</p></li><li><p>填写网关IP，与你的ip段一致即可，<strong>但IP地址最后一位不能填写1！</strong> 我这里填写的是 10.103.236.2，不能填写为 10.103.236.</p><blockquote><p>1结尾的ip是vmnet8 网卡占用</p></blockquote></li><li><p>点击【确定】，返回【虚拟网络编辑器】后，再次点击【确定】</p></li></ol><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202406041407673.png" alt="image-20240604140657563"></p><h1 id="_6-dns" tabindex="-1">6. DNS <a class="header-anchor" href="#_6-dns" aria-label="Permalink to &quot;6. DNS&quot;">​</a></h1><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#修改</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master nfs]# cat /etc/resolv.conf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">nameserver</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">114.114</span><span style="color:#9ECBFF;">.114.114</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#重启系统，测试ping www.baidu.com</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#修改</span></span>
<span class="line"><span style="color:#24292E;">[root@kube-master nfs]# cat /etc/resolv.conf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">nameserver</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">114.114</span><span style="color:#032F62;">.114.114</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#重启系统，测试ping www.baidu.com</span></span></code></pre></div><h1 id="_7-intercpu" tabindex="-1">7.InterCPU <a class="header-anchor" href="#_7-intercpu" aria-label="Permalink to &quot;7.InterCPU&quot;">​</a></h1><p>vmware开启4个虚拟机之后，系统卡死</p><p>解决方式：</p><p>控制面板，打开Windows功能，关闭<code>Hyper-V</code>、<code>Windows虚拟机程序监控平台</code>、<code>虚拟机平台</code>，重启电脑</p>`,20),e=[o];function c(t,r,y,E,i,F){return n(),a("div",null,e)}const D=s(p,[["render",c]]);export{u as __pageData,D as default};
