import{_ as s,o as n,c as a,R as p}from"./chunks/framework.zUbWieqp.js";const m=JSON.parse('{"title":"1. ConfigMapåŸºæœ¬æ¦‚å¿µ","description":"","frontmatter":{},"headers":[],"relativePath":"guide/container/k8s/èµ„æºå¯¹è±¡/8-configmap.md","filePath":"guide/container/k8s/èµ„æºå¯¹è±¡/8-configmap.md","lastUpdated":1723447064000}'),l={name:"guide/container/k8s/èµ„æºå¯¹è±¡/8-configmap.md"},o=p(`<p>æ–‡æ¡£ï¼Œ<a href="https://kubernetes.io/zh-cn/docs/concepts/configuration/configmap/" target="_blank" rel="noreferrer">https://kubernetes.io/zh-cn/docs/concepts/configuration/configmap/</a></p><h1 id="_1-configmapåŸºæœ¬æ¦‚å¿µ" tabindex="-1">1. ConfigMapåŸºæœ¬æ¦‚å¿µ <a class="header-anchor" href="#_1-configmapåŸºæœ¬æ¦‚å¿µ" aria-label="Permalink to &quot;1. ConfigMapåŸºæœ¬æ¦‚å¿µ&quot;">â€‹</a></h1><p><code>ConfigMapå’ŒSecretçš„æœ¬è´¨æ˜¯volumeçš„ä¸€ç§å½¢å¼</code>,k8sæ—¨åœ¨æŠŠä¸€åˆ‡èµ„æºæŠ½è±¡åŒ–</p><h2 id="_1-1-ä»€ä¹ˆæ˜¯configmap" tabindex="-1">1.1 ä»€ä¹ˆæ˜¯ConfigMap <a class="header-anchor" href="#_1-1-ä»€ä¹ˆæ˜¯configmap" aria-label="Permalink to &quot;1.1 ä»€ä¹ˆæ˜¯ConfigMap&quot;">â€‹</a></h2><p>ConfigMapèµ„æºä¸»è¦ä¸ºå®¹å™¨æ³¨â¼Šç›¸å…³çš„ç¨‹åºé…ç½®ä¿¡æ¯ï¼Œâ½¤æ¥å®šåˆ¶ç¨‹åºçš„è¿â¾â½…å¼ï¼Œâ½å¦‚Redisç›‘å¬ç«¯â¼ã€æœ€â¼¤å®¢æˆ·ç«¯è¿æ¥æ•°ç­‰ç­‰ã€‚</p><p>å½“å®šä¹‰å¥½â¼€ä¸ªConfigMapèµ„æºåï¼Œå¦‚æœPodéœ€è¦ä½¿â½¤ï¼Œå¯ä»¥é€šè¿‡é€šè¿‡<code>ç¯å¢ƒå˜é‡</code>ã€<code>å‘½ä»¤è¡Œå‚æ•°</code>æˆ–<code>å­˜å‚¨å·å½¢å¼</code>å°†å…¶æŒ‚è½½å¹¶åŠ è½½ç›¸å…³çš„é…ç½®ï¼Œé™ä½äº†é…ç½®ä¸é•œåƒâ½‚ä»¶çš„è€¦åˆå…³ç³»ã€‚</p><p>ConfigMap å¯¹è±¡å°†é…ç½®æ•°æ®ä»¥<code>é”®å€¼å¯¹</code>çš„å½¢å¼è¿›è¡Œå­˜å‚¨ï¼Œè¿™äº›æ•°æ®å¯ä»¥åœ¨ Pod å¯¹è±¡ä¸­ä½¿ç”¨æˆ–è€…ä¸ºç³»ç»Ÿç»„ä»¶æä¾›é…ç½®ã€‚</p><h2 id="_1-2-ä¸ºä»€ä¹ˆéœ€è¦configmap" tabindex="-1">1.2 ä¸ºä»€ä¹ˆéœ€è¦ConfigMap <a class="header-anchor" href="#_1-2-ä¸ºä»€ä¹ˆéœ€è¦configmap" aria-label="Permalink to &quot;1.2 ä¸ºä»€ä¹ˆéœ€è¦ConfigMap&quot;">â€‹</a></h2><p>å°†<code>åº”ç”¨é…ç½®ä¿¡æ¯ä¸ç¨‹åºè¿›è¡Œåˆ†ç¦»</code>ï¼Œè¿™æ ·å¯ä»¥ä½¿å¾—åº”ç”¨ç¨‹åºè¢«æ›´å¥½åœ°å¤ç”¨ï¼Œé€šè¿‡ä¸åŒçš„é…ç½®èƒ½å®ç°æ›´çµæ´»çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼šåœ¨æµ‹è¯•ç¯å¢ƒä¸­Nginxæä¾›teståŸŸåè®¿é—®ï¼Œä¸”æ²¡é…ç½®å‹ç¼©åŠŸèƒ½ï¼Œè€Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­åˆ™éœ€è¦æä¾›wwwåŸŸåè®¿é—®ï¼Œä¸”éœ€è¦å¼€å¯å‹ç¼©åŠŸèƒ½ï¼Œæ‰€ä»¥å°†åº”ç”¨å®¹å™¨ä¸é…ç½®åˆ†ç¦»ï¼Œæ ¹æ®ä¸åŒçš„ç¯å¢ƒè°ƒç”¨ä¸åŒçš„<code>ConfigMap</code>é…ç½®ï¼Œèƒ½æœ‰æ•ˆçš„é™ä½è€¦åˆåº¦å’Œå¤æ‚åº¦ã€‚</p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202405281159079.png" alt="image-20240528115757521"></p><h2 id="_1-3-configmapä½œç”¨" tabindex="-1">1.3 ConfigMapä½œç”¨ <a class="header-anchor" href="#_1-3-configmapä½œç”¨" aria-label="Permalink to &quot;1.3 ConfigMapä½œç”¨&quot;">â€‹</a></h2><p>å­˜å‚¨ä¸åŠ å¯†æ•°æ®åˆ°etcdï¼Œè®©Podä»¥å˜é‡æˆ–è€…VolumeæŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚</p><h1 id="_2-åˆ›å»ºconfigmap" tabindex="-1">2. åˆ›å»ºConfigMap <a class="header-anchor" href="#_2-åˆ›å»ºconfigmap" aria-label="Permalink to &quot;2. åˆ›å»ºConfigMap&quot;">â€‹</a></h1><p>å®˜æ–¹æ–‡æ¡£ï¼Œ<a href="https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/configure-pod-configmap/" target="_blank" rel="noreferrer">https://kubernetes.io/zh-cn/docs/tasks/configure-pod-container/configure-pod-configmap/</a></p><h2 id="_2-0-èµ„æºå®šä¹‰è§„èŒƒ" tabindex="-1">2.0 èµ„æºå®šä¹‰è§„èŒƒ <a class="header-anchor" href="#_2-0-èµ„æºå®šä¹‰è§„èŒƒ" aria-label="Permalink to &quot;2.0 èµ„æºå®šä¹‰è§„èŒƒ&quot;">â€‹</a></h2><ul><li>åˆ›å»ºConfigMapåï¼Œæ•°æ®å®é™…ä¼šå­˜å‚¨åœ¨K8sä¸­Etcdï¼Œç„¶åé€šè¿‡åˆ›å»ºPodæ—¶å¼•ç”¨è¯¥æ•°æ®ã€‚</li><li>åº”ç”¨åœºæ™¯ï¼šåº”ç”¨ç¨‹åºé…ç½® Podä½¿ç”¨configmapæ•°æ®æœ‰ä¸¤ç§æ–¹å¼ï¼š <ul><li>å˜é‡æ³¨å…¥</li><li>æ•°æ®å·æŒ‚è½½</li></ul></li></ul><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202408070931952.png" alt="image"></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#å¸®åŠ©æ–‡æ¡£</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">explain</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">configmap</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">æˆ–è€…</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">configmap</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--help</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#å¸®åŠ©æ–‡æ¡£</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">explain</span><span style="color:#24292E;"> </span><span style="color:#032F62;">configmap</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">æˆ–è€…</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">configmap</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--help</span></span></code></pre></div><h2 id="_2-1-åŸºäºå‘½ä»¤åˆ›å»ºcm" tabindex="-1">2.1 åŸºäºå‘½ä»¤åˆ›å»ºCM <a class="header-anchor" href="#_2-1-åŸºäºå‘½ä»¤åˆ›å»ºcm" aria-label="Permalink to &quot;2.1 åŸºäºå‘½ä»¤åˆ›å»ºCM&quot;">â€‹</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl create configmap nginx-command-config --from-literal=ngx.host=</span><span style="color:#9ECBFF;">&#39;0.0.0.Î¸&#39;</span><span style="color:#E1E4E8;"> --from-literal=nginx.port=</span><span style="color:#9ECBFF;">&#39;8899&#39;</span></span>
<span class="line"><span style="color:#B392F0;">configmap/nginx-command-config</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#æŸ¥çœ‹</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl get configmaps</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                   </span><span style="color:#9ECBFF;">DATA</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">AGE</span></span>
<span class="line"><span style="color:#B392F0;">nginx-command-config</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">24</span><span style="color:#9ECBFF;">s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#æŸ¥çœ‹å†…å®¹</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl get configmaps nginx-command-config -oyaml</span></span>
<span class="line"><span style="color:#B392F0;">apiVersion:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#B392F0;">data:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">nginx.port:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;8899&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">ngx.host:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0.0</span><span style="color:#9ECBFF;">.0.Î¸</span></span>
<span class="line"><span style="color:#B392F0;">kind:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ConfigMap</span></span>
<span class="line"><span style="color:#B392F0;">metadata:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">creationTimestamp:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;2024-05-28T06:55:36Z&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">name:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx-command-config</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">namespace:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">default</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">resourceVersion:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;1578412&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">uid:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">a94ec46f-3b93-4600-80f9-fa467a5eb6cd</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl create configmap nginx-command-config --from-literal=ngx.host=</span><span style="color:#032F62;">&#39;0.0.0.Î¸&#39;</span><span style="color:#24292E;"> --from-literal=nginx.port=</span><span style="color:#032F62;">&#39;8899&#39;</span></span>
<span class="line"><span style="color:#6F42C1;">configmap/nginx-command-config</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#æŸ¥çœ‹</span></span>
<span class="line"><span style="color:#24292E;">[root@kube-master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl get configmaps</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                   </span><span style="color:#032F62;">DATA</span><span style="color:#24292E;">   </span><span style="color:#032F62;">AGE</span></span>
<span class="line"><span style="color:#6F42C1;">nginx-command-config</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">24</span><span style="color:#032F62;">s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#æŸ¥çœ‹å†…å®¹</span></span>
<span class="line"><span style="color:#24292E;">[root@kube-master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl get configmaps nginx-command-config -oyaml</span></span>
<span class="line"><span style="color:#6F42C1;">apiVersion:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#6F42C1;">data:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">nginx.port:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;8899&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">ngx.host:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0.0</span><span style="color:#032F62;">.0.Î¸</span></span>
<span class="line"><span style="color:#6F42C1;">kind:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ConfigMap</span></span>
<span class="line"><span style="color:#6F42C1;">metadata:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">creationTimestamp:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;2024-05-28T06:55:36Z&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">name:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx-command-config</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">namespace:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">default</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">resourceVersion:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;1578412&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">uid:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">a94ec46f-3b93-4600-80f9-fa467a5eb6cd</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">ğŸ’¡ è¯´æ˜</p><p>ConfigMapèµ„æºæ²¡æœ‰æœ‰sepcå’Œstatusï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨dataå­—æ®µåµŒå¥—é”®å€¼æ•°æ®</p></div><h2 id="_2-2-åŸºäºæ–‡ä»¶åˆ›å»º-ç”Ÿäº§æ¨è" tabindex="-1">2.2 åŸºäºæ–‡ä»¶åˆ›å»ºï¼ˆç”Ÿäº§æ¨èï¼‰ <a class="header-anchor" href="#_2-2-åŸºäºæ–‡ä»¶åˆ›å»º-ç”Ÿäº§æ¨è" aria-label="Permalink to &quot;2.2 åŸºäºæ–‡ä»¶åˆ›å»ºï¼ˆç”Ÿäº§æ¨èï¼‰&quot;">â€‹</a></h2><p>ä¸º &quot;kubeclt create configmap&quot; å‘½ä»¤ä½¿ç”¨ &quot;--from-file&quot; é€‰é¡¹å³å¯åŸºäºæ–‡ä»¶å†…å®¹æ¥åˆ›å»º ConfigMap å¯¹è±¡ï¼Œå¯ä»¥é‡å¤å¤šæ¬¡ä½¿ç”¨ &quot;--from-file&quot; é€‰é¡¹ä»¥ä¼ é€’å¤šä¸ªæ–‡ä»¶å†…å®¹ï¼Œå®ƒçš„å‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">Usage:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">configmap</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">NAME</span><span style="color:#E1E4E8;"> [--from-file=[key=]source] [--from-literal</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">key1</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">value1] [--dry-run</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">server</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">client</span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">none] [options]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">Usage:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">configmap</span><span style="color:#24292E;"> </span><span style="color:#032F62;">NAME</span><span style="color:#24292E;"> [--from-file=[key=]source] [--from-literal</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">key1</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">value1] [--dry-run</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">server</span><span style="color:#D73A49;">|</span><span style="color:#24292E;">client</span><span style="color:#D73A49;">|</span><span style="color:#24292E;">none] [options]</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#äº‹å…ˆå‡†å¤‡å¥½çš„ Nginx é…ç½®æ–‡ä»¶æ¨¡æ¿ä¿å­˜äº ConfigMap å¯¹è±¡ nginx-config</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">configmap</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx-config</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">--from-file=/data/configs/nginx/conf.d/www.aaa.com.conf </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">--from-file=/data/configs/nginx/conf.d/www.bbb.com.conf</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#äº‹å…ˆå‡†å¤‡å¥½çš„ Nginx é…ç½®æ–‡ä»¶æ¨¡æ¿ä¿å­˜äº ConfigMap å¯¹è±¡ nginx-config</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">configmap</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx-config</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">--from-file=/data/configs/nginx/conf.d/www.aaa.com.conf </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">--from-file=/data/configs/nginx/conf.d/www.bbb.com.conf</span></span></code></pre></div><p>å¦‚æœéœ€è¦è‡ªè¡ŒæŒ‡å®šé”®åï¼Œåˆ™å¯åœ¨ &quot;--from-file&quot; é€‰é¡¹ä¸­ç›´æ¥æŒ‡å®šè‡ªå®šä¹‰çš„é”®ï¼Œå‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">configmap</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx-config</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">--from-file=aaa=/data/configs/nginx/conf.d/www.aaa.com.conf </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">--from-file=bbb=/data/configs/nginx/conf.d/www.bbb.com.conf</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">configmap</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx-config</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">--from-file=aaa=/data/configs/nginx/conf.d/www.aaa.com.conf </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">--from-file=bbb=/data/configs/nginx/conf.d/www.bbb.com.conf</span></span></code></pre></div><h2 id="_2-3-åŸºäºç›®å½•" tabindex="-1">2.3 åŸºäºç›®å½• <a class="header-anchor" href="#_2-3-åŸºäºç›®å½•" aria-label="Permalink to &quot;2.3 åŸºäºç›®å½•&quot;">â€‹</a></h2><p>å¦‚æœé…ç½®æ–‡ä»¶æ•°é‡è¾ƒå¤šä¸”å­˜å‚¨äºæœ‰é™çš„ç›®å½•ä¸­æ—¶ï¼Œkubeclt è¿˜æä¾›äº†åŸºäºç›®å½•ç›´æ¥å°†å¤šä¸ªæ–‡ä»¶åˆ†åˆ«çº³ä¸ºé”®å€¼æ•°æ®çš„ ConfigMap èµ„æºåˆ›å»ºæ–¹å¼ã€‚å°† &quot;--from-file&quot; é€‰é¡¹åé¢æ‰€è·Ÿçš„è·¯å¾„æŒ‡å‘ä¸€ä¸ªç›®å½•è·¯å¾„å°±èƒ½å°†ç›®å½•ä¸‹çš„æ‰€æœ‰åˆ›å»ºäºåŒä¸€ ConfigMap èµ„æºä¸­ï¼Œå‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">Usage:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">configmap</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">configmap_na</span><span style="color:#E1E4E8;">m</span><span style="color:#F97583;">&gt;</span><span style="color:#9ECBFF;">[--from-file=</span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">path-to-director</span><span style="color:#E1E4E8;">y</span><span style="color:#F97583;">&gt;</span><span style="color:#9ECBFF;">]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">Usage:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">configmap</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">configmap_na</span><span style="color:#24292E;">m</span><span style="color:#D73A49;">&gt;</span><span style="color:#032F62;">[--from-file=</span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">path-to-director</span><span style="color:#24292E;">y</span><span style="color:#D73A49;">&gt;</span><span style="color:#032F62;">]</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubect</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">configmap</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx-config-file</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--from-file=/data/confnigs/nginx/conf.d/</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubect</span><span style="color:#24292E;">  </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">configmap</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx-config-file</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--from-file=/data/confnigs/nginx/conf.d/</span></span></code></pre></div><h2 id="_2-4-ä½¿ç”¨èµ„æºæ¸…å•åˆ›å»º" tabindex="-1">2.4 ä½¿ç”¨èµ„æºæ¸…å•åˆ›å»º <a class="header-anchor" href="#_2-4-ä½¿ç”¨èµ„æºæ¸…å•åˆ›å»º" aria-label="Permalink to &quot;2.4 ä½¿ç”¨èµ„æºæ¸…å•åˆ›å»º&quot;">â€‹</a></h2><p>åŸºäºé…ç½®æ–‡ä»¶åˆ›å»º ConfigMap èµ„æºæ—¶ï¼Œå®ƒæ‰€ä½¿ç”¨çš„å­—æ®µåŒ…æ‹¬é€šå¸¸çš„ apiVersionã€kind å’Œ metadata å­—æ®µï¼Œä»¥åŠç”¨äºå­˜å‚¨æ•°æ®çš„å…³é”®å­—æ®µ &quot;data&quot;</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">root@kube-master ~</span><span style="color:#E1E4E8;">]# </span><span style="color:#9ECBFF;">cat configmap.yaml</span></span>
<span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">ConfigMap</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">demoapp-config</span></span>
<span class="line"><span style="color:#85E89D;">data</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">host</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0.0.0.0</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">port</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;8888&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">my-server.conf</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#9ECBFF;">    server {</span></span>
<span class="line"><span style="color:#9ECBFF;">      listen 80;</span></span>
<span class="line"><span style="color:#9ECBFF;">      server_name go.ikubernetes.net;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">     location / {</span></span>
<span class="line"><span style="color:#9ECBFF;">      root /usr/share/nginx/html;</span></span>
<span class="line"><span style="color:#9ECBFF;">      index index.html;</span></span>
<span class="line"><span style="color:#9ECBFF;">    }</span></span>
<span class="line"><span style="color:#9ECBFF;">    include /etc/nginx/conf.d/*.cfg;</span></span>
<span class="line"><span style="color:#9ECBFF;">    }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[</span><span style="color:#032F62;">root@kube-master ~</span><span style="color:#24292E;">]# </span><span style="color:#032F62;">cat configmap.yaml</span></span>
<span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">ConfigMap</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">demoapp-config</span></span>
<span class="line"><span style="color:#22863A;">data</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">host</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0.0.0.0</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">port</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;8888&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">my-server.conf</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#032F62;">    server {</span></span>
<span class="line"><span style="color:#032F62;">      listen 80;</span></span>
<span class="line"><span style="color:#032F62;">      server_name go.ikubernetes.net;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">     location / {</span></span>
<span class="line"><span style="color:#032F62;">      root /usr/share/nginx/html;</span></span>
<span class="line"><span style="color:#032F62;">      index index.html;</span></span>
<span class="line"><span style="color:#032F62;">    }</span></span>
<span class="line"><span style="color:#032F62;">    include /etc/nginx/conf.d/*.cfg;</span></span>
<span class="line"><span style="color:#032F62;">    }</span></span></code></pre></div><h2 id="_2-5-æ›´æ–°" tabindex="-1">2.5 æ›´æ–° <a class="header-anchor" href="#_2-5-æ›´æ–°" aria-label="Permalink to &quot;2.5 æ›´æ–°&quot;">â€‹</a></h2><h3 id="edit" tabindex="-1">edit <a class="header-anchor" href="#edit" aria-label="Permalink to &quot;edit&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#æŸ¥çœ‹configmap</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cm</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#ä¿®æ”¹</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">edit</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">demoapp-config</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#æŸ¥çœ‹configmap</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cm</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#ä¿®æ”¹</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">edit</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">demoapp-config</span></span></code></pre></div><h3 id="replace" tabindex="-1">replace <a class="header-anchor" href="#replace" aria-label="Permalink to &quot;replace&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#å…ˆæŠŠyaml æ–‡ä»¶å¤‡ä»½å‡ºæ¥</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">demoapp-config</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-oyaml</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">test.yaml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#æ›¿æ¢</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl replace cm -f test.yaml</span></span>
<span class="line"><span style="color:#B392F0;">configmap/demoapp-config</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">replaced</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#å…ˆæŠŠyaml æ–‡ä»¶å¤‡ä»½å‡ºæ¥</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">demoapp-config</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-oyaml</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">test.yaml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#æ›¿æ¢</span></span>
<span class="line"><span style="color:#24292E;">[root@kube-master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl replace cm -f test.yaml</span></span>
<span class="line"><span style="color:#6F42C1;">configmap/demoapp-config</span><span style="color:#24292E;"> </span><span style="color:#032F62;">replaced</span></span></code></pre></div><h1 id="_3-podå¼•ç”¨configmap" tabindex="-1">3. Podå¼•â½¤ConfigMap <a class="header-anchor" href="#_3-podå¼•ç”¨configmap" aria-label="Permalink to &quot;3. Podå¼•â½¤ConfigMap&quot;">â€‹</a></h1><p>ç¯å¢ƒå˜é‡é€šå¸¸ç”± name å’Œ valueï¼ˆæˆ– valueFromï¼‰å­—æ®µæ„æˆï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">name &lt;string&gt;: ç¯å¢ƒå˜é‡çš„åç§°ï¼Œå¿…é€‰å­—æ®µ</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">value &lt;string&gt;: ç¯å¢ƒå˜é‡çš„å€¼ï¼Œé€šè¿‡ $(VAR_NAME)å¼•ç”¨</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">valueFrom &lt;Object&gt;: ç¯å¢ƒå˜é‡å€¼çš„å¼•ç”¨æºã€‚ä¾‹å¦‚ï¼Œå½“å‰ Pod èµ„æºçš„åç§°ã€åç§°ç©ºé—´ã€æ ‡ç­¾ç­‰ï¼Œä¸èƒ½ä¸éç©ºå€¼çš„ value å­—æ®µåŒæ—¶ä½¿ç”¨ï¼Œå³ç¯å¢ƒå˜é‡çš„å€¼è¦ä¹ˆæºäº value å­—æ®µï¼Œè¦ä¹ˆæºäº valueFrom å­—æ®µï¼ŒäºŒè€…ä¸å¯åŒæ—¶æä¾›æœæ•°æ®ã€‚</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">name &lt;string&gt;: ç¯å¢ƒå˜é‡çš„åç§°ï¼Œå¿…é€‰å­—æ®µ</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">value &lt;string&gt;: ç¯å¢ƒå˜é‡çš„å€¼ï¼Œé€šè¿‡ $(VAR_NAME)å¼•ç”¨</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">valueFrom &lt;Object&gt;: ç¯å¢ƒå˜é‡å€¼çš„å¼•ç”¨æºã€‚ä¾‹å¦‚ï¼Œå½“å‰ Pod èµ„æºçš„åç§°ã€åç§°ç©ºé—´ã€æ ‡ç­¾ç­‰ï¼Œä¸èƒ½ä¸éç©ºå€¼çš„ value å­—æ®µåŒæ—¶ä½¿ç”¨ï¼Œå³ç¯å¢ƒå˜é‡çš„å€¼è¦ä¹ˆæºäº value å­—æ®µï¼Œè¦ä¹ˆæºäº valueFrom å­—æ®µï¼ŒäºŒè€…ä¸å¯åŒæ—¶æä¾›æœæ•°æ®ã€‚</span></span></code></pre></div><p>valueFrom å­—æ®µå¯å¼•ç”¨çš„å€¼æœ‰å¤šç§æ¥æºï¼ŒåŒ…æ‹¬å½“å‰ Pod èµ„æºçš„å±æ€§å€¼ï¼Œå®¹å™¨ç›¸å…³çš„ç³»ç»Ÿèµ„æºé…ç½®ã€ConfigMap å¯¹è±¡ä¸­çš„ Key ä»¥åŠ Secret å¯¹è±¡ä¸­çš„ Keyï¼Œå®ƒä»¬åº”åˆ†åˆ«ä½¿ç”¨ä¸åŒçš„åµŒå¥—å­—æ®µè¿›è¡Œå®šä¹‰ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">configMapRef &lt;Object&gt;ï¼šConfigMap å¯¹è±¡ä¸­çš„ç‰¹å®š Keyã€‚</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">secretKeyRef &lt;Object&gt;: Secret å¯¹è±¡ä¸­çš„ç‰¹å®š Keyã€‚</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">configMapRef &lt;Object&gt;ï¼šConfigMap å¯¹è±¡ä¸­çš„ç‰¹å®š Keyã€‚</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">secretKeyRef &lt;Object&gt;: Secret å¯¹è±¡ä¸­çš„ç‰¹å®š Keyã€‚</span></span></code></pre></div><h2 id="_3-1-é€šè¿‡ç¯å¢ƒå˜é‡å¼•ç”¨cmé”®å€¼" tabindex="-1">3.1 é€šè¿‡ç¯å¢ƒå˜é‡å¼•â½¤CMé”®å€¼ <a class="header-anchor" href="#_3-1-é€šè¿‡ç¯å¢ƒå˜é‡å¼•ç”¨cmé”®å€¼" aria-label="Permalink to &quot;3.1 é€šè¿‡ç¯å¢ƒå˜é‡å¼•â½¤CMé”®å€¼&quot;">â€‹</a></h2><h3 id="envå¼•ç”¨å˜é‡" tabindex="-1">envå¼•â½¤å˜é‡ <a class="header-anchor" href="#envå¼•ç”¨å˜é‡" aria-label="Permalink to &quot;envå¼•â½¤å˜é‡&quot;">â€‹</a></h3><p>podæ¸…å•ä¸­é™¤äº†ä½¿â½¤vauleå­—æ®µç›´æ¥ç»™å®šå˜é‡ä¹‹å¤–ï¼Œè¿˜æ”¯æŒ<code>vaLueFrom</code>å­—æ®µåµŒå¥—<code>configMapKeyRef</code>æ¥å¼•ç”¨<code>ConfigMap</code>å¯¹è±¡çš„é”®å€¼ï¼Œå…·ä½“æ ¼å¼å¦‚ä¸‹</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">#æŸ¥çœ‹å¸®åŠ©</span></span>
<span class="line"><span style="color:#e1e4e8;">kubectl explain pod.spec.containers.env</span></span>
<span class="line"><span style="color:#e1e4e8;">kubectl explain pod.spec.containers.envFrom</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">#æŸ¥çœ‹å¸®åŠ©</span></span>
<span class="line"><span style="color:#24292e;">kubectl explain pod.spec.containers.env</span></span>
<span class="line"><span style="color:#24292e;">kubectl explain pod.spec.containers.envFrom</span></span></code></pre></div><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">env</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&lt;string&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#è¦èµ‹å€¼çš„ç¯å¢ƒå˜é‡åç§°</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">valueFrom</span><span style="color:#E1E4E8;">: </span><span style="color:#6A737D;">#å®šä¹‰å˜é‡çš„å¼•|ç”¨</span></span>
<span class="line"><span style="color:#E1E4E8;">  	</span><span style="color:#85E89D;">configMapkeyRef</span><span style="color:#E1E4E8;">: </span><span style="color:#6A737D;"># å˜é‡æ¥è‡ªäºconfigmapå¯¹è±¡</span></span>
<span class="line"><span style="color:#E1E4E8;">  	   </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&lt;string&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#configmapå¯¹è±¡çš„åç§°ï¼ˆå› ä¸ºæœ‰å¾ˆå¤šconfigmap,éœ€è¦æŒ‡å®šå…·ä½“çš„åç§°)</span></span>
<span class="line"><span style="color:#E1E4E8;">  	   </span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&lt;string&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#configmapçš„é”®åç§°</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">env</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&lt;string&gt;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#è¦èµ‹å€¼çš„ç¯å¢ƒå˜é‡åç§°</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">valueFrom</span><span style="color:#24292E;">: </span><span style="color:#6A737D;">#å®šä¹‰å˜é‡çš„å¼•|ç”¨</span></span>
<span class="line"><span style="color:#24292E;">  	</span><span style="color:#22863A;">configMapkeyRef</span><span style="color:#24292E;">: </span><span style="color:#6A737D;"># å˜é‡æ¥è‡ªäºconfigmapå¯¹è±¡</span></span>
<span class="line"><span style="color:#24292E;">  	   </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&lt;string&gt;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#configmapå¯¹è±¡çš„åç§°ï¼ˆå› ä¸ºæœ‰å¾ˆå¤šconfigmap,éœ€è¦æŒ‡å®šå…·ä½“çš„åç§°)</span></span>
<span class="line"><span style="color:#24292E;">  	   </span><span style="color:#22863A;">key</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&lt;string&gt;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#configmapçš„é”®åç§°</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">ğŸ’¡ è¯´æ˜</p><p>è¿™ç§â½…å¼èµ‹å€¼ç¯å¢ƒå˜é‡ä¸ç›´æ¥èµ‹å€¼ç¯å¢ƒå˜é‡â½…å¼å¹¶â½†åŒºåˆ«ï¼Œå®ƒä»¬éƒ½å¯ä»¥â½¤äºå®¹å™¨çš„å¯åŠ¨è„šæœ¬æˆ–ç›´æ¥ä¼ é€’ç»™å®¹å™¨åº”â½¤ç­‰</p></div><h4 id="æ¡ˆä¾‹1" tabindex="-1">æ¡ˆä¾‹1 <a class="header-anchor" href="#æ¡ˆä¾‹1" aria-label="Permalink to &quot;æ¡ˆä¾‹1&quot;">â€‹</a></h4><p>demoappå®¹å™¨â½€æŒé€šè¿‡ç¯å¢ƒå˜é‡ <code>HOST</code>ã€<code>PORT</code> ä¸ºå…¶æŒ‡å®šç›‘å¬çš„åœ°å€å’Œç«¯â¼</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">root@kube-master configmaps</span><span style="color:#E1E4E8;">]# </span><span style="color:#9ECBFF;">cat demo.yaml</span></span>
<span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">ConfigMap</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">busybox-httpd-config</span></span>
<span class="line"><span style="color:#85E89D;">data</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">http_port</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;8080&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">verbose_level</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;-vv&quot;</span></span>
<span class="line"><span style="color:#B392F0;">---</span></span>
<span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Pod</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">configmap-env-demo</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">containers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">demo-configmap</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">registry.cn-zhangjiakou.aliyuncs.com/hsuing/demoapp:v1</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">env</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">PORT</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;"># PORTå˜é‡å</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">valueFrom</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">configMapKeyRef</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">busybox-httpd-config</span><span style="color:#E1E4E8;">	 </span><span style="color:#6A737D;"># å¼•â½¤dbusybox-httpd-configèµ„æºä¸­çš„http_port</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">http_port</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[</span><span style="color:#032F62;">root@kube-master configmaps</span><span style="color:#24292E;">]# </span><span style="color:#032F62;">cat demo.yaml</span></span>
<span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">ConfigMap</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">busybox-httpd-config</span></span>
<span class="line"><span style="color:#22863A;">data</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">http_port</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;8080&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">verbose_level</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;-vv&quot;</span></span>
<span class="line"><span style="color:#6F42C1;">---</span></span>
<span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Pod</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">configmap-env-demo</span></span>
<span class="line"><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">containers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">demo-configmap</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">registry.cn-zhangjiakou.aliyuncs.com/hsuing/demoapp:v1</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">env</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">PORT</span><span style="color:#24292E;">   </span><span style="color:#6A737D;"># PORTå˜é‡å</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">valueFrom</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">configMapKeyRef</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">busybox-httpd-config</span><span style="color:#24292E;">	 </span><span style="color:#6A737D;"># å¼•â½¤dbusybox-httpd-configèµ„æºä¸­çš„http_port</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">key</span><span style="color:#24292E;">: </span><span style="color:#032F62;">http_port</span></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">âŒ æ³¨æ„</p><p>åœ¨ command æˆ– args å­—æ®µä¸­å¼•ç”¨ç¯å¢ƒå˜é‡è¦ä½¿ç”¨ &quot;$(VAR_NAME)&quot; çš„æ ¼å¼</p></div><ul><li>éªŒè¯</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master configmaps]# kubectl exec  configmap-env-demo -- netstat -lntp</span></span>
<span class="line"><span style="color:#B392F0;">Active</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Internet</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">connections</span><span style="color:#E1E4E8;"> (only </span><span style="color:#9ECBFF;">servers</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#B392F0;">Proto</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Recv-Q</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Send-Q</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Local</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Address</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">Foreign</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Address</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">State</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">PID/Program</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">name</span></span>
<span class="line"><span style="color:#B392F0;">tcp</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0.0</span><span style="color:#9ECBFF;">.0.0:8080</span><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">0.0</span><span style="color:#9ECBFF;">.0.0:</span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;">               </span><span style="color:#9ECBFF;">LISTEN</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/python3</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master configmaps]# kubectl exec  configmap-env-demo -- netstat -lntp</span></span>
<span class="line"><span style="color:#6F42C1;">Active</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Internet</span><span style="color:#24292E;"> </span><span style="color:#032F62;">connections</span><span style="color:#24292E;"> (only </span><span style="color:#032F62;">servers</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#6F42C1;">Proto</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Recv-Q</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Send-Q</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Local</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Address</span><span style="color:#24292E;">           </span><span style="color:#032F62;">Foreign</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Address</span><span style="color:#24292E;">         </span><span style="color:#032F62;">State</span><span style="color:#24292E;">       </span><span style="color:#032F62;">PID/Program</span><span style="color:#24292E;"> </span><span style="color:#032F62;">name</span></span>
<span class="line"><span style="color:#6F42C1;">tcp</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0.0</span><span style="color:#032F62;">.0.0:8080</span><span style="color:#24292E;">            </span><span style="color:#005CC5;">0.0</span><span style="color:#032F62;">.0.0:</span><span style="color:#005CC5;">*</span><span style="color:#24292E;">               </span><span style="color:#032F62;">LISTEN</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/python3</span></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">âŒ æ³¨æ„</p><p>è¢«å¼•â½¤çš„ConfigMapèµ„æºå¿…é¡»äº‹å…ˆå­˜åœ¨ï¼Œå¦åˆ™â½†æ³•åœ¨Podå¯¹è±¡ä¸­å¼•â½¤ConfigMapèµ„æºï¼Œå¦å¤–ConfigMapå±äºåç§°ç©ºé—´çº§åˆ«çš„èµ„æºï¼Œå®ƒå¿…é¡»ä¸å¼•â½¤å®ƒçš„Podèµ„æºåœ¨åŒâ¼€åç§°ç©ºé—´</p></div><h4 id="æ¡ˆä¾‹2" tabindex="-1">æ¡ˆä¾‹2 <a class="header-anchor" href="#æ¡ˆä¾‹2" aria-label="Permalink to &quot;æ¡ˆä¾‹2&quot;">â€‹</a></h4><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">root@kube-master configmaps</span><span style="color:#E1E4E8;">]# </span><span style="color:#9ECBFF;">cat cm-var.yaml</span></span>
<span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">ConfigMap</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">my-configmap</span></span>
<span class="line"><span style="color:#85E89D;">data</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">special.host</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">172.168.1.1</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">special.type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">world</span></span>
<span class="line"><span style="color:#B392F0;">---</span></span>
<span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Pod</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">demo-cm-pod</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">containers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">buxybox</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">busybox:latest</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">command</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&quot;sh&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;-c&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;echo $(SPECIAL_HOST) $(SPECIAL_TYPE)&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">env</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">SPECIAL_HOST</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">valueFrom</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">configMapKeyRef</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">my-configmap</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">special.host</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">SPECIAL_TYPE</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">valueFrom</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">configMapKeyRef</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">my-configmap</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">special.type</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[</span><span style="color:#032F62;">root@kube-master configmaps</span><span style="color:#24292E;">]# </span><span style="color:#032F62;">cat cm-var.yaml</span></span>
<span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">ConfigMap</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">my-configmap</span></span>
<span class="line"><span style="color:#22863A;">data</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">special.host</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">172.168.1.1</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">special.type</span><span style="color:#24292E;">: </span><span style="color:#032F62;">world</span></span>
<span class="line"><span style="color:#6F42C1;">---</span></span>
<span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Pod</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">demo-cm-pod</span></span>
<span class="line"><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">containers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">buxybox</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">busybox:latest</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">command</span><span style="color:#24292E;">: [</span><span style="color:#032F62;">&quot;sh&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;-c&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;echo $(SPECIAL_HOST) $(SPECIAL_TYPE)&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">env</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">SPECIAL_HOST</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">valueFrom</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">configMapKeyRef</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">my-configmap</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">key</span><span style="color:#24292E;">: </span><span style="color:#032F62;">special.host</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">SPECIAL_TYPE</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">valueFrom</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">configMapKeyRef</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">my-configmap</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">key</span><span style="color:#24292E;">: </span><span style="color:#032F62;">special.type</span></span></code></pre></div><ul><li>éªŒè¯ç»“æœ</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master configmaps]# kubectl logs  demo-cm-pod</span></span>
<span class="line"><span style="color:#B392F0;">172.168.1.1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">world</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master configmaps]# kubectl logs  demo-cm-pod</span></span>
<span class="line"><span style="color:#6F42C1;">172.168.1.1</span><span style="color:#24292E;"> </span><span style="color:#032F62;">world</span></span></code></pre></div><h2 id="_3-2-é€šè¿‡å·æŒ‚è½½æ–¹å¼å¼•ç”¨cm" tabindex="-1">3.2 é€šè¿‡å·æŒ‚è½½â½…å¼å¼•â½¤CM <a class="header-anchor" href="#_3-2-é€šè¿‡å·æŒ‚è½½æ–¹å¼å¼•ç”¨cm" aria-label="Permalink to &quot;3.2 é€šè¿‡å·æŒ‚è½½â½…å¼å¼•â½¤CM&quot;">â€‹</a></h2><p>å¸®åŠ©</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">explain</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pod.spec.containers.volumeMounts</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">explain</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pod.spec.containers.volumeMounts</span></span></code></pre></div><h3 id="å¼•ç”¨æ•´ä¸ªå­˜å‚¨å·" tabindex="-1">å¼•â½¤æ•´ä¸ªå­˜å‚¨å· <a class="header-anchor" href="#å¼•ç”¨æ•´ä¸ªå­˜å‚¨å·" aria-label="Permalink to &quot;å¼•â½¤æ•´ä¸ªå­˜å‚¨å·&quot;">â€‹</a></h3><ul><li>åˆ›å»ºcm</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx-conf</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--from-file=nginx.conf</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx-conf</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--from-file=nginx.conf</span></span></code></pre></div><ul><li>åˆ›å»ºdeploy</li></ul><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">apps/v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Deployment</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">my-cm-deployment</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">replicas</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">1</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">selector</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">matchLabels</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">app</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">my-cm-app</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">labels</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">app</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">my-cm-app</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">volumes</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">my-cm-volume</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># name of the volume</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">configMap</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx-conf</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># name of the ConfigMap object</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">containers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">my-cm-container</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx:latest</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">ports</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        - </span><span style="color:#85E89D;">containerPort</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">80</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">volumeMounts</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">my-cm-volume</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">mountPath</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/usr/share/nginx/html/</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#å®¹å™¨æŒ‚è½½çš„ç›®å½•ï¼ˆç©ºçš„ï¼‰,è¿™ä¸ªæ–¹å¼ä¼šè¦†ç›–è¿™ä¸ªç›®å½•ä¸‹åŸæœ‰çš„æ–‡ä»¶</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">apps/v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Deployment</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">my-cm-deployment</span></span>
<span class="line"><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">replicas</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">1</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">selector</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">matchLabels</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">app</span><span style="color:#24292E;">: </span><span style="color:#032F62;">my-cm-app</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">template</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">labels</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">app</span><span style="color:#24292E;">: </span><span style="color:#032F62;">my-cm-app</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">volumes</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">my-cm-volume</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># name of the volume</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">configMap</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx-conf</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># name of the ConfigMap object</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">containers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">my-cm-container</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx:latest</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">ports</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        - </span><span style="color:#22863A;">containerPort</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">80</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">volumeMounts</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">my-cm-volume</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">mountPath</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/usr/share/nginx/html/</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#å®¹å™¨æŒ‚è½½çš„ç›®å½•ï¼ˆç©ºçš„ï¼‰,è¿™ä¸ªæ–¹å¼ä¼šè¦†ç›–è¿™ä¸ªç›®å½•ä¸‹åŸæœ‰çš„æ–‡ä»¶</span></span></code></pre></div><ul><li>æ‰§è¡Œ</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master volumeMounts]# kubectl apply -f demo.yaml</span></span>
<span class="line"><span style="color:#B392F0;">deployment.apps/my-cm-deployment</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master volumeMounts]# kubectl apply -f demo.yaml</span></span>
<span class="line"><span style="color:#6F42C1;">deployment.apps/my-cm-deployment</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span></code></pre></div><ul><li>éªŒè¯æ•ˆæœ</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master volumeMounts]# kubectl exec -it my-cm-deployment-588bd59774-42wsw -- ls /usr/share/nginx/html/</span></span>
<span class="line"><span style="color:#B392F0;">nginx.conf</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master volumeMounts]# kubectl exec -it my-cm-deployment-588bd59774-42wsw -- ls /usr/share/nginx/html/</span></span>
<span class="line"><span style="color:#6F42C1;">nginx.conf</span></span></code></pre></div><h3 id="å¼•ç”¨å­˜å‚¨å·éƒ¨åˆ†é”®å€¼-itmes" tabindex="-1">å¼•â½¤å­˜å‚¨å·éƒ¨åˆ†é”®å€¼(itmes) <a class="header-anchor" href="#å¼•ç”¨å­˜å‚¨å·éƒ¨åˆ†é”®å€¼-itmes" aria-label="Permalink to &quot;å¼•â½¤å­˜å‚¨å·éƒ¨åˆ†é”®å€¼(itmes)&quot;">â€‹</a></h3><p><code>configmapåŸºäºç›®å½•åˆ›å»ºçš„æ—¶å€™å¯ä»¥ä½¿ç”¨itmesï¼Œè°ƒç”¨éƒ¨åˆ†å€¼</code></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Pod</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">configmap-volume-demo-2</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">namespace</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">default</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">volumes</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">ngxconfig</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">configMap</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx-config-files</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">items</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">myserver.conf</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;"># è¦å¼•â½¤çš„é”®åç§°ï¼ˆå¿…å†™ï¼‰</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">path</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">myserver.conf</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># æŒ‚è½½è¿› pod åçš„æ–‡ä»¶åï¼ˆå¿…å†™ï¼‰</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">mode</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0644</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">items</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">youserver.conf</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">path</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">youserver.conf</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">mode</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0644</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">containers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx:alpine</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx-server</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">volumeMounts</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">ngxconfig</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">mountPath</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/etc/nginx/conf.d/</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">readOnly</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Pod</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">configmap-volume-demo-2</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">namespace</span><span style="color:#24292E;">: </span><span style="color:#032F62;">default</span></span>
<span class="line"><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">volumes</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">ngxconfig</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">configMap</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx-config-files</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">items</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#22863A;">key</span><span style="color:#24292E;">: </span><span style="color:#032F62;">myserver.conf</span><span style="color:#24292E;">   </span><span style="color:#6A737D;"># è¦å¼•â½¤çš„é”®åç§°ï¼ˆå¿…å†™ï¼‰</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">path</span><span style="color:#24292E;">: </span><span style="color:#032F62;">myserver.conf</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># æŒ‚è½½è¿› pod åçš„æ–‡ä»¶åï¼ˆå¿…å†™ï¼‰</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">mode</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0644</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">items</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#22863A;">key</span><span style="color:#24292E;">: </span><span style="color:#032F62;">youserver.conf</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">path</span><span style="color:#24292E;">: </span><span style="color:#032F62;">youserver.conf</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">mode</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0644</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">containers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx:alpine</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx-server</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">volumeMounts</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">ngxconfig</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">mountPath</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/etc/nginx/conf.d/</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">readOnly</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span></span></code></pre></div><h3 id="å¼•ç”¨å­˜å‚¨å·å•ä¸ªé”®å€¼" tabindex="-1">å¼•â½¤å­˜å‚¨å·å•ä¸ªé”®å€¼ <a class="header-anchor" href="#å¼•ç”¨å­˜å‚¨å·å•ä¸ªé”®å€¼" aria-label="Permalink to &quot;å¼•â½¤å­˜å‚¨å·å•ä¸ªé”®å€¼&quot;">â€‹</a></h3><p>å‰â¾¯ä¸¤ç§â½…å¼ä¸­ï¼Œâ½†è®ºæ˜¯è£…åœ¨ConfigMapå¯¹è±¡ä¸­çš„æ‰€æœ‰â½‚ä»¶è¿˜æ˜¯éƒ¨åˆ†â½‚ä»¶ï¼ŒæŒ‚è½½ç‚¹â½¬å½•ä¸‹åŸæœ‰çš„â½‚ä»¶éƒ½ä¼šè¢«éšè—</p><p>å¯¹äºæœŸæœ›å°† ConfigMap å¯¹è±¡æä¾›çš„é…ç½®æ–‡ä»¶è¡¥å……äºæŒ‚è½½ç‚¹ç›®å½•ä¸‹ï¼Œå¹¶ä¸”ä¸å½±å“åŸæœ¬å°±å­˜åœ¨çš„ä¸€äº›æ–‡ä»¶ï¼Œè¿™ç§æ–¹å¼å°±å¯ä»¥æ»¡è¶³éœ€æ±‚ã€‚</p><p>ä½¿ç”¨å®¹å™¨çš„ volumeMounts å­—æ®µä¸­ä½¿ç”¨çš„ <code>subPath</code> å­—æ®µæ¥è§£å†³ï¼Œå®ƒå¯ä»¥æ”¯æŒç”¨æˆ·ä»å­˜å‚¨å·æŒ‚è½½å•ä¸ªæ–‡ä»¶æˆ–å•ä¸ªç›®å½•è€Œéæ•´ä¸ªå­˜å‚¨å·</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Pod</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">configmap-volume-demo-3</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">namespace</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">default</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">containers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx:alpine</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx-server</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">volumeMounts</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">ngxconfig</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#ConfigMap çš„ Key åç§°</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">mountPath</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/etc/nginx/conf.d/myserver.conf</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">subPath</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">myserver.conf</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">readOnly</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">ngxconfig</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;">#ConfigMap çš„ Key åç§°</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">mountPath</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/etc/nginx/conf.d/yourserver.conf</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#æŒ‚è½½ä¹‹åçš„åå­—</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">subPath</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">yourserver.conf</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#configmaps ä¸­key</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">readOnly</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">volumes</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">ngxconfig</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">configMap</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx-config-files</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Pod</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">configmap-volume-demo-3</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">namespace</span><span style="color:#24292E;">: </span><span style="color:#032F62;">default</span></span>
<span class="line"><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">containers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx:alpine</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx-server</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">volumeMounts</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">ngxconfig</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#ConfigMap çš„ Key åç§°</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">mountPath</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/etc/nginx/conf.d/myserver.conf</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">subPath</span><span style="color:#24292E;">: </span><span style="color:#032F62;">myserver.conf</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">readOnly</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">ngxconfig</span><span style="color:#24292E;">   </span><span style="color:#6A737D;">#ConfigMap çš„ Key åç§°</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">mountPath</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/etc/nginx/conf.d/yourserver.conf</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#æŒ‚è½½ä¹‹åçš„åå­—</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">subPath</span><span style="color:#24292E;">: </span><span style="color:#032F62;">yourserver.conf</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#configmaps ä¸­key</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">readOnly</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">volumes</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">ngxconfig</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">configMap</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx-config-files</span></span></code></pre></div><h1 id="_4-configmapå®è·µ" tabindex="-1">4. ConfigMapå®è·µ <a class="header-anchor" href="#_4-configmapå®è·µ" aria-label="Permalink to &quot;4. ConfigMapå®è·µ&quot;">â€‹</a></h1><h2 id="_4-1-æŒ‚è½½æ–¹å¼" tabindex="-1">4.1 æŒ‚è½½æ–¹å¼ <a class="header-anchor" href="#_4-1-æŒ‚è½½æ–¹å¼" aria-label="Permalink to &quot;4.1 æŒ‚è½½æ–¹å¼&quot;">â€‹</a></h2><p>åˆ›å»ºconfigmap.yamlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">ConfigMap</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">configmap</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">namespace</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">dev</span></span>
<span class="line"><span style="color:#85E89D;">data</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">info</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#9ECBFF;">    username:admin</span></span>
<span class="line"><span style="color:#9ECBFF;">    password:123456</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">ConfigMap</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">configmap</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">namespace</span><span style="color:#24292E;">: </span><span style="color:#032F62;">dev</span></span>
<span class="line"><span style="color:#22863A;">data</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">info</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#032F62;">    username:admin</span></span>
<span class="line"><span style="color:#032F62;">    password:123456</span></span></code></pre></div><p>ä½¿ç”¨æ­¤é…ç½®æ–‡ä»¶åˆ›å»ºconfigmap</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># åˆ›å»ºconfigmap</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s-master01 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl create -f configmap.yaml</span></span>
<span class="line"><span style="color:#B392F0;">configmap/configmap</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># æŸ¥çœ‹configmapè¯¦æƒ…</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s-master01 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl describe cm configmap -n dev</span></span>
<span class="line"><span style="color:#B392F0;">Name:</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">configmap</span></span>
<span class="line"><span style="color:#B392F0;">Namespace:</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">dev</span></span>
<span class="line"><span style="color:#B392F0;">Labels:</span><span style="color:#E1E4E8;">       </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">Annotations:</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Data</span></span>
<span class="line"><span style="color:#E1E4E8;">====</span></span>
<span class="line"><span style="color:#B392F0;">info:</span></span>
<span class="line"><span style="color:#B392F0;">----</span></span>
<span class="line"><span style="color:#B392F0;">username:admin</span></span>
<span class="line"><span style="color:#B392F0;">password:123456</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Events:</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># åˆ›å»ºconfigmap</span></span>
<span class="line"><span style="color:#24292E;">[root@k8s-master01 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl create -f configmap.yaml</span></span>
<span class="line"><span style="color:#6F42C1;">configmap/configmap</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># æŸ¥çœ‹configmapè¯¦æƒ…</span></span>
<span class="line"><span style="color:#24292E;">[root@k8s-master01 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl describe cm configmap -n dev</span></span>
<span class="line"><span style="color:#6F42C1;">Name:</span><span style="color:#24292E;">         </span><span style="color:#032F62;">configmap</span></span>
<span class="line"><span style="color:#6F42C1;">Namespace:</span><span style="color:#24292E;">    </span><span style="color:#032F62;">dev</span></span>
<span class="line"><span style="color:#6F42C1;">Labels:</span><span style="color:#24292E;">       </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">Annotations:</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Data</span></span>
<span class="line"><span style="color:#24292E;">====</span></span>
<span class="line"><span style="color:#6F42C1;">info:</span></span>
<span class="line"><span style="color:#6F42C1;">----</span></span>
<span class="line"><span style="color:#6F42C1;">username:admin</span></span>
<span class="line"><span style="color:#6F42C1;">password:123456</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Events:</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span></code></pre></div><p>åˆ›å»ºä¸€ä¸ªpod-configmap.yamlï¼Œå°†ä¸Šé¢åˆ›å»ºçš„configmapæŒ‚è½½è¿›å»</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Pod</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">pod-configmap</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">namespace</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">dev</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">containers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx:1.17.1</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">volumeMounts</span><span style="color:#E1E4E8;">: </span><span style="color:#6A737D;"># å°†configmapæŒ‚è½½åˆ°ç›®å½•</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">config</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">mountPath</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/configmap/config</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">volumes</span><span style="color:#E1E4E8;">: </span><span style="color:#6A737D;"># å¼•ç”¨configmap</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">config</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">configMap</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">configmap</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Pod</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">pod-configmap</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">namespace</span><span style="color:#24292E;">: </span><span style="color:#032F62;">dev</span></span>
<span class="line"><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">containers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx:1.17.1</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">volumeMounts</span><span style="color:#24292E;">: </span><span style="color:#6A737D;"># å°†configmapæŒ‚è½½åˆ°ç›®å½•</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">config</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">mountPath</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/configmap/config</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">volumes</span><span style="color:#24292E;">: </span><span style="color:#6A737D;"># å¼•ç”¨configmap</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">config</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">configMap</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">configmap</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># åˆ›å»ºpod</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s-master01 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl create -f pod-configmap.yaml</span></span>
<span class="line"><span style="color:#B392F0;">pod/pod-configmap</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># æŸ¥çœ‹pod</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s-master01 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl get pod pod-configmap -n dev</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">READY</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">RESTARTS</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">AGE</span></span>
<span class="line"><span style="color:#B392F0;">pod-configmap</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">6</span><span style="color:#9ECBFF;">s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#è¿›å…¥å®¹å™¨</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s-master01 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl exec -it pod-configmap -n dev /bin/sh</span></span>
<span class="line"><span style="color:#6A737D;"># cd /configmap/config/</span></span>
<span class="line"><span style="color:#6A737D;"># ls</span></span>
<span class="line"><span style="color:#B392F0;">info</span></span>
<span class="line"><span style="color:#6A737D;"># more info</span></span>
<span class="line"><span style="color:#B392F0;">username:admin</span></span>
<span class="line"><span style="color:#B392F0;">password:123456</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># å¯ä»¥çœ‹åˆ°æ˜ å°„å·²ç»æˆåŠŸï¼Œæ¯ä¸ªconfigmapéƒ½æ˜ å°„æˆäº†ä¸€ä¸ªç›®å½•</span></span>
<span class="line"><span style="color:#6A737D;"># key---&gt;æ–‡ä»¶     value----&gt;æ–‡ä»¶ä¸­çš„å†…å®¹</span></span>
<span class="line"><span style="color:#6A737D;"># æ­¤æ—¶å¦‚æœæ›´æ–°configmapçš„å†…å®¹, å®¹å™¨ä¸­çš„å€¼ä¹Ÿä¼šåŠ¨æ€æ›´æ–°</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># åˆ›å»ºpod</span></span>
<span class="line"><span style="color:#24292E;">[root@k8s-master01 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl create -f pod-configmap.yaml</span></span>
<span class="line"><span style="color:#6F42C1;">pod/pod-configmap</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># æŸ¥çœ‹pod</span></span>
<span class="line"><span style="color:#24292E;">[root@k8s-master01 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl get pod pod-configmap -n dev</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">            </span><span style="color:#032F62;">READY</span><span style="color:#24292E;">   </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">    </span><span style="color:#032F62;">RESTARTS</span><span style="color:#24292E;">   </span><span style="color:#032F62;">AGE</span></span>
<span class="line"><span style="color:#6F42C1;">pod-configmap</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">6</span><span style="color:#032F62;">s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#è¿›å…¥å®¹å™¨</span></span>
<span class="line"><span style="color:#24292E;">[root@k8s-master01 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl exec -it pod-configmap -n dev /bin/sh</span></span>
<span class="line"><span style="color:#6A737D;"># cd /configmap/config/</span></span>
<span class="line"><span style="color:#6A737D;"># ls</span></span>
<span class="line"><span style="color:#6F42C1;">info</span></span>
<span class="line"><span style="color:#6A737D;"># more info</span></span>
<span class="line"><span style="color:#6F42C1;">username:admin</span></span>
<span class="line"><span style="color:#6F42C1;">password:123456</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># å¯ä»¥çœ‹åˆ°æ˜ å°„å·²ç»æˆåŠŸï¼Œæ¯ä¸ªconfigmapéƒ½æ˜ å°„æˆäº†ä¸€ä¸ªç›®å½•</span></span>
<span class="line"><span style="color:#6A737D;"># key---&gt;æ–‡ä»¶     value----&gt;æ–‡ä»¶ä¸­çš„å†…å®¹</span></span>
<span class="line"><span style="color:#6A737D;"># æ­¤æ—¶å¦‚æœæ›´æ–°configmapçš„å†…å®¹, å®¹å™¨ä¸­çš„å€¼ä¹Ÿä¼šåŠ¨æ€æ›´æ–°</span></span></code></pre></div><h2 id="_4-2-æ³¨å…¥æ–¹å¼" tabindex="-1">4.2 æ³¨å…¥æ–¹å¼ <a class="header-anchor" href="#_4-2-æ³¨å…¥æ–¹å¼" aria-label="Permalink to &quot;4.2 æ³¨å…¥æ–¹å¼&quot;">â€‹</a></h2><p>1.åˆ›å»ºconfigmap</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">ConfigMap</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">configmap-demo</span></span>
<span class="line"><span style="color:#85E89D;">data</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># ç±»å±æ€§é”®ï¼›æ¯ä¸€ä¸ªé”®éƒ½æ˜ å°„åˆ°ä¸€ä¸ªç®€å•çš„å€¼</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">abc</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;123&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">cde</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;456&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># ç±»æ–‡ä»¶é”®</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">redis.properties</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#9ECBFF;">    port: 6379</span></span>
<span class="line"><span style="color:#9ECBFF;">    host: 10.100.24.71</span></span>
<span class="line"><span style="color:#9ECBFF;">    password: 123456</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">ConfigMap</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">configmap-demo</span></span>
<span class="line"><span style="color:#22863A;">data</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;"># ç±»å±æ€§é”®ï¼›æ¯ä¸€ä¸ªé”®éƒ½æ˜ å°„åˆ°ä¸€ä¸ªç®€å•çš„å€¼</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">abc</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;123&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">cde</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;456&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;"># ç±»æ–‡ä»¶é”®</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">redis.properties</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#032F62;">    port: 6379</span></span>
<span class="line"><span style="color:#032F62;">    host: 10.100.24.71</span></span>
<span class="line"><span style="color:#032F62;">    password: 123456</span></span></code></pre></div><p>2.åˆ›å»ºconfigmapä¸­pod</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Pod</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">configmap-demo-pod</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">containers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">demo</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">env</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># å®šä¹‰ç¯å¢ƒå˜é‡</span></span>
<span class="line"><span style="color:#E1E4E8;">        - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">ABC_NAME</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># è¯·æ³¨æ„è¿™é‡Œå’Œ ConfigMap ä¸­çš„é”®åæ˜¯ä¸ä¸€æ ·çš„</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">valueFrom</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">configMapKeyRef</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">configmap-demo</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;"># è¿™ä¸ªå€¼æ¥è‡ª ConfigMap</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">abc</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># éœ€è¦å–å€¼çš„é”®</span></span>
<span class="line"><span style="color:#E1E4E8;">        - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">CDE_NAME</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">valueFrom</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">configMapKeyRef</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">configmap-demo</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">cde</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">volumeMounts</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">config</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">mountPath</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;/config&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">readOnly</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">volumes</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># ä½ å¯ä»¥åœ¨ Pod çº§åˆ«è®¾ç½®å·ï¼Œç„¶åå°†å…¶æŒ‚è½½åˆ° Pod å†…çš„å®¹å™¨ä¸­</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">config</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">configMap</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># æä¾›ä½ æƒ³è¦æŒ‚è½½çš„ ConfigMap çš„åå­—</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">configmap-demo</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;"># æ¥è‡ª ConfigMap çš„ä¸€ç»„é”®ï¼Œå°†è¢«åˆ›å»ºä¸ºæ–‡ä»¶</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">items</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        - </span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;redis.properties&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">path</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;redis.properties&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Pod</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">configmap-demo-pod</span></span>
<span class="line"><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">containers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">demo</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">env</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;"># å®šä¹‰ç¯å¢ƒå˜é‡</span></span>
<span class="line"><span style="color:#24292E;">        - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">ABC_NAME</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># è¯·æ³¨æ„è¿™é‡Œå’Œ ConfigMap ä¸­çš„é”®åæ˜¯ä¸ä¸€æ ·çš„</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">valueFrom</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">configMapKeyRef</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">configmap-demo</span><span style="color:#24292E;">           </span><span style="color:#6A737D;"># è¿™ä¸ªå€¼æ¥è‡ª ConfigMap</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#22863A;">key</span><span style="color:#24292E;">: </span><span style="color:#032F62;">abc</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># éœ€è¦å–å€¼çš„é”®</span></span>
<span class="line"><span style="color:#24292E;">        - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">CDE_NAME</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">valueFrom</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">configMapKeyRef</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">configmap-demo</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#22863A;">key</span><span style="color:#24292E;">: </span><span style="color:#032F62;">cde</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">volumeMounts</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">config</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">mountPath</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;/config&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">readOnly</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">volumes</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;"># ä½ å¯ä»¥åœ¨ Pod çº§åˆ«è®¾ç½®å·ï¼Œç„¶åå°†å…¶æŒ‚è½½åˆ° Pod å†…çš„å®¹å™¨ä¸­</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">config</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">configMap</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;"># æä¾›ä½ æƒ³è¦æŒ‚è½½çš„ ConfigMap çš„åå­—</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">configmap-demo</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;"># æ¥è‡ª ConfigMap çš„ä¸€ç»„é”®ï¼Œå°†è¢«åˆ›å»ºä¸ºæ–‡ä»¶</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">items</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        - </span><span style="color:#22863A;">key</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;redis.properties&quot;</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">path</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;redis.properties&quot;</span></span></code></pre></div><h2 id="_4-3-from-file" tabindex="-1">4.3 from-file <a class="header-anchor" href="#_4-3-from-file" aria-label="Permalink to &quot;4.3 from-file&quot;">â€‹</a></h2><p>--from-file æŒ‡å®šåœ¨ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶éƒ½ä¼šè¢«ç”¨åœ¨ ConfigMap é‡Œé¢åˆ›å»ºä¸€ä¸ªé”®å€¼å¯¹ï¼Œé”®çš„åå­—å°±æ˜¯æ–‡ä»¶åï¼Œå€¼å°±</p><p>æ˜¯æ–‡ä»¶çš„å†…å®¹</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/root/yaml/configmaps/docs/ui.properties</span></span>
<span class="line"><span style="color:#B392F0;">color.good</span><span style="color:#E1E4E8;">=purple</span></span>
<span class="line"><span style="color:#B392F0;">color.bad</span><span style="color:#E1E4E8;">=yellow</span></span>
<span class="line"><span style="color:#B392F0;">allow.textmode</span><span style="color:#E1E4E8;">=</span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#B392F0;">how.nice.to.look</span><span style="color:#E1E4E8;">=fairlyNice</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/root/yaml/configmaps/docs/ui.properties</span></span>
<span class="line"><span style="color:#6F42C1;">color.good</span><span style="color:#24292E;">=purple</span></span>
<span class="line"><span style="color:#6F42C1;">color.bad</span><span style="color:#24292E;">=yellow</span></span>
<span class="line"><span style="color:#6F42C1;">allow.textmode</span><span style="color:#24292E;">=</span><span style="color:#005CC5;">true</span></span>
<span class="line"><span style="color:#6F42C1;">how.nice.to.look</span><span style="color:#24292E;">=fairlyNice</span></span></code></pre></div><ul><li>åˆ›å»ºfrom-file</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">configmap</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">game-config</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--from-file=/root/yaml/configmaps/docs</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">configmap</span><span style="color:#24292E;"> </span><span style="color:#032F62;">game-config</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--from-file=/root/yaml/configmaps/docs</span></span></code></pre></div><ul><li>æŸ¥çœ‹</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master docs]# kubectl get configmaps game-config  -oyaml</span></span>
<span class="line"><span style="color:#B392F0;">apiVersion:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#B392F0;">data:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">ui.properties:</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">color.good</span><span style="color:#E1E4E8;">=purple</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">color.bad</span><span style="color:#E1E4E8;">=yellow</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">allow.textmode</span><span style="color:#E1E4E8;">=</span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">how.nice.to.look</span><span style="color:#E1E4E8;">=fairlyNice</span></span>
<span class="line"><span style="color:#B392F0;">kind:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ConfigMap</span></span>
<span class="line"><span style="color:#B392F0;">metadata:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">creationTimestamp:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;2024-08-09T05:57:51Z&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">name:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">game-config</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">namespace:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">default</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">resourceVersion:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;5081904&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">uid:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">e0da43a5-7405-4356-9da9-23797037f4f0</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master docs]# kubectl get configmaps game-config  -oyaml</span></span>
<span class="line"><span style="color:#6F42C1;">apiVersion:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#6F42C1;">data:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">ui.properties:</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">color.good</span><span style="color:#24292E;">=purple</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">color.bad</span><span style="color:#24292E;">=yellow</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">allow.textmode</span><span style="color:#24292E;">=</span><span style="color:#005CC5;">true</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">how.nice.to.look</span><span style="color:#24292E;">=fairlyNice</span></span>
<span class="line"><span style="color:#6F42C1;">kind:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ConfigMap</span></span>
<span class="line"><span style="color:#6F42C1;">metadata:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">creationTimestamp:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;2024-08-09T05:57:51Z&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">name:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">game-config</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">namespace:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">default</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">resourceVersion:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;5081904&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">uid:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">e0da43a5-7405-4356-9da9-23797037f4f0</span></span></code></pre></div><ul><li>å¼•ç”¨</li></ul><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Pod</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">dapi-test-pod</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">containers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">test-container</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">wangyanglinux/myapp:v1</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">command</span><span style="color:#E1E4E8;">: [ </span><span style="color:#9ECBFF;">&quot;/bin/sh&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;-c&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;env&quot;</span><span style="color:#E1E4E8;"> ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">env</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">SPECIAL_LEVEL_KEY</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">valueFrom</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">configMapKeyRef</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">special-config</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># å¯¼å…¥special-configè¿™ä¸ªconfigmap</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">special.how</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">SPECIAL_TYPE_KEY</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">valueFrom</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">configMapKeyRef</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">special-config</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">special.type</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">envFrom</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#85E89D;">configMapRef</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">env-config</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#å¯¼å…¥env-configè¿™ä¸ªconfigmap</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">restartPolicy</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Never</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Pod</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">dapi-test-pod</span></span>
<span class="line"><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">containers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">test-container</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">wangyanglinux/myapp:v1</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">command</span><span style="color:#24292E;">: [ </span><span style="color:#032F62;">&quot;/bin/sh&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;-c&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;env&quot;</span><span style="color:#24292E;"> ]</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">env</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">SPECIAL_LEVEL_KEY</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">valueFrom</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">configMapKeyRef</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">special-config</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># å¯¼å…¥special-configè¿™ä¸ªconfigmap</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">key</span><span style="color:#24292E;">: </span><span style="color:#032F62;">special.how</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">SPECIAL_TYPE_KEY</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">valueFrom</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">configMapKeyRef</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">special-config</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">key</span><span style="color:#24292E;">: </span><span style="color:#032F62;">special.type</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">envFrom</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#22863A;">configMapRef</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">env-config</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#å¯¼å…¥env-configè¿™ä¸ªconfigmap</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">restartPolicy</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Never</span></span></code></pre></div><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#è®¾ç½®å‘½ä»¤è¡Œå‚æ•°</span></span>
<span class="line"><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">root@k8s-master01 docs</span><span style="color:#E1E4E8;">]# </span><span style="color:#9ECBFF;">cat pod2.yaml</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Pod</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">pod-dir</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">containers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">test-container</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">wangyanglinux/myapp:v1</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">command</span><span style="color:#E1E4E8;">: [ </span><span style="color:#9ECBFF;">&quot;/bin/sh&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;-c&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;echo $(SPECIAL_LEVEL_KEY) $(SPECIAL_TYPE_KEY)&quot;</span><span style="color:#E1E4E8;"> ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">env</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">SPECIAL_LEVEL_KEY</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">valueFrom</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">configMapKeyRef</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">special-config</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">special.how</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">SPECIAL_TYPE_KEY</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#85E89D;">valueFrom</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#85E89D;">configMapKeyRef</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">special-config</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">special.type</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">restartPolicy</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Never</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#è®¾ç½®å‘½ä»¤è¡Œå‚æ•°</span></span>
<span class="line"><span style="color:#24292E;">[</span><span style="color:#032F62;">root@k8s-master01 docs</span><span style="color:#24292E;">]# </span><span style="color:#032F62;">cat pod2.yaml</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Pod</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">pod-dir</span></span>
<span class="line"><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">containers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">test-container</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">wangyanglinux/myapp:v1</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">command</span><span style="color:#24292E;">: [ </span><span style="color:#032F62;">&quot;/bin/sh&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;-c&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;echo $(SPECIAL_LEVEL_KEY) $(SPECIAL_TYPE_KEY)&quot;</span><span style="color:#24292E;"> ]</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">env</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">SPECIAL_LEVEL_KEY</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">valueFrom</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">configMapKeyRef</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">special-config</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">key</span><span style="color:#24292E;">: </span><span style="color:#032F62;">special.how</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">SPECIAL_TYPE_KEY</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#22863A;">valueFrom</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#22863A;">configMapKeyRef</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">special-config</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#22863A;">key</span><span style="color:#24292E;">: </span><span style="color:#032F62;">special.type</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">restartPolicy</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Never</span></span></code></pre></div><h2 id="_4-3-configmapçƒ­æ›´" tabindex="-1">4.3 configMapçƒ­æ›´ <a class="header-anchor" href="#_4-3-configmapçƒ­æ›´" aria-label="Permalink to &quot;4.3 configMapçƒ­æ›´&quot;">â€‹</a></h2><p>ç­‰å¾…å¤§æ¦‚ 10 ç§’é’Ÿæ—¶é—´ï¼Œå†æ¬¡æŸ¥çœ‹ç¯å¢ƒå˜é‡çš„å€¼</p><h1 id="_5-configmapå’Œsecretæ€»ç»“" tabindex="-1">5. configmapå’Œsecretæ€»ç»“ <a class="header-anchor" href="#_5-configmapå’Œsecretæ€»ç»“" aria-label="Permalink to &quot;5. configmapå’Œsecretæ€»ç»“&quot;">â€‹</a></h1><ul><li><p>configmap</p><p>ä¸»è¦åº”ç”¨ä¸€äº›é…ç½®æ–‡ä»¶çš„å­˜å‚¨ï¼Œç¨‹åºçš„é…ç½®æ–‡ä»¶æ›¿æ¢ç­‰</p></li><li><p>secret</p><p>ä¸»è¦å­˜å‚¨ä¸€äº›å­˜å‚¨é•œåƒä»“åº“è®¤è¯ä¿¡æ¯ï¼Œå­˜å‚¨å¯†ç ã€å¯†é’¥ï¼ŒTLSè¯ä¹¦ç­‰</p></li><li><p>åº”ç”¨ç¨‹åºåŠ¨æ€æ›´æ–°é…ç½®æ–¹æ¡ˆï¼š å½“ConfigMapå‘ç”Ÿå˜æ›´æ—¶ï¼Œåº”ç”¨ç¨‹åºè‡ªåŠ¨æ„ŸçŸ¥åŠ¨æ€åŠ è½½ï¼ˆéœ€è¦ç¨‹åºè‡ªèº«æ”¯æŒï¼‰ è§¦å‘æ»šåŠ¨æ›´æ–°ï¼Œå³é‡å¯æœåŠ¡</p></li></ul>`,110),e=[o];function c(t,r,E,y,i,F){return n(),a("div",null,e)}const g=s(l,[["render",c]]);export{m as __pageData,g as default};
