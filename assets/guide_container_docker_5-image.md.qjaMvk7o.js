import{_ as s,o as n,c as a,R as l}from"./chunks/framework.zUbWieqp.js";const C=JSON.parse('{"title":"1.镜像管理","description":"","frontmatter":{},"headers":[],"relativePath":"guide/container/docker/5-image.md","filePath":"guide/container/docker/5-image.md","lastUpdated":1721805479000}'),p={name:"guide/container/docker/5-image.md"},o=l(`<h1 id="_1-镜像管理" tabindex="-1">1.镜像管理 <a class="header-anchor" href="#_1-镜像管理" aria-label="Permalink to &quot;1.镜像管理&quot;">​</a></h1><h2 id="_1-0-查看版本" tabindex="-1">1.0 查看版本 <a class="header-anchor" href="#_1-0-查看版本" aria-label="Permalink to &quot;1.0 查看版本&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">[root@k8s1 ~]#  docker version</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">[root@k8s1 ~]#  docker -v</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">[root@k8s1 ~]#  docker version</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">[root@k8s1 ~]#  docker -v</span></span></code></pre></div><p>[root@k8s1 ~]# docker info</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">Client:</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Context:</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">default</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Debug</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Mode:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;">#client 端是否开启 debug</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Server:</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Containers:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">           </span><span style="color:#6A737D;">#当前主机运行的容器总数</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Running:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">#有几个容器是正在运行的</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Paused:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">#有几个容器是暂停的</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Stopped:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">#有几个容器是停止的</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Images:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">#当前服务器的镜像数</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Server</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Version:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">20.10</span><span style="color:#9ECBFF;">.19</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#服务端版本</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Storage</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Driver:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">overlay2</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#正在使用的存储引擎</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Backing</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Filesystem:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">xfs</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#后端文件系统，即服务器的磁盘文件系统</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Supports</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">d_type:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">#是否支持 d_type</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Native</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Overlay</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Diff:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#是否支持差异数据存储</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">userxattr:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">      </span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Logging</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Driver:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">json-file</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;">#日志类型</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Cgroup</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Driver:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cgroupfs</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">#Cgroups 类型</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Cgroup</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Version:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">      </span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Plugins:</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;">#插件</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Volume:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">local</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">#卷</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Network:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bridge</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">host</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ipvlan</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">macvlan</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">null</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">overlay</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># overlay 跨主机通信</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Log:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">awslogs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">fluentd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">gcplogs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">gelf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">journald</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">json-file</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">local</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">logentries</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">splunk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">syslog</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 日志类型</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Swarm:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">inactive</span><span style="color:#E1E4E8;">                      </span><span style="color:#6A737D;">#是否支持 swarm</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Runtimes:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">runc</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">io.containerd.runc.v2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">io.containerd.runtime.v1.linux</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">#已安装的容器运行时</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Default</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Runtime:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">runc</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">#默认使用的容器运行时</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Init</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Binary:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker-init</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">#初始化容器的守护进程，即 pid 为 1 的进程</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">containerd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">version:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">9</span><span style="color:#9ECBFF;">cd3357b7fd7218e4aec3eae239db1f68a5a6ec6</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#版本</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">runc</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">version:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">v1.1.4-0-g5fd4c4d1</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;">#runc 版本</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">init</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">version:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">de40ad0</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">#init 版本</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Security</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Options:</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;">#安全选项</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">apparmor</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;">#安全模块，https://docs.docker.com/engine/security/apparmor/</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">seccomp</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#安全计算模块，即制容器操作，https://docs.docker.com/engine/security/seccomp</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">Profile:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">default</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">#默认的配置文件</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Kernel</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Version:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5.4</span><span style="color:#9ECBFF;">.0-126-generic</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#宿主机内核版本</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Operating</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">System:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Ubuntu</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">20.04</span><span style="color:#9ECBFF;">.4</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">LTS</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#宿主机操作系统</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">OSType:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">linux</span><span style="color:#E1E4E8;">            </span><span style="color:#6A737D;">#宿主机操作系统类型</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Architecture:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">x86_64</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">#宿主机架构</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">CPUs:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">               </span><span style="color:#6A737D;">#宿主机 CPU 数量</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Total</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Memory:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3.84</span><span style="color:#9ECBFF;">GiB</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">#宿主机总内存</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Name:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">DY-Ubuntu-01</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;">#宿主机 hostname</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ID:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">YZQ6:756A:YPQR:XKA7:POII:EQ6Z:KUPN:BHPK:Q6QK:GYCX:56RA:PWJY</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#宿主机 ID</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Root</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Dir:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/var/lib/docker</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">#宿主机关于docker数据的保存目录</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Debug</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Mode:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">             </span><span style="color:#6A737D;">#server 端是否开启 debug</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Registry:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://index.docker.io/v1/</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;">#仓库路径</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Labels:</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Experimental:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;">#是否测试版</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Insecure</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Registries:</span><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">127.0.0.0/8</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;">#非安全的镜像仓库</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Registry</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Mirrors:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">https://pgavrk5n.mirror.aliyuncs.com/</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">#镜像仓库</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Live</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Restore</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Enabled:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">#是否开启活动重启 (重启docker-daemon 不关闭容器 )</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Product</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">License:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Community</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Engine</span><span style="color:#E1E4E8;">           </span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">WARNING:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">No</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">swap</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">limit</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">support</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">#系统警告信息 (没有开启 swap 资源限制 )</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">Client:</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Context:</span><span style="color:#24292E;">    </span><span style="color:#032F62;">default</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Debug</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Mode:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">          </span><span style="color:#6A737D;">#client 端是否开启 debug</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Server:</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Containers:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">           </span><span style="color:#6A737D;">#当前主机运行的容器总数</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Running:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">      </span><span style="color:#6A737D;">#有几个容器是正在运行的</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Paused:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">        </span><span style="color:#6A737D;">#有几个容器是暂停的</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Stopped:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">      </span><span style="color:#6A737D;">#有几个容器是停止的</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Images:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">        </span><span style="color:#6A737D;">#当前服务器的镜像数</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Server</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Version:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">20.10</span><span style="color:#032F62;">.19</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#服务端版本</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Storage</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Driver:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">overlay2</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#正在使用的存储引擎</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Backing</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Filesystem:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">xfs</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#后端文件系统，即服务器的磁盘文件系统</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Supports</span><span style="color:#24292E;"> </span><span style="color:#032F62;">d_type:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">    </span><span style="color:#6A737D;">#是否支持 d_type</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Native</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Overlay</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Diff:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#是否支持差异数据存储</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">userxattr:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">      </span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Logging</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Driver:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">json-file</span><span style="color:#24292E;">   </span><span style="color:#6A737D;">#日志类型</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Cgroup</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Driver:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cgroupfs</span><span style="color:#24292E;">    </span><span style="color:#6A737D;">#Cgroups 类型</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Cgroup</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Version:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">      </span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Plugins:</span><span style="color:#24292E;">          </span><span style="color:#6A737D;">#插件</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Volume:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">local</span><span style="color:#24292E;">        </span><span style="color:#6A737D;">#卷</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Network:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bridge</span><span style="color:#24292E;"> </span><span style="color:#032F62;">host</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ipvlan</span><span style="color:#24292E;"> </span><span style="color:#032F62;">macvlan</span><span style="color:#24292E;"> </span><span style="color:#032F62;">null</span><span style="color:#24292E;"> </span><span style="color:#032F62;">overlay</span><span style="color:#24292E;">    </span><span style="color:#6A737D;"># overlay 跨主机通信</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Log:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">awslogs</span><span style="color:#24292E;"> </span><span style="color:#032F62;">fluentd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">gcplogs</span><span style="color:#24292E;"> </span><span style="color:#032F62;">gelf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">journald</span><span style="color:#24292E;"> </span><span style="color:#032F62;">json-file</span><span style="color:#24292E;"> </span><span style="color:#032F62;">local</span><span style="color:#24292E;"> </span><span style="color:#032F62;">logentries</span><span style="color:#24292E;"> </span><span style="color:#032F62;">splunk</span><span style="color:#24292E;"> </span><span style="color:#032F62;">syslog</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># 日志类型</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Swarm:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">inactive</span><span style="color:#24292E;">                      </span><span style="color:#6A737D;">#是否支持 swarm</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Runtimes:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">runc</span><span style="color:#24292E;"> </span><span style="color:#032F62;">io.containerd.runc.v2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">io.containerd.runtime.v1.linux</span><span style="color:#24292E;">    </span><span style="color:#6A737D;">#已安装的容器运行时</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Default</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Runtime:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">runc</span><span style="color:#24292E;">      </span><span style="color:#6A737D;">#默认使用的容器运行时</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Init</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Binary:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker-init</span><span style="color:#24292E;">    </span><span style="color:#6A737D;">#初始化容器的守护进程，即 pid 为 1 的进程</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">containerd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">version:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">9</span><span style="color:#032F62;">cd3357b7fd7218e4aec3eae239db1f68a5a6ec6</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#版本</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">runc</span><span style="color:#24292E;"> </span><span style="color:#032F62;">version:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">v1.1.4-0-g5fd4c4d1</span><span style="color:#24292E;">               </span><span style="color:#6A737D;">#runc 版本</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">init</span><span style="color:#24292E;"> </span><span style="color:#032F62;">version:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">de40ad0</span><span style="color:#24292E;">        </span><span style="color:#6A737D;">#init 版本</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Security</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Options:</span><span style="color:#24292E;">          </span><span style="color:#6A737D;">#安全选项</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">apparmor</span><span style="color:#24292E;">              </span><span style="color:#6A737D;">#安全模块，https://docs.docker.com/engine/security/apparmor/</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">seccomp</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#安全计算模块，即制容器操作，https://docs.docker.com/engine/security/seccomp</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">Profile:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">default</span><span style="color:#24292E;">    </span><span style="color:#6A737D;">#默认的配置文件</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Kernel</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Version:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5.4</span><span style="color:#032F62;">.0-126-generic</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#宿主机内核版本</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Operating</span><span style="color:#24292E;"> </span><span style="color:#032F62;">System:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Ubuntu</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">20.04</span><span style="color:#032F62;">.4</span><span style="color:#24292E;"> </span><span style="color:#032F62;">LTS</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#宿主机操作系统</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">OSType:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">linux</span><span style="color:#24292E;">            </span><span style="color:#6A737D;">#宿主机操作系统类型</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Architecture:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">x86_64</span><span style="color:#24292E;">        </span><span style="color:#6A737D;">#宿主机架构</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">CPUs:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">               </span><span style="color:#6A737D;">#宿主机 CPU 数量</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Total</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Memory:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">3.84</span><span style="color:#032F62;">GiB</span><span style="color:#24292E;">        </span><span style="color:#6A737D;">#宿主机总内存</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Name:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">DY-Ubuntu-01</span><span style="color:#24292E;">          </span><span style="color:#6A737D;">#宿主机 hostname</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ID:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">YZQ6:756A:YPQR:XKA7:POII:EQ6Z:KUPN:BHPK:Q6QK:GYCX:56RA:PWJY</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#宿主机 ID</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Root</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Dir:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/var/lib/docker</span><span style="color:#24292E;">    </span><span style="color:#6A737D;">#宿主机关于docker数据的保存目录</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Debug</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Mode:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">             </span><span style="color:#6A737D;">#server 端是否开启 debug</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Registry:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://index.docker.io/v1/</span><span style="color:#24292E;">   </span><span style="color:#6A737D;">#仓库路径</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Labels:</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Experimental:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">          </span><span style="color:#6A737D;">#是否测试版</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Insecure</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Registries:</span><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">127.0.0.0/8</span><span style="color:#24292E;">              </span><span style="color:#6A737D;">#非安全的镜像仓库</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Registry</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Mirrors:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">https://pgavrk5n.mirror.aliyuncs.com/</span><span style="color:#24292E;">    </span><span style="color:#6A737D;">#镜像仓库</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Live</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Restore</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Enabled:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">        </span><span style="color:#6A737D;">#是否开启活动重启 (重启docker-daemon 不关闭容器 )</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Product</span><span style="color:#24292E;"> </span><span style="color:#032F62;">License:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Community</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Engine</span><span style="color:#24292E;">           </span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">WARNING:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">No</span><span style="color:#24292E;"> </span><span style="color:#032F62;">swap</span><span style="color:#24292E;"> </span><span style="color:#032F62;">limit</span><span style="color:#24292E;"> </span><span style="color:#032F62;">support</span><span style="color:#24292E;">        </span><span style="color:#6A737D;">#系统警告信息 (没有开启 swap 资源限制 )</span></span></code></pre></div><h2 id="_1-1查看镜像" tabindex="-1">1.1查看镜像 <a class="header-anchor" href="#_1-1查看镜像" aria-label="Permalink to &quot;1.1查看镜像&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">images</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">image</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ls</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@node1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker images</span></span>
<span class="line"><span style="color:#B392F0;">REPOSITORY</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">TAG</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">IMAGE</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ID</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">CREATED</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">SIZE</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">REPOSITORY</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">#镜像所属的仓库名称</span></span>
<span class="line"><span style="color:#B392F0;">TAG</span><span style="color:#E1E4E8;">              </span><span style="color:#6A737D;">#镜像版本号（标识符），默认为latest</span></span>
<span class="line"><span style="color:#B392F0;">IMAGE</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ID</span><span style="color:#E1E4E8;">         </span><span style="color:#6A737D;">#镜像唯一ID标识,如果ID相同,说明是同一个镜像有多个名称</span></span>
<span class="line"><span style="color:#B392F0;">CREATED</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;">#镜像在仓库中被创建时间</span></span>
<span class="line"><span style="color:#B392F0;">VIRTUAL</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">SIZE</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;">#镜像的大小</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">images</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">image</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ls</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@node1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker images</span></span>
<span class="line"><span style="color:#6F42C1;">REPOSITORY</span><span style="color:#24292E;">    </span><span style="color:#032F62;">TAG</span><span style="color:#24292E;">       </span><span style="color:#032F62;">IMAGE</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ID</span><span style="color:#24292E;">       </span><span style="color:#032F62;">CREATED</span><span style="color:#24292E;">         </span><span style="color:#032F62;">SIZE</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">REPOSITORY</span><span style="color:#24292E;">        </span><span style="color:#6A737D;">#镜像所属的仓库名称</span></span>
<span class="line"><span style="color:#6F42C1;">TAG</span><span style="color:#24292E;">              </span><span style="color:#6A737D;">#镜像版本号（标识符），默认为latest</span></span>
<span class="line"><span style="color:#6F42C1;">IMAGE</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ID</span><span style="color:#24292E;">         </span><span style="color:#6A737D;">#镜像唯一ID标识,如果ID相同,说明是同一个镜像有多个名称</span></span>
<span class="line"><span style="color:#6F42C1;">CREATED</span><span style="color:#24292E;">          </span><span style="color:#6A737D;">#镜像在仓库中被创建时间</span></span>
<span class="line"><span style="color:#6F42C1;">VIRTUAL</span><span style="color:#24292E;"> </span><span style="color:#032F62;">SIZE</span><span style="color:#24292E;">     </span><span style="color:#6A737D;">#镜像的大小</span></span></code></pre></div><h3 id="查看镜像id" tabindex="-1">查看镜像id <a class="header-anchor" href="#查看镜像id" aria-label="Permalink to &quot;查看镜像id&quot;">​</a></h3><p>语法，docker help images</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@appman containers]# docker help images;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Usage:</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">images</span><span style="color:#E1E4E8;"> [OPTIONS] [REPOSITORY[:TAG]]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">List</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">images</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Options:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-a,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--all</span><span style="color:#E1E4E8;">             </span><span style="color:#9ECBFF;">Show</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">all</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">images</span><span style="color:#E1E4E8;"> (default </span><span style="color:#9ECBFF;">hides</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">intermediate</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">images</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">--digests</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">Show</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">digests</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-f,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--filter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">filter</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Filter</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">output</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">based</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">on</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">conditions</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">provided</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">--format</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">string</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Pretty-print</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">images</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">using</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Go</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">template</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">--no-trunc</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">Don&#39;t truncate output</span></span>
<span class="line"><span style="color:#9ECBFF;">  -q, --quiet           Only show image IDs</span></span>
<span class="line"><span style="color:#9ECBFF;">  </span></span>
<span class="line"><span style="color:#9ECBFF;">[root@node1 ~]# docker images -q              #查看镜像id</span></span>
<span class="line"><span style="color:#9ECBFF;">c059bfaa849c</span></span>
<span class="line"><span style="color:#9ECBFF;">feb5d9fea6a5</span></span>
<span class="line"><span style="color:#9ECBFF;">[root@node1 ~]# docker images --no-trunc      #显示完整的ImageID</span></span>
<span class="line"><span style="color:#9ECBFF;">REPOSITORY    TAG       IMAGE ID                                                                  CREATED         SIZE</span></span>
<span class="line"><span style="color:#9ECBFF;">alpine        latest    sha256:c059bfaa849c4d8e4aecaeb3a10c2d9b3d85f5165c66ad3a4d937758128c4d18   10 months ago   5.59MB</span></span>
<span class="line"><span style="color:#9ECBFF;">hello-world   latest    sha256:feb5d9fea6a5e9606aa995e879d862b825965ba48de054caab5ef356dc6b3412   12 months ago   13.3kB</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">[root@node1 ~]# docker image inspect alpine    #查看指定镜像的详细信息</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@appman containers]# docker help images;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Usage:</span><span style="color:#24292E;">  </span><span style="color:#032F62;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">images</span><span style="color:#24292E;"> [OPTIONS] [REPOSITORY[:TAG]]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">List</span><span style="color:#24292E;"> </span><span style="color:#032F62;">images</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Options:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-a,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--all</span><span style="color:#24292E;">             </span><span style="color:#032F62;">Show</span><span style="color:#24292E;"> </span><span style="color:#032F62;">all</span><span style="color:#24292E;"> </span><span style="color:#032F62;">images</span><span style="color:#24292E;"> (default </span><span style="color:#032F62;">hides</span><span style="color:#24292E;"> </span><span style="color:#032F62;">intermediate</span><span style="color:#24292E;"> </span><span style="color:#032F62;">images</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">--digests</span><span style="color:#24292E;">         </span><span style="color:#032F62;">Show</span><span style="color:#24292E;"> </span><span style="color:#032F62;">digests</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-f,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--filter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">filter</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Filter</span><span style="color:#24292E;"> </span><span style="color:#032F62;">output</span><span style="color:#24292E;"> </span><span style="color:#032F62;">based</span><span style="color:#24292E;"> </span><span style="color:#032F62;">on</span><span style="color:#24292E;"> </span><span style="color:#032F62;">conditions</span><span style="color:#24292E;"> </span><span style="color:#032F62;">provided</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">--format</span><span style="color:#24292E;"> </span><span style="color:#032F62;">string</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Pretty-print</span><span style="color:#24292E;"> </span><span style="color:#032F62;">images</span><span style="color:#24292E;"> </span><span style="color:#032F62;">using</span><span style="color:#24292E;"> </span><span style="color:#032F62;">a</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Go</span><span style="color:#24292E;"> </span><span style="color:#032F62;">template</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">--no-trunc</span><span style="color:#24292E;">        </span><span style="color:#032F62;">Don&#39;t truncate output</span></span>
<span class="line"><span style="color:#032F62;">  -q, --quiet           Only show image IDs</span></span>
<span class="line"><span style="color:#032F62;">  </span></span>
<span class="line"><span style="color:#032F62;">[root@node1 ~]# docker images -q              #查看镜像id</span></span>
<span class="line"><span style="color:#032F62;">c059bfaa849c</span></span>
<span class="line"><span style="color:#032F62;">feb5d9fea6a5</span></span>
<span class="line"><span style="color:#032F62;">[root@node1 ~]# docker images --no-trunc      #显示完整的ImageID</span></span>
<span class="line"><span style="color:#032F62;">REPOSITORY    TAG       IMAGE ID                                                                  CREATED         SIZE</span></span>
<span class="line"><span style="color:#032F62;">alpine        latest    sha256:c059bfaa849c4d8e4aecaeb3a10c2d9b3d85f5165c66ad3a4d937758128c4d18   10 months ago   5.59MB</span></span>
<span class="line"><span style="color:#032F62;">hello-world   latest    sha256:feb5d9fea6a5e9606aa995e879d862b825965ba48de054caab5ef356dc6b3412   12 months ago   13.3kB</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">[root@node1 ~]# docker image inspect alpine    #查看指定镜像的详细信息</span></span></code></pre></div><h3 id="查看镜像详细信息" tabindex="-1">查看镜像详细信息 <a class="header-anchor" href="#查看镜像详细信息" aria-label="Permalink to &quot;查看镜像详细信息&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">#查看镜像详细信息</span></span>
<span class="line"><span style="color:#e1e4e8;">docker inspect nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">#查看镜像详细信息</span></span>
<span class="line"><span style="color:#24292e;">docker inspect nginx</span></span></code></pre></div><h2 id="_1-2-检索镜像" tabindex="-1">1.2 检索镜像 <a class="header-anchor" href="#_1-2-检索镜像" aria-label="Permalink to &quot;1.2 检索镜像&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@docker </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker search nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">search</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f=stars=100</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;">#搜索点赞大于100的nginx镜像</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">search</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--limit</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">#搜索三个结果</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">image</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">history</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;">#查看镜像分层历史</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@docker </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker search nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">search</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f=stars=100</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span><span style="color:#24292E;">   </span><span style="color:#6A737D;">#搜索点赞大于100的nginx镜像</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">search</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--limit</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span><span style="color:#24292E;">      </span><span style="color:#6A737D;">#搜索三个结果</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">image</span><span style="color:#24292E;"> </span><span style="color:#032F62;">history</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span><span style="color:#24292E;">       </span><span style="color:#6A737D;">#查看镜像分层历史</span></span></code></pre></div><h2 id="_1-3-拉取镜像" tabindex="-1">1.3 拉取镜像 <a class="header-anchor" href="#_1-3-拉取镜像" aria-label="Permalink to &quot;1.3 拉取镜像&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#格式：docker pull 仓库名称[:标签]</span></span>
<span class="line"><span style="color:#6A737D;">#如果下载镜像时不指定标签，则默认会下载仓库中最新版本的镜像，即选择标签为 latest 标签</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@docker </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker pull nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@node1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker run -it -d --name alpine-1 --rm alpine     </span><span style="color:#6A737D;">#后台交互运行一个名称为alpine-1的alpine容器，停止容器后删除容器</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@node1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker exec -it alpine-1 /bin/sh                  </span><span style="color:#6A737D;">#进入alpine-1容器，指定bash类型为sh</span></span>
<span class="line"><span style="color:#B392F0;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># vi /etc/apk/repositories                                      #修改源替换成阿里源</span></span>
<span class="line"><span style="color:#B392F0;">https://mirrors.aliyun.com/alpine/v3.15/main</span><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#B392F0;">https://mirrors.aliyun.com/alpine/v3.15/community</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># apk update                                                    #更新源</span></span>
<span class="line"><span style="color:#B392F0;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># apk add vim                                                  #安装软件</span></span>
<span class="line"><span style="color:#B392F0;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># apk del openssh                                       #删除软件</span></span>
<span class="line"><span style="color:#B392F0;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># apk info nginx                                        #显示软件的详细信息</span></span>
<span class="line"><span style="color:#B392F0;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># apk manifest nginx                                           #显示校验</span></span>
<span class="line"><span style="color:#6A737D;"># Debian(ubuntu)系统建议安装的基础包</span></span>
<span class="line"><span style="color:#6A737D;"># apt update                              #安装软件前需要先更新索引</span></span>
<span class="line"><span style="color:#6A737D;"># apt install procps                      #提供top,ps,free等命令</span></span>
<span class="line"><span style="color:#6A737D;"># apt install psmisc                    #提供pstree,killall等命令</span></span>
<span class="line"><span style="color:#6A737D;"># apt install iputils-ping                  #提供ping命令</span></span>
<span class="line"><span style="color:#6A737D;"># apt install net-tools                     #提供netstat网络工具等</span></span>
<span class="line"><span style="color:#6A737D;"># apt install iproute2                      #提供ip,ss网络工具等</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#格式：docker pull 仓库名称[:标签]</span></span>
<span class="line"><span style="color:#6A737D;">#如果下载镜像时不指定标签，则默认会下载仓库中最新版本的镜像，即选择标签为 latest 标签</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@docker </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker pull nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@node1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker run -it -d --name alpine-1 --rm alpine     </span><span style="color:#6A737D;">#后台交互运行一个名称为alpine-1的alpine容器，停止容器后删除容器</span></span>
<span class="line"><span style="color:#24292E;">[root@node1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker exec -it alpine-1 /bin/sh                  </span><span style="color:#6A737D;">#进入alpine-1容器，指定bash类型为sh</span></span>
<span class="line"><span style="color:#6F42C1;">/</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># vi /etc/apk/repositories                                      #修改源替换成阿里源</span></span>
<span class="line"><span style="color:#6F42C1;">https://mirrors.aliyun.com/alpine/v3.15/main</span><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#6F42C1;">https://mirrors.aliyun.com/alpine/v3.15/community</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">/</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># apk update                                                    #更新源</span></span>
<span class="line"><span style="color:#6F42C1;">/</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># apk add vim                                                  #安装软件</span></span>
<span class="line"><span style="color:#6F42C1;">/</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># apk del openssh                                       #删除软件</span></span>
<span class="line"><span style="color:#6F42C1;">/</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># apk info nginx                                        #显示软件的详细信息</span></span>
<span class="line"><span style="color:#6F42C1;">/</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># apk manifest nginx                                           #显示校验</span></span>
<span class="line"><span style="color:#6A737D;"># Debian(ubuntu)系统建议安装的基础包</span></span>
<span class="line"><span style="color:#6A737D;"># apt update                              #安装软件前需要先更新索引</span></span>
<span class="line"><span style="color:#6A737D;"># apt install procps                      #提供top,ps,free等命令</span></span>
<span class="line"><span style="color:#6A737D;"># apt install psmisc                    #提供pstree,killall等命令</span></span>
<span class="line"><span style="color:#6A737D;"># apt install iputils-ping                  #提供ping命令</span></span>
<span class="line"><span style="color:#6A737D;"># apt install net-tools                     #提供netstat网络工具等</span></span>
<span class="line"><span style="color:#6A737D;"># apt install iproute2                      #提供ip,ss网络工具等</span></span></code></pre></div><h2 id="_1-4-上传镜像" tabindex="-1">1.4 上传镜像 <a class="header-anchor" href="#_1-4-上传镜像" aria-label="Permalink to &quot;1.4 上传镜像&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#配置tag</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">tag</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx:latest</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">hsuing/nginx:latest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">login</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">push</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">hsuing/nginx:latest</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#配置tag</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">tag</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx:latest</span><span style="color:#24292E;">  </span><span style="color:#032F62;">hsuing/nginx:latest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">login</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">push</span><span style="color:#24292E;">  </span><span style="color:#032F62;">hsuing/nginx:latest</span></span></code></pre></div><h2 id="_1-5-保存镜像" tabindex="-1">1.5 保存镜像 <a class="header-anchor" href="#_1-5-保存镜像" aria-label="Permalink to &quot;1.5 保存镜像&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">save</span><span style="color:#E1E4E8;"> [image] -o FILE /</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">save</span><span style="color:#E1E4E8;"> [image] </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> FILE</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">save</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx:latest</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx.tar</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">save</span><span style="color:#24292E;"> [image] -o FILE /</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">save</span><span style="color:#24292E;"> [image] </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> FILE</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">save</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx:latest</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx.tar</span></span></code></pre></div><h2 id="_1-6-镜像导入" tabindex="-1">1.6 镜像导入 <a class="header-anchor" href="#_1-6-镜像导入" aria-label="Permalink to &quot;1.6 镜像导入&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">load</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">FILE</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">load</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx.tar</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">load</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">FILE</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">load</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx.tar</span></span></code></pre></div><h4 id="save" tabindex="-1">save <a class="header-anchor" href="#save" aria-label="Permalink to &quot;save&quot;">​</a></h4><p>保存镜像到一个tar包; -o, --output=&quot;&quot; Write to an file</p><p>docker save -o save_name image_name</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#查看</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker images;</span></span>
<span class="line"><span style="color:#B392F0;">REPOSITORY</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">TAG</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">IMAGE</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ID</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">CREATED</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">SIZE</span></span>
<span class="line"><span style="color:#B392F0;">nginx</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">latest</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">62</span><span style="color:#9ECBFF;">d49f9bab67</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">8</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">days</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ago</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">133</span><span style="color:#9ECBFF;">MB</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#保存</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker save -o nginx_save.tar nginx</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# ls</span></span>
<span class="line"><span style="color:#B392F0;">nginx_save.tar</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#查看</span></span>
<span class="line"><span style="color:#24292E;">[root@k8s1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker images;</span></span>
<span class="line"><span style="color:#6F42C1;">REPOSITORY</span><span style="color:#24292E;">    </span><span style="color:#032F62;">TAG</span><span style="color:#24292E;">       </span><span style="color:#032F62;">IMAGE</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ID</span><span style="color:#24292E;">       </span><span style="color:#032F62;">CREATED</span><span style="color:#24292E;">       </span><span style="color:#032F62;">SIZE</span></span>
<span class="line"><span style="color:#6F42C1;">nginx</span><span style="color:#24292E;">         </span><span style="color:#032F62;">latest</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">62</span><span style="color:#032F62;">d49f9bab67</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">8</span><span style="color:#24292E;"> </span><span style="color:#032F62;">days</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ago</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">133</span><span style="color:#032F62;">MB</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#保存</span></span>
<span class="line"><span style="color:#24292E;">[root@k8s1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker save -o nginx_save.tar nginx</span></span>
<span class="line"><span style="color:#24292E;">[root@k8s1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# ls</span></span>
<span class="line"><span style="color:#6F42C1;">nginx_save.tar</span></span></code></pre></div><h4 id="load-载入" tabindex="-1">load 载入 <a class="header-anchor" href="#load-载入" aria-label="Permalink to &quot;load 载入&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#save 导入</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker load -i nginx_save.tar</span></span>
<span class="line"><span style="color:#B392F0;">7e718b9c0c8c:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Loading</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">layer</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">72.52</span><span style="color:#9ECBFF;">MB/72.52MB</span></span>
<span class="line"><span style="color:#B392F0;">4dc529e519c4:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Loading</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">layer</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">64.81</span><span style="color:#9ECBFF;">MB/64.81MB</span></span>
<span class="line"><span style="color:#B392F0;">23c959acc3d0:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Loading</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">layer</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">3.072</span><span style="color:#9ECBFF;">kB/3.072kB</span></span>
<span class="line"><span style="color:#B392F0;">15aac1be5f02:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Loading</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">layer</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">4.096</span><span style="color:#9ECBFF;">kB/4.096kB</span></span>
<span class="line"><span style="color:#B392F0;">974e9faf62f1:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Loading</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">layer</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">3.584</span><span style="color:#9ECBFF;">kB/3.584kB</span></span>
<span class="line"><span style="color:#B392F0;">64ee8c6d0de0:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Loading</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">layer</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">7.168</span><span style="color:#9ECBFF;">kB/7.168kB</span></span>
<span class="line"><span style="color:#B392F0;">Loaded</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">image:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx:latest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">或者</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker load </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> nginx_save.tar</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#save 导入</span></span>
<span class="line"><span style="color:#24292E;">[root@k8s1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker load -i nginx_save.tar</span></span>
<span class="line"><span style="color:#6F42C1;">7e718b9c0c8c:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Loading</span><span style="color:#24292E;"> </span><span style="color:#032F62;">layer</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">72.52</span><span style="color:#032F62;">MB/72.52MB</span></span>
<span class="line"><span style="color:#6F42C1;">4dc529e519c4:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Loading</span><span style="color:#24292E;"> </span><span style="color:#032F62;">layer</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">64.81</span><span style="color:#032F62;">MB/64.81MB</span></span>
<span class="line"><span style="color:#6F42C1;">23c959acc3d0:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Loading</span><span style="color:#24292E;"> </span><span style="color:#032F62;">layer</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">3.072</span><span style="color:#032F62;">kB/3.072kB</span></span>
<span class="line"><span style="color:#6F42C1;">15aac1be5f02:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Loading</span><span style="color:#24292E;"> </span><span style="color:#032F62;">layer</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">4.096</span><span style="color:#032F62;">kB/4.096kB</span></span>
<span class="line"><span style="color:#6F42C1;">974e9faf62f1:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Loading</span><span style="color:#24292E;"> </span><span style="color:#032F62;">layer</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">3.584</span><span style="color:#032F62;">kB/3.584kB</span></span>
<span class="line"><span style="color:#6F42C1;">64ee8c6d0de0:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Loading</span><span style="color:#24292E;"> </span><span style="color:#032F62;">layer</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">7.168</span><span style="color:#032F62;">kB/7.168kB</span></span>
<span class="line"><span style="color:#6F42C1;">Loaded</span><span style="color:#24292E;"> </span><span style="color:#032F62;">image:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx:latest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">或者</span></span>
<span class="line"><span style="color:#24292E;">[root@k8s1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker load </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> nginx_save.tar</span></span></code></pre></div><blockquote><p><strong># 加载一个tar包格式的镜像; -i, --input=&quot;&quot; Read from a tar archive file</strong></p><p><strong>&lt; 等于 参数 -i</strong></p><p>load 导入的是元数据信息，包含标签</p></blockquote><h4 id="export" tabindex="-1">export <a class="header-anchor" href="#export" aria-label="Permalink to &quot;export&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#export  和save 的区别</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker help save</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Usage:</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">save</span><span style="color:#E1E4E8;"> [OPTIONS] IMAGE [IMAGE...]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Save</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">one</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">or</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">more</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">images</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">archive</span><span style="color:#E1E4E8;"> (streamed </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">STDOUT</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">by</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">default</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Options:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-o,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--output</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">string</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Write</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">instead</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">STDOUT</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker help export</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Usage:</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">export</span><span style="color:#E1E4E8;"> [OPTIONS] CONTAINER</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Export</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">container&#39;s filesystem as a tar archive</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">Options:</span></span>
<span class="line"><span style="color:#9ECBFF;">  -o, --output string   Write to a file, instead of STDOUT</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#export  和save 的区别</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@k8s1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker help save</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Usage:</span><span style="color:#24292E;">  </span><span style="color:#032F62;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">save</span><span style="color:#24292E;"> [OPTIONS] IMAGE [IMAGE...]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Save</span><span style="color:#24292E;"> </span><span style="color:#032F62;">one</span><span style="color:#24292E;"> </span><span style="color:#032F62;">or</span><span style="color:#24292E;"> </span><span style="color:#032F62;">more</span><span style="color:#24292E;"> </span><span style="color:#032F62;">images</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">a</span><span style="color:#24292E;"> </span><span style="color:#032F62;">tar</span><span style="color:#24292E;"> </span><span style="color:#032F62;">archive</span><span style="color:#24292E;"> (streamed </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">STDOUT</span><span style="color:#24292E;"> </span><span style="color:#032F62;">by</span><span style="color:#24292E;"> </span><span style="color:#032F62;">default</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Options:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-o,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--output</span><span style="color:#24292E;"> </span><span style="color:#032F62;">string</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Write</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">a</span><span style="color:#24292E;"> </span><span style="color:#032F62;">file,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">instead</span><span style="color:#24292E;"> </span><span style="color:#032F62;">of</span><span style="color:#24292E;"> </span><span style="color:#032F62;">STDOUT</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@k8s1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker help export</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Usage:</span><span style="color:#24292E;">  </span><span style="color:#032F62;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">export</span><span style="color:#24292E;"> [OPTIONS] CONTAINER</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Export</span><span style="color:#24292E;"> </span><span style="color:#032F62;">a</span><span style="color:#24292E;"> </span><span style="color:#032F62;">container&#39;s filesystem as a tar archive</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">Options:</span></span>
<span class="line"><span style="color:#032F62;">  -o, --output string   Write to a file, instead of STDOUT</span></span></code></pre></div><ul><li>导出单个镜像</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#方法1</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@node1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker save -o alpine.tar alpine  </span></span>
<span class="line"><span style="color:#6A737D;">#方法2</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@node1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker save alpine </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> alpine1.tar</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#方法1</span></span>
<span class="line"><span style="color:#24292E;">[root@node1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker save -o alpine.tar alpine  </span></span>
<span class="line"><span style="color:#6A737D;">#方法2</span></span>
<span class="line"><span style="color:#24292E;">[root@node1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker save alpine </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> alpine1.tar</span></span></code></pre></div><ul><li>导出多个镜像至一个文件</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#导出多个镜像至一个文件</span></span>
<span class="line"><span style="color:#6A737D;">#方法1</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@node1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker save -o all1.tar alpine hello-world</span></span>
<span class="line"><span style="color:#6A737D;">#方法2</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@node1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker save alpine hello-world -o all.tar</span></span>
<span class="line"><span style="color:#6A737D;">#方法3</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@node1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker save alpine hello-world </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> all2.tar</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#导出多个镜像至一个文件</span></span>
<span class="line"><span style="color:#6A737D;">#方法1</span></span>
<span class="line"><span style="color:#24292E;">[root@node1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker save -o all1.tar alpine hello-world</span></span>
<span class="line"><span style="color:#6A737D;">#方法2</span></span>
<span class="line"><span style="color:#24292E;">[root@node1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker save alpine hello-world -o all.tar</span></span>
<span class="line"><span style="color:#6A737D;">#方法3</span></span>
<span class="line"><span style="color:#24292E;">[root@node1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker save alpine hello-world </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> all2.tar</span></span></code></pre></div><ul><li>导出所有镜像至一个文件</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#导出所有镜像至一个文件</span></span>
<span class="line"><span style="color:#6A737D;">#方法1</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@node1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker save </span><span style="color:#9ECBFF;">\`</span><span style="color:#B392F0;">docker</span><span style="color:#9ECBFF;"> images </span><span style="color:#F97583;">|</span><span style="color:#9ECBFF;"> </span><span style="color:#B392F0;">awk</span><span style="color:#9ECBFF;"> &#39;NR&gt;1{print $1&quot;:&quot;$2}&#39;\`</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">-o</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">all4.tar</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;">#导出所有镜像到一个打包文件，此方法导入后可以看REPOSITORY和TAG</span></span>
<span class="line"><span style="color:#6A737D;">#方法2</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@node1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker image save </span><span style="color:#9ECBFF;">\`</span><span style="color:#B392F0;">docker</span><span style="color:#9ECBFF;"> image ls </span><span style="color:#79B8FF;">--format</span><span style="color:#9ECBFF;"> &quot;{{.Repository}}:{{.Tag}}&quot;\`</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">-o</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">all5.tar</span></span>
<span class="line"><span style="color:#6A737D;">#将所有镜像导入到一个文件中,此方法导入后可以看REPOSITORY和TA</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#导出所有镜像至一个文件</span></span>
<span class="line"><span style="color:#6A737D;">#方法1</span></span>
<span class="line"><span style="color:#24292E;">[root@node1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker save </span><span style="color:#032F62;">\`</span><span style="color:#6F42C1;">docker</span><span style="color:#032F62;"> images </span><span style="color:#D73A49;">|</span><span style="color:#032F62;"> </span><span style="color:#6F42C1;">awk</span><span style="color:#032F62;"> &#39;NR&gt;1{print $1&quot;:&quot;$2}&#39;\`</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">-o</span><span style="color:#24292E;"> </span><span style="color:#032F62;">all4.tar</span><span style="color:#24292E;">     </span><span style="color:#6A737D;">#导出所有镜像到一个打包文件，此方法导入后可以看REPOSITORY和TAG</span></span>
<span class="line"><span style="color:#6A737D;">#方法2</span></span>
<span class="line"><span style="color:#24292E;">[root@node1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker image save </span><span style="color:#032F62;">\`</span><span style="color:#6F42C1;">docker</span><span style="color:#032F62;"> image ls </span><span style="color:#005CC5;">--format</span><span style="color:#032F62;"> &quot;{{.Repository}}:{{.Tag}}&quot;\`</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">-o</span><span style="color:#24292E;"> </span><span style="color:#032F62;">all5.tar</span></span>
<span class="line"><span style="color:#6A737D;">#将所有镜像导入到一个文件中,此方法导入后可以看REPOSITORY和TA</span></span></code></pre></div><ul><li>导出所有镜像至不同的文件中</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#导出所有镜像至不同的文件中</span></span>
<span class="line"><span style="color:#6A737D;">#方法1</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@node1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker images </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;NR!=1{print $1,$2}&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">read</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">repo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">tag</span><span style="color:#E1E4E8;"> ;</span><span style="color:#F97583;">do</span><span style="color:#E1E4E8;"> docker save \${repo}:\${tag} -o \${repo}-\${tag}.tar; </span><span style="color:#F97583;">done</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">#导出所有镜像至不同的文件中</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#方法2</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@node1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">\`</span><span style="color:#B392F0;">docker</span><span style="color:#9ECBFF;"> images </span><span style="color:#79B8FF;">--format</span><span style="color:#9ECBFF;"> &quot;{{.Repository}}:{{.Tag}}&quot;\`</span><span style="color:#E1E4E8;">; </span><span style="color:#F97583;">do</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">save</span><span style="color:#E1E4E8;"> $i </span><span style="color:#79B8FF;">-o</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">\`</span><span style="color:#79B8FF;">echo</span><span style="color:#9ECBFF;"> </span><span style="color:#E1E4E8;">$i</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">cut</span><span style="color:#9ECBFF;"> </span><span style="color:#79B8FF;">-d:</span><span style="color:#9ECBFF;"> </span><span style="color:#79B8FF;">-f1</span><span style="color:#9ECBFF;">\`</span><span style="color:#B392F0;">.tar</span><span style="color:#E1E4E8;">; </span><span style="color:#F97583;">done</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;">#导出所有镜像至不同的文件中</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#导出所有镜像至不同的文件中</span></span>
<span class="line"><span style="color:#6A737D;">#方法1</span></span>
<span class="line"><span style="color:#24292E;">[root@node1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker images </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">awk</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;NR!=1{print $1,$2}&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">while</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">read</span><span style="color:#24292E;"> </span><span style="color:#032F62;">repo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">tag</span><span style="color:#24292E;"> ;</span><span style="color:#D73A49;">do</span><span style="color:#24292E;"> docker save \${repo}:\${tag} -o \${repo}-\${tag}.tar; </span><span style="color:#D73A49;">done</span><span style="color:#24292E;">      </span><span style="color:#6A737D;">#导出所有镜像至不同的文件中</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#方法2</span></span>
<span class="line"><span style="color:#24292E;">[root@node1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> i </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> </span><span style="color:#032F62;">\`</span><span style="color:#6F42C1;">docker</span><span style="color:#032F62;"> images </span><span style="color:#005CC5;">--format</span><span style="color:#032F62;"> &quot;{{.Repository}}:{{.Tag}}&quot;\`</span><span style="color:#24292E;">; </span><span style="color:#D73A49;">do</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">save</span><span style="color:#24292E;"> $i </span><span style="color:#005CC5;">-o</span><span style="color:#24292E;"> </span><span style="color:#032F62;">\`</span><span style="color:#005CC5;">echo</span><span style="color:#032F62;"> </span><span style="color:#24292E;">$i</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">cut</span><span style="color:#032F62;"> </span><span style="color:#005CC5;">-d:</span><span style="color:#032F62;"> </span><span style="color:#005CC5;">-f1</span><span style="color:#032F62;">\`</span><span style="color:#6F42C1;">.tar</span><span style="color:#24292E;">; </span><span style="color:#D73A49;">done</span><span style="color:#24292E;">                 </span><span style="color:#6A737D;">#导出所有镜像至不同的文件中</span></span></code></pre></div><p>export 是运行之后的导出</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@k8s1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker ps -a</span></span>
<span class="line"><span style="color:#B392F0;">CONTAINER</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ID</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">IMAGE</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">COMMAND</span><span style="color:#E1E4E8;">                  </span><span style="color:#9ECBFF;">CREATED</span><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">PORTS</span><span style="color:#E1E4E8;">                               </span><span style="color:#9ECBFF;">NAMES</span></span>
<span class="line"><span style="color:#B392F0;">a6ad15f24f82</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">nginx</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">&quot;/docker-entrypoint.…&quot;</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">33</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">seconds</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ago</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Up</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">31</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">seconds</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">0.0</span><span style="color:#9ECBFF;">.0.0:80</span><span style="color:#E1E4E8;">-</span><span style="color:#F97583;">&gt;</span><span style="color:#9ECBFF;">80/tcp,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">:::80</span><span style="color:#E1E4E8;">-</span><span style="color:#F97583;">&gt;</span><span style="color:#9ECBFF;">80/tcp</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">nginx-server</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#docker export 容器名字  &gt; name_export.tar</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker export a6 </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> nginx_export.tar</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@k8s1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker ps -a</span></span>
<span class="line"><span style="color:#6F42C1;">CONTAINER</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ID</span><span style="color:#24292E;">   </span><span style="color:#032F62;">IMAGE</span><span style="color:#24292E;">     </span><span style="color:#032F62;">COMMAND</span><span style="color:#24292E;">                  </span><span style="color:#032F62;">CREATED</span><span style="color:#24292E;">          </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">          </span><span style="color:#032F62;">PORTS</span><span style="color:#24292E;">                               </span><span style="color:#032F62;">NAMES</span></span>
<span class="line"><span style="color:#6F42C1;">a6ad15f24f82</span><span style="color:#24292E;">   </span><span style="color:#032F62;">nginx</span><span style="color:#24292E;">     </span><span style="color:#032F62;">&quot;/docker-entrypoint.…&quot;</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">33</span><span style="color:#24292E;"> </span><span style="color:#032F62;">seconds</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ago</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Up</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">31</span><span style="color:#24292E;"> </span><span style="color:#032F62;">seconds</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">0.0</span><span style="color:#032F62;">.0.0:80</span><span style="color:#24292E;">-</span><span style="color:#D73A49;">&gt;</span><span style="color:#032F62;">80/tcp,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">:::80</span><span style="color:#24292E;">-</span><span style="color:#D73A49;">&gt;</span><span style="color:#032F62;">80/tcp</span><span style="color:#24292E;">   </span><span style="color:#032F62;">nginx-server</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#docker export 容器名字  &gt; name_export.tar</span></span>
<span class="line"><span style="color:#24292E;">[root@k8s1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker export a6 </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> nginx_export.tar</span></span></code></pre></div><h4 id="import" tabindex="-1">import <a class="header-anchor" href="#import" aria-label="Permalink to &quot;import&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@k8s1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# cat nginx_export.tar </span><span style="color:#F97583;">|</span><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span></span>
<span class="line"><span style="color:#B392F0;">sha256:4bb1f91f1eaf739837e3a9259d5634188ec44c98b18c74c3b52c22af54d0e118</span></span>
<span class="line"><span style="color:#6A737D;"># 或者在导入的时候指定tag</span></span>
<span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx_export.tar</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">han/nginx:7.2</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#在启动nginx</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker images;</span></span>
<span class="line"><span style="color:#B392F0;">REPOSITORY</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">TAG</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">IMAGE</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ID</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">CREATED</span><span style="color:#E1E4E8;">              </span><span style="color:#9ECBFF;">SIZE</span></span>
<span class="line"><span style="color:#B392F0;">nginx</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">latest</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">4</span><span style="color:#9ECBFF;">bb1f91f1eaf</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">About</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">minute</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ago</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">131</span><span style="color:#9ECBFF;">MB</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker run -d --name nginx-server --rm  -p 80:80 nginx </span></span>
<span class="line"><span style="color:#B392F0;">docker:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Error</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">response</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">daemon:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">No</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">specified.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@k8s1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# cat nginx_export.tar </span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">import</span><span style="color:#24292E;"> </span><span style="color:#032F62;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span></span>
<span class="line"><span style="color:#6F42C1;">sha256:4bb1f91f1eaf739837e3a9259d5634188ec44c98b18c74c3b52c22af54d0e118</span></span>
<span class="line"><span style="color:#6A737D;"># 或者在导入的时候指定tag</span></span>
<span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx_export.tar</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">import</span><span style="color:#24292E;"> </span><span style="color:#032F62;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">han/nginx:7.2</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#在启动nginx</span></span>
<span class="line"><span style="color:#24292E;">[root@k8s1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker images;</span></span>
<span class="line"><span style="color:#6F42C1;">REPOSITORY</span><span style="color:#24292E;">    </span><span style="color:#032F62;">TAG</span><span style="color:#24292E;">       </span><span style="color:#032F62;">IMAGE</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ID</span><span style="color:#24292E;">       </span><span style="color:#032F62;">CREATED</span><span style="color:#24292E;">              </span><span style="color:#032F62;">SIZE</span></span>
<span class="line"><span style="color:#6F42C1;">nginx</span><span style="color:#24292E;">         </span><span style="color:#032F62;">latest</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">4</span><span style="color:#032F62;">bb1f91f1eaf</span><span style="color:#24292E;">   </span><span style="color:#032F62;">About</span><span style="color:#24292E;"> </span><span style="color:#032F62;">a</span><span style="color:#24292E;"> </span><span style="color:#032F62;">minute</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ago</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">131</span><span style="color:#032F62;">MB</span></span>
<span class="line"><span style="color:#24292E;">[root@k8s1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker run -d --name nginx-server --rm  -p 80:80 nginx </span></span>
<span class="line"><span style="color:#6F42C1;">docker:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Error</span><span style="color:#24292E;"> </span><span style="color:#032F62;">response</span><span style="color:#24292E;"> </span><span style="color:#032F62;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">daemon:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">No</span><span style="color:#24292E;"> </span><span style="color:#032F62;">command</span><span style="color:#24292E;"> </span><span style="color:#032F62;">specified.</span></span></code></pre></div><blockquote><p>import 导入的时候不能用原来的启动方式启动</p></blockquote><blockquote><p>[!WARNING]</p><p><strong>注：</strong></p><p>​ <strong>用户既可以使用docker load来导入镜像存储文件到本地镜像库，</strong></p><p>​ <strong>也可以使用docker import来导入一个容器快照到本地镜像库。(这个体积更小)</strong></p><p><strong>两者的区别在于</strong></p><p>​ <strong>容器快照文件将丢失所有的历史记录和元数据信息（即仅保存容器当时的快照状态），容器快照文件导入时可以重新指定标签等元数据信息。</strong></p><p>​ <strong>镜像存储文件将保存完整记录，体积也大。</strong></p><p><strong>export是当前的状态，docker save 是针对镜像images。</strong></p><p><strong>docker images --tree 看到他的历史记录。Docker的文件系统AUFS，一种“增量文件系统”，用户所做修改以增量的方式保存，所以才能看到这些历史的增量。</strong></p><p><strong>推荐使用export</strong></p></blockquote><h2 id="_1-7-查看镜像历史" tabindex="-1">1.7 查看镜像历史 <a class="header-anchor" href="#_1-7-查看镜像历史" aria-label="Permalink to &quot;1.7 查看镜像历史&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@appman </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker history ubuntu</span></span>
<span class="line"><span style="color:#B392F0;">IMAGE</span><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">CREATED</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">CREATED</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">BY</span><span style="color:#E1E4E8;">                                      </span><span style="color:#9ECBFF;">SIZE</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">COMMENT</span></span>
<span class="line"><span style="color:#B392F0;">01f29b872827</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">weeks</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ago</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">/bin/sh</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#(nop)  CMD [&quot;/bin/bash&quot;]            0B        </span></span>
<span class="line"><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">missing</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">      3 weeks ago   /bin/sh -c </span><span style="color:#6A737D;">#(nop) ADD file:bb1fa1d9d012ae826…   77.8MB    </span></span>
<span class="line"><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">missing</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">      3 weeks ago   /bin/sh -c </span><span style="color:#6A737D;">#(nop)  LABEL org.opencontainers.…   0B        </span></span>
<span class="line"><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">missing</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">      3 weeks ago   /bin/sh -c </span><span style="color:#6A737D;">#(nop)  LABEL org.opencontainers.…   0B        </span></span>
<span class="line"><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">missing</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">      3 weeks ago   /bin/sh -c </span><span style="color:#6A737D;">#(nop)  ARG LAUNCHPAD_BUILD_ARCH     0B        </span></span>
<span class="line"><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;">missing</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">      3 weeks ago   /bin/sh -c </span><span style="color:#6A737D;">#(nop)  ARG RELEASE                  0B</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@appman </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker history ubuntu</span></span>
<span class="line"><span style="color:#6F42C1;">IMAGE</span><span style="color:#24292E;">          </span><span style="color:#032F62;">CREATED</span><span style="color:#24292E;">       </span><span style="color:#032F62;">CREATED</span><span style="color:#24292E;"> </span><span style="color:#032F62;">BY</span><span style="color:#24292E;">                                      </span><span style="color:#032F62;">SIZE</span><span style="color:#24292E;">      </span><span style="color:#032F62;">COMMENT</span></span>
<span class="line"><span style="color:#6F42C1;">01f29b872827</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> </span><span style="color:#032F62;">weeks</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ago</span><span style="color:#24292E;">   </span><span style="color:#032F62;">/bin/sh</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#(nop)  CMD [&quot;/bin/bash&quot;]            0B        </span></span>
<span class="line"><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">missing</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">      3 weeks ago   /bin/sh -c </span><span style="color:#6A737D;">#(nop) ADD file:bb1fa1d9d012ae826…   77.8MB    </span></span>
<span class="line"><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">missing</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">      3 weeks ago   /bin/sh -c </span><span style="color:#6A737D;">#(nop)  LABEL org.opencontainers.…   0B        </span></span>
<span class="line"><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">missing</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">      3 weeks ago   /bin/sh -c </span><span style="color:#6A737D;">#(nop)  LABEL org.opencontainers.…   0B        </span></span>
<span class="line"><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">missing</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">      3 weeks ago   /bin/sh -c </span><span style="color:#6A737D;">#(nop)  ARG LAUNCHPAD_BUILD_ARCH     0B        </span></span>
<span class="line"><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">missing</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">      3 weeks ago   /bin/sh -c </span><span style="color:#6A737D;">#(nop)  ARG RELEASE                  0B</span></span></code></pre></div><ul><li>脚本形式查查</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#!/bin/bash</span></span>
<span class="line"><span style="color:#F97583;">case</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;">$OSTYPE</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">in</span></span>
<span class="line"><span style="color:#E1E4E8;">    linux</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">history</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--no-trunc</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--format</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;{{.CreatedBy}}&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">$1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># extract information from layers</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">tac</span><span style="color:#E1E4E8;">                                                    </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># reverse the file</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;s,^\\(|3.*\\)\\?/bin/\\(ba\\)\\?sh -c,RUN,&#39;</span><span style="color:#E1E4E8;">             </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># change /bin/(ba)?sh calls to RUN</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;s,^RUN #(nop) *,,&#39;</span><span style="color:#E1E4E8;">                                </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># remove RUN #(nop) calls for ENV,LABEL...</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;s,  *&amp;&amp;  *, \\\\\\n \\&amp;\\&amp; ,g&#39;</span><span style="color:#E1E4E8;">                           </span><span style="color:#6A737D;"># pretty print multi command lines following Docker best practices</span></span>
<span class="line"><span style="color:#E1E4E8;">    ;;</span></span>
<span class="line"><span style="color:#E1E4E8;">    darwin</span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">history</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--no-trunc</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--format</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;{{.CreatedBy}}&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">$1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># extract information from layers</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">tail</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-r</span><span style="color:#E1E4E8;">                                                </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># reverse the file</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-E</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;s,^(\\|3.*)?/bin/(ba)?sh -c,RUN,&#39;</span><span style="color:#E1E4E8;">               </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># change /bin/(ba)?sh calls to RUN</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;s,^RUN #(nop) *,,&#39;</span><span style="color:#E1E4E8;">                                </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># remove RUN #(nop) calls for ENV,LABEL...</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">sed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">$&#39;s,  *&amp;&amp;  *, </span><span style="color:#79B8FF;">\\\\</span><span style="color:#9ECBFF;">\\ </span><span style="color:#79B8FF;">\\\\\\n</span><span style="color:#9ECBFF;"> \\&amp;\\&amp; ,g&#39;</span><span style="color:#E1E4E8;">                      </span><span style="color:#6A737D;"># pretty print multi command lines following Docker best practices</span></span>
<span class="line"><span style="color:#E1E4E8;">    ;;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">echo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;unknown OSTYPE: </span><span style="color:#E1E4E8;">$OSTYPE</span><span style="color:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    ;;</span></span>
<span class="line"><span style="color:#F97583;">esac</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#!/bin/bash</span></span>
<span class="line"><span style="color:#D73A49;">case</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">$OSTYPE</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">in</span></span>
<span class="line"><span style="color:#24292E;">    linux</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">history</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--no-trunc</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--format</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;{{.CreatedBy}}&quot;</span><span style="color:#24292E;"> </span><span style="color:#E36209;">$1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># extract information from layers</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">tac</span><span style="color:#24292E;">                                                    </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># reverse the file</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">sed</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;s,^\\(|3.*\\)\\?/bin/\\(ba\\)\\?sh -c,RUN,&#39;</span><span style="color:#24292E;">             </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># change /bin/(ba)?sh calls to RUN</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">sed</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;s,^RUN #(nop) *,,&#39;</span><span style="color:#24292E;">                                </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># remove RUN #(nop) calls for ENV,LABEL...</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">sed</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;s,  *&amp;&amp;  *, \\\\\\n \\&amp;\\&amp; ,g&#39;</span><span style="color:#24292E;">                           </span><span style="color:#6A737D;"># pretty print multi command lines following Docker best practices</span></span>
<span class="line"><span style="color:#24292E;">    ;;</span></span>
<span class="line"><span style="color:#24292E;">    darwin</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">history</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--no-trunc</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--format</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;{{.CreatedBy}}&quot;</span><span style="color:#24292E;"> </span><span style="color:#E36209;">$1</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># extract information from layers</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">tail</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-r</span><span style="color:#24292E;">                                                </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># reverse the file</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">sed</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-E</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;s,^(\\|3.*)?/bin/(ba)?sh -c,RUN,&#39;</span><span style="color:#24292E;">               </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># change /bin/(ba)?sh calls to RUN</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">sed</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;s,^RUN #(nop) *,,&#39;</span><span style="color:#24292E;">                                </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># remove RUN #(nop) calls for ENV,LABEL...</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">sed</span><span style="color:#24292E;"> </span><span style="color:#032F62;">$&#39;s,  *&amp;&amp;  *, </span><span style="color:#005CC5;">\\\\</span><span style="color:#032F62;">\\ </span><span style="color:#005CC5;">\\\\\\n</span><span style="color:#032F62;"> \\&amp;\\&amp; ,g&#39;</span><span style="color:#24292E;">                      </span><span style="color:#6A737D;"># pretty print multi command lines following Docker best practices</span></span>
<span class="line"><span style="color:#24292E;">    ;;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">echo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;unknown OSTYPE: </span><span style="color:#24292E;">$OSTYPE</span><span style="color:#032F62;">&quot;</span></span>
<span class="line"><span style="color:#24292E;">    ;;</span></span>
<span class="line"><span style="color:#D73A49;">esac</span></span></code></pre></div><h2 id="_1-8-删除镜像" tabindex="-1">1.8 删除镜像 <a class="header-anchor" href="#_1-8-删除镜像" aria-label="Permalink to &quot;1.8 删除镜像&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rmi</span><span style="color:#E1E4E8;"> [image_name]</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">image</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">prune</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">-清理不再使用的无标签镜像、悬挂镜像层以及未使用的缓存</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">-它会删除没有标签的临时镜像和镜像层，从而释放磁盘空间</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span></span>
<span class="line"><span style="color:#6A737D;">#dangling images表示TAG为&lt;none&gt;的镜像</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@DY-Ubuntu-01 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]#docker system prune</span></span>
<span class="line"><span style="color:#B392F0;">WARNING!</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">This</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">will</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">remove:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">all</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">stopped</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">containers</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">all</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">networks</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">not</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">used</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">by</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">at</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">least</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">one</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">container</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">all</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dangling</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">images</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">all</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dangling</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">build</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cache</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Are</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">you</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">sure</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">you</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">want</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">continue?</span><span style="color:#E1E4E8;"> [y/N] y</span></span>
<span class="line"><span style="color:#B392F0;">Total</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">reclaimed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">space:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">B</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@DY-Ubuntu-01 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]#docker system prune -f -a            </span><span style="color:#6A737D;">#清除不再使用的镜像</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@DY-Ubuntu-01 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]#docker rmi nginx</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@DY-Ubuntu-01 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]#docker rmi -f hello-world     </span><span style="color:#6A737D;">#强制删除正在使用的镜像，也会删除对应的容器</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@DY-Ubuntu-01 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]#docker rmi nginx httpd        </span><span style="color:#6A737D;">#删除多个镜像</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">-----</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@node1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker image prune            </span><span style="color:#6A737D;">#清理dangling虚无镜像（没被标记且没被其它任何镜像引用的镜像）</span></span>
<span class="line"><span style="color:#B392F0;">WARNING!</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">This</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">will</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">remove</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">all</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dangling</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">images.</span></span>
<span class="line"><span style="color:#B392F0;">Are</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">you</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">sure</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">you</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">want</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">continue?</span><span style="color:#E1E4E8;"> [y/N] y</span></span>
<span class="line"><span style="color:#B392F0;">Total</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">reclaimed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">space:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">B</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@node1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker image prune -a -f      </span><span style="color:#6A737D;">#清理dangling虚无镜像以及不再使用的镜像</span></span>
<span class="line"><span style="color:#B392F0;">Deleted</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Images:</span></span>
<span class="line"><span style="color:#B392F0;">untagged:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hello-world:latest</span></span>
<span class="line"><span style="color:#B392F0;">untagged:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hello-world@sha256:2498fce14358aa50ead0cc6c19990fc6ff866ce72aeb5546e1d59caac3d0d60f</span></span>
<span class="line"><span style="color:#B392F0;">deleted:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">sha256:feb5d9fea6a5e9606aa995e879d862b825965ba48de054caab5ef356dc6b3412</span></span>
<span class="line"><span style="color:#B392F0;">deleted:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">sha256:e07ee1baac5fae6a26f30cabfe54a36d3402f96afda318fe0a96cec4ca393359</span></span>
<span class="line"><span style="color:#B392F0;">deleted:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">sha256:780238f18c540007376dd5e904f583896a69fe620876cabc06977a3af4ba4fb5</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker rmi  image_id</span></span>
<span class="line"><span style="color:#6A737D;">#或者</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker rmi  -f image_id</span></span>
<span class="line"><span style="color:#B392F0;">-f</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">---</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">强制删除</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#强制删除全部镜像</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s1 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# docker rmi -f </span><span style="color:#9ECBFF;">$(</span><span style="color:#B392F0;">docker</span><span style="color:#9ECBFF;"> images </span><span style="color:#79B8FF;">-q</span><span style="color:#9ECBFF;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#删除悬空 的镜像</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rmi</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">$(</span><span style="color:#B392F0;">docker</span><span style="color:#9ECBFF;"> images </span><span style="color:#F97583;">|</span><span style="color:#9ECBFF;"> </span><span style="color:#B392F0;">grep</span><span style="color:#9ECBFF;"> &quot;^&lt;none&gt;&quot; </span><span style="color:#F97583;">|</span><span style="color:#9ECBFF;"> </span><span style="color:#B392F0;">awk</span><span style="color:#9ECBFF;"> &#39;{print $3}&#39;)</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rmi</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">$(</span><span style="color:#B392F0;">docker</span><span style="color:#9ECBFF;"> images </span><span style="color:#79B8FF;">-qf</span><span style="color:#9ECBFF;"> dangling=</span><span style="color:#79B8FF;">true</span><span style="color:#9ECBFF;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rmi</span><span style="color:#24292E;"> [image_name]</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">image</span><span style="color:#24292E;"> </span><span style="color:#032F62;">prune</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">-清理不再使用的无标签镜像、悬挂镜像层以及未使用的缓存</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">-它会删除没有标签的临时镜像和镜像层，从而释放磁盘空间</span></span>
<span class="line"><span style="color:#24292E;">	</span></span>
<span class="line"><span style="color:#6A737D;">#dangling images表示TAG为&lt;none&gt;的镜像</span></span>
<span class="line"><span style="color:#24292E;">[root@DY-Ubuntu-01 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]#docker system prune</span></span>
<span class="line"><span style="color:#6F42C1;">WARNING!</span><span style="color:#24292E;"> </span><span style="color:#032F62;">This</span><span style="color:#24292E;"> </span><span style="color:#032F62;">will</span><span style="color:#24292E;"> </span><span style="color:#032F62;">remove:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">all</span><span style="color:#24292E;"> </span><span style="color:#032F62;">stopped</span><span style="color:#24292E;"> </span><span style="color:#032F62;">containers</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">all</span><span style="color:#24292E;"> </span><span style="color:#032F62;">networks</span><span style="color:#24292E;"> </span><span style="color:#032F62;">not</span><span style="color:#24292E;"> </span><span style="color:#032F62;">used</span><span style="color:#24292E;"> </span><span style="color:#032F62;">by</span><span style="color:#24292E;"> </span><span style="color:#032F62;">at</span><span style="color:#24292E;"> </span><span style="color:#032F62;">least</span><span style="color:#24292E;"> </span><span style="color:#032F62;">one</span><span style="color:#24292E;"> </span><span style="color:#032F62;">container</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">all</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dangling</span><span style="color:#24292E;"> </span><span style="color:#032F62;">images</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">all</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dangling</span><span style="color:#24292E;"> </span><span style="color:#032F62;">build</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cache</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Are</span><span style="color:#24292E;"> </span><span style="color:#032F62;">you</span><span style="color:#24292E;"> </span><span style="color:#032F62;">sure</span><span style="color:#24292E;"> </span><span style="color:#032F62;">you</span><span style="color:#24292E;"> </span><span style="color:#032F62;">want</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">continue?</span><span style="color:#24292E;"> [y/N] y</span></span>
<span class="line"><span style="color:#6F42C1;">Total</span><span style="color:#24292E;"> </span><span style="color:#032F62;">reclaimed</span><span style="color:#24292E;"> </span><span style="color:#032F62;">space:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">B</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@DY-Ubuntu-01 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]#docker system prune -f -a            </span><span style="color:#6A737D;">#清除不再使用的镜像</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@DY-Ubuntu-01 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]#docker rmi nginx</span></span>
<span class="line"><span style="color:#24292E;">[root@DY-Ubuntu-01 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]#docker rmi -f hello-world     </span><span style="color:#6A737D;">#强制删除正在使用的镜像，也会删除对应的容器</span></span>
<span class="line"><span style="color:#24292E;">[root@DY-Ubuntu-01 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]#docker rmi nginx httpd        </span><span style="color:#6A737D;">#删除多个镜像</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">-----</span></span>
<span class="line"><span style="color:#24292E;">[root@node1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker image prune            </span><span style="color:#6A737D;">#清理dangling虚无镜像（没被标记且没被其它任何镜像引用的镜像）</span></span>
<span class="line"><span style="color:#6F42C1;">WARNING!</span><span style="color:#24292E;"> </span><span style="color:#032F62;">This</span><span style="color:#24292E;"> </span><span style="color:#032F62;">will</span><span style="color:#24292E;"> </span><span style="color:#032F62;">remove</span><span style="color:#24292E;"> </span><span style="color:#032F62;">all</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dangling</span><span style="color:#24292E;"> </span><span style="color:#032F62;">images.</span></span>
<span class="line"><span style="color:#6F42C1;">Are</span><span style="color:#24292E;"> </span><span style="color:#032F62;">you</span><span style="color:#24292E;"> </span><span style="color:#032F62;">sure</span><span style="color:#24292E;"> </span><span style="color:#032F62;">you</span><span style="color:#24292E;"> </span><span style="color:#032F62;">want</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">continue?</span><span style="color:#24292E;"> [y/N] y</span></span>
<span class="line"><span style="color:#6F42C1;">Total</span><span style="color:#24292E;"> </span><span style="color:#032F62;">reclaimed</span><span style="color:#24292E;"> </span><span style="color:#032F62;">space:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">B</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@node1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker image prune -a -f      </span><span style="color:#6A737D;">#清理dangling虚无镜像以及不再使用的镜像</span></span>
<span class="line"><span style="color:#6F42C1;">Deleted</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Images:</span></span>
<span class="line"><span style="color:#6F42C1;">untagged:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hello-world:latest</span></span>
<span class="line"><span style="color:#6F42C1;">untagged:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hello-world@sha256:2498fce14358aa50ead0cc6c19990fc6ff866ce72aeb5546e1d59caac3d0d60f</span></span>
<span class="line"><span style="color:#6F42C1;">deleted:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">sha256:feb5d9fea6a5e9606aa995e879d862b825965ba48de054caab5ef356dc6b3412</span></span>
<span class="line"><span style="color:#6F42C1;">deleted:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">sha256:e07ee1baac5fae6a26f30cabfe54a36d3402f96afda318fe0a96cec4ca393359</span></span>
<span class="line"><span style="color:#6F42C1;">deleted:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">sha256:780238f18c540007376dd5e904f583896a69fe620876cabc06977a3af4ba4fb5</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@k8s1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker rmi  image_id</span></span>
<span class="line"><span style="color:#6A737D;">#或者</span></span>
<span class="line"><span style="color:#24292E;">[root@k8s1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker rmi  -f image_id</span></span>
<span class="line"><span style="color:#6F42C1;">-f</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">---</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">强制删除</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#强制删除全部镜像</span></span>
<span class="line"><span style="color:#24292E;">[root@k8s1 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# docker rmi -f </span><span style="color:#032F62;">$(</span><span style="color:#6F42C1;">docker</span><span style="color:#032F62;"> images </span><span style="color:#005CC5;">-q</span><span style="color:#032F62;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#删除悬空 的镜像</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rmi</span><span style="color:#24292E;"> </span><span style="color:#032F62;">$(</span><span style="color:#6F42C1;">docker</span><span style="color:#032F62;"> images </span><span style="color:#D73A49;">|</span><span style="color:#032F62;"> </span><span style="color:#6F42C1;">grep</span><span style="color:#032F62;"> &quot;^&lt;none&gt;&quot; </span><span style="color:#D73A49;">|</span><span style="color:#032F62;"> </span><span style="color:#6F42C1;">awk</span><span style="color:#032F62;"> &#39;{print $3}&#39;)</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rmi</span><span style="color:#24292E;"> </span><span style="color:#032F62;">$(</span><span style="color:#6F42C1;">docker</span><span style="color:#032F62;"> images </span><span style="color:#005CC5;">-qf</span><span style="color:#032F62;"> dangling=</span><span style="color:#005CC5;">true</span><span style="color:#032F62;">)</span></span></code></pre></div>`,52),e=[o];function c(t,r,E,y,i,F){return n(),a("div",null,e)}const B=s(p,[["render",c]]);export{C as __pageData,B as default};
