import{_ as s,o as a,c as l,R as n}from"./chunks/framework.zUbWieqp.js";const b=JSON.parse('{"title":"1. Label","description":"","frontmatter":{},"headers":[],"relativePath":"guide/container/k8s/cmd/label.md","filePath":"guide/container/k8s/cmd/label.md","lastUpdated":1721891189000}'),p={name:"guide/container/k8s/cmd/label.md"},e=n(`<p>文档：<a href="https://kubernetes.io/zh/docs/concepts/overview/working-with-objects/labels/" target="_blank" rel="noreferrer">https://kubernetes.io/zh/docs/concepts/overview/working-with-objects/labels/</a></p><h1 id="_1-label" tabindex="-1">1. Label <a class="header-anchor" href="#_1-label" aria-label="Permalink to &quot;1. Label&quot;">​</a></h1><ol><li>Label是一个键值对，可以附加在任何对象上，比如Node,Pod,Service,RC等。Label和资源对象是多对多的关系，即一个Label可以被添加到多个对象上，一个对象也可以定义多个Label。</li><li>Label的作用主要用来实现精细的、多维度的资源分组管理，以便进行资源分配，调度，配置，部署等工作。</li><li>Label通俗理解就是“标签”，通过标签来过滤筛选指定的对象，进行具体的操作。k8s通过Label Selector(标签选择器)来筛选指定Label的资源对象，类似SQL语句中的条件查询（WHERE语句）。</li><li>Label Selector有基于等式和基于集合的两种表达方式，可以多个条件进行组合使用。</li></ol><ul><li>基于等式：name=redis-slave（匹配name=redis-slave的资源对象）;env!=product(匹配所有不具有标签env=product的资源对象)</li><li>基于集合：name in (redis-slave,redis-master);name not in (php-frontend)（匹配所有不具有标签name=php-frontend的资源对象）</li></ul><p><strong>使用场景</strong></p><ol><li>kube-controller进程通过资源对象RC上定义的Label Selector来筛选要监控的Pod副本数，从而实现副本数始终保持预期数目。</li><li>kube-proxy进程通过Service的Label Selector来选择对应Pod，自动建立每个Service到对应Pod的请求转发路由表，从而实现Service的智能负载均衡机制。</li><li>kube-scheduler实现Pod定向调度：对Node定义特定的Label，并且在Pod定义文件中使用NodeSelector标签调度策略。</li></ol><h2 id="_1-1-表达式" tabindex="-1">1.1 表达式 <a class="header-anchor" href="#_1-1-表达式" aria-label="Permalink to &quot;1.1 表达式&quot;">​</a></h2><p>标签选择器使用：<code>release==alpha</code>，表示过滤有<code>release=alpha</code>这个标签的资源，才符合条件。</p><ul><li><code>KEY in (VALUE1,VALUE2,…)</code> ：指定的键名的值存在于给定的列表中即满足条件；</li><li><code>KEY notin (VALUE1,VALUE2,…)</code> ：指定的键名的值不存在于给定列表中即满足条件；</li><li><code>KEY</code>：所有存在此键名标签的资源；</li><li><code>!KEY</code>：所有不存在此键名标签的资源。</li></ul><h2 id="_1-2-标签命名规范" tabindex="-1">1.2 标签命名规范 <a class="header-anchor" href="#_1-2-标签命名规范" aria-label="Permalink to &quot;1.2 标签命名规范&quot;">​</a></h2><h3 id="_1-2-1-标签名" tabindex="-1">1.2.1 标签名 <a class="header-anchor" href="#_1-2-1-标签名" aria-label="Permalink to &quot;1.2.1 标签名&quot;">​</a></h3><ul><li>标签名部分是必须的。</li><li>不能多余 63 个字符。</li><li>必须由字母、数字开始和结尾。</li><li>可以包含字母、数字、减号（-）、下划线（_）、小数点（.）</li></ul><h3 id="_1-2-2-标签的value" tabindex="-1">1.2.2 标签的value <a class="header-anchor" href="#_1-2-2-标签的value" aria-label="Permalink to &quot;1.2.2 标签的value&quot;">​</a></h3><ul><li>不能多于 63 个字符。</li><li>可以为空字符串。</li><li>如果不为空，则必须由字母、数字开始和结尾。</li><li>如果不为空，可以包含字母、数字、减号（-）、下划线（_）、小数点（.）</li></ul><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">Pod</span></span>
<span class="line"><span style="color:#85E89D;">metadata</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">label-demo</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">labels</span><span style="color:#E1E4E8;">:		</span><span style="color:#6A737D;">#标签</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">environment</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">production</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">app</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx</span></span>
<span class="line"><span style="color:#85E89D;">spec</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">containers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">nginx:1.14.2</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">ports</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">containerPort</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">80</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">Pod</span></span>
<span class="line"><span style="color:#22863A;">metadata</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">label-demo</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">labels</span><span style="color:#24292E;">:		</span><span style="color:#6A737D;">#标签</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">environment</span><span style="color:#24292E;">: </span><span style="color:#032F62;">production</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">app</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx</span></span>
<span class="line"><span style="color:#22863A;">spec</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">containers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">nginx:1.14.2</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">ports</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">containerPort</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">80</span></span></code></pre></div><h1 id="_2-label添加删除" tabindex="-1">2. Label添加删除 <a class="header-anchor" href="#_2-label添加删除" aria-label="Permalink to &quot;2. Label添加删除&quot;">​</a></h1><p><a href="https://kubernetes.io/docs/tasks/configure-pod-container/assign-pods-nodes/" target="_blank" rel="noreferrer">https://kubernetes.io/docs/tasks/configure-pod-container/assign-pods-nodes/</a></p><h2 id="_2-1-node" tabindex="-1">2.1 node <a class="header-anchor" href="#_2-1-node" aria-label="Permalink to &quot;2.1 node&quot;">​</a></h2><h3 id="添加" tabindex="-1">添加 <a class="header-anchor" href="#添加" aria-label="Permalink to &quot;添加&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#语法</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">label</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nodes</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">node-name</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">label_name=label_value</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#案例</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master yaml]# kubectl label nodes kube-node03 test=hello</span></span>
<span class="line"><span style="color:#B392F0;">node/kube-node03</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">labeled</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#语法</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">label</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nodes</span><span style="color:#24292E;"> </span><span style="color:#032F62;">node-name</span><span style="color:#24292E;"> </span><span style="color:#032F62;">label_name=label_value</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#案例</span></span>
<span class="line"><span style="color:#24292E;">[root@kube-master yaml]# kubectl label nodes kube-node03 test=hello</span></span>
<span class="line"><span style="color:#6F42C1;">node/kube-node03</span><span style="color:#24292E;"> </span><span style="color:#032F62;">labeled</span></span></code></pre></div><h3 id="查看" tabindex="-1">查看 <a class="header-anchor" href="#查看" aria-label="Permalink to &quot;查看&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 查看所有标签</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nodes</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--show-labels</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 查看所有标签</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nodes</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--show-labels</span></span></code></pre></div><h3 id="删除" tabindex="-1">删除 <a class="header-anchor" href="#删除" aria-label="Permalink to &quot;删除&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#删除一个label，只需在命令行最后指定label的key名并与一个减号相连即可：</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master yaml]# kubectl label nodes kube-node03 test-</span></span>
<span class="line"><span style="color:#B392F0;">node/kube-node03</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">labeled</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#删除一个label，只需在命令行最后指定label的key名并与一个减号相连即可：</span></span>
<span class="line"><span style="color:#24292E;">[root@kube-master yaml]# kubectl label nodes kube-node03 test-</span></span>
<span class="line"><span style="color:#6F42C1;">node/kube-node03</span><span style="color:#24292E;"> </span><span style="color:#032F62;">labeled</span></span></code></pre></div><h3 id="修改" tabindex="-1">修改 <a class="header-anchor" href="#修改" aria-label="Permalink to &quot;修改&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#修改一个label的值，需要加上--overwrite参数</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master yaml]# kubectl label nodes kube-node03 test=world --overwrite</span></span>
<span class="line"><span style="color:#B392F0;">node/kube-node03</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">labeled</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#修改一个label的值，需要加上--overwrite参数</span></span>
<span class="line"><span style="color:#24292E;">[root@kube-master yaml]# kubectl label nodes kube-node03 test=world --overwrite</span></span>
<span class="line"><span style="color:#6F42C1;">node/kube-node03</span><span style="color:#24292E;"> </span><span style="color:#032F62;">labeled</span></span></code></pre></div><h2 id="_2-2-pod" tabindex="-1">2.2 pod <a class="header-anchor" href="#_2-2-pod" aria-label="Permalink to &quot;2.2 pod&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># Update pod &#39;foo&#39; with the label &#39;unhealthy&#39; and the value &#39;true&#39;.</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">label</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pods</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">foo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">unhealthy=</span><span style="color:#79B8FF;">true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># Update pod &#39;foo&#39; with the label &#39;status&#39; and the value &#39;unhealthy&#39;, overwriting any existing value.</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">label</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--overwrite</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pods</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">foo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status=unhealthy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># Update all pods in the namespace</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">label</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pods</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--all</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status=unhealthy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># Update a pod identified by the type and name in &quot;pod.json&quot;</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">label</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pod.json</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status=unhealthy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># Update pod &#39;foo&#39; only if the resource is unchanged from version 1.</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">label</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pods</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">foo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status=unhealthy</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--resource-version=1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># Update pod &#39;foo&#39; by removing a label named &#39;bar&#39; if it exists.</span></span>
<span class="line"><span style="color:#6A737D;"># Does not require the --overwrite flag.</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">label</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pods</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">foo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bar-</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># Update pod &#39;foo&#39; with the label &#39;unhealthy&#39; and the value &#39;true&#39;.</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">label</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pods</span><span style="color:#24292E;"> </span><span style="color:#032F62;">foo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">unhealthy=</span><span style="color:#005CC5;">true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># Update pod &#39;foo&#39; with the label &#39;status&#39; and the value &#39;unhealthy&#39;, overwriting any existing value.</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">label</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--overwrite</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pods</span><span style="color:#24292E;"> </span><span style="color:#032F62;">foo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status=unhealthy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># Update all pods in the namespace</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">label</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pods</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--all</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status=unhealthy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># Update a pod identified by the type and name in &quot;pod.json&quot;</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">label</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pod.json</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status=unhealthy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># Update pod &#39;foo&#39; only if the resource is unchanged from version 1.</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">label</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pods</span><span style="color:#24292E;"> </span><span style="color:#032F62;">foo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status=unhealthy</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--resource-version=1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># Update pod &#39;foo&#39; by removing a label named &#39;bar&#39; if it exists.</span></span>
<span class="line"><span style="color:#6A737D;"># Does not require the --overwrite flag.</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">label</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pods</span><span style="color:#24292E;"> </span><span style="color:#032F62;">foo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bar-</span></span></code></pre></div><h3 id="查看当前pod" tabindex="-1">查看当前pod <a class="header-anchor" href="#查看当前pod" aria-label="Permalink to &quot;查看当前pod&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">kubectl get pods --show-labels</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">kubectl get pods --show-labels</span></span></code></pre></div><h3 id="过滤app-demoapp" tabindex="-1">过滤app=demoapp <a class="header-anchor" href="#过滤app-demoapp" aria-label="Permalink to &quot;过滤app=demoapp&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pods</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">app=demoapp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--show-labels</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pods</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-l</span><span style="color:#24292E;"> </span><span style="color:#032F62;">app=demoapp</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--show-labels</span></span></code></pre></div><p>或者使用不等来过滤pod</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">kubectl get pods -l app!=demoapp --show-labels</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">#注意此处使用不等于时，没有LABEL的pod也会被选中</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">kubectl get pods -l app!=demoapp --show-labels</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">#注意此处使用不等于时，没有LABEL的pod也会被选中</span></span></code></pre></div><h3 id="没有app标签的pod" tabindex="-1">没有app标签的pod <a class="header-anchor" href="#没有app标签的pod" aria-label="Permalink to &quot;没有app标签的pod&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pods</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;!app&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--show-labels</span><span style="color:#E1E4E8;">     </span><span style="color:#6A737D;"># 需要注意此处需要使用单引号，否则将作为shell命令执行。</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pods</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-l</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;!app&#39;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--show-labels</span><span style="color:#24292E;">     </span><span style="color:#6A737D;"># 需要注意此处需要使用单引号，否则将作为shell命令执行。</span></span></code></pre></div><h3 id="对app键的值做判断" tabindex="-1">对app键的值做判断 <a class="header-anchor" href="#对app键的值做判断" aria-label="Permalink to &quot;对app键的值做判断&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">kubectl get pods -l &#39;app in (mypod,demoapp)&#39; --show-labels</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">kubectl get pods -l &#39;app in (mypod,demoapp)&#39; --show-labels</span></span></code></pre></div><h3 id="对app键做不存在判断" tabindex="-1">对app键做不存在判断 <a class="header-anchor" href="#对app键做不存在判断" aria-label="Permalink to &quot;对app键做不存在判断&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pods</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;app notin (mypod,demoapp)&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--show-labels</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pods</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-l</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;app notin (mypod,demoapp)&#39;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--show-labels</span></span></code></pre></div><h3 id="对多个键值过滤" tabindex="-1">对多个键值过滤 <a class="header-anchor" href="#对多个键值过滤" aria-label="Permalink to &quot;对多个键值过滤&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pods</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;app=demoapp,release=canary&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--show-labels</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#app和release之间为与逻辑必须要同时满足</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pods</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-l</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;app=demoapp,release=canary&#39;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--show-labels</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#app和release之间为与逻辑必须要同时满足</span></span></code></pre></div>`,42),o=[e];function t(c,r,i,y,d,E){return a(),l("div",null,o)}const u=s(p,[["render",t]]);export{b as __pageData,u as default};
