import{_ as s,o as a,c as n,R as l}from"./chunks/framework.zUbWieqp.js";const F=JSON.parse('{"title":"1.ck底层数据目录分布","description":"","frontmatter":{},"headers":[],"relativePath":"guide/Linux/Logs/Clickhouse/1-architecture_data_dir.md","filePath":"guide/Linux/Logs/Clickhouse/1-architecture_data_dir.md","lastUpdated":1731319766000}'),p={name:"guide/Linux/Logs/Clickhouse/1-architecture_data_dir.md"},o=l(`<h1 id="_1-ck底层数据目录分布" tabindex="-1">1.ck底层数据目录分布 <a class="header-anchor" href="#_1-ck底层数据目录分布" aria-label="Permalink to &quot;1.ck底层数据目录分布&quot;">​</a></h1><p><code>基于23讲解</code></p><p>数据库本质上就是一个由各种子目录和文件组成的文件目录。clickhouse默认数据目录</p><p>在/var/lib/clickhouse/data目录中。所有的数据库都会在该目录中创建一个子文件夹</p><h2 id="_1-1查看目录" tabindex="-1">1.1查看目录 <a class="header-anchor" href="#_1-1查看目录" aria-label="Permalink to &quot;1.1查看目录&quot;">​</a></h2><p>[root@kubeadm-master01 clickhouse]# ll</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">总用量 8</span></span>
<span class="line"><span style="color:#e1e4e8;">drwxr-x---  2 clickhouse clickhouse 116 10月 25 15:20 access</span></span>
<span class="line"><span style="color:#e1e4e8;">drwxr-x---  2 clickhouse clickhouse   6 10月 25 15:20 cores</span></span>
<span class="line"><span style="color:#e1e4e8;">drwxr-x---  5 clickhouse clickhouse  52 10月 30 14:11 data</span></span>
<span class="line"><span style="color:#e1e4e8;">drwxr-x---  2 clickhouse clickhouse   6 10月 25 15:20 dictionaries_lib</span></span>
<span class="line"><span style="color:#e1e4e8;">drwxr-x---  2 clickhouse clickhouse  30 11月  7 12:06 flags</span></span>
<span class="line"><span style="color:#e1e4e8;">drwxr-x---  2 clickhouse clickhouse   6 10月 25 15:20 format_schemas</span></span>
<span class="line"><span style="color:#e1e4e8;">drwxr-x---  2 clickhouse clickhouse 170 11月  9 09:56 metadata</span></span>
<span class="line"><span style="color:#e1e4e8;">drwxr-x---  2 clickhouse clickhouse   6 11月  7 12:10 metadata_dropped</span></span>
<span class="line"><span style="color:#e1e4e8;">drwxr-x---  2 clickhouse clickhouse   6 10月 25 15:20 named_collections</span></span>
<span class="line"><span style="color:#e1e4e8;">drwxr-x---  2 clickhouse clickhouse  41 10月 25 15:20 preprocessed_configs</span></span>
<span class="line"><span style="color:#e1e4e8;">drwxr-xr-x  6 clickhouse clickhouse 156 11月  7 12:01 shadow</span></span>
<span class="line"><span style="color:#e1e4e8;">-rw-r-----  1 clickhouse clickhouse  58 11月  9 09:45 status</span></span>
<span class="line"><span style="color:#e1e4e8;">drwxr-x--- 12 clickhouse clickhouse 116 11月  7 12:10 store</span></span>
<span class="line"><span style="color:#e1e4e8;">drwxr-x---  2 clickhouse clickhouse   6 11月  9 09:44 tmp</span></span>
<span class="line"><span style="color:#e1e4e8;">drwxr-x---  2 clickhouse clickhouse   6 10月 25 15:20 user_defined</span></span>
<span class="line"><span style="color:#e1e4e8;">drwxr-x---  2 clickhouse clickhouse   6 10月 25 15:20 user_files</span></span>
<span class="line"><span style="color:#e1e4e8;">drwxr-x---  2 clickhouse clickhouse   6 10月 25 15:20 user_scripts</span></span>
<span class="line"><span style="color:#e1e4e8;">-rw-r-----  1 clickhouse clickhouse  36 10月 25 15:20 [uuid]()</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">总用量 8</span></span>
<span class="line"><span style="color:#24292e;">drwxr-x---  2 clickhouse clickhouse 116 10月 25 15:20 access</span></span>
<span class="line"><span style="color:#24292e;">drwxr-x---  2 clickhouse clickhouse   6 10月 25 15:20 cores</span></span>
<span class="line"><span style="color:#24292e;">drwxr-x---  5 clickhouse clickhouse  52 10月 30 14:11 data</span></span>
<span class="line"><span style="color:#24292e;">drwxr-x---  2 clickhouse clickhouse   6 10月 25 15:20 dictionaries_lib</span></span>
<span class="line"><span style="color:#24292e;">drwxr-x---  2 clickhouse clickhouse  30 11月  7 12:06 flags</span></span>
<span class="line"><span style="color:#24292e;">drwxr-x---  2 clickhouse clickhouse   6 10月 25 15:20 format_schemas</span></span>
<span class="line"><span style="color:#24292e;">drwxr-x---  2 clickhouse clickhouse 170 11月  9 09:56 metadata</span></span>
<span class="line"><span style="color:#24292e;">drwxr-x---  2 clickhouse clickhouse   6 11月  7 12:10 metadata_dropped</span></span>
<span class="line"><span style="color:#24292e;">drwxr-x---  2 clickhouse clickhouse   6 10月 25 15:20 named_collections</span></span>
<span class="line"><span style="color:#24292e;">drwxr-x---  2 clickhouse clickhouse  41 10月 25 15:20 preprocessed_configs</span></span>
<span class="line"><span style="color:#24292e;">drwxr-xr-x  6 clickhouse clickhouse 156 11月  7 12:01 shadow</span></span>
<span class="line"><span style="color:#24292e;">-rw-r-----  1 clickhouse clickhouse  58 11月  9 09:45 status</span></span>
<span class="line"><span style="color:#24292e;">drwxr-x--- 12 clickhouse clickhouse 116 11月  7 12:10 store</span></span>
<span class="line"><span style="color:#24292e;">drwxr-x---  2 clickhouse clickhouse   6 11月  9 09:44 tmp</span></span>
<span class="line"><span style="color:#24292e;">drwxr-x---  2 clickhouse clickhouse   6 10月 25 15:20 user_defined</span></span>
<span class="line"><span style="color:#24292e;">drwxr-x---  2 clickhouse clickhouse   6 10月 25 15:20 user_files</span></span>
<span class="line"><span style="color:#24292e;">drwxr-x---  2 clickhouse clickhouse   6 10月 25 15:20 user_scripts</span></span>
<span class="line"><span style="color:#24292e;">-rw-r-----  1 clickhouse clickhouse  36 10月 25 15:20 [uuid]()</span></span></code></pre></div><h3 id="_1-介绍" tabindex="-1">1.介绍 <a class="header-anchor" href="#_1-介绍" aria-label="Permalink to &quot;1.介绍&quot;">​</a></h3><table><thead><tr><th>目录</th><th>作用</th></tr></thead><tbody><tr><td><code>data</code></td><td>数据存储路径</td></tr><tr><td><code>metadata</code></td><td>数据库元数据路径，该目录下的文件是表结构信息</td></tr><tr><td><code>store</code></td><td>存储表数据</td></tr><tr><td>access</td><td>访问控制配置文件，对用户、角色、权限的定义，决定了哪些用户能够执行哪些操作</td></tr><tr><td>cores</td><td>核心数据库引擎的文件和资源</td></tr><tr><td>dictionaries_lib</td><td>字典机制允许用户将外部数据源（如文件、数据库、HTTP 服务等）作为外部字典引入到 ClickHouse 查询中</td></tr><tr><td>flags</td><td>与表的元数据和配置有关，常见标志、Merge、Write、Compression</td></tr><tr><td>format_schemas</td><td>用于存储和处理 ClickHouse 表的不同数据格式方案</td></tr><tr><td><code>metadata_dropped</code></td><td>用于存储被删除的表和列的元数据</td></tr><tr><td>named_collections</td><td>用于存储和管理命名集合类型（如 <code>Array</code>、<code>Tuple</code>、<code>Map</code>）的相关功能和数据结构</td></tr><tr><td>preprocessed_configs</td><td>存放经过预处理的配置文件</td></tr><tr><td>shadow</td><td>存储查询执行期间的临时数据</td></tr><tr><td>status(file)</td><td>记录ck进程pid和启动时间以及版本号</td></tr><tr><td>tmp</td><td></td></tr><tr><td>user_defined</td><td>指定自定义模块路径</td></tr><tr><td>user_files</td><td>通常用于存储用户上传的文件</td></tr><tr><td>user_scripts</td><td>存放用户自定义的脚本文件</td></tr><tr><td><a href="./">uuid</a></td><td>全局唯一的标识符</td></tr></tbody></table><p>metadata_dropped:</p><h3 id="主要作用" tabindex="-1">主要作用： <a class="header-anchor" href="#主要作用" aria-label="Permalink to &quot;主要作用：&quot;">​</a></h3><ol><li><strong>数据恢复</strong>：如果用户不小心删除了表或列，<code>metadata_dropped</code> 目录提供了一定的恢复可能性，因为这些元数据还没有被永久删除。</li><li><strong>优化删除操作</strong>：直接删除大表或列可能会导致磁盘IO的高峰，而将元数据移入 <code>metadata_dropped</code> 目录，使得系统可以延迟实际的物理删除操作，避免性能问题。</li><li><strong>追踪历史</strong>：通过 <code>metadata_dropped</code>，可以追踪到曾经存在但已经删除的表和列的历史信息。对于审计和管理操作很有帮助</li></ol><p>preprocessed_configs:</p><p>1.<strong>调试和故障排除</strong>：如果在使用过程中遇到配置问题，查看 <code>preprocessed_configs</code> 目录中的文件可以帮助管理员确定哪些配置已经被加载并被应用，这对排查配置错误或不一致性非常有用</p><p>shadow:</p><p><strong>查询执行期间的数据临时存储</strong>：当进行某些操作时，ClickHouse 会将中间结果写入 <code>shadow</code> 目录，保证查询能正确执行。</p><p><strong>避免对主表数据的直接修改</strong>：操作过程中产生的临时数据不会直接修改原始数据表，这样可以降低数据损坏的风险。</p><p><strong>提高查询性能</strong>：通过将中间结果存储在 <code>shadow</code> 目录中，ClickHouse 能够避免频繁访问原始数据，提升查询效率。</p><p>status：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">PID: 1318</span></span>
<span class="line"><span style="color:#e1e4e8;">Started at: 2024-11-09 09:45:06</span></span>
<span class="line"><span style="color:#e1e4e8;">Revision: 54481</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">PID: 1318</span></span>
<span class="line"><span style="color:#24292e;">Started at: 2024-11-09 09:45:06</span></span>
<span class="line"><span style="color:#24292e;">Revision: 54481</span></span></code></pre></div><h2 id="_1-2表文件结构组成" tabindex="-1">1.2表文件结构组成 <a class="header-anchor" href="#_1-2表文件结构组成" aria-label="Permalink to &quot;1.2表文件结构组成&quot;">​</a></h2><h3 id="_1-创建库" tabindex="-1">1.创建库 <a class="header-anchor" href="#_1-创建库" aria-label="Permalink to &quot;1.创建库&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">database</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">create</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">database</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">;</span></span></code></pre></div><h3 id="_2-创建表" tabindex="-1">2.创建表 <a class="header-anchor" href="#_2-创建表" aria-label="Permalink to &quot;2.创建表&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">table</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">.t_student</span></span>
<span class="line"><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">    id </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;"> String,</span></span>
<span class="line"><span style="color:#E1E4E8;">    age </span><span style="color:#F97583;">int</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">\`heigth\`</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">int</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">engine </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> TinyLog;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">create</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">table</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">test</span><span style="color:#24292E;">.t_student</span></span>
<span class="line"><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    id </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> String,</span></span>
<span class="line"><span style="color:#24292E;">    age </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">\`heigth\`</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">int</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">engine </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> TinyLog;</span></span></code></pre></div><blockquote><p>字段类型、表引擎区分大小写</p></blockquote><h3 id="_3-查看" tabindex="-1">3.查看 <a class="header-anchor" href="#_3-查看" aria-label="Permalink to &quot;3.查看&quot;">​</a></h3><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">select</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">system</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">databases</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;test&#39;</span><span style="color:#E1E4E8;"> format Vertical;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">SELECT</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span></span>
<span class="line"><span style="color:#F97583;">FROM</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">system</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">databases</span></span>
<span class="line"><span style="color:#F97583;">WHERE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;test&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">FORMAT Vertical</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">Query id: d2a445db</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">f2a8</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">419c</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">a9fe</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">82fd18eb076d</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">Row</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">──────</span></span>
<span class="line"><span style="color:#F97583;">name</span><span style="color:#E1E4E8;">:          test</span></span>
<span class="line"><span style="color:#E1E4E8;">engine:        </span><span style="color:#F97583;">Atomic</span></span>
<span class="line"><span style="color:#E1E4E8;">data_path:     </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">var</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">lib</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">clickhouse</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">store</span><span style="color:#F97583;">/</span></span>
<span class="line"><span style="color:#E1E4E8;">metadata_path: </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">var</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">lib</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">clickhouse</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">store</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">24c</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">24c8503c</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">8d69</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">4279</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">8dba</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">06894e5a7573</span><span style="color:#F97583;">/</span></span>
<span class="line"><span style="color:#E1E4E8;">uuid:          24c8503c</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">8d69</span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">4279</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">8dba</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">06894e5a7573</span></span>
<span class="line"><span style="color:#E1E4E8;">engine_full:   </span><span style="color:#F97583;">Atomic</span></span>
<span class="line"><span style="color:#E1E4E8;">comment:</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">system</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">databases</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;test&#39;</span><span style="color:#24292E;"> format Vertical;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">SELECT</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span></span>
<span class="line"><span style="color:#D73A49;">FROM</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">system</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">databases</span></span>
<span class="line"><span style="color:#D73A49;">WHERE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;test&#39;</span></span>
<span class="line"><span style="color:#24292E;">FORMAT Vertical</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">Query id: d2a445db</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">f2a8</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">419c</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">a9fe</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">82fd18eb076d</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">Row</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">──────</span></span>
<span class="line"><span style="color:#D73A49;">name</span><span style="color:#24292E;">:          test</span></span>
<span class="line"><span style="color:#24292E;">engine:        </span><span style="color:#D73A49;">Atomic</span></span>
<span class="line"><span style="color:#24292E;">data_path:     </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">var</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">lib</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">clickhouse</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">store</span><span style="color:#D73A49;">/</span></span>
<span class="line"><span style="color:#24292E;">metadata_path: </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">var</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">lib</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">clickhouse</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">store</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">24c</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">24c8503c</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">8d69</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">4279</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">8dba</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">06894e5a7573</span><span style="color:#D73A49;">/</span></span>
<span class="line"><span style="color:#24292E;">uuid:          24c8503c</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">8d69</span><span style="color:#D73A49;">-</span><span style="color:#005CC5;">4279</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">8dba</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">06894e5a7573</span></span>
<span class="line"><span style="color:#24292E;">engine_full:   </span><span style="color:#D73A49;">Atomic</span></span>
<span class="line"><span style="color:#24292E;">comment:</span></span></code></pre></div><ul><li><code>data_path</code>：数据存储路径</li><li><code>metadata_path</code>：数据库元数据路径，该目录下的文件是表结构信息</li><li><code>uuid</code>：uuid 是存储目录的一部分</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#进入到数据库目录下</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/var/lib/clickhouse/data/test</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#进入到表目录下</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@kubeadm-master01 test]# ll</span></span>
<span class="line"><span style="color:#B392F0;">/var/lib/clickhouse/store/af2/af2d1669-0478-4603-afbb-61b28e295a1e/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看，这个里面存放了以表结构形式存放数据</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@kubeadm-master01 t_student]# ll</span></span>
<span class="line"><span style="color:#B392F0;">总用量</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">20</span></span>
<span class="line"><span style="color:#B392F0;">-rw-r-----</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clickhouse</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clickhouse</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">11</span><span style="color:#9ECBFF;">月</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">9</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">11</span><span style="color:#9ECBFF;">:32</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">age.bin</span></span>
<span class="line"><span style="color:#B392F0;">-rw-r-----</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clickhouse</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clickhouse</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">11</span><span style="color:#9ECBFF;">月</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">9</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">11</span><span style="color:#9ECBFF;">:32</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">heigth.bin</span></span>
<span class="line"><span style="color:#B392F0;">-rw-r-----</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clickhouse</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clickhouse</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">11</span><span style="color:#9ECBFF;">月</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">9</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">11</span><span style="color:#9ECBFF;">:32</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">id.bin</span></span>
<span class="line"><span style="color:#B392F0;">-rw-r-----</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clickhouse</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clickhouse</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">33</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">11</span><span style="color:#9ECBFF;">月</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">9</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">11</span><span style="color:#9ECBFF;">:32</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">name.bin</span></span>
<span class="line"><span style="color:#B392F0;">-rw-r-----</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clickhouse</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clickhouse</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">123</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">11</span><span style="color:#9ECBFF;">月</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">9</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">11</span><span style="color:#9ECBFF;">:32</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">sizes.js</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#进入到数据库目录下</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/var/lib/clickhouse/data/test</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#进入到表目录下</span></span>
<span class="line"><span style="color:#24292E;">[root@kubeadm-master01 test]# ll</span></span>
<span class="line"><span style="color:#6F42C1;">/var/lib/clickhouse/store/af2/af2d1669-0478-4603-afbb-61b28e295a1e/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看，这个里面存放了以表结构形式存放数据</span></span>
<span class="line"><span style="color:#24292E;">[root@kubeadm-master01 t_student]# ll</span></span>
<span class="line"><span style="color:#6F42C1;">总用量</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">20</span></span>
<span class="line"><span style="color:#6F42C1;">-rw-r-----</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#032F62;">clickhouse</span><span style="color:#24292E;"> </span><span style="color:#032F62;">clickhouse</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">30</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">11</span><span style="color:#032F62;">月</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">9</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">11</span><span style="color:#032F62;">:32</span><span style="color:#24292E;"> </span><span style="color:#032F62;">age.bin</span></span>
<span class="line"><span style="color:#6F42C1;">-rw-r-----</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#032F62;">clickhouse</span><span style="color:#24292E;"> </span><span style="color:#032F62;">clickhouse</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">30</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">11</span><span style="color:#032F62;">月</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">9</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">11</span><span style="color:#032F62;">:32</span><span style="color:#24292E;"> </span><span style="color:#032F62;">heigth.bin</span></span>
<span class="line"><span style="color:#6F42C1;">-rw-r-----</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#032F62;">clickhouse</span><span style="color:#24292E;"> </span><span style="color:#032F62;">clickhouse</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">30</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">11</span><span style="color:#032F62;">月</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">9</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">11</span><span style="color:#032F62;">:32</span><span style="color:#24292E;"> </span><span style="color:#032F62;">id.bin</span></span>
<span class="line"><span style="color:#6F42C1;">-rw-r-----</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#032F62;">clickhouse</span><span style="color:#24292E;"> </span><span style="color:#032F62;">clickhouse</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">33</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">11</span><span style="color:#032F62;">月</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">9</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">11</span><span style="color:#032F62;">:32</span><span style="color:#24292E;"> </span><span style="color:#032F62;">name.bin</span></span>
<span class="line"><span style="color:#6F42C1;">-rw-r-----</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#032F62;">clickhouse</span><span style="color:#24292E;"> </span><span style="color:#032F62;">clickhouse</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">123</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">11</span><span style="color:#032F62;">月</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">9</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">11</span><span style="color:#032F62;">:32</span><span style="color:#24292E;"> </span><span style="color:#032F62;">sizes.js</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">💡 说明</p><p><strong>.bin</strong> 就是各个列存储的数据</p><p><strong>sizes.js</strong> 存放表的大小</p></div>`,31),e=[o];function c(t,r,y,i,E,d){return a(),n("div",null,e)}const u=s(p,[["render",c]]);export{F as __pageData,u as default};
