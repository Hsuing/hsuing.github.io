import{_ as s,o as a,c as n,R as o}from"./chunks/framework.zUbWieqp.js";const F=JSON.parse('{"title":"1. BSCèŠ‚ç‚¹ç»´æŠ¤","description":"","frontmatter":{},"headers":[],"relativePath":"guide/Blockchain/BSC/6.maintain_node.md","filePath":"guide/Blockchain/BSC/6.maintain_node.md","lastUpdated":1736763438000}'),l={name:"guide/Blockchain/BSC/6.maintain_node.md"},e=o('<h1 id="_1-bscèŠ‚ç‚¹ç»´æŠ¤" tabindex="-1">1. BSCèŠ‚ç‚¹ç»´æŠ¤ <a class="header-anchor" href="#_1-bscèŠ‚ç‚¹ç»´æŠ¤" aria-label="Permalink to &quot;1. BSCèŠ‚ç‚¹ç»´æŠ¤&quot;">â€‹</a></h1><p><a href="https://docs.bnbchain.org/bnb-smart-chain/developers/node_operators/node_maintenance/" target="_blank" rel="noreferrer">å®˜å½“</a></p><h2 id="_1-1-ç¦»çº¿ç»´æŠ¤" tabindex="-1">1.1 ç¦»çº¿ç»´æŠ¤ <a class="header-anchor" href="#_1-1-ç¦»çº¿ç»´æŠ¤" aria-label="Permalink to &quot;1.1 ç¦»çº¿ç»´æŠ¤&quot;">â€‹</a></h2><p>è¿™ä¸ªçš„å‰æä¸‹å¿…é¡»æœ‰<code>å¤‡æœº</code>,ä¿è¯æœåŠ¡ä¸ä¸­æ–­</p><p>æ ¹æ®å®˜æ–¹æµ‹è¯•ï¼Œå½“å­˜å‚¨é‡è¾¾åˆ°é«˜å®¹é‡æ—¶ï¼ˆä¹‹å‰æ˜¯ 1.5TBï¼Œè¿™æ˜¯ä¸€ä¸ªå®éªŒå€¼ï¼Œæœ€æ–°æ•°å­—éœ€è¦æ›´æ–°ï¼‰ï¼Œå…¨èŠ‚ç‚¹çš„æ€§èƒ½ä¼šä¸‹é™ã€‚æˆ‘ä»¬å»ºè®®å…¨èŠ‚ç‚¹é€šè¿‡ä¿®å‰ªå­˜å‚¨æ¥å§‹ç»ˆä¿æŒ light storageã€‚</p><ul><li>åœæ­¢BSCèŠ‚ç‚¹</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">stop</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bsc</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">stop</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bsc</span></span></code></pre></div><ul><li>æ¸…ç†æ•°æ®</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">screen</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-S</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clean_bsc</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data/apps/geth_bsc_v1.4.16</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">geth</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">snapshot</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">prune-state</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--datadir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data/bsc</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">screen</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-S</span><span style="color:#24292E;"> </span><span style="color:#032F62;">clean_bsc</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/data/apps/geth_bsc_v1.4.16</span><span style="color:#24292E;"> </span><span style="color:#032F62;">geth</span><span style="color:#24292E;"> </span><span style="color:#032F62;">snapshot</span><span style="color:#24292E;"> </span><span style="color:#032F62;">prune-state</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--datadir</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/data/bsc</span></span></code></pre></div><blockquote><p>å®Œæˆéœ€è¦ 3-5 å°æ—¶,æ ¹æ®æœ¬åœ°æ•°æ®é‡</p></blockquote><div class="warning custom-block"><p class="custom-block-title">ğŸ’¡ è¯´æ˜</p><p>1ï¼šä½¿ç”¨screençª—å£æœŸé—´å¯ä»¥é€€å‡ºæˆ–è€…å…³é—­å‘½ä»¤è¡Œå¯¹è¯æ¡†ã€‚</p><p>2ï¼šé€€å‡ºå½“å‰çª—å£æ—¶ç”¨ctrl+adï¼ˆé¡ºåºæŒ‰aå’Œdå­—æ¯å³å¯ï¼‰ï¼Œç»å¯¹ä¸è¦ç”¨exitæˆ–ctrl+dé€€å‡ºä¼šè¯ã€‚</p><p>3ï¼šé€€å‡ºä¼šè¯åï¼Œå¯ä»¥ç”¨screen -x clean_bscé‡æ–°è¿æ¥åˆ°ä¼šè¯ã€‚è¿™æ ·å¯ä»¥ä¿æŒåœ¨shellä¸‹è¿è¡Œï¼Œç½‘ç»œä¸­æ–­ä¸ä¼šå½±å“</p><p>å¦‚æœæƒ³é€€å‡ºï¼Œè¿›å…¥3æ­¥éª¤ï¼Œç„¶åæŒ‰ ctrl+c å³å¯</p></div><ul><li>å¯åŠ¨æœåŠ¡</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bsc</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bsc</span></span></code></pre></div><h2 id="_1-2-å®æ—¶ç»´æŠ¤" tabindex="-1">1.2 å®æ—¶ç»´æŠ¤ <a class="header-anchor" href="#_1-2-å®æ—¶ç»´æŠ¤" aria-label="Permalink to &quot;1.2 å®æ—¶ç»´æŠ¤&quot;">â€‹</a></h2><p>Ancient data is block data that is already considered immutable. This is determined by a threshold which is currently set at 90000. This means that blocks older than 90000 are considered ancient data. We recommend the <code>--prunceancient</code> flag to users who donâ€™t care about the ancient data. This is also advised for users who want to save disk space since this will only keep data for the latest 90000 blocks. Note that once this flag is turned on, the ancient data will not be recovered again and you cannot go back running your node without this flag in the start-up command.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">./geth</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--tries-verify-mode</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">none</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--config</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/server/config.toml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--datadir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/server/node</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--cache</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">8000</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--rpc.allow-unprotected-txs</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--history.transactions</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--pruneancient=true</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--syncmode=full</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">./geth</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--tries-verify-mode</span><span style="color:#24292E;"> </span><span style="color:#032F62;">none</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--config</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/server/config.toml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--datadir</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/server/node</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--cache</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">8000</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--rpc.allow-unprotected-txs</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--history.transactions</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--pruneancient=true</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--syncmode=full</span></span></code></pre></div><h2 id="_1-3-prune-block" tabindex="-1">1.3 prune-block <a class="header-anchor" href="#_1-3-prune-block" aria-label="Permalink to &quot;1.3 prune-block&quot;">â€‹</a></h2><p><a href="https://github.com/bnb-chain/bsc/releases/tag/v1.1.8" target="_blank" rel="noreferrer">v1.1.8</a> ä¸­å¼•å…¥äº†ä¸€ä¸ªæ–°çš„ç¦»çº¿åŠŸèƒ½ï¼Œç”¨äºåˆ é™¤ä¸éœ€è¦çš„ ancient block æ•°æ®ã€‚å®ƒå°†ä¸¢å¼ƒ ancient æ•°æ®åº“ä¸­çš„ blockã€receipt å’Œ header ä»¥èŠ‚çœç©ºé—´ã€‚</p><ul><li>åœæ­¢bscæœåŠ¡</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">stop</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bsc</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">stop</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bsc</span></span></code></pre></div><ul><li>å¯åŠ¨</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">./geth</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">snapshot</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">prune-block</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--datadir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/server/node</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--datadir.ancient</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">./chaindata/ancient</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--block-amount-reserved</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1024</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">./geth</span><span style="color:#24292E;"> </span><span style="color:#032F62;">snapshot</span><span style="color:#24292E;"> </span><span style="color:#032F62;">prune-block</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--datadir</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/server/node</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--datadir.ancient</span><span style="color:#24292E;"> </span><span style="color:#032F62;">./chaindata/ancient</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--block-amount-reserved</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1024</span></span></code></pre></div><blockquote><p>block-amount-reserved 1024 : ä¿ç•™1024ä¸ªæœ€æ–°çš„æ•°æ®ï¼Œdefault: 90000</p></blockquote>',23),p=[e];function t(c,r,i,y,d,E){return a(),n("div",null,p)}const b=s(l,[["render",t]]);export{F as __pageData,b as default};
