import{_ as s,o as n,c as a,R as l}from"./chunks/framework.zUbWieqp.js";const u=JSON.parse('{"title":"1. Hysteria新型翻墙","description":"","frontmatter":{},"headers":[],"relativePath":"guide/Linux/vpn/29-Hysteria.md","filePath":"guide/Linux/vpn/29-Hysteria.md","lastUpdated":1747060331000}'),p={name:"guide/Linux/vpn/29-Hysteria.md"},o=l(`<h1 id="_1-hysteria新型翻墙" tabindex="-1">1. Hysteria新型翻墙 <a class="header-anchor" href="#_1-hysteria新型翻墙" aria-label="Permalink to &quot;1. Hysteria新型翻墙&quot;">​</a></h1><h2 id="_1-1-介绍" tabindex="-1">1.1 介绍 <a class="header-anchor" href="#_1-1-介绍" aria-label="Permalink to &quot;1.1 介绍&quot;">​</a></h2><p>Hysteria 2是一种高效、安全的移动网络软件解决方案，提供了构建科学上网节点的全方位指导。该系统适用于超高带宽和不稳定网络情况，通过为用户提供构建服务端和客户端的方法，达到完善的通信优化和带宽利用效率。</p><ul><li>官网地址：<a href="https://github.com/apernet/hysteria" target="_blank" rel="noreferrer">https://github.com/apernet/hysteria</a></li></ul><h2 id="_1-2-服务端部署" tabindex="-1">1.2 服务端部署 <a class="header-anchor" href="#_1-2-服务端部署" aria-label="Permalink to &quot;1.2 服务端部署&quot;">​</a></h2><ul><li>基于rocklinxk</li></ul><h3 id="_1-安装" tabindex="-1">1.安装 <a class="header-anchor" href="#_1-安装" aria-label="Permalink to &quot;1.安装&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark has-diff vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@laxh1-20241107135815476cbe </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# bash </span><span style="color:#9ECBFF;">&lt;(</span><span style="color:#B392F0;">curl</span><span style="color:#9ECBFF;"> </span><span style="color:#79B8FF;">-fsSL</span><span style="color:#9ECBFF;"> https://get.hy2.sh/)</span></span>
<span class="line"><span style="color:#B392F0;">63:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">note:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">SELinux</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">detected</span></span>
<span class="line"><span style="color:#B392F0;">Checking</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">for</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">installed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">version</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">...</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">not</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">installed</span></span>
<span class="line"><span style="color:#B392F0;">Checking</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">for</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">latest</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">version</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">...</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">v2.6.1</span></span>
<span class="line"><span style="color:#B392F0;">Downloading</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hysteria</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">binary:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://github.com/apernet/hysteria/releases/download/app/v2.6.1/hysteria-linux-amd64</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">...</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">%</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Total</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">%</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Received</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">%</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Xferd</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">Average</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Speed</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Time</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">Time</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Time</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">Current</span></span>
<span class="line"><span style="color:#E1E4E8;">                                 </span><span style="color:#B392F0;">Dload</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">Upload</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Total</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Spent</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">Left</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">Speed</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--:--:--</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--:--:--</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--:--:--</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#B392F0;">100</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">17.9</span><span style="color:#9ECBFF;">M</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">100</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">17.9</span><span style="color:#9ECBFF;">M</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">35.2</span><span style="color:#9ECBFF;">M</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--:--:--</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--:--:--</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--:--:--</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">35.2</span><span style="color:#9ECBFF;">M</span></span>
<span class="line"><span style="color:#B392F0;">Installing</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hysteria</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">executable</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">...</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ok</span></span>
<span class="line"><span style="color:#B392F0;">Install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/hysteria/config.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">...</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ok</span></span>
<span class="line"><span style="color:#B392F0;">Creating</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">user</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hysteria</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">...</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ok</span></span>
<span class="line"><span style="color:#B392F0;">Install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/systemd/system/hysteria-server.service</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">...</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ok</span></span>
<span class="line"><span style="color:#B392F0;">Install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/systemd/system/hysteria-server@.service</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">...</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ok</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Congratulation!</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Hysteria</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">has</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">been</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">successfully</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">installed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">on</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">your</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">server.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">What</span><span style="color:#B392F0;">&#39;s next?</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">	+ Take a look at the differences between Hysteria 2 and Hysteria 1 at https://hysteria.network/docs/misc/2-vs-1/</span></span>
<span class="line"><span style="color:#B392F0;">	+ Check out the quick server config guide at https://hysteria.network/docs/getting-started/Server/</span></span>
<span class="line"><span style="color:#B392F0;">	#-----------出现下面这三个代表安装成功</span></span>
<span class="line"><span style="color:#B392F0;">	+ Edit server config file at /etc/hysteria/config.yaml</span></span>
<span class="line"><span style="color:#B392F0;">	+ Start your hysteria server with systemctl start hysteria-server.service</span></span>
<span class="line"><span style="color:#B392F0;">	+ Configure hysteria start on system boot with systemctl enable hysteria-server.service</span></span></code></pre><pre class="shiki github-light has-diff vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@laxh1-20241107135815476cbe </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# bash </span><span style="color:#032F62;">&lt;(</span><span style="color:#6F42C1;">curl</span><span style="color:#032F62;"> </span><span style="color:#005CC5;">-fsSL</span><span style="color:#032F62;"> https://get.hy2.sh/)</span></span>
<span class="line"><span style="color:#6F42C1;">63:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">note:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">SELinux</span><span style="color:#24292E;"> </span><span style="color:#032F62;">is</span><span style="color:#24292E;"> </span><span style="color:#032F62;">detected</span></span>
<span class="line"><span style="color:#6F42C1;">Checking</span><span style="color:#24292E;"> </span><span style="color:#032F62;">for</span><span style="color:#24292E;"> </span><span style="color:#032F62;">installed</span><span style="color:#24292E;"> </span><span style="color:#032F62;">version</span><span style="color:#24292E;"> </span><span style="color:#032F62;">...</span><span style="color:#24292E;"> </span><span style="color:#032F62;">not</span><span style="color:#24292E;"> </span><span style="color:#032F62;">installed</span></span>
<span class="line"><span style="color:#6F42C1;">Checking</span><span style="color:#24292E;"> </span><span style="color:#032F62;">for</span><span style="color:#24292E;"> </span><span style="color:#032F62;">latest</span><span style="color:#24292E;"> </span><span style="color:#032F62;">version</span><span style="color:#24292E;"> </span><span style="color:#032F62;">...</span><span style="color:#24292E;"> </span><span style="color:#032F62;">v2.6.1</span></span>
<span class="line"><span style="color:#6F42C1;">Downloading</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hysteria</span><span style="color:#24292E;"> </span><span style="color:#032F62;">binary:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://github.com/apernet/hysteria/releases/download/app/v2.6.1/hysteria-linux-amd64</span><span style="color:#24292E;"> </span><span style="color:#032F62;">...</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">%</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Total</span><span style="color:#24292E;">    </span><span style="color:#032F62;">%</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Received</span><span style="color:#24292E;"> </span><span style="color:#032F62;">%</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Xferd</span><span style="color:#24292E;">  </span><span style="color:#032F62;">Average</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Speed</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Time</span><span style="color:#24292E;">    </span><span style="color:#032F62;">Time</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Time</span><span style="color:#24292E;">  </span><span style="color:#032F62;">Current</span></span>
<span class="line"><span style="color:#24292E;">                                 </span><span style="color:#6F42C1;">Dload</span><span style="color:#24292E;">  </span><span style="color:#032F62;">Upload</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Total</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Spent</span><span style="color:#24292E;">    </span><span style="color:#032F62;">Left</span><span style="color:#24292E;">  </span><span style="color:#032F62;">Speed</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--:--:--</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--:--:--</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--:--:--</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#6F42C1;">100</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">17.9</span><span style="color:#032F62;">M</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">100</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">17.9</span><span style="color:#032F62;">M</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">35.2</span><span style="color:#032F62;">M</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--:--:--</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--:--:--</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--:--:--</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">35.2</span><span style="color:#032F62;">M</span></span>
<span class="line"><span style="color:#6F42C1;">Installing</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hysteria</span><span style="color:#24292E;"> </span><span style="color:#032F62;">executable</span><span style="color:#24292E;"> </span><span style="color:#032F62;">...</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ok</span></span>
<span class="line"><span style="color:#6F42C1;">Install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/hysteria/config.yaml</span><span style="color:#24292E;"> </span><span style="color:#032F62;">...</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ok</span></span>
<span class="line"><span style="color:#6F42C1;">Creating</span><span style="color:#24292E;"> </span><span style="color:#032F62;">user</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hysteria</span><span style="color:#24292E;"> </span><span style="color:#032F62;">...</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ok</span></span>
<span class="line"><span style="color:#6F42C1;">Install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/systemd/system/hysteria-server.service</span><span style="color:#24292E;"> </span><span style="color:#032F62;">...</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ok</span></span>
<span class="line"><span style="color:#6F42C1;">Install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/systemd/system/hysteria-server@.service</span><span style="color:#24292E;"> </span><span style="color:#032F62;">...</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ok</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Congratulation!</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Hysteria</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">has</span><span style="color:#24292E;"> </span><span style="color:#032F62;">been</span><span style="color:#24292E;"> </span><span style="color:#032F62;">successfully</span><span style="color:#24292E;"> </span><span style="color:#032F62;">installed</span><span style="color:#24292E;"> </span><span style="color:#032F62;">on</span><span style="color:#24292E;"> </span><span style="color:#032F62;">your</span><span style="color:#24292E;"> </span><span style="color:#032F62;">server.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">What</span><span style="color:#6F42C1;">&#39;s next?</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">	+ Take a look at the differences between Hysteria 2 and Hysteria 1 at https://hysteria.network/docs/misc/2-vs-1/</span></span>
<span class="line"><span style="color:#6F42C1;">	+ Check out the quick server config guide at https://hysteria.network/docs/getting-started/Server/</span></span>
<span class="line"><span style="color:#6F42C1;">	#-----------出现下面这三个代表安装成功</span></span>
<span class="line"><span style="color:#6F42C1;">	+ Edit server config file at /etc/hysteria/config.yaml</span></span>
<span class="line"><span style="color:#6F42C1;">	+ Start your hysteria server with systemctl start hysteria-server.service</span></span>
<span class="line"><span style="color:#6F42C1;">	+ Configure hysteria start on system boot with systemctl enable hysteria-server.service</span></span></code></pre></div><h3 id="_2-配置文件" tabindex="-1">2.配置文件 <a class="header-anchor" href="#_2-配置文件" aria-label="Permalink to &quot;2.配置文件&quot;">​</a></h3><ul><li>使用ssl证书</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">EOF</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> /etc/hysteria/config.yaml</span></span>
<span class="line"><span style="color:#9ECBFF;">listen: :443 #监听端口</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">#使用CA证书</span></span>
<span class="line"><span style="color:#9ECBFF;">acme:</span></span>
<span class="line"><span style="color:#9ECBFF;">  domains:</span></span>
<span class="line"><span style="color:#9ECBFF;">    - a.com #你的域名，需要先解析到服务器ip</span></span>
<span class="line"><span style="color:#9ECBFF;">  email: test@sharklasers.com</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">#使用自签证书</span></span>
<span class="line"><span style="color:#9ECBFF;">#tls:</span></span>
<span class="line"><span style="color:#9ECBFF;">#  cert: /etc/hysteria/server.crt</span></span>
<span class="line"><span style="color:#9ECBFF;">#  key: /etc/hysteria/server.key</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">auth:</span></span>
<span class="line"><span style="color:#9ECBFF;">  type: password</span></span>
<span class="line"><span style="color:#9ECBFF;">  password: 123456 #设置认证密码</span></span>
<span class="line"><span style="color:#9ECBFF;">  </span></span>
<span class="line"><span style="color:#9ECBFF;">masquerade:</span></span>
<span class="line"><span style="color:#9ECBFF;">  type: proxy</span></span>
<span class="line"><span style="color:#9ECBFF;">  proxy:</span></span>
<span class="line"><span style="color:#9ECBFF;">    url: https://bing.com #伪装网址</span></span>
<span class="line"><span style="color:#9ECBFF;">    rewriteHost: true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">disableUDP: false</span></span>
<span class="line"><span style="color:#9ECBFF;">udpIdleTimeout: 60s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">quic:</span></span>
<span class="line"><span style="color:#9ECBFF;">  initStreamReceiveWindow: 8388608 </span></span>
<span class="line"><span style="color:#9ECBFF;">  maxStreamReceiveWindow: 8388608 </span></span>
<span class="line"><span style="color:#9ECBFF;">  initConnReceiveWindow: 20971520 </span></span>
<span class="line"><span style="color:#9ECBFF;">  maxConnReceiveWindow: 20971520 </span></span>
<span class="line"><span style="color:#9ECBFF;">  maxIdleTimeout: 30s </span></span>
<span class="line"><span style="color:#9ECBFF;">  maxIncomingStreams: 1024 </span></span>
<span class="line"><span style="color:#9ECBFF;">  disablePathMTUDiscovery: false</span></span>
<span class="line"><span style="color:#9ECBFF;">EOF</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">EOF</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> /etc/hysteria/config.yaml</span></span>
<span class="line"><span style="color:#032F62;">listen: :443 #监听端口</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">#使用CA证书</span></span>
<span class="line"><span style="color:#032F62;">acme:</span></span>
<span class="line"><span style="color:#032F62;">  domains:</span></span>
<span class="line"><span style="color:#032F62;">    - a.com #你的域名，需要先解析到服务器ip</span></span>
<span class="line"><span style="color:#032F62;">  email: test@sharklasers.com</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">#使用自签证书</span></span>
<span class="line"><span style="color:#032F62;">#tls:</span></span>
<span class="line"><span style="color:#032F62;">#  cert: /etc/hysteria/server.crt</span></span>
<span class="line"><span style="color:#032F62;">#  key: /etc/hysteria/server.key</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">auth:</span></span>
<span class="line"><span style="color:#032F62;">  type: password</span></span>
<span class="line"><span style="color:#032F62;">  password: 123456 #设置认证密码</span></span>
<span class="line"><span style="color:#032F62;">  </span></span>
<span class="line"><span style="color:#032F62;">masquerade:</span></span>
<span class="line"><span style="color:#032F62;">  type: proxy</span></span>
<span class="line"><span style="color:#032F62;">  proxy:</span></span>
<span class="line"><span style="color:#032F62;">    url: https://bing.com #伪装网址</span></span>
<span class="line"><span style="color:#032F62;">    rewriteHost: true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">disableUDP: false</span></span>
<span class="line"><span style="color:#032F62;">udpIdleTimeout: 60s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">quic:</span></span>
<span class="line"><span style="color:#032F62;">  initStreamReceiveWindow: 8388608 </span></span>
<span class="line"><span style="color:#032F62;">  maxStreamReceiveWindow: 8388608 </span></span>
<span class="line"><span style="color:#032F62;">  initConnReceiveWindow: 20971520 </span></span>
<span class="line"><span style="color:#032F62;">  maxConnReceiveWindow: 20971520 </span></span>
<span class="line"><span style="color:#032F62;">  maxIdleTimeout: 30s </span></span>
<span class="line"><span style="color:#032F62;">  maxIncomingStreams: 1024 </span></span>
<span class="line"><span style="color:#032F62;">  disablePathMTUDiscovery: false</span></span>
<span class="line"><span style="color:#032F62;">EOF</span></span></code></pre></div><ul><li>使用自签证书</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#生成自签证书</span></span>
<span class="line"><span style="color:#B392F0;">openssl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">req</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-x509</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-nodes</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-newkey</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ec:&lt;(</span><span style="color:#B392F0;">openssl</span><span style="color:#9ECBFF;"> ecparam </span><span style="color:#79B8FF;">-name</span><span style="color:#9ECBFF;"> prime256v1)</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-keyout</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/hysteria/server.key</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-out</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/hysteria/server.crt</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-subj</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;/CN=bing.com&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-days</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">36500</span><span style="color:#E1E4E8;"> &amp;&amp; </span><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">chown</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hysteria</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/hysteria/server.key</span><span style="color:#E1E4E8;"> &amp;&amp; </span><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">chown</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hysteria</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/hysteria/server.crt</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#生成自签证书</span></span>
<span class="line"><span style="color:#6F42C1;">openssl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">req</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-x509</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-nodes</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-newkey</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ec:&lt;(</span><span style="color:#6F42C1;">openssl</span><span style="color:#032F62;"> ecparam </span><span style="color:#005CC5;">-name</span><span style="color:#032F62;"> prime256v1)</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-keyout</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/hysteria/server.key</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-out</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/hysteria/server.crt</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-subj</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;/CN=bing.com&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-days</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">36500</span><span style="color:#24292E;"> &amp;&amp; </span><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">chown</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hysteria</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/hysteria/server.key</span><span style="color:#24292E;"> &amp;&amp; </span><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">chown</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hysteria</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/hysteria/server.crt</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">cat &lt;&lt; EOF &gt; /etc/hysteria/config.yaml</span></span>
<span class="line"><span style="color:#e1e4e8;">listen: :443 #监听端口</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">#使用CA证书</span></span>
<span class="line"><span style="color:#e1e4e8;">#acme:</span></span>
<span class="line"><span style="color:#e1e4e8;">#  domains:</span></span>
<span class="line"><span style="color:#e1e4e8;">#    - a.com #你的域名，需要先解析到服务器ip</span></span>
<span class="line"><span style="color:#e1e4e8;">#  email: test@sharklasers.com</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">#使用自签证书</span></span>
<span class="line"><span style="color:#e1e4e8;">tls:</span></span>
<span class="line"><span style="color:#e1e4e8;">  cert: /etc/hysteria/server.crt</span></span>
<span class="line"><span style="color:#e1e4e8;">  key: /etc/hysteria/server.key</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">auth:</span></span>
<span class="line"><span style="color:#e1e4e8;">  type: password</span></span>
<span class="line"><span style="color:#e1e4e8;">  password: han123456!@# #设置认证密码</span></span>
<span class="line"><span style="color:#e1e4e8;">  </span></span>
<span class="line"><span style="color:#e1e4e8;">masquerade:</span></span>
<span class="line"><span style="color:#e1e4e8;">  type: proxy</span></span>
<span class="line"><span style="color:#e1e4e8;">  proxy:</span></span>
<span class="line"><span style="color:#e1e4e8;">    url: https://bing.com #伪装网址</span></span>
<span class="line"><span style="color:#e1e4e8;">    rewriteHost: true</span></span>
<span class="line"><span style="color:#e1e4e8;">EOF</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">cat &lt;&lt; EOF &gt; /etc/hysteria/config.yaml</span></span>
<span class="line"><span style="color:#24292e;">listen: :443 #监听端口</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">#使用CA证书</span></span>
<span class="line"><span style="color:#24292e;">#acme:</span></span>
<span class="line"><span style="color:#24292e;">#  domains:</span></span>
<span class="line"><span style="color:#24292e;">#    - a.com #你的域名，需要先解析到服务器ip</span></span>
<span class="line"><span style="color:#24292e;">#  email: test@sharklasers.com</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">#使用自签证书</span></span>
<span class="line"><span style="color:#24292e;">tls:</span></span>
<span class="line"><span style="color:#24292e;">  cert: /etc/hysteria/server.crt</span></span>
<span class="line"><span style="color:#24292e;">  key: /etc/hysteria/server.key</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">auth:</span></span>
<span class="line"><span style="color:#24292e;">  type: password</span></span>
<span class="line"><span style="color:#24292e;">  password: han123456!@# #设置认证密码</span></span>
<span class="line"><span style="color:#24292e;">  </span></span>
<span class="line"><span style="color:#24292e;">masquerade:</span></span>
<span class="line"><span style="color:#24292e;">  type: proxy</span></span>
<span class="line"><span style="color:#24292e;">  proxy:</span></span>
<span class="line"><span style="color:#24292e;">    url: https://bing.com #伪装网址</span></span>
<span class="line"><span style="color:#24292e;">    rewriteHost: true</span></span>
<span class="line"><span style="color:#24292e;">EOF</span></span></code></pre></div><h3 id="_3-启动" tabindex="-1">3.启动 <a class="header-anchor" href="#_3-启动" aria-label="Permalink to &quot;3.启动&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@laxh1-20241107135815476cbe </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# systemctl status hysteria-server.service</span></span>
<span class="line"><span style="color:#B392F0;">●</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hysteria-server.service</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Hysteria</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Server</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Service</span><span style="color:#E1E4E8;"> (config.yaml)</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">Loaded:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">loaded</span><span style="color:#E1E4E8;"> (/etc/systemd/system/hysteria-server.service; </span><span style="color:#B392F0;">disabled</span><span style="color:#E1E4E8;">; </span><span style="color:#B392F0;">vendor</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">preset:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">disabled</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">Active:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">active</span><span style="color:#E1E4E8;"> (running) since Wed 2025-02-26 09:29:46 UTC; </span><span style="color:#B392F0;">48s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ago</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Main</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PID:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">569230</span><span style="color:#E1E4E8;"> (hysteria)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">Tasks:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;"> (limit: </span><span style="color:#79B8FF;">4704</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">Memory:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">7.2</span><span style="color:#9ECBFF;">M</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">CGroup:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/system.slice/hysteria-server.service</span></span>
<span class="line"><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">└─569230</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/local/bin/hysteria</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">server</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--config</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/hysteria/config.yaml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Feb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">26</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">09</span><span style="color:#9ECBFF;">:29:46</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">laxh1-20241107135815476cbe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hysteria[</span><span style="color:#79B8FF;">569230</span><span style="color:#9ECBFF;">]:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2025</span><span style="color:#9ECBFF;">-02-26T09:29:46Z</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">INFO</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">obtain</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">acquiring</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">lock</span><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">Feb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">26</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">09</span><span style="color:#9ECBFF;">:29:46</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">laxh1-20241107135815476cbe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hysteria[</span><span style="color:#79B8FF;">569230</span><span style="color:#9ECBFF;">]:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2025</span><span style="color:#9ECBFF;">-02-26T09:29:46Z</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">INFO</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">maintenance</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">started</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">back</span><span style="color:#E1E4E8;">g</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">Feb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">26</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">09</span><span style="color:#9ECBFF;">:29:46</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">laxh1-20241107135815476cbe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hysteria[</span><span style="color:#79B8FF;">569230</span><span style="color:#9ECBFF;">]:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2025</span><span style="color:#9ECBFF;">-02-26T09:29:46Z</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">INFO</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">obtain</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">lock</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">acquired</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">Feb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">26</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">09</span><span style="color:#9ECBFF;">:29:46</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">laxh1-20241107135815476cbe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hysteria[</span><span style="color:#79B8FF;">569230</span><span style="color:#9ECBFF;">]:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2025</span><span style="color:#9ECBFF;">-02-26T09:29:46Z</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">INFO</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">obtain</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">obtaining</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">certifi</span><span style="color:#E1E4E8;">c</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">Feb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">26</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">09</span><span style="color:#9ECBFF;">:29:46</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">laxh1-20241107135815476cbe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hysteria[</span><span style="color:#79B8FF;">569230</span><span style="color:#9ECBFF;">]:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2025</span><span style="color:#9ECBFF;">-02-26T09:29:46Z</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">INFO</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">waiting</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">on</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">internal</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rate</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">limite</span><span style="color:#E1E4E8;">r</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">Feb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">26</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">09</span><span style="color:#9ECBFF;">:29:46</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">laxh1-20241107135815476cbe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hysteria[</span><span style="color:#79B8FF;">569230</span><span style="color:#9ECBFF;">]:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2025</span><span style="color:#9ECBFF;">-02-26T09:29:46Z</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">INFO</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">done</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">waiting</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">on</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">internal</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rate</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">l</span><span style="color:#E1E4E8;">i</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">Feb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">26</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">09</span><span style="color:#9ECBFF;">:29:46</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">laxh1-20241107135815476cbe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hysteria[</span><span style="color:#79B8FF;">569230</span><span style="color:#9ECBFF;">]:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2025</span><span style="color:#9ECBFF;">-02-26T09:29:46Z</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">INFO</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">acme_client</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">trying</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">so</span><span style="color:#E1E4E8;">l</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">Feb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">26</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">09</span><span style="color:#9ECBFF;">:30:17</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">laxh1-20241107135815476cbe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hysteria[</span><span style="color:#79B8FF;">569230</span><span style="color:#9ECBFF;">]:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2025</span><span style="color:#9ECBFF;">-02-26T09:30:17Z</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">ERROR</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">acme_client</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">challenge</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">f</span><span style="color:#E1E4E8;">a</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">Feb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">26</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">09</span><span style="color:#9ECBFF;">:30:17</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">laxh1-20241107135815476cbe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hysteria[</span><span style="color:#79B8FF;">569230</span><span style="color:#9ECBFF;">]:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2025</span><span style="color:#9ECBFF;">-02-26T09:30:17Z</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">ERROR</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">acme_client</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">validating</span><span style="color:#E1E4E8;"> a</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">Feb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">26</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">09</span><span style="color:#9ECBFF;">:30:18</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">laxh1-20241107135815476cbe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hysteria[</span><span style="color:#79B8FF;">569230</span><span style="color:#9ECBFF;">]:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2025</span><span style="color:#9ECBFF;">-02-26T09:30:18Z</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">INFO</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">acme_client</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">trying</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">sol</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@laxh1-20241107135815476cbe </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# systemctl status hysteria-server.service</span></span>
<span class="line"><span style="color:#6F42C1;">●</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hysteria-server.service</span><span style="color:#24292E;"> </span><span style="color:#032F62;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Hysteria</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Server</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Service</span><span style="color:#24292E;"> (config.yaml)</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">Loaded:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">loaded</span><span style="color:#24292E;"> (/etc/systemd/system/hysteria-server.service; </span><span style="color:#6F42C1;">disabled</span><span style="color:#24292E;">; </span><span style="color:#6F42C1;">vendor</span><span style="color:#24292E;"> </span><span style="color:#032F62;">preset:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">disabled</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">Active:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">active</span><span style="color:#24292E;"> (running) since Wed 2025-02-26 09:29:46 UTC; </span><span style="color:#6F42C1;">48s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ago</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Main</span><span style="color:#24292E;"> </span><span style="color:#032F62;">PID:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">569230</span><span style="color:#24292E;"> (hysteria)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">Tasks:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">4</span><span style="color:#24292E;"> (limit: </span><span style="color:#005CC5;">4704</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">Memory:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">7.2</span><span style="color:#032F62;">M</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">CGroup:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/system.slice/hysteria-server.service</span></span>
<span class="line"><span style="color:#24292E;">           </span><span style="color:#6F42C1;">└─569230</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/local/bin/hysteria</span><span style="color:#24292E;"> </span><span style="color:#032F62;">server</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--config</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/hysteria/config.yaml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Feb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">26</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">09</span><span style="color:#032F62;">:29:46</span><span style="color:#24292E;"> </span><span style="color:#032F62;">laxh1-20241107135815476cbe</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hysteria[</span><span style="color:#005CC5;">569230</span><span style="color:#032F62;">]:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2025</span><span style="color:#032F62;">-02-26T09:29:46Z</span><span style="color:#24292E;">        </span><span style="color:#032F62;">INFO</span><span style="color:#24292E;">        </span><span style="color:#032F62;">obtain</span><span style="color:#24292E;">        </span><span style="color:#032F62;">acquiring</span><span style="color:#24292E;"> </span><span style="color:#032F62;">lock</span><span style="color:#24292E;">    </span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">Feb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">26</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">09</span><span style="color:#032F62;">:29:46</span><span style="color:#24292E;"> </span><span style="color:#032F62;">laxh1-20241107135815476cbe</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hysteria[</span><span style="color:#005CC5;">569230</span><span style="color:#032F62;">]:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2025</span><span style="color:#032F62;">-02-26T09:29:46Z</span><span style="color:#24292E;">        </span><span style="color:#032F62;">INFO</span><span style="color:#24292E;">        </span><span style="color:#032F62;">maintenance</span><span style="color:#24292E;">        </span><span style="color:#032F62;">started</span><span style="color:#24292E;"> </span><span style="color:#032F62;">back</span><span style="color:#24292E;">g</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">Feb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">26</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">09</span><span style="color:#032F62;">:29:46</span><span style="color:#24292E;"> </span><span style="color:#032F62;">laxh1-20241107135815476cbe</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hysteria[</span><span style="color:#005CC5;">569230</span><span style="color:#032F62;">]:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2025</span><span style="color:#032F62;">-02-26T09:29:46Z</span><span style="color:#24292E;">        </span><span style="color:#032F62;">INFO</span><span style="color:#24292E;">        </span><span style="color:#032F62;">obtain</span><span style="color:#24292E;">        </span><span style="color:#032F62;">lock</span><span style="color:#24292E;"> </span><span style="color:#032F62;">acquired</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">Feb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">26</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">09</span><span style="color:#032F62;">:29:46</span><span style="color:#24292E;"> </span><span style="color:#032F62;">laxh1-20241107135815476cbe</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hysteria[</span><span style="color:#005CC5;">569230</span><span style="color:#032F62;">]:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2025</span><span style="color:#032F62;">-02-26T09:29:46Z</span><span style="color:#24292E;">        </span><span style="color:#032F62;">INFO</span><span style="color:#24292E;">        </span><span style="color:#032F62;">obtain</span><span style="color:#24292E;">        </span><span style="color:#032F62;">obtaining</span><span style="color:#24292E;"> </span><span style="color:#032F62;">certifi</span><span style="color:#24292E;">c</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">Feb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">26</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">09</span><span style="color:#032F62;">:29:46</span><span style="color:#24292E;"> </span><span style="color:#032F62;">laxh1-20241107135815476cbe</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hysteria[</span><span style="color:#005CC5;">569230</span><span style="color:#032F62;">]:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2025</span><span style="color:#032F62;">-02-26T09:29:46Z</span><span style="color:#24292E;">        </span><span style="color:#032F62;">INFO</span><span style="color:#24292E;">        </span><span style="color:#032F62;">waiting</span><span style="color:#24292E;"> </span><span style="color:#032F62;">on</span><span style="color:#24292E;"> </span><span style="color:#032F62;">internal</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rate</span><span style="color:#24292E;"> </span><span style="color:#032F62;">limite</span><span style="color:#24292E;">r</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">Feb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">26</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">09</span><span style="color:#032F62;">:29:46</span><span style="color:#24292E;"> </span><span style="color:#032F62;">laxh1-20241107135815476cbe</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hysteria[</span><span style="color:#005CC5;">569230</span><span style="color:#032F62;">]:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2025</span><span style="color:#032F62;">-02-26T09:29:46Z</span><span style="color:#24292E;">        </span><span style="color:#032F62;">INFO</span><span style="color:#24292E;">        </span><span style="color:#032F62;">done</span><span style="color:#24292E;"> </span><span style="color:#032F62;">waiting</span><span style="color:#24292E;"> </span><span style="color:#032F62;">on</span><span style="color:#24292E;"> </span><span style="color:#032F62;">internal</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rate</span><span style="color:#24292E;"> </span><span style="color:#032F62;">l</span><span style="color:#24292E;">i</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">Feb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">26</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">09</span><span style="color:#032F62;">:29:46</span><span style="color:#24292E;"> </span><span style="color:#032F62;">laxh1-20241107135815476cbe</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hysteria[</span><span style="color:#005CC5;">569230</span><span style="color:#032F62;">]:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2025</span><span style="color:#032F62;">-02-26T09:29:46Z</span><span style="color:#24292E;">        </span><span style="color:#032F62;">INFO</span><span style="color:#24292E;">        </span><span style="color:#032F62;">acme_client</span><span style="color:#24292E;">        </span><span style="color:#032F62;">trying</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">so</span><span style="color:#24292E;">l</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">Feb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">26</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">09</span><span style="color:#032F62;">:30:17</span><span style="color:#24292E;"> </span><span style="color:#032F62;">laxh1-20241107135815476cbe</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hysteria[</span><span style="color:#005CC5;">569230</span><span style="color:#032F62;">]:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2025</span><span style="color:#032F62;">-02-26T09:30:17Z</span><span style="color:#24292E;">        </span><span style="color:#032F62;">ERROR</span><span style="color:#24292E;">        </span><span style="color:#032F62;">acme_client</span><span style="color:#24292E;">        </span><span style="color:#032F62;">challenge</span><span style="color:#24292E;"> </span><span style="color:#032F62;">f</span><span style="color:#24292E;">a</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">Feb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">26</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">09</span><span style="color:#032F62;">:30:17</span><span style="color:#24292E;"> </span><span style="color:#032F62;">laxh1-20241107135815476cbe</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hysteria[</span><span style="color:#005CC5;">569230</span><span style="color:#032F62;">]:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2025</span><span style="color:#032F62;">-02-26T09:30:17Z</span><span style="color:#24292E;">        </span><span style="color:#032F62;">ERROR</span><span style="color:#24292E;">        </span><span style="color:#032F62;">acme_client</span><span style="color:#24292E;">        </span><span style="color:#032F62;">validating</span><span style="color:#24292E;"> a</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">Feb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">26</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">09</span><span style="color:#032F62;">:30:18</span><span style="color:#24292E;"> </span><span style="color:#032F62;">laxh1-20241107135815476cbe</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hysteria[</span><span style="color:#005CC5;">569230</span><span style="color:#032F62;">]:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2025</span><span style="color:#032F62;">-02-26T09:30:18Z</span><span style="color:#24292E;">        </span><span style="color:#032F62;">INFO</span><span style="color:#24292E;">        </span><span style="color:#032F62;">acme_client</span><span style="color:#24292E;">        </span><span style="color:#032F62;">trying</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">sol</span></span></code></pre></div><p>出现上面两个error，需要把80，443开放下</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">iptables</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-I</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">INPUT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">tcp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dport</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-j</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ACCEPT</span></span>
<span class="line"><span style="color:#B392F0;">iptables</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-I</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">INPUT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">tcp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dport</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">443</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-j</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ACCEPT</span></span>
<span class="line"><span style="color:#B392F0;">iptables</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-I</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">INPUT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">udp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dport</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">443</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-j</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ACCEPT</span></span>
<span class="line"><span style="color:#B392F0;">iptables</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-I</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">INPUT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">udp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dport</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">6443</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-j</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ACCEPT</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">端口跳跃：</span></span>
<span class="line"><span style="color:#B392F0;">开放20000-50000之间的端口号：</span></span>
<span class="line"><span style="color:#B392F0;">iptables</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-A</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PREROUTING</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ens33</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">udp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dport</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">20000</span><span style="color:#9ECBFF;">:50000</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-j</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">DNAT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--to-destination</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">:6443</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">删除20000-50000之间的端口号：</span></span>
<span class="line"><span style="color:#B392F0;">iptables</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-D</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PREROUTING</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ens33</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">udp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dport</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">20000</span><span style="color:#9ECBFF;">:50000</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-j</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">DNAT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--to-destination</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">:6443</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">iptables</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-A</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PREROUTING</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ens33</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">udp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dport</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">16669</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-j</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">DNAT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--to-destination</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">:6443</span></span>
<span class="line"><span style="color:#B392F0;">iptables</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-A</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PREROUTING</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ens33</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">udp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dport</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">27740</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-j</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">DNAT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--to-destination</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">:6443</span></span>
<span class="line"><span style="color:#B392F0;">iptables</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-A</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PREROUTING</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ens33</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">udp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dport</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">39171</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-j</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">DNAT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--to-destination</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">:6443</span></span>
<span class="line"><span style="color:#B392F0;">iptables</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-A</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PREROUTING</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ens33</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">udp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dport</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">49895</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-j</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">DNAT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--to-destination</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">:6443</span></span>
<span class="line"><span style="color:#B392F0;">iptables</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-A</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PREROUTING</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ens33</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">udp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dport</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">55831</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-j</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">DNAT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--to-destination</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">:6443</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">iptables</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-I</span><span style="color:#24292E;"> </span><span style="color:#032F62;">INPUT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">tcp</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dport</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">80</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-j</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ACCEPT</span></span>
<span class="line"><span style="color:#6F42C1;">iptables</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-I</span><span style="color:#24292E;"> </span><span style="color:#032F62;">INPUT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">tcp</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dport</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">443</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-j</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ACCEPT</span></span>
<span class="line"><span style="color:#6F42C1;">iptables</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-I</span><span style="color:#24292E;"> </span><span style="color:#032F62;">INPUT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">udp</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dport</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">443</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-j</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ACCEPT</span></span>
<span class="line"><span style="color:#6F42C1;">iptables</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-I</span><span style="color:#24292E;"> </span><span style="color:#032F62;">INPUT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">udp</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dport</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">6443</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-j</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ACCEPT</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">端口跳跃：</span></span>
<span class="line"><span style="color:#6F42C1;">开放20000-50000之间的端口号：</span></span>
<span class="line"><span style="color:#6F42C1;">iptables</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-t</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nat</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-A</span><span style="color:#24292E;"> </span><span style="color:#032F62;">PREROUTING</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ens33</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">udp</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dport</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">20000</span><span style="color:#032F62;">:50000</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-j</span><span style="color:#24292E;"> </span><span style="color:#032F62;">DNAT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--to-destination</span><span style="color:#24292E;"> </span><span style="color:#032F62;">:6443</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">删除20000-50000之间的端口号：</span></span>
<span class="line"><span style="color:#6F42C1;">iptables</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-t</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nat</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-D</span><span style="color:#24292E;"> </span><span style="color:#032F62;">PREROUTING</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ens33</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">udp</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dport</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">20000</span><span style="color:#032F62;">:50000</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-j</span><span style="color:#24292E;"> </span><span style="color:#032F62;">DNAT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--to-destination</span><span style="color:#24292E;"> </span><span style="color:#032F62;">:6443</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">iptables</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-t</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nat</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-A</span><span style="color:#24292E;"> </span><span style="color:#032F62;">PREROUTING</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ens33</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">udp</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dport</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">16669</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-j</span><span style="color:#24292E;"> </span><span style="color:#032F62;">DNAT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--to-destination</span><span style="color:#24292E;"> </span><span style="color:#032F62;">:6443</span></span>
<span class="line"><span style="color:#6F42C1;">iptables</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-t</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nat</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-A</span><span style="color:#24292E;"> </span><span style="color:#032F62;">PREROUTING</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ens33</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">udp</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dport</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">27740</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-j</span><span style="color:#24292E;"> </span><span style="color:#032F62;">DNAT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--to-destination</span><span style="color:#24292E;"> </span><span style="color:#032F62;">:6443</span></span>
<span class="line"><span style="color:#6F42C1;">iptables</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-t</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nat</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-A</span><span style="color:#24292E;"> </span><span style="color:#032F62;">PREROUTING</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ens33</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">udp</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dport</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">39171</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-j</span><span style="color:#24292E;"> </span><span style="color:#032F62;">DNAT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--to-destination</span><span style="color:#24292E;"> </span><span style="color:#032F62;">:6443</span></span>
<span class="line"><span style="color:#6F42C1;">iptables</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-t</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nat</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-A</span><span style="color:#24292E;"> </span><span style="color:#032F62;">PREROUTING</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ens33</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">udp</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dport</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">49895</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-j</span><span style="color:#24292E;"> </span><span style="color:#032F62;">DNAT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--to-destination</span><span style="color:#24292E;"> </span><span style="color:#032F62;">:6443</span></span>
<span class="line"><span style="color:#6F42C1;">iptables</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-t</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nat</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-A</span><span style="color:#24292E;"> </span><span style="color:#032F62;">PREROUTING</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ens33</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">udp</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dport</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">55831</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-j</span><span style="color:#24292E;"> </span><span style="color:#032F62;">DNAT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--to-destination</span><span style="color:#24292E;"> </span><span style="color:#032F62;">:6443</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">systemctl enable --now hysteria-server.service</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">#启动Hysteria2</span></span>
<span class="line"><span style="color:#e1e4e8;">systemctl start hysteria-server.service</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">#重启Hysteria2</span></span>
<span class="line"><span style="color:#e1e4e8;">systemctl restart hysteria-server.service</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">#查看Hysteria2状态</span></span>
<span class="line"><span style="color:#e1e4e8;">systemctl status hysteria-server.service</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">#停止Hysteria2</span></span>
<span class="line"><span style="color:#e1e4e8;">systemctl stop hysteria-server.service</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">#设置开机自启</span></span>
<span class="line"><span style="color:#e1e4e8;">systemctl enable hysteria-server.service</span></span>
<span class="line"><span style="color:#e1e4e8;">#查看日志</span></span>
<span class="line"><span style="color:#e1e4e8;">journalctl -u hysteria-server.service</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">systemctl enable --now hysteria-server.service</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">#启动Hysteria2</span></span>
<span class="line"><span style="color:#24292e;">systemctl start hysteria-server.service</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">#重启Hysteria2</span></span>
<span class="line"><span style="color:#24292e;">systemctl restart hysteria-server.service</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">#查看Hysteria2状态</span></span>
<span class="line"><span style="color:#24292e;">systemctl status hysteria-server.service</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">#停止Hysteria2</span></span>
<span class="line"><span style="color:#24292e;">systemctl stop hysteria-server.service</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">#设置开机自启</span></span>
<span class="line"><span style="color:#24292e;">systemctl enable hysteria-server.service</span></span>
<span class="line"><span style="color:#24292e;">#查看日志</span></span>
<span class="line"><span style="color:#24292e;">journalctl -u hysteria-server.service</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@laxh1-20241107135815476cbe </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# systemctl status  hysteria-server.service</span></span>
<span class="line"><span style="color:#B392F0;">●</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hysteria-server.service</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Hysteria</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Server</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Service</span><span style="color:#E1E4E8;"> (config.yaml)</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">Loaded:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">loaded</span><span style="color:#E1E4E8;"> (/etc/systemd/system/hysteria-server.service; </span><span style="color:#B392F0;">disabled</span><span style="color:#E1E4E8;">; </span><span style="color:#B392F0;">vendor</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">preset:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">disabled</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">Active:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">active</span><span style="color:#E1E4E8;"> (running) since Wed 2025-02-26 09:40:41 UTC; </span><span style="color:#B392F0;">4s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ago</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Main</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PID:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">569568</span><span style="color:#E1E4E8;"> (hysteria)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">Tasks:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;"> (limit: </span><span style="color:#79B8FF;">4704</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">Memory:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">8.7</span><span style="color:#9ECBFF;">M</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">CGroup:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/system.slice/hysteria-server.service</span></span>
<span class="line"><span style="color:#E1E4E8;">           </span><span style="color:#B392F0;">└─569568</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/local/bin/hysteria</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">server</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--config</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/hysteria/config.yaml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Feb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">26</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">09</span><span style="color:#9ECBFF;">:40:41</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">laxh1-20241107135815476cbe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">systemd[</span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">]:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Started</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Hysteria</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Server</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Service</span><span style="color:#E1E4E8;"> (config.yaml).</span></span>
<span class="line"><span style="color:#B392F0;">Feb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">26</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">09</span><span style="color:#9ECBFF;">:40:41</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">laxh1-20241107135815476cbe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hysteria[</span><span style="color:#79B8FF;">569568</span><span style="color:#9ECBFF;">]:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2025</span><span style="color:#9ECBFF;">-02-26T09:40:41Z</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">INFO</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">server</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mode</span></span>
<span class="line"><span style="color:#B392F0;">Feb</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">26</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">09</span><span style="color:#9ECBFF;">:40:41</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">laxh1-20241107135815476cbe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hysteria[</span><span style="color:#79B8FF;">569568</span><span style="color:#9ECBFF;">]:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2025</span><span style="color:#9ECBFF;">-02-26T09:40:41Z</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">INFO</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">server</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">up</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">and</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">running</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@laxh1-20241107135815476cbe </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# systemctl status  hysteria-server.service</span></span>
<span class="line"><span style="color:#6F42C1;">●</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hysteria-server.service</span><span style="color:#24292E;"> </span><span style="color:#032F62;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Hysteria</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Server</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Service</span><span style="color:#24292E;"> (config.yaml)</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">Loaded:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">loaded</span><span style="color:#24292E;"> (/etc/systemd/system/hysteria-server.service; </span><span style="color:#6F42C1;">disabled</span><span style="color:#24292E;">; </span><span style="color:#6F42C1;">vendor</span><span style="color:#24292E;"> </span><span style="color:#032F62;">preset:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">disabled</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">Active:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">active</span><span style="color:#24292E;"> (running) since Wed 2025-02-26 09:40:41 UTC; </span><span style="color:#6F42C1;">4s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ago</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Main</span><span style="color:#24292E;"> </span><span style="color:#032F62;">PID:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">569568</span><span style="color:#24292E;"> (hysteria)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">Tasks:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">4</span><span style="color:#24292E;"> (limit: </span><span style="color:#005CC5;">4704</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">Memory:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">8.7</span><span style="color:#032F62;">M</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">CGroup:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/system.slice/hysteria-server.service</span></span>
<span class="line"><span style="color:#24292E;">           </span><span style="color:#6F42C1;">└─569568</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/local/bin/hysteria</span><span style="color:#24292E;"> </span><span style="color:#032F62;">server</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--config</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/hysteria/config.yaml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Feb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">26</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">09</span><span style="color:#032F62;">:40:41</span><span style="color:#24292E;"> </span><span style="color:#032F62;">laxh1-20241107135815476cbe</span><span style="color:#24292E;"> </span><span style="color:#032F62;">systemd[</span><span style="color:#005CC5;">1</span><span style="color:#032F62;">]:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Started</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Hysteria</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Server</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Service</span><span style="color:#24292E;"> (config.yaml).</span></span>
<span class="line"><span style="color:#6F42C1;">Feb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">26</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">09</span><span style="color:#032F62;">:40:41</span><span style="color:#24292E;"> </span><span style="color:#032F62;">laxh1-20241107135815476cbe</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hysteria[</span><span style="color:#005CC5;">569568</span><span style="color:#032F62;">]:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2025</span><span style="color:#032F62;">-02-26T09:40:41Z</span><span style="color:#24292E;">        </span><span style="color:#032F62;">INFO</span><span style="color:#24292E;">        </span><span style="color:#032F62;">server</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mode</span></span>
<span class="line"><span style="color:#6F42C1;">Feb</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">26</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">09</span><span style="color:#032F62;">:40:41</span><span style="color:#24292E;"> </span><span style="color:#032F62;">laxh1-20241107135815476cbe</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hysteria[</span><span style="color:#005CC5;">569568</span><span style="color:#032F62;">]:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2025</span><span style="color:#032F62;">-02-26T09:40:41Z</span><span style="color:#24292E;">        </span><span style="color:#032F62;">INFO</span><span style="color:#24292E;">        </span><span style="color:#032F62;">server</span><span style="color:#24292E;"> </span><span style="color:#032F62;">up</span><span style="color:#24292E;"> </span><span style="color:#032F62;">and</span><span style="color:#24292E;"> </span><span style="color:#032F62;">running</span></span></code></pre></div><h2 id="_1-3-客户端" tabindex="-1">1.3 客户端 <a class="header-anchor" href="#_1-3-客户端" aria-label="Permalink to &quot;1.3 客户端&quot;">​</a></h2><h3 id="_1-配置文件" tabindex="-1">1.配置文件 <a class="header-anchor" href="#_1-配置文件" aria-label="Permalink to &quot;1.配置文件&quot;">​</a></h3><ul><li>win下保存成hy.txt</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">server:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ip:443</span></span>
<span class="line"><span style="color:#B392F0;">auth:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">han123456!@#</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">bandwidth:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">up:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mbps</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">down:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mbps</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span></span>
<span class="line"><span style="color:#B392F0;">tls:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">sni:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bing.com</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#非自签证书，自定义域名</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">insecure:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#使用自签时需要改成true，如果是ssl，则是false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">socks5:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">listen:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">127.0</span><span style="color:#9ECBFF;">.0.1:1080</span></span>
<span class="line"><span style="color:#B392F0;">http:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">listen:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">127.0</span><span style="color:#9ECBFF;">.0.1:8080</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">server:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ip:443</span></span>
<span class="line"><span style="color:#6F42C1;">auth:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">han123456!@#</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">bandwidth:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">up:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">20</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mbps</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">down:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">50</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mbps</span></span>
<span class="line"><span style="color:#24292E;">  </span></span>
<span class="line"><span style="color:#6F42C1;">tls:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">sni:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bing.com</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#非自签证书，自定义域名</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">insecure:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#使用自签时需要改成true，如果是ssl，则是false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">socks5:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">listen:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">127.0</span><span style="color:#032F62;">.0.1:1080</span></span>
<span class="line"><span style="color:#6F42C1;">http:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">listen:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">127.0</span><span style="color:#032F62;">.0.1:8080</span></span></code></pre></div><h3 id="_2-win客户端" tabindex="-1">2.win客户端 <a class="header-anchor" href="#_2-win客户端" aria-label="Permalink to &quot;2.win客户端&quot;">​</a></h3><p>v2rayN <a href="https://github.com/2dust/v2rayN/releases/latest" target="_blank" rel="noreferrer">下载</a></p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202502270947925.png" alt="image-20250227094707885"></p><p>Hysteria 2<a href="https://github.com/apernet/hysteria/releases" target="_blank" rel="noreferrer">下载</a></p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202502270948226.png" alt="image-20250227094816770"></p><p>Hysteria 2<a href="https://v2.hysteria.network/zh/" target="_blank" rel="noreferrer">文档</a></p><ul><li><p>解压v2rayN，不用安装</p></li><li><p>把Hysteria下载的文件放到D:\\nginx\\v2rayN-Core\\bin\\hysteria2，根据自己路径进行放置<img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202502270950253.png" alt="image-20250227095039140"></p></li><li><p>配置v2rayN</p></li></ul><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202502270952527.png" alt="image-20250227095207965"></p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202502270954576.png" alt="image-20250227095424055"></p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202502270955331.png" alt="image-20250227095515990"></p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202502270956520.png" alt="image-20250227095628577"></p><h3 id="_3-android客户端-sfa" tabindex="-1">3.Android客户端（SFA） <a class="header-anchor" href="#_3-android客户端-sfa" aria-label="Permalink to &quot;3.Android客户端（SFA）&quot;">​</a></h3><p>sing-box<a href="https://sing-box.sagernet.org/zh/" target="_blank" rel="noreferrer">文档</a></p><p>Android<a href="https://install.appcenter.ms/users/nekohasekai/apps/sfa/distribution_groups/publictest" target="_blank" rel="noreferrer">客户端</a>（SFA）</p><h4 id="sing-box配置文件-android-ios" tabindex="-1">sing-box配置文件(Android/IOS) <a class="header-anchor" href="#sing-box配置文件-android-ios" aria-label="Permalink to &quot;sing-box配置文件(Android/IOS)&quot;">​</a></h4><ul><li>ssl证书</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">&quot;dns&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">&quot;servers&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;tag&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;cf&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;address&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;https://1.1.1.1/dns-query&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;tag&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;local&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;address&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;223.5.5.5&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;detour&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;direct&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;tag&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;block&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;address&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;rcode://success&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    ],</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">&quot;rules&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;geosite&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;category-ads-all&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;server&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;block&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;disable_cache&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;outbound&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;any&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;server&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;local&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;geosite&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;cn&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;server&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;local&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    ],</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">&quot;strategy&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;ipv4_only&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">&quot;inbounds&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;type&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;tun&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;inet4_address&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;172.19.0.1/30&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;auto_route&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span><span style="color:#9ECBFF;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;strict_route&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span><span style="color:#9ECBFF;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;sniff&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  ],</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">&quot;outbounds&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;type&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;hysteria2&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;tag&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;proxy&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;server&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;ip&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;server_port&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">443</span><span style="color:#9ECBFF;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;up_mbps&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">20</span><span style="color:#9ECBFF;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;down_mbps&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">50</span><span style="color:#9ECBFF;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;password&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;123456&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;tls&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;enabled&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span><span style="color:#9ECBFF;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;server_name&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;xxx.com&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;insecure&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;type&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;direct&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;tag&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;direct&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;type&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;block&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;tag&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;block&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;type&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;dns&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;tag&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;dns-out&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  ],</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">&quot;route&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">&quot;rules&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;protocol&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;dns&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;outbound&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;dns-out&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;geosite&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;cn&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;geoip&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">&quot;private&quot;</span><span style="color:#B392F0;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">&quot;cn&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        ],</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;outbound&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;direct&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;geosite&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;category-ads-all&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;outbound&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;block&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    ],</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">&quot;auto_detect_interface&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">&quot;dns&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">&quot;servers&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;tag&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;cf&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;address&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;https://1.1.1.1/dns-query&quot;</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;tag&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;local&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;address&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;223.5.5.5&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;detour&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;direct&quot;</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;tag&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;block&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;address&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;rcode://success&quot;</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    ],</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">&quot;rules&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;geosite&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;category-ads-all&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;server&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;block&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;disable_cache&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;outbound&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;any&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;server&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;local&quot;</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;geosite&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;cn&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;server&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;local&quot;</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    ],</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">&quot;strategy&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;ipv4_only&quot;</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">&quot;inbounds&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;type&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;tun&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;inet4_address&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;172.19.0.1/30&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;auto_route&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span><span style="color:#032F62;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;strict_route&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">false</span><span style="color:#032F62;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;sniff&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  ],</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">&quot;outbounds&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;type&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;hysteria2&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;tag&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;proxy&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;server&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;ip&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;server_port&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">443</span><span style="color:#032F62;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;up_mbps&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">20</span><span style="color:#032F62;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;down_mbps&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">50</span><span style="color:#032F62;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;password&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;123456&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;tls&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;enabled&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span><span style="color:#032F62;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;server_name&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;xxx.com&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;insecure&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;type&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;direct&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;tag&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;direct&quot;</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;type&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;block&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;tag&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;block&quot;</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;type&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;dns&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;tag&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;dns-out&quot;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  ],</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">&quot;route&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">&quot;rules&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;protocol&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;dns&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;outbound&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;dns-out&quot;</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;geosite&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;cn&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;geoip&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">&quot;private&quot;</span><span style="color:#6F42C1;">,</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">&quot;cn&quot;</span></span>
<span class="line"><span style="color:#24292E;">        ],</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;outbound&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;direct&quot;</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;geosite&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;category-ads-all&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;outbound&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;block&quot;</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    ],</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">&quot;auto_detect_interface&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><ul><li>自签证书</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">&quot;dns&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">&quot;servers&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;tag&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;cf&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;address&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;https://1.1.1.1/dns-query&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;tag&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;local&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;address&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;223.5.5.5&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;detour&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;direct&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;tag&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;block&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;address&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;rcode://success&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    ],</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">&quot;rules&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;geosite&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;category-ads-all&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;server&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;block&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;disable_cache&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;outbound&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;any&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;server&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;local&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;geosite&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;cn&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;server&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;local&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    ],</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">&quot;strategy&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;ipv4_only&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">&quot;inbounds&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;type&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;tun&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;inet4_address&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;172.19.0.1/30&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;auto_route&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span><span style="color:#9ECBFF;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;strict_route&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span><span style="color:#9ECBFF;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;sniff&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  ],</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">&quot;outbounds&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;type&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;hysteria2&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;tag&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;proxy&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;server&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;ip&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;server_port&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">443</span><span style="color:#9ECBFF;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;up_mbps&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">20</span><span style="color:#9ECBFF;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;down_mbps&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">50</span><span style="color:#9ECBFF;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;password&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;123456&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;tls&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;enabled&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span><span style="color:#9ECBFF;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;server_name&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;a.com&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;insecure&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;type&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;direct&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;tag&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;direct&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;type&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;block&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;tag&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;block&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;type&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;dns&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">&quot;tag&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;dns-out&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  ],</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">&quot;route&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">&quot;rules&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;protocol&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;dns&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;outbound&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;dns-out&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;geosite&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;cn&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;geoip&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">&quot;private&quot;</span><span style="color:#B392F0;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">&quot;cn&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        ],</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;outbound&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;direct&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;geosite&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;category-ads-all&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">&quot;outbound&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;block&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    ],</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">&quot;auto_detect_interface&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">&quot;dns&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">&quot;servers&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;tag&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;cf&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;address&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;https://1.1.1.1/dns-query&quot;</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;tag&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;local&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;address&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;223.5.5.5&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;detour&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;direct&quot;</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;tag&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;block&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;address&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;rcode://success&quot;</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    ],</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">&quot;rules&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;geosite&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;category-ads-all&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;server&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;block&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;disable_cache&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;outbound&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;any&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;server&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;local&quot;</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;geosite&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;cn&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;server&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;local&quot;</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    ],</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">&quot;strategy&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;ipv4_only&quot;</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">&quot;inbounds&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;type&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;tun&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;inet4_address&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;172.19.0.1/30&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;auto_route&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span><span style="color:#032F62;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;strict_route&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">false</span><span style="color:#032F62;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;sniff&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  ],</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">&quot;outbounds&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;type&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;hysteria2&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;tag&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;proxy&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;server&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;ip&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;server_port&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">443</span><span style="color:#032F62;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;up_mbps&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">20</span><span style="color:#032F62;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;down_mbps&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">50</span><span style="color:#032F62;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;password&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;123456&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;tls&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;enabled&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span><span style="color:#032F62;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;server_name&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;a.com&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;insecure&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">false</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;type&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;direct&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;tag&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;direct&quot;</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;type&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;block&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;tag&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;block&quot;</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;type&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;dns&quot;,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">&quot;tag&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;dns-out&quot;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  ],</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">&quot;route&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">&quot;rules&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;protocol&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;dns&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;outbound&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;dns-out&quot;</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;geosite&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;cn&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;geoip&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">&quot;private&quot;</span><span style="color:#6F42C1;">,</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">&quot;cn&quot;</span></span>
<span class="line"><span style="color:#24292E;">        ],</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;outbound&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;direct&quot;</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;geosite&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;category-ads-all&quot;,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">&quot;outbound&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;block&quot;</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    ],</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">&quot;auto_detect_interface&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p><code>注意修改ip、端口、密码、tls</code></p><ul><li>下载</li></ul><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202502271010073.png" alt="image-20250227100959940"></p><ul><li>安装</li></ul><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202502271011743.png" alt="image-20250227101126034"></p><ul><li>添加配置</li></ul><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202502271021275.png" alt="image-20250227102104203"></p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202502271022059.png" alt="image-20250227102200513"></p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202502271022424.png" alt="image-20250227102253628"></p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202502271023433.png" alt="image-20250227102327420"></p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202502271025762.png" alt="image-20250227102520002"></p><p>之后点击返回，自动保存</p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202502271026642.png" alt="image-20250227102606356"></p><p>点击左上角箭头返回</p><ul><li>开启服务</li></ul><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202502271027721.png" alt="image-20250227102727017"></p><p>第一次下载会下载配置</p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202502271028571.png" alt="image-20250227102826663"></p><p>最终结果显示</p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202502271029098.png" alt="image-20250227102953034"></p><h3 id="_4-ios客户端-testflight" tabindex="-1">4.IOS客户端（TestFlight） <a class="header-anchor" href="#_4-ios客户端-testflight" aria-label="Permalink to &quot;4.IOS客户端（TestFlight）&quot;">​</a></h3><p><a href="https://testflight.apple.com/join/AcqO44FH" target="_blank" rel="noreferrer">https://testflight.apple.com/join/AcqO44FH</a> （1.5.0 beta版支持Hysteria 2）</p><ul><li>安装TestFlight</li></ul><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202502271034515.png" alt="image-20250227103441643"></p><p>点击开始测试</p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202502271037160.png" alt="image-20250227103743093"></p><p>开始安装</p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202502271039587.png" alt="image-20250227103903335"></p><p>安装vpn配置</p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202502271045074.png" alt="image-20250227104510511"></p><p><code>后续和安卓操作方式一样</code></p><h3 id="_5-ios客户端-appstore" tabindex="-1">5.IOS客户端（AppStore） <a class="header-anchor" href="#_5-ios客户端-appstore" aria-label="Permalink to &quot;5.IOS客户端（AppStore）&quot;">​</a></h3><p><a href="https://apps.apple.com/us/app/sing-box/id6451272673" target="_blank" rel="noreferrer">https://apps.apple.com/us/app/sing-box/id6451272673</a></p><p>需要美区id进行下载</p><h3 id="_6-karing客户端-appstore" tabindex="-1">6.Karing客户端（AppStore） <a class="header-anchor" href="#_6-karing客户端-appstore" aria-label="Permalink to &quot;6.Karing客户端（AppStore）&quot;">​</a></h3><p>需要美区id进行下载，免费</p><h3 id="_7-karing客户端-android" tabindex="-1">7.karing客户端（android） <a class="header-anchor" href="#_7-karing客户端-android" aria-label="Permalink to &quot;7.karing客户端（android）&quot;">​</a></h3><p><a href="https://karing.app/quickstart/" target="_blank" rel="noreferrer">https://karing.app/quickstart/</a></p><h3 id="_8-小飞机客户端" tabindex="-1">8.小飞机客户端 <a class="header-anchor" href="#_8-小飞机客户端" aria-label="Permalink to &quot;8.小飞机客户端&quot;">​</a></h3><p>分享连接，导入到小飞机</p><h3 id="_9-mac客户端" tabindex="-1">9.mac客户端 <a class="header-anchor" href="#_9-mac客户端" aria-label="Permalink to &quot;9.mac客户端&quot;">​</a></h3><ul><li>inter芯片</li></ul><p>下载</p><p><a href="https://github.com/2dust/v2rayN/releases/download/7.10.5/v2rayN-macos-64.dmg" target="_blank" rel="noreferrer">https://github.com/2dust/v2rayN/releases/download/7.10.5/v2rayN-macos-64.dmg</a></p><p><a href="https://github.com/apernet/hysteria/releases/download/app%2Fv2.6.1/hysteria-linux-386" target="_blank" rel="noreferrer">https://github.com/apernet/hysteria/releases/download/app%2Fv2.6.1/hysteria-linux-386</a></p><ul><li>arm芯片</li></ul><p><a href="https://github.com/2dust/v2rayN/releases/download/7.10.5/v2rayN-macos-arm64.dmg" target="_blank" rel="noreferrer">https://github.com/2dust/v2rayN/releases/download/7.10.5/v2rayN-macos-arm64.dmg</a></p><p><a href="https://github.com/apernet/hysteria/releases/download/app%2Fv2.6.1/hysteria-linux-arm" target="_blank" rel="noreferrer">https://github.com/apernet/hysteria/releases/download/app%2Fv2.6.1/hysteria-linux-arm</a></p><ul><li>安装v2rayN</li></ul><p>v2rayN-macos-64.dmg，双击运行</p><ul><li>安装hysteria</li></ul><p>根据提示安装hysteria</p><h4 id="macos问题" tabindex="-1">macOS问题 <a class="header-anchor" href="#macos问题" aria-label="Permalink to &quot;macOS问题&quot;">​</a></h4><ol><li><p>非<code>zip</code>格式包为安装版，存储文件位置为系统规定的用户文件中</p></li><li><p>支持的系统版本</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">macOS</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">11</span><span style="color:#9ECBFF;">+</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">macOS</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">11</span><span style="color:#032F62;">+</span></span></code></pre></div></li></ol><h5 id="macos-x64" tabindex="-1">macOS x64 <a class="header-anchor" href="#macos-x64" aria-label="Permalink to &quot;macOS x64&quot;">​</a></h5><ul><li><code>v2rayN-macos-64.zip</code> 执行：<code>chmod +x v2rayN</code> 普通用户运行 <code>./v2rayN</code></li><li><code>v2rayN-macos-64.dmg</code> 由于安装包没有签名，会提示应用已损坏；安装后需要运行：<code>xattr -cr /Applications/v2rayN.app</code></li></ul><h5 id="macos-arm64" tabindex="-1">macOS arm64 <a class="header-anchor" href="#macos-arm64" aria-label="Permalink to &quot;macOS arm64&quot;">​</a></h5><ul><li><code>v2rayN-macos-arm64.zip</code> 执行：<code>chmod +x v2rayN</code> 普通用户运行 <code>./v2rayN</code></li><li><code>v2rayN-macos-arm64.dmg</code> 由于安装包没有签名，会提示应用已损坏；安装后需要运行：<code>xattr -cr /Applications/v2rayN.app</code></li></ul><h1 id="_2-基于ubuntu" tabindex="-1">2.基于ubuntu <a class="header-anchor" href="#_2-基于ubuntu" aria-label="Permalink to &quot;2.基于ubuntu&quot;">​</a></h1><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">update</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> &amp;&amp; </span><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">curl</span><span style="color:#E1E4E8;"> &amp;&amp; </span><span style="color:#B392F0;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">socat</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">wget</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-N</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--no-check-certificate</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://raw.githubusercontent.com/flame1ce/hysteria2-install/main/hysteria2-install-main/hy2/hysteria.sh</span><span style="color:#E1E4E8;"> &amp;&amp; </span><span style="color:#B392F0;">bash</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">hysteria.sh</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">apt</span><span style="color:#24292E;"> </span><span style="color:#032F62;">update</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> &amp;&amp; </span><span style="color:#6F42C1;">apt</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">curl</span><span style="color:#24292E;"> &amp;&amp; </span><span style="color:#6F42C1;">apt</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">socat</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">wget</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-N</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--no-check-certificate</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://raw.githubusercontent.com/flame1ce/hysteria2-install/main/hysteria2-install-main/hy2/hysteria.sh</span><span style="color:#24292E;"> &amp;&amp; </span><span style="color:#6F42C1;">bash</span><span style="color:#24292E;"> </span><span style="color:#032F62;">hysteria.sh</span></span></code></pre></div><p>脚本地址：<a href="https://asml.cf/sb-yg" target="_blank" rel="noreferrer"><strong>SINB-BOX</strong></a></p><p>脚本地址：<a href="https://asml.cf/xray" target="_blank" rel="noreferrer"><strong>3X-UI面板</strong></a></p><p>脚本地址：<a href="https://asml.cf/hui" target="_blank" rel="noreferrer"><strong>H-UI面板</strong></a></p><p>xboard面板，<a href="https://www.youtube.com/watch?v=Fwn0nFbB0zY&amp;t=104s" target="_blank" rel="noreferrer">https://www.youtube.com/watch?v=Fwn0nFbB0zY&amp;t=104s</a></p><p><a href="https://github.com/cedar2025/Xboard" target="_blank" rel="noreferrer">https://github.com/cedar2025/Xboard</a></p><p>对接usdt</p><p><a href="https://github.com/utgpay2/V2Boardusdtapi?tab=readme-ov-file" target="_blank" rel="noreferrer">https://github.com/utgpay2/V2Boardusdtapi?tab=readme-ov-file</a></p><p>php环境，<a href="https://nextpanel.dev/docs/installation/debian" target="_blank" rel="noreferrer">https://nextpanel.dev/docs/installation/debian</a></p><h1 id="_3-基于singbox" tabindex="-1">3.基于singbox <a class="header-anchor" href="#_3-基于singbox" aria-label="Permalink to &quot;3.基于singbox&quot;">​</a></h1><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">bash</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&lt;(</span><span style="color:#B392F0;">wget</span><span style="color:#9ECBFF;"> </span><span style="color:#79B8FF;">-qO-</span><span style="color:#9ECBFF;"> </span><span style="color:#79B8FF;">-o-</span><span style="color:#9ECBFF;"> https://github.com/233boy/sing-box/raw/main/install.sh)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">bash</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&lt;(</span><span style="color:#6F42C1;">wget</span><span style="color:#032F62;"> </span><span style="color:#005CC5;">-qO-</span><span style="color:#032F62;"> </span><span style="color:#005CC5;">-o-</span><span style="color:#032F62;"> https://github.com/233boy/sing-box/raw/main/install.sh)</span></span></code></pre></div><h1 id="_4-高级用法" tabindex="-1">4.高级用法 <a class="header-anchor" href="#_4-高级用法" aria-label="Permalink to &quot;4.高级用法&quot;">​</a></h1><h2 id="_4-1-acl" tabindex="-1">4.1 acl <a class="header-anchor" href="#_4-1-acl" aria-label="Permalink to &quot;4.1 acl&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">config.yaml</span></span>
<span class="line"><span style="color:#B392F0;">listen:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">:443</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#监听端口</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#使用自签证书</span></span>
<span class="line"><span style="color:#B392F0;">tls:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">cert:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/hysteria/server.crt</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">key:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/hysteria/server.key</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">auth:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">password</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">password:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">9</span><span style="color:#9ECBFF;">X05Ewu</span><span style="color:#79B8FF;">*</span><span style="color:#9ECBFF;">UaYo8</span><span style="color:#79B8FF;">*</span><span style="color:#9ECBFF;">o2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">acl:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">ruleset:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;/etc/hysteria/acl.yml&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">masquerade:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">type</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">proxy</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">proxy:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">url:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://bing.com</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#伪装网址</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">rewriteHost:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#032F62;">config.yaml</span></span>
<span class="line"><span style="color:#6F42C1;">listen:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">:443</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#监听端口</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#使用自签证书</span></span>
<span class="line"><span style="color:#6F42C1;">tls:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">cert:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/hysteria/server.crt</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">key:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/hysteria/server.key</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">auth:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">type</span><span style="color:#24292E;">: </span><span style="color:#032F62;">password</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">password:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">9</span><span style="color:#032F62;">X05Ewu</span><span style="color:#005CC5;">*</span><span style="color:#032F62;">UaYo8</span><span style="color:#005CC5;">*</span><span style="color:#032F62;">o2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">acl:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">ruleset:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;/etc/hysteria/acl.yml&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">masquerade:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">type</span><span style="color:#24292E;">: </span><span style="color:#032F62;">proxy</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">proxy:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">url:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://bing.com</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#伪装网址</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">rewriteHost:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span></span></code></pre></div><ul><li>创建acl.yml</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 默认规则（&quot;direct&quot; 直连, &quot;block&quot; 拦截, &quot;proxy&quot; 走代理）</span></span>
<span class="line"><span style="color:#B392F0;">default:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">proxy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 拦截访问 YouTube 和 TikTok</span></span>
<span class="line"><span style="color:#B392F0;">rules:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rule:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">block</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">domains:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;*.youtube.com&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;*.googlevideo.com&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;*.tiktok.com&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;x.com&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;*.netflix.com&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;*.dailymotion.com&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;*.vimeo.com&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;*.disneyplus.com&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;gemini.google.com&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 允许访问本地内网（直连）</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rule:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">direct</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">ip:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">192.168</span><span style="color:#9ECBFF;">.0.0/16</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10.0</span><span style="color:#9ECBFF;">.0.0/8</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">fd00::/8</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 阻止访问某些 IP（比如某些 CDN）</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rule:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">block</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">ip:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">203.0</span><span style="color:#9ECBFF;">.113.0/24</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">198.51</span><span style="color:#9ECBFF;">.100.0/24</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 让特定域名直连</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#  - rule: direct</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#  domains:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#    - &quot;*.example.com&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 让所有中国大陆网站直连（可结合 ChinaList 使用）</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rule:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">direct</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">ip:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">223.5</span><span style="color:#9ECBFF;">.5.5/32</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># AliDNS</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">114.114</span><span style="color:#9ECBFF;">.114.114/32</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 114DNS</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">211.136</span><span style="color:#9ECBFF;">.17.107/32</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># China Mobile DNS</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 默认规则（&quot;direct&quot; 直连, &quot;block&quot; 拦截, &quot;proxy&quot; 走代理）</span></span>
<span class="line"><span style="color:#6F42C1;">default:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">proxy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 拦截访问 YouTube 和 TikTok</span></span>
<span class="line"><span style="color:#6F42C1;">rules:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rule:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">block</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">domains:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;*.youtube.com&quot;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;*.googlevideo.com&quot;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;*.tiktok.com&quot;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;x.com&quot;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;*.netflix.com&quot;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;*.dailymotion.com&quot;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;*.vimeo.com&quot;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;*.disneyplus.com&quot;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;gemini.google.com&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;"># 允许访问本地内网（直连）</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rule:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">direct</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">ip:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">192.168</span><span style="color:#032F62;">.0.0/16</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10.0</span><span style="color:#032F62;">.0.0/8</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">fd00::/8</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;"># 阻止访问某些 IP（比如某些 CDN）</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rule:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">block</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">ip:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">203.0</span><span style="color:#032F62;">.113.0/24</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">198.51</span><span style="color:#032F62;">.100.0/24</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;"># 让特定域名直连</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">#  - rule: direct</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">#  domains:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">#    - &quot;*.example.com&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;"># 让所有中国大陆网站直连（可结合 ChinaList 使用）</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rule:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">direct</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">ip:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">223.5</span><span style="color:#032F62;">.5.5/32</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># AliDNS</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">114.114</span><span style="color:#032F62;">.114.114/32</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># 114DNS</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">211.136</span><span style="color:#032F62;">.17.107/32</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># China Mobile DNS</span></span></code></pre></div><h2 id="_4-2-端口跳跃" tabindex="-1">4.2 端口跳跃 <a class="header-anchor" href="#_4-2-端口跳跃" aria-label="Permalink to &quot;4.2 端口跳跃&quot;">​</a></h2><p>长时间单端口 UDP 连接容易被运营商封锁/QoS 的问题。如遇类似问题可尝试使用端口跳跃来解决。</p><p>1.服务端配置</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># IPv4</span></span>
<span class="line"><span style="color:#B392F0;">iptables</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-A</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PREROUTING</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">eth0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">udp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dport</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">20000</span><span style="color:#9ECBFF;">:50000</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-j</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">DNAT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--to-destination</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">:443</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># IPv6</span></span>
<span class="line"><span style="color:#B392F0;">ip6tables</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-A</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PREROUTING</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">eth0</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">udp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dport</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">20000</span><span style="color:#9ECBFF;">:50000</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-j</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">DNAT</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--to-destination</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">:443</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看</span></span>
<span class="line"><span style="color:#B392F0;">iptables</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-nL</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--line</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># 查看当前的ipv4网络的规则</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#删除</span></span>
<span class="line"><span style="color:#B392F0;">iptables</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-D</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">PREROUTING</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 删除第三条规则</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># IPv4</span></span>
<span class="line"><span style="color:#6F42C1;">iptables</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-t</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nat</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-A</span><span style="color:#24292E;"> </span><span style="color:#032F62;">PREROUTING</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">eth0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">udp</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dport</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">20000</span><span style="color:#032F62;">:50000</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-j</span><span style="color:#24292E;"> </span><span style="color:#032F62;">DNAT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--to-destination</span><span style="color:#24292E;"> </span><span style="color:#032F62;">:443</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># IPv6</span></span>
<span class="line"><span style="color:#6F42C1;">ip6tables</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-t</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nat</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-A</span><span style="color:#24292E;"> </span><span style="color:#032F62;">PREROUTING</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">eth0</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">udp</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dport</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">20000</span><span style="color:#032F62;">:50000</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-j</span><span style="color:#24292E;"> </span><span style="color:#032F62;">DNAT</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--to-destination</span><span style="color:#24292E;"> </span><span style="color:#032F62;">:443</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看</span></span>
<span class="line"><span style="color:#6F42C1;">iptables</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-t</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nat</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-nL</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--line</span><span style="color:#24292E;">      </span><span style="color:#6A737D;"># 查看当前的ipv4网络的规则</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#删除</span></span>
<span class="line"><span style="color:#6F42C1;">iptables</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-t</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nat</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-D</span><span style="color:#24292E;"> </span><span style="color:#032F62;">PREROUTING</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">    </span><span style="color:#6A737D;"># 删除第三条规则</span></span></code></pre></div><p>2.客户端配置</p><p>touch hy.txt</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">server: </span><span style="color:#79B8FF;">192.168</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">20000-50000</span></span>
<span class="line"><span style="color:#E1E4E8;">auth: </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">ccf</span><span style="color:#79B8FF;">98969</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">bandwidth:</span></span>
<span class="line"><span style="color:#E1E4E8;">  up: </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;"> mbps</span></span>
<span class="line"><span style="color:#E1E4E8;">  down: </span><span style="color:#79B8FF;">50</span><span style="color:#E1E4E8;"> mbps</span></span>
<span class="line"><span style="color:#E1E4E8;">transport:</span></span>
<span class="line"><span style="color:#E1E4E8;">  udp:</span></span>
<span class="line"><span style="color:#E1E4E8;">    hopInterval: </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">s </span></span>
<span class="line"><span style="color:#E1E4E8;">tls:</span></span>
<span class="line"><span style="color:#E1E4E8;">  sni: bing.com</span></span>
<span class="line"><span style="color:#E1E4E8;">  insecure: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;"> #使用自签时需要改成true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">socks</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  listen: </span><span style="color:#79B8FF;">127.0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">0.1</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">1080</span></span>
<span class="line"><span style="color:#E1E4E8;">http:</span></span>
<span class="line"><span style="color:#E1E4E8;">  listen: </span><span style="color:#79B8FF;">127.0</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">0.1</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">8080</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">server: </span><span style="color:#005CC5;">192.168</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">10</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">20000-50000</span></span>
<span class="line"><span style="color:#24292E;">auth: </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">ccf</span><span style="color:#005CC5;">98969</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">bandwidth:</span></span>
<span class="line"><span style="color:#24292E;">  up: </span><span style="color:#005CC5;">20</span><span style="color:#24292E;"> mbps</span></span>
<span class="line"><span style="color:#24292E;">  down: </span><span style="color:#005CC5;">50</span><span style="color:#24292E;"> mbps</span></span>
<span class="line"><span style="color:#24292E;">transport:</span></span>
<span class="line"><span style="color:#24292E;">  udp:</span></span>
<span class="line"><span style="color:#24292E;">    hopInterval: </span><span style="color:#005CC5;">30</span><span style="color:#24292E;">s </span></span>
<span class="line"><span style="color:#24292E;">tls:</span></span>
<span class="line"><span style="color:#24292E;">  sni: bing.com</span></span>
<span class="line"><span style="color:#24292E;">  insecure: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;"> #使用自签时需要改成true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">socks</span><span style="color:#005CC5;">5</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  listen: </span><span style="color:#005CC5;">127.0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">0.1</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">1080</span></span>
<span class="line"><span style="color:#24292E;">http:</span></span>
<span class="line"><span style="color:#24292E;">  listen: </span><span style="color:#005CC5;">127.0</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">0.1</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">8080</span></span></code></pre></div><blockquote><p>图形看1.3配置</p></blockquote><p>server:<code>example.com:1145,5144</code> 表示服务器在 1145 和 5144 端口上可用（共 2 个端口）</p><p>server:<code>example.com:20000-50000</code> 表示服务器在 20000 到 50000 端口上可用（共 30001 个端口）</p><p>server:<code>example.com:1145,5144-10240</code> 表示服务器在 1145 和 5144-10240 端口上可用（共 5098 个端口）</p><p>对端口的数量没有限制，可以添加任意多个端口/端口范围。</p><p>客户端会在连接时随机选择一个端口进行连接，并每过一段时间（<strong>默认 10 秒</strong>，由客户端配置中的 <code>hop_interval</code> 控制）随机选择一个新端口进行连接。切换的过程对上层应用是透明的，正常情况下不会造成任何数据丢失/连接中断。</p><h1 id="_5-faq" tabindex="-1">5.FAQ <a class="header-anchor" href="#_5-faq" aria-label="Permalink to &quot;5.FAQ&quot;">​</a></h1><p>开启git代理，可以提交github仓库</p><p>开启v2ray后，默认端口是20808，根据自己环境进行修改</p><ul><li>socks代理，选其一即可</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">git config --global http.proxy socks://127.0.0.1:20808</span></span>
<span class="line"><span style="color:#e1e4e8;">git config --global https.proxy socks://127.0.0.1:20808</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">git config --global http.proxy socks://127.0.0.1:20808</span></span>
<span class="line"><span style="color:#24292e;">git config --global https.proxy socks://127.0.0.1:20808</span></span></code></pre></div><ul><li>http代理</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">git</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">config</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--global</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">http.proxy</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">http://127.0.0.1:20809</span></span>
<span class="line"><span style="color:#B392F0;">git</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">config</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--global</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https.proxy</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://127.0.0.1:20809</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">git</span><span style="color:#24292E;"> </span><span style="color:#032F62;">config</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--global</span><span style="color:#24292E;"> </span><span style="color:#032F62;">http.proxy</span><span style="color:#24292E;"> </span><span style="color:#032F62;">http://127.0.0.1:20809</span></span>
<span class="line"><span style="color:#6F42C1;">git</span><span style="color:#24292E;"> </span><span style="color:#032F62;">config</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--global</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https.proxy</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://127.0.0.1:20809</span></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">❌ 注意</p><p>socks代理与http代理不能同时配置，因为config的key相同，会造成覆盖</p></div><ul><li>验证</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">git</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">config</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--list</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">git</span><span style="color:#24292E;"> </span><span style="color:#032F62;">config</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--list</span></span></code></pre></div><ul><li>删除</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">git</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">config</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--global</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--unset</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">http.proxy</span></span>
<span class="line"><span style="color:#B392F0;">git</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">config</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--global</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--unset</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https.proxy</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">git</span><span style="color:#24292E;"> </span><span style="color:#032F62;">config</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--global</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--unset</span><span style="color:#24292E;"> </span><span style="color:#032F62;">http.proxy</span></span>
<span class="line"><span style="color:#6F42C1;">git</span><span style="color:#24292E;"> </span><span style="color:#032F62;">config</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--global</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--unset</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https.proxy</span></span></code></pre></div>`,143),e=[o];function t(c,r,y,E,F,i){return n(),a("div",null,e)}const B=s(p,[["render",t]]);export{u as __pageData,B as default};
