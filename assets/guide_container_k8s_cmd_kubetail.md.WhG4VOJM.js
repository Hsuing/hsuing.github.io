import{_ as s,o as a,c as n,R as l}from"./chunks/framework.zUbWieqp.js";const u=JSON.parse('{"title":"K8s Pod日志神器","description":"","frontmatter":{},"headers":[],"relativePath":"guide/container/k8s/cmd/kubetail.md","filePath":"guide/container/k8s/cmd/kubetail.md","lastUpdated":1715250065000}'),p={name:"guide/container/k8s/cmd/kubetail.md"},o=l(`<blockquote><h1 id="k8s-pod日志神器" tabindex="-1">K8s Pod日志神器 <a class="header-anchor" href="#k8s-pod日志神器" aria-label="Permalink to &quot;K8s Pod日志神器&quot;">​</a></h1></blockquote><p>多容器实时日志查看工具 <code>Kubetail</code> 和 <code>Stern</code></p><h1 id="_1-kubetail-工具" tabindex="-1">1. Kubetail 工具 <a class="header-anchor" href="#_1-kubetail-工具" aria-label="Permalink to &quot;1. Kubetail 工具&quot;">​</a></h1><p><strong>Bash script to tail Kubernetes logs from multiple pods at the same time</strong></p><h2 id="_1-1-安装" tabindex="-1">1.1.安装 <a class="header-anchor" href="#_1-1-安装" aria-label="Permalink to &quot;1.1.安装&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># https://github.com/johanhaleby/kubetail/releases</span></span>
<span class="line"><span style="color:#B392F0;">wget</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://raw.githubusercontent.com/johanhaleby/kubetail/master/kubetail</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+x</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kubetail</span></span>
<span class="line"><span style="color:#B392F0;">cp</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kubetail</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/local/bin</span><span style="color:#E1E4E8;">  &amp;&amp; </span><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+x</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/local/bin/kubetail</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># https://github.com/johanhaleby/kubetail/releases</span></span>
<span class="line"><span style="color:#6F42C1;">wget</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://raw.githubusercontent.com/johanhaleby/kubetail/master/kubetail</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">chmod</span><span style="color:#24292E;"> </span><span style="color:#032F62;">+x</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kubetail</span></span>
<span class="line"><span style="color:#6F42C1;">cp</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kubetail</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/local/bin</span><span style="color:#24292E;">  &amp;&amp; </span><span style="color:#6F42C1;">chmod</span><span style="color:#24292E;"> </span><span style="color:#032F62;">+x</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/local/bin/kubetail</span></span></code></pre></div><h2 id="_1-2使用" tabindex="-1">1.2使用 <a class="header-anchor" href="#_1-2使用" aria-label="Permalink to &quot;1.2使用&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 同时跟踪两个&quot;app2&quot;的Pod的日志</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kubetail</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">app2</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kubetail</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">app1,app2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 指定&quot;app2&quot;的Pod里面的容器名称</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kubetail</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">app2</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">container1</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kubetail</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">app2</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">container1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">container2</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kubetail</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">app2</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">container1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">namespace1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 使用正则表达式</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kubetail</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;^app1|.*my-demo.*&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--regex</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 同时跟踪两个&quot;app2&quot;的Pod的日志</span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kubetail</span><span style="color:#24292E;"> </span><span style="color:#032F62;">app2</span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kubetail</span><span style="color:#24292E;"> </span><span style="color:#032F62;">app1,app2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 指定&quot;app2&quot;的Pod里面的容器名称</span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kubetail</span><span style="color:#24292E;"> </span><span style="color:#032F62;">app2</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">container1</span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kubetail</span><span style="color:#24292E;"> </span><span style="color:#032F62;">app2</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">container1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">container2</span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kubetail</span><span style="color:#24292E;"> </span><span style="color:#032F62;">app2</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">container1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-n</span><span style="color:#24292E;"> </span><span style="color:#032F62;">namespace1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 使用正则表达式</span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kubetail</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;^app1|.*my-demo.*&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--regex</span></span></code></pre></div><ul><li>使用颜色</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># pod:   只有Pod名称着色且其他输出均使用终端默认颜色</span></span>
<span class="line"><span style="color:#6A737D;"># line:  整行是彩色的(默认)</span></span>
<span class="line"><span style="color:#6A737D;"># false: 所有输出都不着色</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kubetail</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">app2</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-k</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pod</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kubetail</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">app2</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-k</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">line</span></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kubetail</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">app2</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-k</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># pod:   只有Pod名称着色且其他输出均使用终端默认颜色</span></span>
<span class="line"><span style="color:#6A737D;"># line:  整行是彩色的(默认)</span></span>
<span class="line"><span style="color:#6A737D;"># false: 所有输出都不着色</span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kubetail</span><span style="color:#24292E;"> </span><span style="color:#032F62;">app2</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-k</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pod</span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kubetail</span><span style="color:#24292E;"> </span><span style="color:#032F62;">app2</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-k</span><span style="color:#24292E;"> </span><span style="color:#032F62;">line</span></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kubetail</span><span style="color:#24292E;"> </span><span style="color:#032F62;">app2</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-k</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">false</span></span></code></pre></div><ul><li>常用参数说明</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">#查看参数</span></span>
<span class="line"><span style="color:#e1e4e8;">kubetail -h</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">#查看参数</span></span>
<span class="line"><span style="color:#24292e;">kubetail -h</span></span></code></pre></div><table><thead><tr><th style="text-align:left;"><strong>参数</strong></th><th>对应含义解析</th></tr></thead><tbody><tr><td style="text-align:left;"><strong><code>-n</code></strong></td><td>指定命名空间的名称</td></tr><tr><td style="text-align:left;"><strong><code>-c</code></strong></td><td>指定多容器 <code>Pod</code> 中的容器具体名称</td></tr><tr><td style="text-align:left;"><strong><code>-k</code></strong></td><td>将输出的日志内容进行着色显示</td></tr><tr><td style="text-align:left;"><strong><code>-b</code></strong></td><td>是否使用 <code>line-buffered</code> 特性，默认为 <code>false</code> 状态</td></tr><tr><td style="text-align:left;"><strong><code>-l</code></strong></td><td>标签过滤器，用于忽略 <code>Pod</code> 名称</td></tr><tr><td style="text-align:left;"><strong><code>-t</code></strong></td><td>指定 <code>Kubeconfig</code> 文件中的 <code>Context</code> 内容</td></tr><tr><td style="text-align:left;"><strong><code>-s</code></strong></td><td>指定返回一个相对时间之后的日志；例如 <code>5s</code>/<code>2m</code>/<code>3h</code>，默认是 <code>10s</code></td></tr></tbody></table>`,13),e=[o];function t(c,r,y,i,E,d){return a(),n("div",null,e)}const h=s(p,[["render",t]]);export{u as __pageData,h as default};
