import{_ as s,o as a,c as n,R as l}from"./chunks/framework.zUbWieqp.js";const m=JSON.parse('{"title":"1.删除集群","description":"","frontmatter":{},"headers":[],"relativePath":"guide/container/swarm/2.delete.md","filePath":"guide/container/swarm/2.delete.md","lastUpdated":1703083183000}'),o={name:"guide/container/swarm/2.delete.md"},p=l(`<h1 id="_1-删除集群" tabindex="-1">1.删除集群 <a class="header-anchor" href="#_1-删除集群" aria-label="Permalink to &quot;1.删除集群&quot;">​</a></h1><h2 id="_1-1master上面执行" tabindex="-1">1.1master上面执行 <a class="header-anchor" href="#_1-1master上面执行" aria-label="Permalink to &quot;1.1master上面执行&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@k8s-master01 docker-swarm]# docker node ls</span></span>
<span class="line"><span style="color:#B392F0;">ID</span><span style="color:#E1E4E8;">                            </span><span style="color:#9ECBFF;">HOSTNAME</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">AVAILABILITY</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">MANAGER</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ENGINE</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">VERSION</span></span>
<span class="line"><span style="color:#B392F0;">k7e22imemlha9ahav3reg01xr</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">k8s-master01</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Ready</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Active</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">Leader</span><span style="color:#E1E4E8;">           </span><span style="color:#79B8FF;">19.03</span><span style="color:#9ECBFF;">.15</span></span>
<span class="line"><span style="color:#B392F0;">6nllkusdfe6m6m72i70i9h7sx</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">k8s-node01</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Ready</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Active</span><span style="color:#E1E4E8;">                          </span><span style="color:#79B8FF;">19.03</span><span style="color:#9ECBFF;">.15</span></span>
<span class="line"><span style="color:#B392F0;">xd530ndpk1g033tjqvl16c87x</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">k8s-node02</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Ready</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Active</span><span style="color:#E1E4E8;">                          </span><span style="color:#79B8FF;">19.03</span><span style="color:#9ECBFF;">.15</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#排空节点，node1,node2</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">node</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">update</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--availability</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">drain</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">k7e22imemlha9ahav3reg01xr</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s-master01 docker-swarm]# docker node ls</span></span>
<span class="line"><span style="color:#B392F0;">ID</span><span style="color:#E1E4E8;">                            </span><span style="color:#9ECBFF;">HOSTNAME</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">AVAILABILITY</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">MANAGER</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ENGINE</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">VERSION</span></span>
<span class="line"><span style="color:#B392F0;">k7e22imemlha9ahav3reg01xr</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">k8s-master01</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Ready</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Drain</span><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">Leader</span><span style="color:#E1E4E8;">           </span><span style="color:#79B8FF;">19.03</span><span style="color:#9ECBFF;">.15</span></span>
<span class="line"><span style="color:#B392F0;">6nllkusdfe6m6m72i70i9h7sx</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">k8s-node01</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Ready</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Active</span><span style="color:#E1E4E8;">                          </span><span style="color:#79B8FF;">19.03</span><span style="color:#9ECBFF;">.15</span></span>
<span class="line"><span style="color:#B392F0;">xd530ndpk1g033tjqvl16c87x</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">k8s-node02</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Ready</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Active</span><span style="color:#E1E4E8;">                          </span><span style="color:#79B8FF;">19.03</span><span style="color:#9ECBFF;">.15</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@k8s-master01 docker-swarm]# docker node ls</span></span>
<span class="line"><span style="color:#6F42C1;">ID</span><span style="color:#24292E;">                            </span><span style="color:#032F62;">HOSTNAME</span><span style="color:#24292E;">       </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">    </span><span style="color:#032F62;">AVAILABILITY</span><span style="color:#24292E;">   </span><span style="color:#032F62;">MANAGER</span><span style="color:#24292E;"> </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ENGINE</span><span style="color:#24292E;"> </span><span style="color:#032F62;">VERSION</span></span>
<span class="line"><span style="color:#6F42C1;">k7e22imemlha9ahav3reg01xr</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;">   </span><span style="color:#032F62;">k8s-master01</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Ready</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Active</span><span style="color:#24292E;">         </span><span style="color:#032F62;">Leader</span><span style="color:#24292E;">           </span><span style="color:#005CC5;">19.03</span><span style="color:#032F62;">.15</span></span>
<span class="line"><span style="color:#6F42C1;">6nllkusdfe6m6m72i70i9h7sx</span><span style="color:#24292E;">     </span><span style="color:#032F62;">k8s-node01</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Ready</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Active</span><span style="color:#24292E;">                          </span><span style="color:#005CC5;">19.03</span><span style="color:#032F62;">.15</span></span>
<span class="line"><span style="color:#6F42C1;">xd530ndpk1g033tjqvl16c87x</span><span style="color:#24292E;">     </span><span style="color:#032F62;">k8s-node02</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Ready</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Active</span><span style="color:#24292E;">                          </span><span style="color:#005CC5;">19.03</span><span style="color:#032F62;">.15</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#排空节点，node1,node2</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">node</span><span style="color:#24292E;"> </span><span style="color:#032F62;">update</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--availability</span><span style="color:#24292E;"> </span><span style="color:#032F62;">drain</span><span style="color:#24292E;"> </span><span style="color:#032F62;">k7e22imemlha9ahav3reg01xr</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@k8s-master01 docker-swarm]# docker node ls</span></span>
<span class="line"><span style="color:#6F42C1;">ID</span><span style="color:#24292E;">                            </span><span style="color:#032F62;">HOSTNAME</span><span style="color:#24292E;">       </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">    </span><span style="color:#032F62;">AVAILABILITY</span><span style="color:#24292E;">   </span><span style="color:#032F62;">MANAGER</span><span style="color:#24292E;"> </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ENGINE</span><span style="color:#24292E;"> </span><span style="color:#032F62;">VERSION</span></span>
<span class="line"><span style="color:#6F42C1;">k7e22imemlha9ahav3reg01xr</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;">   </span><span style="color:#032F62;">k8s-master01</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Ready</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Drain</span><span style="color:#24292E;">          </span><span style="color:#032F62;">Leader</span><span style="color:#24292E;">           </span><span style="color:#005CC5;">19.03</span><span style="color:#032F62;">.15</span></span>
<span class="line"><span style="color:#6F42C1;">6nllkusdfe6m6m72i70i9h7sx</span><span style="color:#24292E;">     </span><span style="color:#032F62;">k8s-node01</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Ready</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Active</span><span style="color:#24292E;">                          </span><span style="color:#005CC5;">19.03</span><span style="color:#032F62;">.15</span></span>
<span class="line"><span style="color:#6F42C1;">xd530ndpk1g033tjqvl16c87x</span><span style="color:#24292E;">     </span><span style="color:#032F62;">k8s-node02</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Ready</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Active</span><span style="color:#24292E;">                          </span><span style="color:#005CC5;">19.03</span><span style="color:#032F62;">.15</span></span></code></pre></div><h2 id="_1-2node上执行" tabindex="-1">1.2node上执行 <a class="header-anchor" href="#_1-2node上执行" aria-label="Permalink to &quot;1.2node上执行&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">#想要那个节点脱离集群就在那个节点下执行以下命令</span></span>
<span class="line"><span style="color:#e1e4e8;">[root@k8s-node01 27018]# docker swarm leave</span></span>
<span class="line"><span style="color:#e1e4e8;">Node left the swarm.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">#想要那个节点脱离集群就在那个节点下执行以下命令</span></span>
<span class="line"><span style="color:#24292e;">[root@k8s-node01 27018]# docker swarm leave</span></span>
<span class="line"><span style="color:#24292e;">Node left the swarm.</span></span></code></pre></div><h2 id="_1-3master上执行" tabindex="-1">1.3master上执行 <a class="header-anchor" href="#_1-3master上执行" aria-label="Permalink to &quot;1.3master上执行&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@k8s-master01 docker-swarm]# docker node rm 6nllkusdfe6m6m72i70i9h7sx</span></span>
<span class="line"><span style="color:#B392F0;">6nllkusdfe6m6m72i70i9h7sx</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s-master01 docker-swarm]# docker node rm xd530ndpk1g033tjqvl16c87x</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@k8s-master01 docker-swarm]# docker swarm leave --force</span></span>
<span class="line"><span style="color:#B392F0;">Node</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">left</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">swarm.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@k8s-master01 docker-swarm]# docker node rm 6nllkusdfe6m6m72i70i9h7sx</span></span>
<span class="line"><span style="color:#6F42C1;">6nllkusdfe6m6m72i70i9h7sx</span></span>
<span class="line"><span style="color:#24292E;">[root@k8s-master01 docker-swarm]# docker node rm xd530ndpk1g033tjqvl16c87x</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@k8s-master01 docker-swarm]# docker swarm leave --force</span></span>
<span class="line"><span style="color:#6F42C1;">Node</span><span style="color:#24292E;"> </span><span style="color:#032F62;">left</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">swarm.</span></span></code></pre></div>`,7),e=[p];function r(c,t,E,y,F,d){return a(),n("div",null,e)}const k=s(o,[["render",r]]);export{m as __pageData,k as default};
