import{_ as s,o as a,c as n,R as p}from"./chunks/framework.zUbWieqp.js";const d=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"guide/cloud/ali/7-vpn_gateway.md","filePath":"guide/cloud/ali/7-vpn_gateway.md","lastUpdated":1701247404000}'),l={name:"guide/cloud/ali/7-vpn_gateway.md"},o=p(`<p>ipsec参考地址，<a href="https://help.aliyun.com/document_detail/110803.html" target="_blank" rel="noreferrer">https://help.aliyun.com/document_detail/110803.html</a></p><h2 id="_1-ipsecvpn" tabindex="-1">1. IPsecVPN <a class="header-anchor" href="#_1-ipsecvpn" aria-label="Permalink to &quot;1. IPsecVPN&quot;">​</a></h2><p>阿里云VPN网关和锐捷打通公有云和公司内网</p><h3 id="_1-0简介" tabindex="-1">1.0简介 <a class="header-anchor" href="#_1-0简介" aria-label="Permalink to &quot;1.0简介&quot;">​</a></h3><p>目前许多公司网络环境为混合云（私有云，IDC，公司内网融合）的状态，通过内网ip的访问使得工作更加方便，需求也更为迫切，而本文介绍的即是实现私有云和公司内网互通的一种方法，希望对有此需求的小伙伴有所帮助</p><h3 id="_1-1实现原理" tabindex="-1">1.1实现原理 <a class="header-anchor" href="#_1-1实现原理" aria-label="Permalink to &quot;1.1实现原理&quot;">​</a></h3><p>其实质通过的方式为IPsecVPN，连接过程包括两个阶段，其中包括加密算法的一致性验证和密钥的匹配验证，配合SANGFOR防火墙日志信息，调试。其中公司为Ipsec VPN总部，阿里云为分部，通讯采用upd协议的500端口，方案的逻辑图如下：</p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202311291603518.png" alt=""></p><h3 id="_1-2创建vpn网关" tabindex="-1">1.2创建vpn网关 <a class="header-anchor" href="#_1-2创建vpn网关" aria-label="Permalink to &quot;1.2创建vpn网关&quot;">​</a></h3><p>在锐捷路由器上实现</p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202311291603774.jpg" alt=""></p><h3 id="_1-3创建用户网关" tabindex="-1">1.3创建用户网关 <a class="header-anchor" href="#_1-3创建用户网关" aria-label="Permalink to &quot;1.3创建用户网关&quot;">​</a></h3><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202311291603143.jpg" alt=""></p><h3 id="_1-4创建ipsec连接" tabindex="-1">1.4创建IPsec连接 <a class="header-anchor" href="#_1-4创建ipsec连接" aria-label="Permalink to &quot;1.4创建IPsec连接&quot;">​</a></h3><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202311291603946.png" alt=""></p><p>至此ipsec结束</p><p><a href="https://help.aliyun.com/document_detail/65072.html?spm=a2c4g.11186623.6.548.4n0fFR" target="_blank" rel="noreferrer">https://help.aliyun.com/document_detail/65072.html?spm=a2c4g.11186623.6.548.4n0fFR</a></p><h2 id="_2-公司路由器" tabindex="-1">2.公司路由器 <a class="header-anchor" href="#_2-公司路由器" aria-label="Permalink to &quot;2.公司路由器&quot;">​</a></h2><p>路由器管理-----&gt;vpn管理----&gt;IPSEC配置</p><p><strong>IPSec安全策略</strong>----&gt; 添加</p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202311291604674.png" alt=""></p><ul><li>最终状态</li></ul><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202311291604929.jpg" alt=""></p><ul><li>测试本地ping ecs实例ip</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[C:</span><span style="color:#79B8FF;">\\~</span><span style="color:#E1E4E8;">]$ ping 172.19.149.142</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">正在</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Ping</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">172.19</span><span style="color:#9ECBFF;">.149.142</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">具有</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">32</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">字节的数据:</span></span>
<span class="line"><span style="color:#B392F0;">来自</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">172.19</span><span style="color:#9ECBFF;">.149.142</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">的回复:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">字节=</span><span style="color:#79B8FF;">32</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">时间=</span><span style="color:#79B8FF;">86</span><span style="color:#9ECBFF;">ms</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">TTL=</span><span style="color:#79B8FF;">62</span></span>
<span class="line"><span style="color:#B392F0;">来自</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">172.19</span><span style="color:#9ECBFF;">.149.142</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">的回复:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">字节=</span><span style="color:#79B8FF;">32</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">时间=</span><span style="color:#79B8FF;">94</span><span style="color:#9ECBFF;">ms</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">TTL=</span><span style="color:#79B8FF;">62</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[C:</span><span style="color:#005CC5;">\\~</span><span style="color:#24292E;">]$ ping 172.19.149.142</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">正在</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Ping</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">172.19</span><span style="color:#032F62;">.149.142</span><span style="color:#24292E;"> </span><span style="color:#032F62;">具有</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">32</span><span style="color:#24292E;"> </span><span style="color:#032F62;">字节的数据:</span></span>
<span class="line"><span style="color:#6F42C1;">来自</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">172.19</span><span style="color:#032F62;">.149.142</span><span style="color:#24292E;"> </span><span style="color:#032F62;">的回复:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">字节=</span><span style="color:#005CC5;">32</span><span style="color:#24292E;"> </span><span style="color:#032F62;">时间=</span><span style="color:#005CC5;">86</span><span style="color:#032F62;">ms</span><span style="color:#24292E;"> </span><span style="color:#032F62;">TTL=</span><span style="color:#005CC5;">62</span></span>
<span class="line"><span style="color:#6F42C1;">来自</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">172.19</span><span style="color:#032F62;">.149.142</span><span style="color:#24292E;"> </span><span style="color:#032F62;">的回复:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">字节=</span><span style="color:#005CC5;">32</span><span style="color:#24292E;"> </span><span style="color:#032F62;">时间=</span><span style="color:#005CC5;">94</span><span style="color:#032F62;">ms</span><span style="color:#24292E;"> </span><span style="color:#032F62;">TTL=</span><span style="color:#005CC5;">62</span></span></code></pre></div>`,25),e=[o];function t(c,r,i,y,E,h){return a(),n("div",null,e)}const g=s(l,[["render",t]]);export{d as __pageData,g as default};
