import{_ as s,o as a,c as n,R as l}from"./chunks/framework.zUbWieqp.js";const u=JSON.parse('{"title":"1. kubectl-neat介绍","description":"","frontmatter":{},"headers":[],"relativePath":"guide/container/k8s/Yaml/4-Yaml-neat.md","filePath":"guide/container/k8s/Yaml/4-Yaml-neat.md","lastUpdated":1723447113000}'),p={name:"guide/container/k8s/Yaml/4-Yaml-neat.md"},o=l(`<h1 id="_1-kubectl-neat介绍" tabindex="-1">1. kubectl-neat介绍 <a class="header-anchor" href="#_1-kubectl-neat介绍" aria-label="Permalink to &quot;1. kubectl-neat介绍&quot;">​</a></h1><p>消除Kubernetes 清单中的混乱，使其更具可读性</p><h1 id="_2-neat部署" tabindex="-1">2. neat部署 <a class="header-anchor" href="#_2-neat部署" aria-label="Permalink to &quot;2. neat部署&quot;">​</a></h1><h2 id="_2-1-通过插件部署" tabindex="-1">2.1 通过插件部署 <a class="header-anchor" href="#_2-1-通过插件部署" aria-label="Permalink to &quot;2.1 通过插件部署&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl krew install neat</span></span>
<span class="line"><span style="color:#B392F0;">Updated</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">local</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">copy</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">plugin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">index.</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">New</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">plugins</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">available:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cautious</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cnf</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cond</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dpm</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">jfs</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kueue</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">track</span></span>
<span class="line"><span style="color:#B392F0;">Installing</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">plugin:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">neat</span></span>
<span class="line"><span style="color:#B392F0;">Installed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">plugin:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">neat</span></span>
<span class="line"><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Use</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">this</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">plugin:</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> 	</span><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">neat</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Documentation:</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> 	</span><span style="color:#B392F0;">https://github.com/itaysk/kubectl-neat</span></span>
<span class="line"><span style="color:#B392F0;">/</span></span>
<span class="line"><span style="color:#B392F0;">WARNING:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">You</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">installed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">plugin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;neat&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">krew-index</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">plugin</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">repository.</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">These</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">plugins</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">are</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">not</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">audited</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">for</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">security</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">by</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Krew</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">maintainers.</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">Run</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">them</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">at</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">your</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">own</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">risk.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl krew install neat</span></span>
<span class="line"><span style="color:#6F42C1;">Updated</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">local</span><span style="color:#24292E;"> </span><span style="color:#032F62;">copy</span><span style="color:#24292E;"> </span><span style="color:#032F62;">of</span><span style="color:#24292E;"> </span><span style="color:#032F62;">plugin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">index.</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">New</span><span style="color:#24292E;"> </span><span style="color:#032F62;">plugins</span><span style="color:#24292E;"> </span><span style="color:#032F62;">available:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">*</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cautious</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">*</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cnf</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">*</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cond</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">*</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dpm</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">*</span><span style="color:#24292E;"> </span><span style="color:#032F62;">jfs</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">*</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kueue</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">*</span><span style="color:#24292E;"> </span><span style="color:#032F62;">track</span></span>
<span class="line"><span style="color:#6F42C1;">Installing</span><span style="color:#24292E;"> </span><span style="color:#032F62;">plugin:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">neat</span></span>
<span class="line"><span style="color:#6F42C1;">Installed</span><span style="color:#24292E;"> </span><span style="color:#032F62;">plugin:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">neat</span></span>
<span class="line"><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Use</span><span style="color:#24292E;"> </span><span style="color:#032F62;">this</span><span style="color:#24292E;"> </span><span style="color:#032F62;">plugin:</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> 	</span><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">neat</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Documentation:</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> 	</span><span style="color:#6F42C1;">https://github.com/itaysk/kubectl-neat</span></span>
<span class="line"><span style="color:#6F42C1;">/</span></span>
<span class="line"><span style="color:#6F42C1;">WARNING:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">You</span><span style="color:#24292E;"> </span><span style="color:#032F62;">installed</span><span style="color:#24292E;"> </span><span style="color:#032F62;">plugin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;neat&quot;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">krew-index</span><span style="color:#24292E;"> </span><span style="color:#032F62;">plugin</span><span style="color:#24292E;"> </span><span style="color:#032F62;">repository.</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">These</span><span style="color:#24292E;"> </span><span style="color:#032F62;">plugins</span><span style="color:#24292E;"> </span><span style="color:#032F62;">are</span><span style="color:#24292E;"> </span><span style="color:#032F62;">not</span><span style="color:#24292E;"> </span><span style="color:#032F62;">audited</span><span style="color:#24292E;"> </span><span style="color:#032F62;">for</span><span style="color:#24292E;"> </span><span style="color:#032F62;">security</span><span style="color:#24292E;"> </span><span style="color:#032F62;">by</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Krew</span><span style="color:#24292E;"> </span><span style="color:#032F62;">maintainers.</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">Run</span><span style="color:#24292E;"> </span><span style="color:#032F62;">them</span><span style="color:#24292E;"> </span><span style="color:#032F62;">at</span><span style="color:#24292E;"> </span><span style="color:#032F62;">your</span><span style="color:#24292E;"> </span><span style="color:#032F62;">own</span><span style="color:#24292E;"> </span><span style="color:#032F62;">risk.</span></span></code></pre></div><h2 id="_2-2-通过二进制部署" tabindex="-1">2.2 通过二进制部署 <a class="header-anchor" href="#_2-2-通过二进制部署" aria-label="Permalink to &quot;2.2 通过二进制部署&quot;">​</a></h2><p>官档,<a href="https://github.com/itaysk/kubectl-neat" target="_blank" rel="noreferrer">https://github.com/itaysk/kubectl-neat</a></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">#下载</span></span>
<span class="line"><span style="color:#e1e4e8;">https://github.com/itaysk/kubectl-neat/releases/download/v2.0.4/kubectl-neat_linux_amd64.tar.gz</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">#解压,放到/path/bin,并添加权限</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">#下载</span></span>
<span class="line"><span style="color:#24292e;">https://github.com/itaysk/kubectl-neat/releases/download/v2.0.4/kubectl-neat_linux_amd64.tar.gz</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">#解压,放到/path/bin,并添加权限</span></span></code></pre></div><h1 id="_3-neat使用" tabindex="-1">3. neat使用 <a class="header-anchor" href="#_3-neat使用" aria-label="Permalink to &quot;3. neat使用&quot;">​</a></h1><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#查看pod</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl get pod</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                                      </span><span style="color:#9ECBFF;">READY</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">RESTARTS</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">AGE</span></span>
<span class="line"><span style="color:#B392F0;">old-demo-687c6ccd99-2rzwr</span><span style="color:#E1E4E8;">                 </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;"> (170m </span><span style="color:#9ECBFF;">ago</span><span style="color:#E1E4E8;">)   33d</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看deploy</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl get deployments.apps</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                     </span><span style="color:#9ECBFF;">READY</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">UP-TO-DATE</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">AVAILABLE</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">AGE</span></span>
<span class="line"><span style="color:#B392F0;">old-demo</span><span style="color:#E1E4E8;">                 </span><span style="color:#79B8FF;">2</span><span style="color:#9ECBFF;">/2</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">           </span><span style="color:#79B8FF;">74</span><span style="color:#9ECBFF;">d</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#生成yaml</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">deployments.apps</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">old-demo</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-oyaml</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">test-neat.yaml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#通过kubectl-neat 过滤</span></span>
<span class="line"><span style="color:#B392F0;">kubectl-neat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">test-neat.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">new-neat.yaml</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#查看pod</span></span>
<span class="line"><span style="color:#24292E;">[root@kube-master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl get pod</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                                      </span><span style="color:#032F62;">READY</span><span style="color:#24292E;">   </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">    </span><span style="color:#032F62;">RESTARTS</span><span style="color:#24292E;">        </span><span style="color:#032F62;">AGE</span></span>
<span class="line"><span style="color:#6F42C1;">old-demo-687c6ccd99-2rzwr</span><span style="color:#24292E;">                 </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">25</span><span style="color:#24292E;"> (170m </span><span style="color:#032F62;">ago</span><span style="color:#24292E;">)   33d</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看deploy</span></span>
<span class="line"><span style="color:#24292E;">[root@kube-master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl get deployments.apps</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                     </span><span style="color:#032F62;">READY</span><span style="color:#24292E;">   </span><span style="color:#032F62;">UP-TO-DATE</span><span style="color:#24292E;">   </span><span style="color:#032F62;">AVAILABLE</span><span style="color:#24292E;">   </span><span style="color:#032F62;">AGE</span></span>
<span class="line"><span style="color:#6F42C1;">old-demo</span><span style="color:#24292E;">                 </span><span style="color:#005CC5;">2</span><span style="color:#032F62;">/2</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">            </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">           </span><span style="color:#005CC5;">74</span><span style="color:#032F62;">d</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#生成yaml</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">deployments.apps</span><span style="color:#24292E;"> </span><span style="color:#032F62;">old-demo</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-oyaml</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">test-neat.yaml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#通过kubectl-neat 过滤</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl-neat</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">test-neat.yaml</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">new-neat.yaml</span></span></code></pre></div>`,10),e=[o];function t(c,r,E,y,F,i){return a(),n("div",null,e)}const C=s(p,[["render",t]]);export{u as __pageData,C as default};
