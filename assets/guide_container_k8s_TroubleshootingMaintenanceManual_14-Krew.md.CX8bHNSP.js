import{_ as s,o as a,c as n,R as l}from"./chunks/framework.zUbWieqp.js";const C=JSON.parse('{"title":"一、插件","description":"","frontmatter":{},"headers":[],"relativePath":"guide/container/k8s/TroubleshootingMaintenanceManual/14-Krew.md","filePath":"guide/container/k8s/TroubleshootingMaintenanceManual/14-Krew.md","lastUpdated":1730111076000}'),p={name:"guide/container/k8s/TroubleshootingMaintenanceManual/14-Krew.md"},o=l(`<h1 id="一、插件" tabindex="-1">一、插件 <a class="header-anchor" href="#一、插件" aria-label="Permalink to &quot;一、插件&quot;">​</a></h1><h2 id="_1-krew" tabindex="-1">1.Krew <a class="header-anchor" href="#_1-krew" aria-label="Permalink to &quot;1.Krew&quot;">​</a></h2><h3 id="_1-1-介绍" tabindex="-1">1.1 介绍 <a class="header-anchor" href="#_1-1-介绍" aria-label="Permalink to &quot;1.1 介绍&quot;">​</a></h3><p>Krew is a tool that makes it easy to use <a href="https://kubernetes.io/docs/tasks/extend-kubectl/kubectl-plugins/" target="_blank" rel="noreferrer">kubectl plugins</a>. Krew helps you discover plugins, install and manage them on your machine. It is similar to tools like apt, dnf or <a href="http://brew.sh/" target="_blank" rel="noreferrer">brew</a>. Today, over <a href="https://krew.sigs.k8s.io/plugins/" target="_blank" rel="noreferrer">130 kubectl plugins</a> are available on Krew.</p><ul><li><strong>For kubectl users:</strong> Krew helps you find, install and manage kubectl plugins in a consistent way.</li><li><strong>For plugin developers:</strong> Krew helps you package and distribute your plugins on multiple platforms and makes them discoverable.</li></ul><h3 id="_1-2-部署krew" tabindex="-1">1.2 部署Krew <a class="header-anchor" href="#_1-2-部署krew" aria-label="Permalink to &quot;1.2 部署Krew&quot;">​</a></h3><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202410131944577.png" alt="image-20241013194433118"></p><ul><li>下载</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">wget</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://github.com/kubernetes-sigs/krew/releases/download/v0.4.4/krew-linux_amd64.tar.gz</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">wget</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://github.com/kubernetes-sigs/krew/releases/download/v0.4.4/krew.yaml</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">wget</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://github.com/kubernetes-sigs/krew/releases/download/v0.4.4/krew-linux_amd64.tar.gz</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">wget</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://github.com/kubernetes-sigs/krew/releases/download/v0.4.4/krew.yaml</span></span></code></pre></div><ul><li>安装</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$ tempDir</span><span style="color:#E1E4E8;">=$(mktemp </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;">)  </span></span>
<span class="line"><span style="color:#B392F0;">$ tar</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zxvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">krew-linux_amd64.tar.gz</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-C</span><span style="color:#E1E4E8;"> \${tempDir}</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master-01 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# \${tempDir}/krew-linux_amd64 install --manifest=krew.yaml --archive=krew-linux_amd64.tar.gz</span></span>
<span class="line"><span style="color:#B392F0;">Installing</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">plugin:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">krew</span></span>
<span class="line"><span style="color:#B392F0;">Installed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">plugin:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">krew</span></span>
<span class="line"><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Use</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">this</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">plugin:</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> 	</span><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">krew</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Documentation:</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> 	</span><span style="color:#B392F0;">https://krew.sigs.k8s.io/</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Caveats:</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">krew</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">now</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">installed!</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">To</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">using</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">plugins,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">you</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">need</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">add</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">krew</span><span style="color:#B392F0;">&#39;s installation directory to your PATH:</span></span>
<span class="line"><span style="color:#B392F0;"> |  |</span></span>
<span class="line"><span style="color:#B392F0;"> |  |   * macOS/Linux:</span></span>
<span class="line"><span style="color:#B392F0;"> |  |     - Add the following to your ~/.bashrc or ~/.zshrc:</span></span>
<span class="line"><span style="color:#B392F0;"> |  |         export PATH=&quot;\${KREW_ROOT:-$HOME/.krew}/bin:$PATH&quot;</span></span>
<span class="line"><span style="color:#B392F0;"> |  |     - Restart your shell.</span></span>
<span class="line"><span style="color:#B392F0;"> |  |</span></span>
<span class="line"><span style="color:#B392F0;"> |  |   * Windows: Add %USERPROFILE%\\.krew\\bin to your PATH environment variable</span></span>
<span class="line"><span style="color:#B392F0;"> |  |</span></span>
<span class="line"><span style="color:#B392F0;"> |  | To list krew commands and to get help, run:</span></span>
<span class="line"><span style="color:#B392F0;"> |  |   $ kubectl krew</span></span>
<span class="line"><span style="color:#B392F0;"> |  | For a full list of available plugins, run:</span></span>
<span class="line"><span style="color:#B392F0;"> |  |   $ kubectl krew search</span></span>
<span class="line"><span style="color:#B392F0;"> |  |</span></span>
<span class="line"><span style="color:#B392F0;"> |  | You can find documentation at</span></span>
<span class="line"><span style="color:#B392F0;"> |  |   https://krew.sigs.k8s.io/docs/user-guide/quickstart/.</span></span>
<span class="line"><span style="color:#B392F0;"> | /</span></span>
<span class="line"><span style="color:#B392F0;">/</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$ tempDir</span><span style="color:#24292E;">=$(mktemp </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;">)  </span></span>
<span class="line"><span style="color:#6F42C1;">$ tar</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zxvf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">krew-linux_amd64.tar.gz</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-C</span><span style="color:#24292E;"> \${tempDir}</span></span>
<span class="line"><span style="color:#24292E;">[root@kube-master-01 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# \${tempDir}/krew-linux_amd64 install --manifest=krew.yaml --archive=krew-linux_amd64.tar.gz</span></span>
<span class="line"><span style="color:#6F42C1;">Installing</span><span style="color:#24292E;"> </span><span style="color:#032F62;">plugin:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">krew</span></span>
<span class="line"><span style="color:#6F42C1;">Installed</span><span style="color:#24292E;"> </span><span style="color:#032F62;">plugin:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">krew</span></span>
<span class="line"><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Use</span><span style="color:#24292E;"> </span><span style="color:#032F62;">this</span><span style="color:#24292E;"> </span><span style="color:#032F62;">plugin:</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> 	</span><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">krew</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Documentation:</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> 	</span><span style="color:#6F42C1;">https://krew.sigs.k8s.io/</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Caveats:</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">krew</span><span style="color:#24292E;"> </span><span style="color:#032F62;">is</span><span style="color:#24292E;"> </span><span style="color:#032F62;">now</span><span style="color:#24292E;"> </span><span style="color:#032F62;">installed!</span><span style="color:#24292E;"> </span><span style="color:#032F62;">To</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span><span style="color:#24292E;"> </span><span style="color:#032F62;">using</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">plugins,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">you</span><span style="color:#24292E;"> </span><span style="color:#032F62;">need</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">add</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">krew</span><span style="color:#6F42C1;">&#39;s installation directory to your PATH:</span></span>
<span class="line"><span style="color:#6F42C1;"> |  |</span></span>
<span class="line"><span style="color:#6F42C1;"> |  |   * macOS/Linux:</span></span>
<span class="line"><span style="color:#6F42C1;"> |  |     - Add the following to your ~/.bashrc or ~/.zshrc:</span></span>
<span class="line"><span style="color:#6F42C1;"> |  |         export PATH=&quot;\${KREW_ROOT:-$HOME/.krew}/bin:$PATH&quot;</span></span>
<span class="line"><span style="color:#6F42C1;"> |  |     - Restart your shell.</span></span>
<span class="line"><span style="color:#6F42C1;"> |  |</span></span>
<span class="line"><span style="color:#6F42C1;"> |  |   * Windows: Add %USERPROFILE%\\.krew\\bin to your PATH environment variable</span></span>
<span class="line"><span style="color:#6F42C1;"> |  |</span></span>
<span class="line"><span style="color:#6F42C1;"> |  | To list krew commands and to get help, run:</span></span>
<span class="line"><span style="color:#6F42C1;"> |  |   $ kubectl krew</span></span>
<span class="line"><span style="color:#6F42C1;"> |  | For a full list of available plugins, run:</span></span>
<span class="line"><span style="color:#6F42C1;"> |  |   $ kubectl krew search</span></span>
<span class="line"><span style="color:#6F42C1;"> |  |</span></span>
<span class="line"><span style="color:#6F42C1;"> |  | You can find documentation at</span></span>
<span class="line"><span style="color:#6F42C1;"> |  |   https://krew.sigs.k8s.io/docs/user-guide/quickstart/.</span></span>
<span class="line"><span style="color:#6F42C1;"> | /</span></span>
<span class="line"><span style="color:#6F42C1;">/</span></span></code></pre></div><ul><li>清理目录</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">rm</span><span style="color:#E1E4E8;"> \${tempDir} </span><span style="color:#79B8FF;">-rf</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">rm</span><span style="color:#24292E;"> \${tempDir} </span><span style="color:#005CC5;">-rf</span></span></code></pre></div><ul><li>设置环境变量</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;"># 临时生效</span></span>
<span class="line"><span style="color:#e1e4e8;">$ export PATH=&quot;\${KREW_ROOT:-$HOME/.krew}/bin:$PATH&quot;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;"># 永久生效</span></span>
<span class="line"><span style="color:#e1e4e8;">$ echo &#39;export PATH=&quot;\${KREW_ROOT:-$HOME/.krew}/bin:$PATH&quot;&#39; &gt;&gt; ~/.bashrc</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;"># 临时生效</span></span>
<span class="line"><span style="color:#24292e;">$ export PATH=&quot;\${KREW_ROOT:-$HOME/.krew}/bin:$PATH&quot;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;"># 永久生效</span></span>
<span class="line"><span style="color:#24292e;">$ echo &#39;export PATH=&quot;\${KREW_ROOT:-$HOME/.krew}/bin:$PATH&quot;&#39; &gt;&gt; ~/.bashrc</span></span></code></pre></div><ul><li>验证效果</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master-01 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl krew version</span></span>
<span class="line"><span style="color:#B392F0;">OPTION</span><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">VALUE</span></span>
<span class="line"><span style="color:#B392F0;">GitTag</span><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">v0.4.4</span></span>
<span class="line"><span style="color:#B392F0;">GitCommit</span><span style="color:#E1E4E8;">         </span><span style="color:#79B8FF;">343</span><span style="color:#9ECBFF;">e657</span></span>
<span class="line"><span style="color:#B392F0;">IndexURI</span><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">https://github.com/kubernetes-sigs/krew-index.git</span></span>
<span class="line"><span style="color:#B392F0;">BasePath</span><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">/root/.krew</span></span>
<span class="line"><span style="color:#B392F0;">IndexPath</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">/root/.krew/index/default</span></span>
<span class="line"><span style="color:#B392F0;">InstallPath</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">/root/.krew/store</span></span>
<span class="line"><span style="color:#B392F0;">BinPath</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">/root/.krew/bin</span></span>
<span class="line"><span style="color:#B392F0;">DetectedPlatform</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">linux/amd64</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master-01 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl krew version</span></span>
<span class="line"><span style="color:#6F42C1;">OPTION</span><span style="color:#24292E;">            </span><span style="color:#032F62;">VALUE</span></span>
<span class="line"><span style="color:#6F42C1;">GitTag</span><span style="color:#24292E;">            </span><span style="color:#032F62;">v0.4.4</span></span>
<span class="line"><span style="color:#6F42C1;">GitCommit</span><span style="color:#24292E;">         </span><span style="color:#005CC5;">343</span><span style="color:#032F62;">e657</span></span>
<span class="line"><span style="color:#6F42C1;">IndexURI</span><span style="color:#24292E;">          </span><span style="color:#032F62;">https://github.com/kubernetes-sigs/krew-index.git</span></span>
<span class="line"><span style="color:#6F42C1;">BasePath</span><span style="color:#24292E;">          </span><span style="color:#032F62;">/root/.krew</span></span>
<span class="line"><span style="color:#6F42C1;">IndexPath</span><span style="color:#24292E;">         </span><span style="color:#032F62;">/root/.krew/index/default</span></span>
<span class="line"><span style="color:#6F42C1;">InstallPath</span><span style="color:#24292E;">       </span><span style="color:#032F62;">/root/.krew/store</span></span>
<span class="line"><span style="color:#6F42C1;">BinPath</span><span style="color:#24292E;">           </span><span style="color:#032F62;">/root/.krew/bin</span></span>
<span class="line"><span style="color:#6F42C1;">DetectedPlatform</span><span style="color:#24292E;">  </span><span style="color:#032F62;">linux/amd64</span></span></code></pre></div><h1 id="二、常用插件" tabindex="-1">二、常用插件 <a class="header-anchor" href="#二、常用插件" aria-label="Permalink to &quot;二、常用插件&quot;">​</a></h1><p><a href="https://kubernetes.io/zh-cn/docs/tasks/extend-kubectl/kubectl-plugins/" target="_blank" rel="noreferrer">https://kubernetes.io/zh-cn/docs/tasks/extend-kubectl/kubectl-plugins/</a></p><h2 id="_1-tree" tabindex="-1">1.tree <a class="header-anchor" href="#_1-tree" aria-label="Permalink to &quot;1.tree&quot;">​</a></h2><p>该插件是由 Google 大佬开发，通过 <code>ownerReferences</code> 来发现 kubernetes 对象之间的相互关联，并通过树状图来展示，对资源的关系一目了然</p><h3 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">$ kubectl krew install tree</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">$ kubectl krew install tree</span></span></code></pre></div><h3 id="使用" tabindex="-1">使用 <a class="header-anchor" href="#使用" aria-label="Permalink to &quot;使用&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">tree</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--help</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master-01 containerd]# kubectl tree deployment demoapp</span></span>
<span class="line"><span style="color:#B392F0;">NAMESPACE</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">NAME</span><span style="color:#E1E4E8;">                                </span><span style="color:#9ECBFF;">READY</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">REASON</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">AGE</span></span>
<span class="line"><span style="color:#B392F0;">default</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">Deployment/demoapp</span><span style="color:#E1E4E8;">                  </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;">              </span><span style="color:#79B8FF;">6</span><span style="color:#9ECBFF;">d4h</span></span>
<span class="line"><span style="color:#B392F0;">default</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">└─ReplicaSet/demoapp-7cc687d895</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;">              </span><span style="color:#79B8FF;">6</span><span style="color:#9ECBFF;">d4h</span></span>
<span class="line"><span style="color:#B392F0;">default</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">├─Pod/demoapp-7cc687d895-8xltm</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">True</span><span style="color:#E1E4E8;">           </span><span style="color:#79B8FF;">6</span><span style="color:#9ECBFF;">d4h</span></span>
<span class="line"><span style="color:#B392F0;">default</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">└─Pod/demoapp-7cc687d895-ptr24</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">True</span><span style="color:#E1E4E8;">           </span><span style="color:#79B8FF;">6</span><span style="color:#9ECBFF;">d4h</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">tree</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--help</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@kube-master-01 containerd]# kubectl tree deployment demoapp</span></span>
<span class="line"><span style="color:#6F42C1;">NAMESPACE</span><span style="color:#24292E;">  </span><span style="color:#032F62;">NAME</span><span style="color:#24292E;">                                </span><span style="color:#032F62;">READY</span><span style="color:#24292E;">  </span><span style="color:#032F62;">REASON</span><span style="color:#24292E;">  </span><span style="color:#032F62;">AGE</span></span>
<span class="line"><span style="color:#6F42C1;">default</span><span style="color:#24292E;">    </span><span style="color:#032F62;">Deployment/demoapp</span><span style="color:#24292E;">                  </span><span style="color:#032F62;">-</span><span style="color:#24292E;">              </span><span style="color:#005CC5;">6</span><span style="color:#032F62;">d4h</span></span>
<span class="line"><span style="color:#6F42C1;">default</span><span style="color:#24292E;">    </span><span style="color:#032F62;">└─ReplicaSet/demoapp-7cc687d895</span><span style="color:#24292E;">   </span><span style="color:#032F62;">-</span><span style="color:#24292E;">              </span><span style="color:#005CC5;">6</span><span style="color:#032F62;">d4h</span></span>
<span class="line"><span style="color:#6F42C1;">default</span><span style="color:#24292E;">      </span><span style="color:#032F62;">├─Pod/demoapp-7cc687d895-8xltm</span><span style="color:#24292E;">  </span><span style="color:#032F62;">True</span><span style="color:#24292E;">           </span><span style="color:#005CC5;">6</span><span style="color:#032F62;">d4h</span></span>
<span class="line"><span style="color:#6F42C1;">default</span><span style="color:#24292E;">      </span><span style="color:#032F62;">└─Pod/demoapp-7cc687d895-ptr24</span><span style="color:#24292E;">  </span><span style="color:#032F62;">True</span><span style="color:#24292E;">           </span><span style="color:#005CC5;">6</span><span style="color:#032F62;">d4h</span></span></code></pre></div><h2 id="_2-status" tabindex="-1">2.status <a class="header-anchor" href="#_2-status" aria-label="Permalink to &quot;2.status&quot;">​</a></h2><p>kubectl-status 这个插件简化了 <code>get</code> 和 <code>describe</code> 操作，采用不同颜色和箭头等元素来展示 kubernetes 资源的生命周期和状态信息，可以查看单个资源，也可以查看该 namespace 下的所有该资源的状态，极大的缩短了问题排查的时间，减少了操作步骤</p><h3 id="安装-1" tabindex="-1">安装 <a class="header-anchor" href="#安装-1" aria-label="Permalink to &quot;安装&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">krew</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">krew</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span></code></pre></div><h3 id="使用-1" tabindex="-1">使用 <a class="header-anchor" href="#使用-1" aria-label="Permalink to &quot;使用&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--help</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--help</span></span></code></pre></div><ul><li>查看pod</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#查看具体pod</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master-01 containerd]# kubectl status pod demoapp-7cc687d895-8xltm</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">Pod/demoapp-7cc687d895-8xltm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">default,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">6</span><span style="color:#9ECBFF;">d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ago</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">by</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ReplicaSet/demoapp-7cc687d895</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">BestEffort</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Current:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Pod</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Ready</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Managed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">by</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">demoapp</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">application</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">PodScheduled</span><span style="color:#E1E4E8;"> -</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Initialized</span><span style="color:#E1E4E8;"> -</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ContainersReady</span><span style="color:#E1E4E8;"> -</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Ready</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">for</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">4</span><span style="color:#9ECBFF;">h</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Containers:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">demoapp</span><span style="color:#E1E4E8;"> (registry.cn-zhangjiakou.aliyuncs.com/hsuing/demoapp:v1) Running </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> 4h and Ready, restarted 4 times</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">usage</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cpu</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">usage:0.007/[no-req,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">no-lim],</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">mem</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">usage:28.9MB/[no-req,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">no-lim]</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">previously:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Started</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ago</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">and</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Unknown</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">after</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">exit</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">code</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">exit</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">255</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Known/recorded</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">manage</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">events:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">6d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ago</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Updated</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">by</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kube-controller-manager</span><span style="color:#E1E4E8;"> (metadata, </span><span style="color:#9ECBFF;">spec</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">4h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ago</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Updated</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">by</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">calico</span><span style="color:#E1E4E8;"> (metadata)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">4h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ago</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Updated</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">by</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kubelet</span><span style="color:#E1E4E8;"> (status)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Services</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">matching</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">this</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pod:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">Service/demoapp-svc</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">default,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">6</span><span style="color:#9ECBFF;">d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ago,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">last</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">endpoint</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">change</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">was</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">4</span><span style="color:#9ECBFF;">h</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ago</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">Current:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Service</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ready</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">Managed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">by</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">demoapp-svc</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">application</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">Ready:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Pod/demoapp-7cc687d895-ptr24</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">default</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">on</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Node/kube-node-01,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">172.18</span><span style="color:#9ECBFF;">.10.106:80/TCP</span><span style="color:#E1E4E8;"> (80-80)</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">Ready:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Pod/demoapp-7cc687d895-8xltm</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">default</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">on</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Node/kube-node-02,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">172.25</span><span style="color:#9ECBFF;">.241.15:80/TCP</span><span style="color:#E1E4E8;"> (80-80)</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">Known/recorded</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">manage</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">events:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">6d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ago</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Updated</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">by</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kubectl-client-side-apply</span><span style="color:#E1E4E8;"> (metadata, </span><span style="color:#9ECBFF;">spec</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">Ingresses</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">matching</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">this</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Service:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">Ingress/demoapp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">default,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">created</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">6</span><span style="color:#9ECBFF;">d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ago,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">gen:1</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">Current:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Resource</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">current</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">LoadBalancer:10.103.236.70</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">Service/demoapp-svc:80</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">has</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">endpoints.</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">Known/recorded</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">manage</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">events:</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">6d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ago</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Updated</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">by</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kubectl-client-side-apply</span><span style="color:#E1E4E8;"> (metadata, </span><span style="color:#9ECBFF;">spec</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">6d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ago</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Updated</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">by</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx-ingress-controller</span><span style="color:#E1E4E8;"> (status)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#查看具体pod</span></span>
<span class="line"><span style="color:#24292E;">[root@kube-master-01 containerd]# kubectl status pod demoapp-7cc687d895-8xltm</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">Pod/demoapp-7cc687d895-8xltm</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-n</span><span style="color:#24292E;"> </span><span style="color:#032F62;">default,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">6</span><span style="color:#032F62;">d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ago</span><span style="color:#24292E;"> </span><span style="color:#032F62;">by</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ReplicaSet/demoapp-7cc687d895</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Running</span><span style="color:#24292E;"> </span><span style="color:#032F62;">BestEffort</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Current:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Pod</span><span style="color:#24292E;"> </span><span style="color:#032F62;">is</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Ready</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Managed</span><span style="color:#24292E;"> </span><span style="color:#032F62;">by</span><span style="color:#24292E;"> </span><span style="color:#032F62;">demoapp</span><span style="color:#24292E;"> </span><span style="color:#032F62;">application</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">PodScheduled</span><span style="color:#24292E;"> -</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Initialized</span><span style="color:#24292E;"> -</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ContainersReady</span><span style="color:#24292E;"> -</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Ready</span><span style="color:#24292E;"> </span><span style="color:#032F62;">for</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">4</span><span style="color:#032F62;">h</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Containers:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">demoapp</span><span style="color:#24292E;"> (registry.cn-zhangjiakou.aliyuncs.com/hsuing/demoapp:v1) Running </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> 4h and Ready, restarted 4 times</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">usage</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cpu</span><span style="color:#24292E;"> </span><span style="color:#032F62;">usage:0.007/[no-req,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">no-lim],</span><span style="color:#24292E;"> </span><span style="color:#032F62;">mem</span><span style="color:#24292E;"> </span><span style="color:#032F62;">usage:28.9MB/[no-req,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">no-lim]</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">previously:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Started</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ago</span><span style="color:#24292E;"> </span><span style="color:#032F62;">and</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Unknown</span><span style="color:#24292E;"> </span><span style="color:#032F62;">after</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">with</span><span style="color:#24292E;"> </span><span style="color:#032F62;">exit</span><span style="color:#24292E;"> </span><span style="color:#032F62;">code</span><span style="color:#24292E;"> </span><span style="color:#032F62;">exit</span><span style="color:#24292E;"> </span><span style="color:#032F62;">with</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">255</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Known/recorded</span><span style="color:#24292E;"> </span><span style="color:#032F62;">manage</span><span style="color:#24292E;"> </span><span style="color:#032F62;">events:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">6d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ago</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Updated</span><span style="color:#24292E;"> </span><span style="color:#032F62;">by</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kube-controller-manager</span><span style="color:#24292E;"> (metadata, </span><span style="color:#032F62;">spec</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">4h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ago</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Updated</span><span style="color:#24292E;"> </span><span style="color:#032F62;">by</span><span style="color:#24292E;"> </span><span style="color:#032F62;">calico</span><span style="color:#24292E;"> (metadata)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">4h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ago</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Updated</span><span style="color:#24292E;"> </span><span style="color:#032F62;">by</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kubelet</span><span style="color:#24292E;"> (status)</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Services</span><span style="color:#24292E;"> </span><span style="color:#032F62;">matching</span><span style="color:#24292E;"> </span><span style="color:#032F62;">this</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pod:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">Service/demoapp-svc</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-n</span><span style="color:#24292E;"> </span><span style="color:#032F62;">default,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">6</span><span style="color:#032F62;">d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ago,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">last</span><span style="color:#24292E;"> </span><span style="color:#032F62;">endpoint</span><span style="color:#24292E;"> </span><span style="color:#032F62;">change</span><span style="color:#24292E;"> </span><span style="color:#032F62;">was</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">4</span><span style="color:#032F62;">h</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ago</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">Current:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Service</span><span style="color:#24292E;"> </span><span style="color:#032F62;">is</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ready</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">Managed</span><span style="color:#24292E;"> </span><span style="color:#032F62;">by</span><span style="color:#24292E;"> </span><span style="color:#032F62;">demoapp-svc</span><span style="color:#24292E;"> </span><span style="color:#032F62;">application</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">Ready:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Pod/demoapp-7cc687d895-ptr24</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-n</span><span style="color:#24292E;"> </span><span style="color:#032F62;">default</span><span style="color:#24292E;"> </span><span style="color:#032F62;">on</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Node/kube-node-01,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">172.18</span><span style="color:#032F62;">.10.106:80/TCP</span><span style="color:#24292E;"> (80-80)</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">Ready:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Pod/demoapp-7cc687d895-8xltm</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-n</span><span style="color:#24292E;"> </span><span style="color:#032F62;">default</span><span style="color:#24292E;"> </span><span style="color:#032F62;">on</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Node/kube-node-02,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">172.25</span><span style="color:#032F62;">.241.15:80/TCP</span><span style="color:#24292E;"> (80-80)</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">Known/recorded</span><span style="color:#24292E;"> </span><span style="color:#032F62;">manage</span><span style="color:#24292E;"> </span><span style="color:#032F62;">events:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">6d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ago</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Updated</span><span style="color:#24292E;"> </span><span style="color:#032F62;">by</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kubectl-client-side-apply</span><span style="color:#24292E;"> (metadata, </span><span style="color:#032F62;">spec</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">Ingresses</span><span style="color:#24292E;"> </span><span style="color:#032F62;">matching</span><span style="color:#24292E;"> </span><span style="color:#032F62;">this</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Service:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">Ingress/demoapp</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-n</span><span style="color:#24292E;"> </span><span style="color:#032F62;">default,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">created</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">6</span><span style="color:#032F62;">d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ago,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">gen:1</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">Current:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Resource</span><span style="color:#24292E;"> </span><span style="color:#032F62;">is</span><span style="color:#24292E;"> </span><span style="color:#032F62;">current</span><span style="color:#24292E;"> </span><span style="color:#032F62;">LoadBalancer:10.103.236.70</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">Service/demoapp-svc:80</span><span style="color:#24292E;"> </span><span style="color:#032F62;">has</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">endpoints.</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">Known/recorded</span><span style="color:#24292E;"> </span><span style="color:#032F62;">manage</span><span style="color:#24292E;"> </span><span style="color:#032F62;">events:</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">6d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ago</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Updated</span><span style="color:#24292E;"> </span><span style="color:#032F62;">by</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kubectl-client-side-apply</span><span style="color:#24292E;"> (metadata, </span><span style="color:#032F62;">spec</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">6d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ago</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Updated</span><span style="color:#24292E;"> </span><span style="color:#032F62;">by</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx-ingress-controller</span><span style="color:#24292E;"> (status)</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#查看所有pod</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pod</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#查看所有pod</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pod</span></span></code></pre></div><h2 id="_3-view-allocations" tabindex="-1">3.view-allocations <a class="header-anchor" href="#_3-view-allocations" aria-label="Permalink to &quot;3.view-allocations&quot;">​</a></h2><p>kubectl-view-allocations 可以非常方便的展示 CPU、Mem、GPU 等资源的分布情况，并可以对 namespace、node、pod 等维度进行展示</p><h3 id="安装-2" tabindex="-1">安装 <a class="header-anchor" href="#安装-2" aria-label="Permalink to &quot;安装&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">krew</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">view-allocations</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">kubectl-view_allocations</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--help</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">krew</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">view-allocations</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;">  </span><span style="color:#032F62;">kubectl-view_allocations</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--help</span></span></code></pre></div><h3 id="使用-2" tabindex="-1">使用 <a class="header-anchor" href="#使用-2" aria-label="Permalink to &quot;使用&quot;">​</a></h3><ul><li>指定node的cpu</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master-01 containerd]# kubectl-view_allocations -g node -r cpu</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Resource</span><span style="color:#E1E4E8;">               </span><span style="color:#9ECBFF;">Requested</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">Limit</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">Allocatable</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">Free</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">cpu</span><span style="color:#E1E4E8;">                   (25%) 1.4   (</span><span style="color:#B392F0;">7%</span><span style="color:#E1E4E8;">) 400.0m          5.5     4.2</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">├─</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kube-master-01</span><span style="color:#E1E4E8;">  (37%) 550.0m   (</span><span style="color:#B392F0;">7%</span><span style="color:#E1E4E8;">) 100.0m          1.5  950.0m</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">├─</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kube-node-01</span><span style="color:#E1E4E8;">    (18%) 350.0m            __          2.0     1.6</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">└─</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kube-node-02</span><span style="color:#E1E4E8;">    (22%) 450.0m  (</span><span style="color:#B392F0;">15%</span><span style="color:#E1E4E8;">) 300.0m          2.0     1.6</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master-01 containerd]# kubectl-view_allocations -g node -r cpu</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Resource</span><span style="color:#24292E;">               </span><span style="color:#032F62;">Requested</span><span style="color:#24292E;">         </span><span style="color:#032F62;">Limit</span><span style="color:#24292E;">  </span><span style="color:#032F62;">Allocatable</span><span style="color:#24292E;">    </span><span style="color:#032F62;">Free</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">cpu</span><span style="color:#24292E;">                   (25%) 1.4   (</span><span style="color:#6F42C1;">7%</span><span style="color:#24292E;">) 400.0m          5.5     4.2</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">├─</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kube-master-01</span><span style="color:#24292E;">  (37%) 550.0m   (</span><span style="color:#6F42C1;">7%</span><span style="color:#24292E;">) 100.0m          1.5  950.0m</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">├─</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kube-node-01</span><span style="color:#24292E;">    (18%) 350.0m            __          2.0     1.6</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">└─</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kube-node-02</span><span style="color:#24292E;">    (22%) 450.0m  (</span><span style="color:#6F42C1;">15%</span><span style="color:#24292E;">) 300.0m          2.0     1.6</span></span></code></pre></div><ul><li>指定pod的cpu</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master-01 containerd]# kubectl-view_allocations -g pod -r cpu</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Resource</span><span style="color:#E1E4E8;">                                       </span><span style="color:#9ECBFF;">Requested</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">Limit</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">Allocatable</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">Free</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">cpu</span><span style="color:#E1E4E8;">                                           (25%) 1.4  (</span><span style="color:#B392F0;">7%</span><span style="color:#E1E4E8;">) 400.0m          5.5   4.2</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">+-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">calico-node-2nc7p</span><span style="color:#E1E4E8;">                             </span><span style="color:#79B8FF;">250.0</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">+-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">calico-node-8qw5w</span><span style="color:#E1E4E8;">                             </span><span style="color:#79B8FF;">250.0</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">+-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">calico-node-sn9xm</span><span style="color:#E1E4E8;">                             </span><span style="color:#79B8FF;">250.0</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">+-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">coredns-9867fb84c-257q7</span><span style="color:#E1E4E8;">                       </span><span style="color:#79B8FF;">100.0</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">+-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">grafana-core-596b4d8c57-p8xgj</span><span style="color:#E1E4E8;">                 </span><span style="color:#79B8FF;">100.0</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">300.0</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">+-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ingress-nginx-controller-5b88878bf4-swz6f</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">100.0</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">+-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ingress-nginx-controller-5b88878bf4-z2spz</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">100.0</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">+-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">metrics-server-5559744ff8-cns4t</span><span style="color:#E1E4E8;">               </span><span style="color:#79B8FF;">100.0</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">+-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">openelb-manager-75cd76c58b-7q6lm</span><span style="color:#E1E4E8;">              </span><span style="color:#79B8FF;">100.0</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">100.0</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">__</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master-01 containerd]# kubectl-view_allocations -g pod -r cpu</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Resource</span><span style="color:#24292E;">                                       </span><span style="color:#032F62;">Requested</span><span style="color:#24292E;">        </span><span style="color:#032F62;">Limit</span><span style="color:#24292E;">  </span><span style="color:#032F62;">Allocatable</span><span style="color:#24292E;">  </span><span style="color:#032F62;">Free</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">cpu</span><span style="color:#24292E;">                                           (25%) 1.4  (</span><span style="color:#6F42C1;">7%</span><span style="color:#24292E;">) 400.0m          5.5   4.2</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">+-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">calico-node-2nc7p</span><span style="color:#24292E;">                             </span><span style="color:#005CC5;">250.0</span><span style="color:#032F62;">m</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">    </span><span style="color:#032F62;">__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">+-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">calico-node-8qw5w</span><span style="color:#24292E;">                             </span><span style="color:#005CC5;">250.0</span><span style="color:#032F62;">m</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">    </span><span style="color:#032F62;">__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">+-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">calico-node-sn9xm</span><span style="color:#24292E;">                             </span><span style="color:#005CC5;">250.0</span><span style="color:#032F62;">m</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">    </span><span style="color:#032F62;">__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">+-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">coredns-9867fb84c-257q7</span><span style="color:#24292E;">                       </span><span style="color:#005CC5;">100.0</span><span style="color:#032F62;">m</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">    </span><span style="color:#032F62;">__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">+-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">grafana-core-596b4d8c57-p8xgj</span><span style="color:#24292E;">                 </span><span style="color:#005CC5;">100.0</span><span style="color:#032F62;">m</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">300.0</span><span style="color:#032F62;">m</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">    </span><span style="color:#032F62;">__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">+-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ingress-nginx-controller-5b88878bf4-swz6f</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">100.0</span><span style="color:#032F62;">m</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">    </span><span style="color:#032F62;">__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">+-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ingress-nginx-controller-5b88878bf4-z2spz</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">100.0</span><span style="color:#032F62;">m</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">    </span><span style="color:#032F62;">__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">+-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">metrics-server-5559744ff8-cns4t</span><span style="color:#24292E;">               </span><span style="color:#005CC5;">100.0</span><span style="color:#032F62;">m</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">    </span><span style="color:#032F62;">__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">+-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">openelb-manager-75cd76c58b-7q6lm</span><span style="color:#24292E;">              </span><span style="color:#005CC5;">100.0</span><span style="color:#032F62;">m</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">100.0</span><span style="color:#032F62;">m</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">    </span><span style="color:#032F62;">__</span></span></code></pre></div><ul><li>展示ns</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master-01 containerd]# kubectl-view_allocations -g namespace</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Resource</span><span style="color:#E1E4E8;">              </span><span style="color:#9ECBFF;">Requested</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">Limit</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">Allocatable</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Free</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">cpu</span><span style="color:#E1E4E8;">                  (25%) 1.4  (</span><span style="color:#B392F0;">7%</span><span style="color:#E1E4E8;">) 400.0m          5.5    4.2</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">├─</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ingress-nginx</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">200.0</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">├─</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kube-system</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">950.0</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">├─</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">monitor</span><span style="color:#E1E4E8;">              </span><span style="color:#79B8FF;">100.0</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">300.0</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">└─</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">openelb-system</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">100.0</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">100.0</span><span style="color:#9ECBFF;">m</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">ephemeral-storage</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">102.0</span><span style="color:#9ECBFF;">G</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">memory</span><span style="color:#E1E4E8;">             (11%) 1.0Gi  (</span><span style="color:#B392F0;">16%</span><span style="color:#E1E4E8;">) 1.5Gi        9.1Gi  7.6Gi</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">├─</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ingress-nginx</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">180.0</span><span style="color:#9ECBFF;">Mi</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">├─</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kube-system</span><span style="color:#E1E4E8;">         </span><span style="color:#79B8FF;">270.0</span><span style="color:#9ECBFF;">Mi</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">170.0</span><span style="color:#9ECBFF;">Mi</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">├─</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">monitor</span><span style="color:#E1E4E8;">             </span><span style="color:#79B8FF;">500.0</span><span style="color:#9ECBFF;">Mi</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">1.0</span><span style="color:#9ECBFF;">Gi</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">└─</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">openelb-system</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">100.0</span><span style="color:#9ECBFF;">Mi</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">300.0</span><span style="color:#9ECBFF;">Mi</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">pods</span><span style="color:#E1E4E8;">                 (5%) 17.0    (</span><span style="color:#B392F0;">5%</span><span style="color:#E1E4E8;">) 17.0        330.0  313.0</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">├─</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">default</span><span style="color:#E1E4E8;">                 </span><span style="color:#79B8FF;">4.0</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">4.0</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">├─</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ingress-nginx</span><span style="color:#E1E4E8;">           </span><span style="color:#79B8FF;">2.0</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">2.0</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">├─</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kube-system</span><span style="color:#E1E4E8;">             </span><span style="color:#79B8FF;">6.0</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">6.0</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">├─</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">monitor</span><span style="color:#E1E4E8;">                 </span><span style="color:#79B8FF;">1.0</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">1.0</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">└─</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">openelb-system</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">4.0</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">4.0</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">__</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">__</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master-01 containerd]# kubectl-view_allocations -g namespace</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Resource</span><span style="color:#24292E;">              </span><span style="color:#032F62;">Requested</span><span style="color:#24292E;">        </span><span style="color:#032F62;">Limit</span><span style="color:#24292E;">  </span><span style="color:#032F62;">Allocatable</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Free</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">cpu</span><span style="color:#24292E;">                  (25%) 1.4  (</span><span style="color:#6F42C1;">7%</span><span style="color:#24292E;">) 400.0m          5.5    4.2</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">├─</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ingress-nginx</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">200.0</span><span style="color:#032F62;">m</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">     </span><span style="color:#032F62;">__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">├─</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kube-system</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">950.0</span><span style="color:#032F62;">m</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">     </span><span style="color:#032F62;">__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">├─</span><span style="color:#24292E;"> </span><span style="color:#032F62;">monitor</span><span style="color:#24292E;">              </span><span style="color:#005CC5;">100.0</span><span style="color:#032F62;">m</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">300.0</span><span style="color:#032F62;">m</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">     </span><span style="color:#032F62;">__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">└─</span><span style="color:#24292E;"> </span><span style="color:#032F62;">openelb-system</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">100.0</span><span style="color:#032F62;">m</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">100.0</span><span style="color:#032F62;">m</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">     </span><span style="color:#032F62;">__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">ephemeral-storage</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">102.0</span><span style="color:#032F62;">G</span><span style="color:#24292E;">     </span><span style="color:#032F62;">__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">memory</span><span style="color:#24292E;">             (11%) 1.0Gi  (</span><span style="color:#6F42C1;">16%</span><span style="color:#24292E;">) 1.5Gi        9.1Gi  7.6Gi</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">├─</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ingress-nginx</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">180.0</span><span style="color:#032F62;">Mi</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">     </span><span style="color:#032F62;">__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">├─</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kube-system</span><span style="color:#24292E;">         </span><span style="color:#005CC5;">270.0</span><span style="color:#032F62;">Mi</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">170.0</span><span style="color:#032F62;">Mi</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">     </span><span style="color:#032F62;">__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">├─</span><span style="color:#24292E;"> </span><span style="color:#032F62;">monitor</span><span style="color:#24292E;">             </span><span style="color:#005CC5;">500.0</span><span style="color:#032F62;">Mi</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">1.0</span><span style="color:#032F62;">Gi</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">     </span><span style="color:#032F62;">__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">└─</span><span style="color:#24292E;"> </span><span style="color:#032F62;">openelb-system</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">100.0</span><span style="color:#032F62;">Mi</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">300.0</span><span style="color:#032F62;">Mi</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">     </span><span style="color:#032F62;">__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">pods</span><span style="color:#24292E;">                 (5%) 17.0    (</span><span style="color:#6F42C1;">5%</span><span style="color:#24292E;">) 17.0        330.0  313.0</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">├─</span><span style="color:#24292E;"> </span><span style="color:#032F62;">default</span><span style="color:#24292E;">                 </span><span style="color:#005CC5;">4.0</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">4.0</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">     </span><span style="color:#032F62;">__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">├─</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ingress-nginx</span><span style="color:#24292E;">           </span><span style="color:#005CC5;">2.0</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">2.0</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">     </span><span style="color:#032F62;">__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">├─</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kube-system</span><span style="color:#24292E;">             </span><span style="color:#005CC5;">6.0</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">6.0</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">     </span><span style="color:#032F62;">__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">├─</span><span style="color:#24292E;"> </span><span style="color:#032F62;">monitor</span><span style="color:#24292E;">                 </span><span style="color:#005CC5;">1.0</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">1.0</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">     </span><span style="color:#032F62;">__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">└─</span><span style="color:#24292E;"> </span><span style="color:#032F62;">openelb-system</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">4.0</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">4.0</span><span style="color:#24292E;">           </span><span style="color:#032F62;">__</span><span style="color:#24292E;">     </span><span style="color:#032F62;">__</span></span></code></pre></div><h2 id="_4-images" tabindex="-1">4.images <a class="header-anchor" href="#_4-images" aria-label="Permalink to &quot;4.images&quot;">​</a></h2><p>kubectl-images 可以展示集群中正在使用的镜像，并对 namespace 进行一个简单的统计。使用这个插件可以非常方面的查看 namespace 中使用了哪些镜像，<code>尤其在排查问题需要查看镜像版本时非常有用</code></p><h3 id="安装-3" tabindex="-1">安装 <a class="header-anchor" href="#安装-3" aria-label="Permalink to &quot;安装&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">krew</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">images</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">$</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">images</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--help</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">krew</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">images</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">$</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">images</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--help</span></span></code></pre></div><h3 id="使用-3" tabindex="-1">使用 <a class="header-anchor" href="#使用-3" aria-label="Permalink to &quot;使用&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark has-diff vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master-01 containerd]# kubectl images -nmonitor</span></span>
<span class="line"><span style="color:#E1E4E8;">[Summary]: 1 namespaces, 1 pods, 1 containers and 1 different images</span></span>
<span class="line"><span style="color:#B392F0;">+-------------------------------+--------------+---------------------------------------------------------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">Pod</span><span style="color:#E1E4E8;">              </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">Container</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;">                          </span><span style="color:#B392F0;">Image</span><span style="color:#E1E4E8;">                          </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+-------------------------------+--------------+---------------------------------------------------------+</span></span>
<span class="line"><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">grafana-core-596b4d8c57-p8xgj</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">grafana-core</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">registry.cn-zhangjiakou.aliyuncs.com/hsuing/grafana:v11</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span></span>
<span class="line"><span style="color:#B392F0;">+-------------------------------+--------------+---------------------------------------------------------+</span></span></code></pre><pre class="shiki github-light has-diff vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master-01 containerd]# kubectl images -nmonitor</span></span>
<span class="line"><span style="color:#24292E;">[Summary]: 1 namespaces, 1 pods, 1 containers and 1 different images</span></span>
<span class="line"><span style="color:#6F42C1;">+-------------------------------+--------------+---------------------------------------------------------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;">              </span><span style="color:#6F42C1;">Pod</span><span style="color:#24292E;">              </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">  </span><span style="color:#6F42C1;">Container</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">|</span><span style="color:#24292E;">                          </span><span style="color:#6F42C1;">Image</span><span style="color:#24292E;">                          </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+-------------------------------+--------------+---------------------------------------------------------+</span></span>
<span class="line"><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">grafana-core-596b4d8c57-p8xgj</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">grafana-core</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">registry.cn-zhangjiakou.aliyuncs.com/hsuing/grafana:v11</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span></span>
<span class="line"><span style="color:#6F42C1;">+-------------------------------+--------------+---------------------------------------------------------+</span></span></code></pre></div>`,51),e=[o];function t(c,r,E,y,F,i){return a(),n("div",null,e)}const B=s(p,[["render",t]]);export{C as __pageData,B as default};
