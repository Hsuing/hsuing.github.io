import{_ as s,o as a,c as n,R as l}from"./chunks/framework.zUbWieqp.js";const B=JSON.parse('{"title":"1.查看磁盘","description":"","frontmatter":{},"headers":[],"relativePath":"guide/Linux/Storage/zfs/2-zfs_cmd.md","filePath":"guide/Linux/Storage/zfs/2-zfs_cmd.md","lastUpdated":1712138678000}'),p={name:"guide/Linux/Storage/zfs/2-zfs_cmd.md"},o=l(`<ul><li>文档</li></ul><p><a href="https://docs.oracle.com/cd/E26926_01/html/E25826/gavwg.html#scrolltoc" target="_blank" rel="noreferrer">https://docs.oracle.com/cd/E26926_01/html/E25826/gavwg.html#scrolltoc</a></p><p>ZFS 管理由两个工具组成</p><ul><li>zpool: 控制存储池和增加、删除、替换和管理磁盘</li><li>zfs: 增加、删除和管理文件系统和卷</li></ul><h1 id="_1-查看磁盘" tabindex="-1">1.查看磁盘 <a class="header-anchor" href="#_1-查看磁盘" aria-label="Permalink to &quot;1.查看磁盘&quot;">​</a></h1><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# lsblk</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">MAJ:MIN</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">RM</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">SIZE</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">RO</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">TYPE</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MOUNTPOINT</span></span>
<span class="line"><span style="color:#B392F0;">nvme0n1</span><span style="color:#E1E4E8;">         </span><span style="color:#79B8FF;">259</span><span style="color:#9ECBFF;">:0</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">20</span><span style="color:#9ECBFF;">G</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">disk</span></span>
<span class="line"><span style="color:#B392F0;">├─nvme0n1p9</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">259</span><span style="color:#9ECBFF;">:2</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">8</span><span style="color:#9ECBFF;">M</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">part</span></span>
<span class="line"><span style="color:#B392F0;">└─nvme0n1p1</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">259</span><span style="color:#9ECBFF;">:1</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">20</span><span style="color:#9ECBFF;">G</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">part</span></span>
<span class="line"><span style="color:#B392F0;">sr0</span><span style="color:#E1E4E8;">              </span><span style="color:#79B8FF;">11</span><span style="color:#9ECBFF;">:0</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1024</span><span style="color:#9ECBFF;">M</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rom</span></span>
<span class="line"><span style="color:#B392F0;">nvme0n2</span><span style="color:#E1E4E8;">         </span><span style="color:#79B8FF;">259</span><span style="color:#9ECBFF;">:3</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">5</span><span style="color:#9ECBFF;">G</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">disk</span></span>
<span class="line"><span style="color:#B392F0;">├─nvme0n2p1</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">259</span><span style="color:#9ECBFF;">:4</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">5</span><span style="color:#9ECBFF;">G</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">part</span></span>
<span class="line"><span style="color:#B392F0;">└─nvme0n2p9</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">259</span><span style="color:#9ECBFF;">:5</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">8</span><span style="color:#9ECBFF;">M</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">part</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# lsblk</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">            </span><span style="color:#032F62;">MAJ:MIN</span><span style="color:#24292E;"> </span><span style="color:#032F62;">RM</span><span style="color:#24292E;">  </span><span style="color:#032F62;">SIZE</span><span style="color:#24292E;"> </span><span style="color:#032F62;">RO</span><span style="color:#24292E;"> </span><span style="color:#032F62;">TYPE</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MOUNTPOINT</span></span>
<span class="line"><span style="color:#6F42C1;">nvme0n1</span><span style="color:#24292E;">         </span><span style="color:#005CC5;">259</span><span style="color:#032F62;">:0</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">20</span><span style="color:#032F62;">G</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">disk</span></span>
<span class="line"><span style="color:#6F42C1;">├─nvme0n1p9</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">259</span><span style="color:#032F62;">:2</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">8</span><span style="color:#032F62;">M</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">part</span></span>
<span class="line"><span style="color:#6F42C1;">└─nvme0n1p1</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">259</span><span style="color:#032F62;">:1</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">20</span><span style="color:#032F62;">G</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">part</span></span>
<span class="line"><span style="color:#6F42C1;">sr0</span><span style="color:#24292E;">              </span><span style="color:#005CC5;">11</span><span style="color:#032F62;">:0</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1024</span><span style="color:#032F62;">M</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rom</span></span>
<span class="line"><span style="color:#6F42C1;">nvme0n2</span><span style="color:#24292E;">         </span><span style="color:#005CC5;">259</span><span style="color:#032F62;">:3</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">5</span><span style="color:#032F62;">G</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">disk</span></span>
<span class="line"><span style="color:#6F42C1;">├─nvme0n2p1</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">259</span><span style="color:#032F62;">:4</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">5</span><span style="color:#032F62;">G</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">part</span></span>
<span class="line"><span style="color:#6F42C1;">└─nvme0n2p9</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">259</span><span style="color:#032F62;">:5</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">8</span><span style="color:#032F62;">M</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">part</span></span></code></pre></div><h1 id="_2-创建" tabindex="-1">2.创建 <a class="header-anchor" href="#_2-创建" aria-label="Permalink to &quot;2.创建&quot;">​</a></h1><h2 id="_2-0-help" tabindex="-1">2.0 help <a class="header-anchor" href="#_2-0-help" aria-label="Permalink to &quot;2.0 help&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">[root@other ~]# zfs set -h</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">[root@other ~]# zfs set -h</span></span></code></pre></div><h2 id="_2-1磁盘池和zfs文件系统" tabindex="-1">2.1磁盘池和zfs文件系统 <a class="header-anchor" href="#_2-1磁盘池和zfs文件系统" aria-label="Permalink to &quot;2.1磁盘池和zfs文件系统&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#语法，(type: “”,mirror,raidz,raidz2)</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zpool</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-o</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ashift=</span><span style="color:#79B8FF;">12</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zpool_name</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">disk_name</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">typ</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zpool create -o ashift=12 zp1 nvme0n1</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#优化</span></span>
<span class="line"><span style="color:#B392F0;">zfs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">compression=lz4</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zp1</span><span style="color:#E1E4E8;">          </span></span>
<span class="line"><span style="color:#B392F0;">zfs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">canmount=off</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zp1</span><span style="color:#E1E4E8;">          </span></span>
<span class="line"><span style="color:#B392F0;">zfs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">atime=off</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zp1</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#语法，(type: “”,mirror,raidz,raidz2)</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zpool</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-o</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ashift=</span><span style="color:#005CC5;">12</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zpool_name</span><span style="color:#24292E;"> </span><span style="color:#032F62;">disk_name</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">typ</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zpool create -o ashift=12 zp1 nvme0n1</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#优化</span></span>
<span class="line"><span style="color:#6F42C1;">zfs</span><span style="color:#24292E;"> </span><span style="color:#032F62;">set</span><span style="color:#24292E;"> </span><span style="color:#032F62;">compression=lz4</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zp1</span><span style="color:#24292E;">          </span></span>
<span class="line"><span style="color:#6F42C1;">zfs</span><span style="color:#24292E;"> </span><span style="color:#032F62;">set</span><span style="color:#24292E;"> </span><span style="color:#032F62;">canmount=off</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zp1</span><span style="color:#24292E;">          </span></span>
<span class="line"><span style="color:#6F42C1;">zfs</span><span style="color:#24292E;"> </span><span style="color:#032F62;">set</span><span style="color:#24292E;"> </span><span style="color:#032F62;">atime=off</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zp1</span></span></code></pre></div><h2 id="_2-1挂载" tabindex="-1">2.1挂载 <a class="header-anchor" href="#_2-1挂载" aria-label="Permalink to &quot;2.1挂载&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#语法 zfs create -o mountpoint=/data zp1/data</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">---&gt;/data</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">挂载点，没有会自动创建</span></span>
<span class="line"><span style="color:#B392F0;">---&gt;zp1/data</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">文件系统名字</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zfs create -o mountpoint=/data zp1/data</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#zfs create -o mountpoint=/pg_arch zp1/pg_arch</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#语法 zfs create -o mountpoint=/data zp1/data</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">---&gt;/data</span><span style="color:#24292E;"> </span><span style="color:#032F62;">挂载点，没有会自动创建</span></span>
<span class="line"><span style="color:#6F42C1;">---&gt;zp1/data</span><span style="color:#24292E;"> </span><span style="color:#032F62;">文件系统名字</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zfs create -o mountpoint=/data zp1/data</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#zfs create -o mountpoint=/pg_arch zp1/pg_arch</span></span></code></pre></div><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202404021750287.png" alt="image-20240402174946933"></p><h1 id="_3-修改" tabindex="-1">3.修改 <a class="header-anchor" href="#_3-修改" aria-label="Permalink to &quot;3.修改&quot;">​</a></h1><h2 id="_3-1修改文件系统名称" tabindex="-1">3.1修改文件系统名称 <a class="header-anchor" href="#_3-1修改文件系统名称" aria-label="Permalink to &quot;3.1修改文件系统名称&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 修改文件系统名称</span></span>
<span class="line"><span style="color:#B392F0;">zfs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rename</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">old_name</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">new_name</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 修改文件系统名称</span></span>
<span class="line"><span style="color:#6F42C1;">zfs</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rename</span><span style="color:#24292E;"> </span><span style="color:#032F62;">old_name</span><span style="color:#24292E;"> </span><span style="color:#032F62;">new_name</span></span></code></pre></div><h2 id="_3-2修改存储池的名称" tabindex="-1">3.2修改存储池的名称 <a class="header-anchor" href="#_3-2修改存储池的名称" aria-label="Permalink to &quot;3.2修改存储池的名称&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">zpool</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">tank</span></span>
<span class="line"><span style="color:#B392F0;">zpool</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">tank</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">newpool</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">zpool</span><span style="color:#24292E;"> </span><span style="color:#032F62;">export</span><span style="color:#24292E;"> </span><span style="color:#032F62;">tank</span></span>
<span class="line"><span style="color:#6F42C1;">zpool</span><span style="color:#24292E;"> </span><span style="color:#032F62;">import</span><span style="color:#24292E;"> </span><span style="color:#032F62;">tank</span><span style="color:#24292E;"> </span><span style="color:#032F62;">newpool</span></span></code></pre></div><h1 id="_4-删除" tabindex="-1">4.删除 <a class="header-anchor" href="#_4-删除" aria-label="Permalink to &quot;4.删除&quot;">​</a></h1><h2 id="_4-1删除文件系统" tabindex="-1">4.1删除文件系统 <a class="header-anchor" href="#_4-1删除文件系统" aria-label="Permalink to &quot;4.1删除文件系统&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 删除文件系统</span></span>
<span class="line"><span style="color:#B392F0;">zfs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">destroy</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-Rf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zp1/pg_arch</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 删除文件系统</span></span>
<span class="line"><span style="color:#6F42C1;">zfs</span><span style="color:#24292E;"> </span><span style="color:#032F62;">destroy</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-Rf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zp1/pg_arch</span></span></code></pre></div><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202404021805432.png" alt="image-20240402180459282"></p><h2 id="_4-2删除存储池" tabindex="-1">4.2删除存储池 <a class="header-anchor" href="#_4-2删除存储池" aria-label="Permalink to &quot;4.2删除存储池&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 销毁一个地址池</span></span>
<span class="line"><span style="color:#6A737D;">## zpool destroy 存储池名称</span></span>
<span class="line"><span style="color:#B392F0;">zpool</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">destroy</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zfspool_name</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看存储池列表</span></span>
<span class="line"><span style="color:#B392F0;">zpool</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">list</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看存储池状态</span></span>
<span class="line"><span style="color:#B392F0;">zpool</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看磁盘空间使用情况</span></span>
<span class="line"><span style="color:#B392F0;">df</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-Th</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 销毁一个地址池</span></span>
<span class="line"><span style="color:#6A737D;">## zpool destroy 存储池名称</span></span>
<span class="line"><span style="color:#6F42C1;">zpool</span><span style="color:#24292E;"> </span><span style="color:#032F62;">destroy</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zfspool_name</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看存储池列表</span></span>
<span class="line"><span style="color:#6F42C1;">zpool</span><span style="color:#24292E;"> </span><span style="color:#032F62;">list</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看存储池状态</span></span>
<span class="line"><span style="color:#6F42C1;">zpool</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看磁盘空间使用情况</span></span>
<span class="line"><span style="color:#6F42C1;">df</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-Th</span></span></code></pre></div><h1 id="_5-扩容" tabindex="-1">5.扩容 <a class="header-anchor" href="#_5-扩容" aria-label="Permalink to &quot;5.扩容&quot;">​</a></h1><h2 id="_5-1向现有磁盘中添加" tabindex="-1">5.1向现有磁盘中添加 <a class="header-anchor" href="#_5-1向现有磁盘中添加" aria-label="Permalink to &quot;5.1向现有磁盘中添加&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#查看磁盘名字</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# lsblk</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">MAJ:MIN</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">RM</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">SIZE</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">RO</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">TYPE</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MOUNTPOINT</span></span>
<span class="line"><span style="color:#B392F0;">nvme0n1</span><span style="color:#E1E4E8;">         </span><span style="color:#79B8FF;">259</span><span style="color:#9ECBFF;">:0</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">20</span><span style="color:#9ECBFF;">G</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">disk</span></span>
<span class="line"><span style="color:#B392F0;">├─nvme0n1p9</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">259</span><span style="color:#9ECBFF;">:2</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">8</span><span style="color:#9ECBFF;">M</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">part</span></span>
<span class="line"><span style="color:#B392F0;">└─nvme0n1p1</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">259</span><span style="color:#9ECBFF;">:1</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">20</span><span style="color:#9ECBFF;">G</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">part</span></span>
<span class="line"><span style="color:#B392F0;">sr0</span><span style="color:#E1E4E8;">              </span><span style="color:#79B8FF;">11</span><span style="color:#9ECBFF;">:0</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1024</span><span style="color:#9ECBFF;">M</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rom</span></span>
<span class="line"><span style="color:#B392F0;">nvme0n2</span><span style="color:#E1E4E8;">         </span><span style="color:#79B8FF;">259</span><span style="color:#9ECBFF;">:3</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">5</span><span style="color:#9ECBFF;">G</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">disk</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 向存储池中添加磁盘</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zpool add zfspool_name -f nvme0n2</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#查看磁盘名字</span></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# lsblk</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">            </span><span style="color:#032F62;">MAJ:MIN</span><span style="color:#24292E;"> </span><span style="color:#032F62;">RM</span><span style="color:#24292E;">  </span><span style="color:#032F62;">SIZE</span><span style="color:#24292E;"> </span><span style="color:#032F62;">RO</span><span style="color:#24292E;"> </span><span style="color:#032F62;">TYPE</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MOUNTPOINT</span></span>
<span class="line"><span style="color:#6F42C1;">nvme0n1</span><span style="color:#24292E;">         </span><span style="color:#005CC5;">259</span><span style="color:#032F62;">:0</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">20</span><span style="color:#032F62;">G</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">disk</span></span>
<span class="line"><span style="color:#6F42C1;">├─nvme0n1p9</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">259</span><span style="color:#032F62;">:2</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">8</span><span style="color:#032F62;">M</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">part</span></span>
<span class="line"><span style="color:#6F42C1;">└─nvme0n1p1</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">259</span><span style="color:#032F62;">:1</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">20</span><span style="color:#032F62;">G</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">part</span></span>
<span class="line"><span style="color:#6F42C1;">sr0</span><span style="color:#24292E;">              </span><span style="color:#005CC5;">11</span><span style="color:#032F62;">:0</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1024</span><span style="color:#032F62;">M</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rom</span></span>
<span class="line"><span style="color:#6F42C1;">nvme0n2</span><span style="color:#24292E;">         </span><span style="color:#005CC5;">259</span><span style="color:#032F62;">:3</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">5</span><span style="color:#032F62;">G</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">disk</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 向存储池中添加磁盘</span></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zpool add zfspool_name -f nvme0n2</span></span></code></pre></div><h1 id="_6-查看状态" tabindex="-1">6.查看状态 <a class="header-anchor" href="#_6-查看状态" aria-label="Permalink to &quot;6.查看状态&quot;">​</a></h1><h2 id="_6-1显示存储池的状态" tabindex="-1">6.1显示存储池的状态 <a class="header-anchor" href="#_6-1显示存储池的状态" aria-label="Permalink to &quot;6.1显示存储池的状态&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zpool status zp1</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">pool:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zp1</span><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">#存储池名称</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">state:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#存储池当前运行状态</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">scan:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">none</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">requested</span></span>
<span class="line"><span style="color:#B392F0;">config:</span><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">#发出读取请求时出现I/O错误|发出写入请求时出现I/O错误|校验和错误</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">STATE</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">READ</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">WRITE</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">CKSUM</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">	  </span><span style="color:#B392F0;">nvme0n1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">	  </span><span style="color:#B392F0;">nvme0n2</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">errors:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">No</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">known</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">data</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">errors</span><span style="color:#E1E4E8;">	</span><span style="color:#6A737D;">#确定是否存在已知的数据错误</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zpool status zp1</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">pool:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zp1</span><span style="color:#24292E;">    </span><span style="color:#6A737D;">#存储池名称</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">state:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#存储池当前运行状态</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">scan:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">none</span><span style="color:#24292E;"> </span><span style="color:#032F62;">requested</span></span>
<span class="line"><span style="color:#6F42C1;">config:</span><span style="color:#24292E;">        </span><span style="color:#6A737D;">#发出读取请求时出现I/O错误|发出写入请求时出现I/O错误|校验和错误</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">        </span><span style="color:#032F62;">STATE</span><span style="color:#24292E;">     </span><span style="color:#032F62;">READ</span><span style="color:#24292E;"> </span><span style="color:#032F62;">WRITE</span><span style="color:#24292E;"> </span><span style="color:#032F62;">CKSUM</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">         </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#24292E;">	  </span><span style="color:#6F42C1;">nvme0n1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#24292E;">	  </span><span style="color:#6F42C1;">nvme0n2</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">errors:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">No</span><span style="color:#24292E;"> </span><span style="color:#032F62;">known</span><span style="color:#24292E;"> </span><span style="color:#032F62;">data</span><span style="color:#24292E;"> </span><span style="color:#032F62;">errors</span><span style="color:#24292E;">	</span><span style="color:#6A737D;">#确定是否存在已知的数据错误</span></span></code></pre></div><h2 id="_6-2获取存储服务的状态" tabindex="-1">6.2获取存储服务的状态 <a class="header-anchor" href="#_6-2获取存储服务的状态" aria-label="Permalink to &quot;6.2获取存储服务的状态&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 获取所有pool状态</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zpool get all</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">PROPERTY</span><span style="color:#E1E4E8;">                       </span><span style="color:#9ECBFF;">VALUE</span><span style="color:#E1E4E8;">                          </span><span style="color:#9ECBFF;">SOURCE</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">size</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">24.8</span><span style="color:#9ECBFF;">G</span><span style="color:#E1E4E8;">                          </span><span style="color:#9ECBFF;">-</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">capacity</span><span style="color:#E1E4E8;">                       </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">%</span><span style="color:#E1E4E8;">                             </span><span style="color:#9ECBFF;">-</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">altroot</span><span style="color:#E1E4E8;">                        </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;">                              </span><span style="color:#9ECBFF;">default</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">health</span><span style="color:#E1E4E8;">                         </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;">                         </span><span style="color:#9ECBFF;">-</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">guid</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">17760530291839665031</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">-</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">version</span><span style="color:#E1E4E8;">                        </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;">                              </span><span style="color:#9ECBFF;">default</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">bootfs</span><span style="color:#E1E4E8;">                         </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;">                              </span><span style="color:#9ECBFF;">default</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">delegation</span><span style="color:#E1E4E8;">                     </span><span style="color:#9ECBFF;">on</span><span style="color:#E1E4E8;">                             </span><span style="color:#9ECBFF;">default</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">autoreplace</span><span style="color:#E1E4E8;">                    </span><span style="color:#9ECBFF;">off</span><span style="color:#E1E4E8;">                            </span><span style="color:#9ECBFF;">default</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">cachefile</span><span style="color:#E1E4E8;">                      </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;">                              </span><span style="color:#9ECBFF;">default</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">failmode</span><span style="color:#E1E4E8;">                       </span><span style="color:#9ECBFF;">wait</span><span style="color:#E1E4E8;">                           </span><span style="color:#9ECBFF;">default</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">listsnapshots</span><span style="color:#E1E4E8;">                  </span><span style="color:#9ECBFF;">off</span><span style="color:#E1E4E8;">                            </span><span style="color:#9ECBFF;">default</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">autoexpand</span><span style="color:#E1E4E8;">                     </span><span style="color:#9ECBFF;">off</span><span style="color:#E1E4E8;">                            </span><span style="color:#9ECBFF;">default</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">dedupditto</span><span style="color:#E1E4E8;">                     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">                              </span><span style="color:#9ECBFF;">default</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">dedupratio</span><span style="color:#E1E4E8;">                     </span><span style="color:#79B8FF;">1.00</span><span style="color:#9ECBFF;">x</span><span style="color:#E1E4E8;">                          </span><span style="color:#9ECBFF;">-</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">free</span><span style="color:#E1E4E8;">                           </span><span style="color:#79B8FF;">24.8</span><span style="color:#9ECBFF;">G</span><span style="color:#E1E4E8;">                          </span><span style="color:#9ECBFF;">-</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">allocated</span><span style="color:#E1E4E8;">                      </span><span style="color:#79B8FF;">1.37</span><span style="color:#9ECBFF;">M</span><span style="color:#E1E4E8;">                          </span><span style="color:#9ECBFF;">-</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">readonly</span><span style="color:#E1E4E8;">                       </span><span style="color:#9ECBFF;">off</span><span style="color:#E1E4E8;">                            </span><span style="color:#9ECBFF;">-</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ashift</span><span style="color:#E1E4E8;">                         </span><span style="color:#79B8FF;">12</span><span style="color:#E1E4E8;">                             </span><span style="color:#9ECBFF;">local</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">comment</span><span style="color:#E1E4E8;">                        </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;">                              </span><span style="color:#9ECBFF;">default</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">expandsize</span><span style="color:#E1E4E8;">                     </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;">                              </span><span style="color:#9ECBFF;">-</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">freeing</span><span style="color:#E1E4E8;">                        </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">                              </span><span style="color:#9ECBFF;">-</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">fragmentation</span><span style="color:#E1E4E8;">                  </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">%</span><span style="color:#E1E4E8;">                             </span><span style="color:#9ECBFF;">-</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">leaked</span><span style="color:#E1E4E8;">                         </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">                              </span><span style="color:#9ECBFF;">-</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">multihost</span><span style="color:#E1E4E8;">                      </span><span style="color:#9ECBFF;">off</span><span style="color:#E1E4E8;">                            </span><span style="color:#9ECBFF;">default</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">feature@async_destroy</span><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">enabled</span><span style="color:#E1E4E8;">                        </span><span style="color:#9ECBFF;">local</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">feature@empty_bpobj</span><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">active</span><span style="color:#E1E4E8;">                         </span><span style="color:#9ECBFF;">local</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">feature@lz4_compress</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">active</span><span style="color:#E1E4E8;">                         </span><span style="color:#9ECBFF;">local</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">feature@multi_vdev_crash_dump</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">enabled</span><span style="color:#E1E4E8;">                        </span><span style="color:#9ECBFF;">local</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">feature@spacemap_histogram</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">active</span><span style="color:#E1E4E8;">                         </span><span style="color:#9ECBFF;">local</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">feature@enabled_txg</span><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">active</span><span style="color:#E1E4E8;">                         </span><span style="color:#9ECBFF;">local</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">feature@hole_birth</span><span style="color:#E1E4E8;">             </span><span style="color:#9ECBFF;">active</span><span style="color:#E1E4E8;">                         </span><span style="color:#9ECBFF;">local</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">feature@extensible_dataset</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">active</span><span style="color:#E1E4E8;">                         </span><span style="color:#9ECBFF;">local</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">feature@embedded_data</span><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">active</span><span style="color:#E1E4E8;">                         </span><span style="color:#9ECBFF;">local</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">feature@bookmarks</span><span style="color:#E1E4E8;">              </span><span style="color:#9ECBFF;">enabled</span><span style="color:#E1E4E8;">                        </span><span style="color:#9ECBFF;">local</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">feature@filesystem_limits</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">enabled</span><span style="color:#E1E4E8;">                        </span><span style="color:#9ECBFF;">local</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">feature@large_blocks</span><span style="color:#E1E4E8;">           </span><span style="color:#9ECBFF;">enabled</span><span style="color:#E1E4E8;">                        </span><span style="color:#9ECBFF;">local</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">feature@large_dnode</span><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">enabled</span><span style="color:#E1E4E8;">                        </span><span style="color:#9ECBFF;">local</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">feature@sha512</span><span style="color:#E1E4E8;">                 </span><span style="color:#9ECBFF;">enabled</span><span style="color:#E1E4E8;">                        </span><span style="color:#9ECBFF;">local</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">feature@skein</span><span style="color:#E1E4E8;">                  </span><span style="color:#9ECBFF;">enabled</span><span style="color:#E1E4E8;">                        </span><span style="color:#9ECBFF;">local</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">feature@edonr</span><span style="color:#E1E4E8;">                  </span><span style="color:#9ECBFF;">enabled</span><span style="color:#E1E4E8;">                        </span><span style="color:#9ECBFF;">local</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">feature@userobj_accounting</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">active</span><span style="color:#E1E4E8;">                         </span><span style="color:#9ECBFF;">local</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 获取指定pool状态</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zpool get zp1</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 获取所有pool状态</span></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zpool get all</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">  </span><span style="color:#032F62;">PROPERTY</span><span style="color:#24292E;">                       </span><span style="color:#032F62;">VALUE</span><span style="color:#24292E;">                          </span><span style="color:#032F62;">SOURCE</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">size</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">24.8</span><span style="color:#032F62;">G</span><span style="color:#24292E;">                          </span><span style="color:#032F62;">-</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">capacity</span><span style="color:#24292E;">                       </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">%</span><span style="color:#24292E;">                             </span><span style="color:#032F62;">-</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">altroot</span><span style="color:#24292E;">                        </span><span style="color:#032F62;">-</span><span style="color:#24292E;">                              </span><span style="color:#032F62;">default</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">health</span><span style="color:#24292E;">                         </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;">                         </span><span style="color:#032F62;">-</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">guid</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">17760530291839665031</span><span style="color:#24292E;">           </span><span style="color:#032F62;">-</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">version</span><span style="color:#24292E;">                        </span><span style="color:#032F62;">-</span><span style="color:#24292E;">                              </span><span style="color:#032F62;">default</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">bootfs</span><span style="color:#24292E;">                         </span><span style="color:#032F62;">-</span><span style="color:#24292E;">                              </span><span style="color:#032F62;">default</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">delegation</span><span style="color:#24292E;">                     </span><span style="color:#032F62;">on</span><span style="color:#24292E;">                             </span><span style="color:#032F62;">default</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">autoreplace</span><span style="color:#24292E;">                    </span><span style="color:#032F62;">off</span><span style="color:#24292E;">                            </span><span style="color:#032F62;">default</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">cachefile</span><span style="color:#24292E;">                      </span><span style="color:#032F62;">-</span><span style="color:#24292E;">                              </span><span style="color:#032F62;">default</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">failmode</span><span style="color:#24292E;">                       </span><span style="color:#032F62;">wait</span><span style="color:#24292E;">                           </span><span style="color:#032F62;">default</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">listsnapshots</span><span style="color:#24292E;">                  </span><span style="color:#032F62;">off</span><span style="color:#24292E;">                            </span><span style="color:#032F62;">default</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">autoexpand</span><span style="color:#24292E;">                     </span><span style="color:#032F62;">off</span><span style="color:#24292E;">                            </span><span style="color:#032F62;">default</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">dedupditto</span><span style="color:#24292E;">                     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">                              </span><span style="color:#032F62;">default</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">dedupratio</span><span style="color:#24292E;">                     </span><span style="color:#005CC5;">1.00</span><span style="color:#032F62;">x</span><span style="color:#24292E;">                          </span><span style="color:#032F62;">-</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">free</span><span style="color:#24292E;">                           </span><span style="color:#005CC5;">24.8</span><span style="color:#032F62;">G</span><span style="color:#24292E;">                          </span><span style="color:#032F62;">-</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">allocated</span><span style="color:#24292E;">                      </span><span style="color:#005CC5;">1.37</span><span style="color:#032F62;">M</span><span style="color:#24292E;">                          </span><span style="color:#032F62;">-</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">readonly</span><span style="color:#24292E;">                       </span><span style="color:#032F62;">off</span><span style="color:#24292E;">                            </span><span style="color:#032F62;">-</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ashift</span><span style="color:#24292E;">                         </span><span style="color:#005CC5;">12</span><span style="color:#24292E;">                             </span><span style="color:#032F62;">local</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">comment</span><span style="color:#24292E;">                        </span><span style="color:#032F62;">-</span><span style="color:#24292E;">                              </span><span style="color:#032F62;">default</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">expandsize</span><span style="color:#24292E;">                     </span><span style="color:#032F62;">-</span><span style="color:#24292E;">                              </span><span style="color:#032F62;">-</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">freeing</span><span style="color:#24292E;">                        </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">                              </span><span style="color:#032F62;">-</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">fragmentation</span><span style="color:#24292E;">                  </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">%</span><span style="color:#24292E;">                             </span><span style="color:#032F62;">-</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">leaked</span><span style="color:#24292E;">                         </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">                              </span><span style="color:#032F62;">-</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">multihost</span><span style="color:#24292E;">                      </span><span style="color:#032F62;">off</span><span style="color:#24292E;">                            </span><span style="color:#032F62;">default</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">feature@async_destroy</span><span style="color:#24292E;">          </span><span style="color:#032F62;">enabled</span><span style="color:#24292E;">                        </span><span style="color:#032F62;">local</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">feature@empty_bpobj</span><span style="color:#24292E;">            </span><span style="color:#032F62;">active</span><span style="color:#24292E;">                         </span><span style="color:#032F62;">local</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">feature@lz4_compress</span><span style="color:#24292E;">           </span><span style="color:#032F62;">active</span><span style="color:#24292E;">                         </span><span style="color:#032F62;">local</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">feature@multi_vdev_crash_dump</span><span style="color:#24292E;">  </span><span style="color:#032F62;">enabled</span><span style="color:#24292E;">                        </span><span style="color:#032F62;">local</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">feature@spacemap_histogram</span><span style="color:#24292E;">     </span><span style="color:#032F62;">active</span><span style="color:#24292E;">                         </span><span style="color:#032F62;">local</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">feature@enabled_txg</span><span style="color:#24292E;">            </span><span style="color:#032F62;">active</span><span style="color:#24292E;">                         </span><span style="color:#032F62;">local</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">feature@hole_birth</span><span style="color:#24292E;">             </span><span style="color:#032F62;">active</span><span style="color:#24292E;">                         </span><span style="color:#032F62;">local</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">feature@extensible_dataset</span><span style="color:#24292E;">     </span><span style="color:#032F62;">active</span><span style="color:#24292E;">                         </span><span style="color:#032F62;">local</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">feature@embedded_data</span><span style="color:#24292E;">          </span><span style="color:#032F62;">active</span><span style="color:#24292E;">                         </span><span style="color:#032F62;">local</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">feature@bookmarks</span><span style="color:#24292E;">              </span><span style="color:#032F62;">enabled</span><span style="color:#24292E;">                        </span><span style="color:#032F62;">local</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">feature@filesystem_limits</span><span style="color:#24292E;">      </span><span style="color:#032F62;">enabled</span><span style="color:#24292E;">                        </span><span style="color:#032F62;">local</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">feature@large_blocks</span><span style="color:#24292E;">           </span><span style="color:#032F62;">enabled</span><span style="color:#24292E;">                        </span><span style="color:#032F62;">local</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">feature@large_dnode</span><span style="color:#24292E;">            </span><span style="color:#032F62;">enabled</span><span style="color:#24292E;">                        </span><span style="color:#032F62;">local</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">feature@sha512</span><span style="color:#24292E;">                 </span><span style="color:#032F62;">enabled</span><span style="color:#24292E;">                        </span><span style="color:#032F62;">local</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">feature@skein</span><span style="color:#24292E;">                  </span><span style="color:#032F62;">enabled</span><span style="color:#24292E;">                        </span><span style="color:#032F62;">local</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">feature@edonr</span><span style="color:#24292E;">                  </span><span style="color:#032F62;">enabled</span><span style="color:#24292E;">                        </span><span style="color:#032F62;">local</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">feature@userobj_accounting</span><span style="color:#24292E;">     </span><span style="color:#032F62;">active</span><span style="color:#24292E;">                         </span><span style="color:#032F62;">local</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 获取指定pool状态</span></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zpool get zp1</span></span></code></pre></div><h2 id="_6-3查存储池列表" tabindex="-1">6.3查存储池列表 <a class="header-anchor" href="#_6-3查存储池列表" aria-label="Permalink to &quot;6.3查存储池列表&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;"># 查看存储池</span></span>
<span class="line"><span style="color:#e1e4e8;">zpool list</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;"># 查看存储池</span></span>
<span class="line"><span style="color:#24292e;">zpool list</span></span></code></pre></div><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202404021810879.png" alt="image-20240402181046864"></p><h2 id="_6-3查看修改历史" tabindex="-1">6.3查看修改历史 <a class="header-anchor" href="#_6-3查看修改历史" aria-label="Permalink to &quot;6.3查看修改历史&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 显示以前修改了存储池状态信息</span></span>
<span class="line"><span style="color:#B392F0;">zpool</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">history</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 显示以前修改了存储池状态信息</span></span>
<span class="line"><span style="color:#6F42C1;">zpool</span><span style="color:#24292E;"> </span><span style="color:#032F62;">history</span></span></code></pre></div><h1 id="_7-磁盘管理" tabindex="-1">7.磁盘管理 <a class="header-anchor" href="#_7-磁盘管理" aria-label="Permalink to &quot;7.磁盘管理&quot;">​</a></h1><ul><li>文档</li></ul><p><a href="https://docs.oracle.com/cd/E19253-01/819-7065/gayrd/index.html" target="_blank" rel="noreferrer">https://docs.oracle.com/cd/E19253-01/819-7065/gayrd/index.html</a></p><h2 id="_7-1添加磁盘" tabindex="-1">7.1添加磁盘 <a class="header-anchor" href="#_7-1添加磁盘" aria-label="Permalink to &quot;7.1添加磁盘&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#查看磁盘名字</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# lsblk</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">MAJ:MIN</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">RM</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">SIZE</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">RO</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">TYPE</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">MOUNTPOINT</span></span>
<span class="line"><span style="color:#B392F0;">nvme0n1</span><span style="color:#E1E4E8;">         </span><span style="color:#79B8FF;">259</span><span style="color:#9ECBFF;">:0</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">20</span><span style="color:#9ECBFF;">G</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">disk</span></span>
<span class="line"><span style="color:#B392F0;">├─nvme0n1p9</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">259</span><span style="color:#9ECBFF;">:2</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">8</span><span style="color:#9ECBFF;">M</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">part</span></span>
<span class="line"><span style="color:#B392F0;">└─nvme0n1p1</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">259</span><span style="color:#9ECBFF;">:1</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">20</span><span style="color:#9ECBFF;">G</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">part</span></span>
<span class="line"><span style="color:#B392F0;">sr0</span><span style="color:#E1E4E8;">              </span><span style="color:#79B8FF;">11</span><span style="color:#9ECBFF;">:0</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1024</span><span style="color:#9ECBFF;">M</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rom</span></span>
<span class="line"><span style="color:#B392F0;">nvme0n2</span><span style="color:#E1E4E8;">         </span><span style="color:#79B8FF;">259</span><span style="color:#9ECBFF;">:3</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">5</span><span style="color:#9ECBFF;">G</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">disk</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 向存储池中添加磁盘</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zpool add zfspool_name -f nvme0n2</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#查看磁盘名字</span></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# lsblk</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">            </span><span style="color:#032F62;">MAJ:MIN</span><span style="color:#24292E;"> </span><span style="color:#032F62;">RM</span><span style="color:#24292E;">  </span><span style="color:#032F62;">SIZE</span><span style="color:#24292E;"> </span><span style="color:#032F62;">RO</span><span style="color:#24292E;"> </span><span style="color:#032F62;">TYPE</span><span style="color:#24292E;"> </span><span style="color:#032F62;">MOUNTPOINT</span></span>
<span class="line"><span style="color:#6F42C1;">nvme0n1</span><span style="color:#24292E;">         </span><span style="color:#005CC5;">259</span><span style="color:#032F62;">:0</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">20</span><span style="color:#032F62;">G</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">disk</span></span>
<span class="line"><span style="color:#6F42C1;">├─nvme0n1p9</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">259</span><span style="color:#032F62;">:2</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">8</span><span style="color:#032F62;">M</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">part</span></span>
<span class="line"><span style="color:#6F42C1;">└─nvme0n1p1</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">259</span><span style="color:#032F62;">:1</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">20</span><span style="color:#032F62;">G</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">part</span></span>
<span class="line"><span style="color:#6F42C1;">sr0</span><span style="color:#24292E;">              </span><span style="color:#005CC5;">11</span><span style="color:#032F62;">:0</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1024</span><span style="color:#032F62;">M</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rom</span></span>
<span class="line"><span style="color:#6F42C1;">nvme0n2</span><span style="color:#24292E;">         </span><span style="color:#005CC5;">259</span><span style="color:#032F62;">:3</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">5</span><span style="color:#032F62;">G</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">disk</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 向存储池中添加磁盘</span></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zpool add zfspool_name -f nvme0n2</span></span></code></pre></div><h2 id="_7-2标记磁盘运行状态" tabindex="-1">7.2标记磁盘运行状态 <a class="header-anchor" href="#_7-2标记磁盘运行状态" aria-label="Permalink to &quot;7.2标记磁盘运行状态&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 标记磁盘状态为运行</span></span>
<span class="line"><span style="color:#B392F0;">zpool</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">online</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zp1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nvme0n2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 在有故障的时候，标记磁盘状态为非运行</span></span>
<span class="line"><span style="color:#B392F0;">zpool</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">offline</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zp1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nvme0n2</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 标记磁盘状态为运行</span></span>
<span class="line"><span style="color:#6F42C1;">zpool</span><span style="color:#24292E;"> </span><span style="color:#032F62;">online</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zp1</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nvme0n2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 在有故障的时候，标记磁盘状态为非运行</span></span>
<span class="line"><span style="color:#6F42C1;">zpool</span><span style="color:#24292E;"> </span><span style="color:#032F62;">offline</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zp1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nvme0n2</span></span></code></pre></div><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202404031401459.png" alt="image-20240403140128430"></p><h3 id="_1-清除存储池设备错误" tabindex="-1">1.清除存储池设备错误 <a class="header-anchor" href="#_1-清除存储池设备错误" aria-label="Permalink to &quot;1.清除存储池设备错误&quot;">​</a></h3><p>如果设备因出现故障（导致在 zpool status 输出中列出错误）而脱机，则可以使用 zpool clear 命令清除错误计数。</p><p>如果不指定任何参数，则此命令将清除池中的所有设备错误。例如：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zpool clear zp1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zpool status</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">pool:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zp1</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">state:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ONLINE</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">scan:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">scrub</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">repaired</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">B</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">h0m</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">errors</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">on</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Wed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Apr</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">14</span><span style="color:#9ECBFF;">:21:41</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2024</span></span>
<span class="line"><span style="color:#B392F0;">config:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">STATE</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">READ</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">WRITE</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">CKSUM</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">	  </span><span style="color:#B392F0;">nvme0n1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">	  </span><span style="color:#B392F0;">nvme0n2</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">errors:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">No</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">known</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">data</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">errors</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zpool clear zp1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zpool status</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">pool:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zp1</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">state:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ONLINE</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">scan:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">scrub</span><span style="color:#24292E;"> </span><span style="color:#032F62;">repaired</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">B</span><span style="color:#24292E;"> </span><span style="color:#032F62;">in</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">h0m</span><span style="color:#24292E;"> </span><span style="color:#032F62;">with</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">errors</span><span style="color:#24292E;"> </span><span style="color:#032F62;">on</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Wed</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Apr</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">14</span><span style="color:#032F62;">:21:41</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2024</span></span>
<span class="line"><span style="color:#6F42C1;">config:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">        </span><span style="color:#032F62;">STATE</span><span style="color:#24292E;">     </span><span style="color:#032F62;">READ</span><span style="color:#24292E;"> </span><span style="color:#032F62;">WRITE</span><span style="color:#24292E;"> </span><span style="color:#032F62;">CKSUM</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">         </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#24292E;">	  </span><span style="color:#6F42C1;">nvme0n1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#24292E;">	  </span><span style="color:#6F42C1;">nvme0n2</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">errors:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">No</span><span style="color:#24292E;"> </span><span style="color:#032F62;">known</span><span style="color:#24292E;"> </span><span style="color:#032F62;">data</span><span style="color:#24292E;"> </span><span style="color:#032F62;">errors</span></span></code></pre></div><p>如果指定了一个或多个设备，则此命令仅清除与指定设备关联的错误。例如：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zpool offline zp1 -f nvme0n2</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zpool status</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">pool:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zp1</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">state:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">DEGRADED</span></span>
<span class="line"><span style="color:#B392F0;">status:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">One</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">or</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">more</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">devices</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">has</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">experienced</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">an</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">unrecoverable</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">error.</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">An</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">attempt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">was</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">made</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">correct</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">error.</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">Applications</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">are</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">unaffected.</span></span>
<span class="line"><span style="color:#B392F0;">action:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Determine</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">if</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">device</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">needs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">be</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">replaced,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">and</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clear</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">errors</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">using</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;zpool clear&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">or</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">replace</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">device</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;zpool replace&#39;.</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span><span style="color:#B392F0;">see:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">http://zfsonlinux.org/msg/ZFS-8000-9P</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">scan:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">scrub</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">repaired</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">B</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">h0m</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">errors</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">on</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Wed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Apr</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">14</span><span style="color:#9ECBFF;">:23:17</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2024</span></span>
<span class="line"><span style="color:#B392F0;">config:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">STATE</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">READ</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">WRITE</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">CKSUM</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">DEGRADED</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">	  </span><span style="color:#B392F0;">nvme0n1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">	  </span><span style="color:#B392F0;">nvme0n2</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">DEGRADED</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">external</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">device</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">fault</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">errors:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">No</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">known</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">data</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">errors</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zpool clear zp1 nvme0n2</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zpool status</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">pool:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zp1</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">state:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ONLINE</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">scan:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">scrub</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">repaired</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">B</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">h0m</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">errors</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">on</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Wed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Apr</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">14</span><span style="color:#9ECBFF;">:29:23</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2024</span></span>
<span class="line"><span style="color:#B392F0;">config:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">STATE</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">READ</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">WRITE</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">CKSUM</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">	  </span><span style="color:#B392F0;">nvme0n1</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">	  </span><span style="color:#B392F0;">nvme0n2</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">errors:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">No</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">known</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">data</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">errors</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zpool offline zp1 -f nvme0n2</span></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zpool status</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">pool:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zp1</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">state:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">DEGRADED</span></span>
<span class="line"><span style="color:#6F42C1;">status:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">One</span><span style="color:#24292E;"> </span><span style="color:#032F62;">or</span><span style="color:#24292E;"> </span><span style="color:#032F62;">more</span><span style="color:#24292E;"> </span><span style="color:#032F62;">devices</span><span style="color:#24292E;"> </span><span style="color:#032F62;">has</span><span style="color:#24292E;"> </span><span style="color:#032F62;">experienced</span><span style="color:#24292E;"> </span><span style="color:#032F62;">an</span><span style="color:#24292E;"> </span><span style="color:#032F62;">unrecoverable</span><span style="color:#24292E;"> </span><span style="color:#032F62;">error.</span><span style="color:#24292E;">  </span><span style="color:#032F62;">An</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">attempt</span><span style="color:#24292E;"> </span><span style="color:#032F62;">was</span><span style="color:#24292E;"> </span><span style="color:#032F62;">made</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">correct</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">error.</span><span style="color:#24292E;">  </span><span style="color:#032F62;">Applications</span><span style="color:#24292E;"> </span><span style="color:#032F62;">are</span><span style="color:#24292E;"> </span><span style="color:#032F62;">unaffected.</span></span>
<span class="line"><span style="color:#6F42C1;">action:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Determine</span><span style="color:#24292E;"> </span><span style="color:#032F62;">if</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">device</span><span style="color:#24292E;"> </span><span style="color:#032F62;">needs</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">be</span><span style="color:#24292E;"> </span><span style="color:#032F62;">replaced,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">and</span><span style="color:#24292E;"> </span><span style="color:#032F62;">clear</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">errors</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">using</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;zpool clear&#39;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">or</span><span style="color:#24292E;"> </span><span style="color:#032F62;">replace</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">device</span><span style="color:#24292E;"> </span><span style="color:#032F62;">with</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;zpool replace&#39;.</span></span>
<span class="line"><span style="color:#24292E;">   </span><span style="color:#6F42C1;">see:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">http://zfsonlinux.org/msg/ZFS-8000-9P</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">scan:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">scrub</span><span style="color:#24292E;"> </span><span style="color:#032F62;">repaired</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">B</span><span style="color:#24292E;"> </span><span style="color:#032F62;">in</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">h0m</span><span style="color:#24292E;"> </span><span style="color:#032F62;">with</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">errors</span><span style="color:#24292E;"> </span><span style="color:#032F62;">on</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Wed</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Apr</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">14</span><span style="color:#032F62;">:23:17</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2024</span></span>
<span class="line"><span style="color:#6F42C1;">config:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">        </span><span style="color:#032F62;">STATE</span><span style="color:#24292E;">     </span><span style="color:#032F62;">READ</span><span style="color:#24292E;"> </span><span style="color:#032F62;">WRITE</span><span style="color:#24292E;"> </span><span style="color:#032F62;">CKSUM</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">         </span><span style="color:#032F62;">DEGRADED</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#24292E;">	  </span><span style="color:#6F42C1;">nvme0n1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#24292E;">	  </span><span style="color:#6F42C1;">nvme0n2</span><span style="color:#24292E;">   </span><span style="color:#032F62;">DEGRADED</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">  </span><span style="color:#032F62;">external</span><span style="color:#24292E;"> </span><span style="color:#032F62;">device</span><span style="color:#24292E;"> </span><span style="color:#032F62;">fault</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">errors:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">No</span><span style="color:#24292E;"> </span><span style="color:#032F62;">known</span><span style="color:#24292E;"> </span><span style="color:#032F62;">data</span><span style="color:#24292E;"> </span><span style="color:#032F62;">errors</span></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zpool clear zp1 nvme0n2</span></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zpool status</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">pool:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zp1</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">state:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ONLINE</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">scan:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">scrub</span><span style="color:#24292E;"> </span><span style="color:#032F62;">repaired</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">B</span><span style="color:#24292E;"> </span><span style="color:#032F62;">in</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">h0m</span><span style="color:#24292E;"> </span><span style="color:#032F62;">with</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">errors</span><span style="color:#24292E;"> </span><span style="color:#032F62;">on</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Wed</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Apr</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">14</span><span style="color:#032F62;">:29:23</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2024</span></span>
<span class="line"><span style="color:#6F42C1;">config:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">        </span><span style="color:#032F62;">STATE</span><span style="color:#24292E;">     </span><span style="color:#032F62;">READ</span><span style="color:#24292E;"> </span><span style="color:#032F62;">WRITE</span><span style="color:#24292E;"> </span><span style="color:#032F62;">CKSUM</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">         </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#24292E;">	  </span><span style="color:#6F42C1;">nvme0n1</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#24292E;">	  </span><span style="color:#6F42C1;">nvme0n2</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">errors:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">No</span><span style="color:#24292E;"> </span><span style="color:#032F62;">known</span><span style="color:#24292E;"> </span><span style="color:#032F62;">data</span><span style="color:#24292E;"> </span><span style="color:#032F62;">errors</span></span></code></pre></div><h2 id="_7-3删除磁盘" tabindex="-1">7.3删除磁盘 <a class="header-anchor" href="#_7-3删除磁盘" aria-label="Permalink to &quot;7.3删除磁盘&quot;">​</a></h2><p>目前，zpool remove 命令仅支持删除热备件、日志设备和高速缓存设备。可以使用 zpool detach 命令删除属于主镜像池配置的设备。非冗余设备和 RAID-Z 设备无法从池中删除</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zpool remove -h</span></span>
<span class="line"><span style="color:#B392F0;">missing</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">device</span></span>
<span class="line"><span style="color:#B392F0;">usage:</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">remove</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">poo</span><span style="color:#E1E4E8;">l</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">devic</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">...</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zpool remove -h</span></span>
<span class="line"><span style="color:#6F42C1;">missing</span><span style="color:#24292E;"> </span><span style="color:#032F62;">device</span></span>
<span class="line"><span style="color:#6F42C1;">usage:</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">remove</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">poo</span><span style="color:#24292E;">l</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">devic</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">...</span></span></code></pre></div><h1 id="_8-raid池" tabindex="-1">8.raid池 <a class="header-anchor" href="#_8-raid池" aria-label="Permalink to &quot;8.raid池&quot;">​</a></h1><p><code>nvme0n[1-5]大小是5g</code></p><h2 id="_8-1raidz-1" tabindex="-1">8.1RAIDZ-1 <a class="header-anchor" href="#_8-1raidz-1" aria-label="Permalink to &quot;8.1RAIDZ-1&quot;">​</a></h2><blockquote><p>至少需要3块磁盘，必须保证磁盘大小一致，否则以最小单位的存储使用</p></blockquote><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zpool create zp1 raidz1 nvme0n1 nvme0n2 nvme0n3</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zpool status</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">pool:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zp1</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">state:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ONLINE</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">scan:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">resilvered</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">50.5</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">h0m</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">errors</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">on</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Wed</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Apr</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">15</span><span style="color:#9ECBFF;">:45:32</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2024</span></span>
<span class="line"><span style="color:#B392F0;">config:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">STATE</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">READ</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">WRITE</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">CKSUM</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">	  </span><span style="color:#B392F0;">raidz1-0</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">	    </span><span style="color:#B392F0;">nvme0n1</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">	    </span><span style="color:#B392F0;">nvme0n2</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">	    </span><span style="color:#B392F0;">nvme0n3</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">errors:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">No</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">known</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">data</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">errors</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#删除zpool</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zpool destroy zp1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看状态</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zpool status</span></span>
<span class="line"><span style="color:#B392F0;">no</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pools</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">available</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zpool create zp1 raidz1 nvme0n1 nvme0n2 nvme0n3</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zpool status</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">pool:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zp1</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">state:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ONLINE</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">scan:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">resilvered</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">50.5</span><span style="color:#032F62;">K</span><span style="color:#24292E;"> </span><span style="color:#032F62;">in</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">h0m</span><span style="color:#24292E;"> </span><span style="color:#032F62;">with</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#032F62;">errors</span><span style="color:#24292E;"> </span><span style="color:#032F62;">on</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Wed</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Apr</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">3</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">15</span><span style="color:#032F62;">:45:32</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2024</span></span>
<span class="line"><span style="color:#6F42C1;">config:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">         </span><span style="color:#032F62;">STATE</span><span style="color:#24292E;">     </span><span style="color:#032F62;">READ</span><span style="color:#24292E;"> </span><span style="color:#032F62;">WRITE</span><span style="color:#24292E;"> </span><span style="color:#032F62;">CKSUM</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">          </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#24292E;">	  </span><span style="color:#6F42C1;">raidz1-0</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#24292E;">	    </span><span style="color:#6F42C1;">nvme0n1</span><span style="color:#24292E;">  </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#24292E;">	    </span><span style="color:#6F42C1;">nvme0n2</span><span style="color:#24292E;">  </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#24292E;">	    </span><span style="color:#6F42C1;">nvme0n3</span><span style="color:#24292E;">  </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">errors:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">No</span><span style="color:#24292E;"> </span><span style="color:#032F62;">known</span><span style="color:#24292E;"> </span><span style="color:#032F62;">data</span><span style="color:#24292E;"> </span><span style="color:#032F62;">errors</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#删除zpool</span></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zpool destroy zp1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看状态</span></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zpool status</span></span>
<span class="line"><span style="color:#6F42C1;">no</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pools</span><span style="color:#24292E;"> </span><span style="color:#032F62;">available</span></span></code></pre></div><h2 id="_8-2raidz-2" tabindex="-1">8.2RAIDZ-2 <a class="header-anchor" href="#_8-2raidz-2" aria-label="Permalink to &quot;8.2RAIDZ-2&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#创建</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zpool create zp1 raidz2 nvme0n1 nvme0n2 nvme0n3 nvme0n4</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看状态</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zpool status</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">pool:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zp1</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">state:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ONLINE</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">scan:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">none</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">requested</span></span>
<span class="line"><span style="color:#B392F0;">config:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">STATE</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">READ</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">WRITE</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">CKSUM</span></span>
<span class="line"><span style="color:#E1E4E8;">	</span><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">          </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">	  </span><span style="color:#B392F0;">raidz2-0</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">	    </span><span style="color:#B392F0;">nvme0n1</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">	    </span><span style="color:#B392F0;">nvme0n2</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">	    </span><span style="color:#B392F0;">nvme0n3</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">	    </span><span style="color:#B392F0;">nvme0n4</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">ONLINE</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">errors:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">No</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">known</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">data</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">errors</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看可用空间大小</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zfs list</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">USED</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">AVAIL</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">REFER</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">MOUNTPOINT</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">111</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">9.59</span><span style="color:#9ECBFF;">G</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">32.9</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">/zp1</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#创建</span></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zpool create zp1 raidz2 nvme0n1 nvme0n2 nvme0n3 nvme0n4</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看状态</span></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zpool status</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">pool:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zp1</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">state:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ONLINE</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">scan:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">none</span><span style="color:#24292E;"> </span><span style="color:#032F62;">requested</span></span>
<span class="line"><span style="color:#6F42C1;">config:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">         </span><span style="color:#032F62;">STATE</span><span style="color:#24292E;">     </span><span style="color:#032F62;">READ</span><span style="color:#24292E;"> </span><span style="color:#032F62;">WRITE</span><span style="color:#24292E;"> </span><span style="color:#032F62;">CKSUM</span></span>
<span class="line"><span style="color:#24292E;">	</span><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">          </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#24292E;">	  </span><span style="color:#6F42C1;">raidz2-0</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#24292E;">	    </span><span style="color:#6F42C1;">nvme0n1</span><span style="color:#24292E;">  </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#24292E;">	    </span><span style="color:#6F42C1;">nvme0n2</span><span style="color:#24292E;">  </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#24292E;">	    </span><span style="color:#6F42C1;">nvme0n3</span><span style="color:#24292E;">  </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"><span style="color:#24292E;">	    </span><span style="color:#6F42C1;">nvme0n4</span><span style="color:#24292E;">  </span><span style="color:#032F62;">ONLINE</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">errors:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">No</span><span style="color:#24292E;"> </span><span style="color:#032F62;">known</span><span style="color:#24292E;"> </span><span style="color:#032F62;">data</span><span style="color:#24292E;"> </span><span style="color:#032F62;">errors</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看可用空间大小</span></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zfs list</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">   </span><span style="color:#032F62;">USED</span><span style="color:#24292E;">  </span><span style="color:#032F62;">AVAIL</span><span style="color:#24292E;">  </span><span style="color:#032F62;">REFER</span><span style="color:#24292E;">  </span><span style="color:#032F62;">MOUNTPOINT</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">111</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">9.59</span><span style="color:#032F62;">G</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">32.9</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#032F62;">/zp1</span></span></code></pre></div><h2 id="_8-3raidz-3" tabindex="-1">8.3RAIDZ-3 <a class="header-anchor" href="#_8-3raidz-3" aria-label="Permalink to &quot;8.3RAIDZ-3&quot;">​</a></h2><p>5块磁盘，可用两个</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zpool create zp1 raidz3 nvme0n1 nvme0n2 nvme0n3 nvme0n4 nvme0n5</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zfs list</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">USED</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">AVAIL</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">REFER</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">MOUNTPOINT</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">114</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">9.60</span><span style="color:#9ECBFF;">G</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">35.1</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">/zp1</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zpool create zp1 raidz3 nvme0n1 nvme0n2 nvme0n3 nvme0n4 nvme0n5</span></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zfs list</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">   </span><span style="color:#032F62;">USED</span><span style="color:#24292E;">  </span><span style="color:#032F62;">AVAIL</span><span style="color:#24292E;">  </span><span style="color:#032F62;">REFER</span><span style="color:#24292E;">  </span><span style="color:#032F62;">MOUNTPOINT</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">114</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">9.60</span><span style="color:#032F62;">G</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">35.1</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#032F62;">/zp1</span></span></code></pre></div><h1 id="_9-快照" tabindex="-1">9.快照 <a class="header-anchor" href="#_9-快照" aria-label="Permalink to &quot;9.快照&quot;">​</a></h1><p>可以在池中保留至多2^64个快照，ZFS快照是持久化的，即使重启也不会丢失，而且它们不需要任何额外的备份存储;它们与其他数据一样使用相同的存储池</p><h2 id="_9-1创建快照" tabindex="-1">9.1创建快照 <a class="header-anchor" href="#_9-1创建快照" aria-label="Permalink to &quot;9.1创建快照&quot;">​</a></h2><p>创建两种类型快照：池快照和数据集快照</p><p>语法，</p><ul><li>pool/dataset@snapshot-name</li><li>pool@snapshot-name</li></ul><h3 id="数据集快照" tabindex="-1">数据集快照 <a class="header-anchor" href="#数据集快照" aria-label="Permalink to &quot;数据集快照&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#创建</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zfs snapshot zp1/data01@2024</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zfs list -t snapshot</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">              </span><span style="color:#9ECBFF;">USED</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">AVAIL</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">REFER</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">MOUNTPOINT</span></span>
<span class="line"><span style="color:#B392F0;">zp1/data01@2024</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">B</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">96</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">-</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#创建</span></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zfs snapshot zp1/data01@2024</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看</span></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zfs list -t snapshot</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">              </span><span style="color:#032F62;">USED</span><span style="color:#24292E;">  </span><span style="color:#032F62;">AVAIL</span><span style="color:#24292E;">  </span><span style="color:#032F62;">REFER</span><span style="color:#24292E;">  </span><span style="color:#032F62;">MOUNTPOINT</span></span>
<span class="line"><span style="color:#6F42C1;">zp1/data01@2024</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">B</span><span style="color:#24292E;">      </span><span style="color:#032F62;">-</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">96</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#032F62;">-</span></span></code></pre></div><blockquote><p>快照物理物理存储位置，</p><p>[root@other ~]# cd /data01/.zfs/ [root@other .zfs]# ls shares snapshot</p><p>即使使用“ls -a”命令，“.zfs”目录也不可见</p></blockquote><p>如果你想让“.zfs”目录可见，你可以更改该数据集上的“snapdir”属性。有效值是”hidden”和”visible”。默认情况下，它是隐藏的</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># zfs set snapdir=visible zp1/data01</span></span>
<span class="line"><span style="color:#6A737D;"># ls -a /data01</span></span>
<span class="line"><span style="color:#B392F0;">.zfs/</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># zfs set snapdir=visible zp1/data01</span></span>
<span class="line"><span style="color:#6A737D;"># ls -a /data01</span></span>
<span class="line"><span style="color:#6F42C1;">.zfs/</span></span></code></pre></div><h4 id="删除快照" tabindex="-1">删除快照 <a class="header-anchor" href="#删除快照" aria-label="Permalink to &quot;删除快照&quot;">​</a></h4><p>如果快照存在，它就被认为是数据集的子文件系统。因此，在销毁所有快照和嵌套数据集之前，不能删除数据集</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@other .zfs]# zfs list  -t snapshot</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">              </span><span style="color:#9ECBFF;">USED</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">AVAIL</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">REFER</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">MOUNTPOINT</span></span>
<span class="line"><span style="color:#B392F0;">zp1/data01@2024</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">B</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">96</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">-</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@other .zfs]# zfs destroy zp1/data01@2024</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@other .zfs]# zfs list  -t snapshot</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">              </span><span style="color:#032F62;">USED</span><span style="color:#24292E;">  </span><span style="color:#032F62;">AVAIL</span><span style="color:#24292E;">  </span><span style="color:#032F62;">REFER</span><span style="color:#24292E;">  </span><span style="color:#032F62;">MOUNTPOINT</span></span>
<span class="line"><span style="color:#6F42C1;">zp1/data01@2024</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">B</span><span style="color:#24292E;">      </span><span style="color:#032F62;">-</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">96</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#032F62;">-</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@other .zfs]# zfs destroy zp1/data01@2024</span></span></code></pre></div><h4 id="重命名" tabindex="-1">重命名 <a class="header-anchor" href="#重命名" aria-label="Permalink to &quot;重命名&quot;">​</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">zfs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rename</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">old_snapshot_name</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">new_snapshot_name</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">zfs</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rename</span><span style="color:#24292E;"> </span><span style="color:#032F62;">old_snapshot_name</span><span style="color:#24292E;"> </span><span style="color:#032F62;">new_snapshot_name</span></span></code></pre></div><h4 id="回滚快照" tabindex="-1">回滚快照 <a class="header-anchor" href="#回滚快照" aria-label="Permalink to &quot;回滚快照&quot;">​</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">zfs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rollback</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-r</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">snapshot_name</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;"> [root@other .zfs]# zfs list -t snapshot</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">              </span><span style="color:#9ECBFF;">USED</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">AVAIL</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">REFER</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">MOUNTPOINT</span></span>
<span class="line"><span style="color:#B392F0;">zp1/data01@2024</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">B</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">96</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">-</span></span>
<span class="line"><span style="color:#B392F0;">zp1/data01@2025</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">B</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">96</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">-</span></span>
<span class="line"><span style="color:#B392F0;">zp1/data01@2026</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">B</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">96</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">-</span></span>
<span class="line"><span style="color:#B392F0;">zp1/data01@2027</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">B</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">96</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">-</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#回滚zp1/data01@2025 这个时间点快照</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@other .zfs]# zfs rollback zp1/data01@2025</span></span>
<span class="line"><span style="color:#B392F0;">cannot</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rollback</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;zp1/data01@2025&#39;:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">more</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">recent</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">snapshots</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">or</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bookmarks</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">exist</span></span>
<span class="line"><span style="color:#B392F0;">use</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;-r&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">force</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">deletion</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">of</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">following</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">snapshots</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">and</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bookmarks:</span></span>
<span class="line"><span style="color:#B392F0;">zp1/data01@2027</span></span>
<span class="line"><span style="color:#B392F0;">zp1/data01@2026</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@other .zfs]# zfs rollback -r zp1/data01@2025</span></span>
<span class="line"><span style="color:#B392F0;">-r</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">删除中间快照，恢复早期版本</span></span>
<span class="line"><span style="color:#B392F0;">-R</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">选项以销毁中间快照的克隆</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@other .zfs]# zfs list -t snapshot</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">              </span><span style="color:#9ECBFF;">USED</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">AVAIL</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">REFER</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">MOUNTPOINT</span></span>
<span class="line"><span style="color:#B392F0;">zp1/data01@2024</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">B</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">96</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">-</span></span>
<span class="line"><span style="color:#B392F0;">zp1/data01@2025</span><span style="color:#E1E4E8;">     </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">B</span><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">96</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">-</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">zfs</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rollback</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-r</span><span style="color:#24292E;"> </span><span style="color:#032F62;">snapshot_name</span></span>
<span class="line"><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;"> [root@other .zfs]# zfs list -t snapshot</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">              </span><span style="color:#032F62;">USED</span><span style="color:#24292E;">  </span><span style="color:#032F62;">AVAIL</span><span style="color:#24292E;">  </span><span style="color:#032F62;">REFER</span><span style="color:#24292E;">  </span><span style="color:#032F62;">MOUNTPOINT</span></span>
<span class="line"><span style="color:#6F42C1;">zp1/data01@2024</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">B</span><span style="color:#24292E;">      </span><span style="color:#032F62;">-</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">96</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#032F62;">-</span></span>
<span class="line"><span style="color:#6F42C1;">zp1/data01@2025</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">B</span><span style="color:#24292E;">      </span><span style="color:#032F62;">-</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">96</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#032F62;">-</span></span>
<span class="line"><span style="color:#6F42C1;">zp1/data01@2026</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">B</span><span style="color:#24292E;">      </span><span style="color:#032F62;">-</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">96</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#032F62;">-</span></span>
<span class="line"><span style="color:#6F42C1;">zp1/data01@2027</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">B</span><span style="color:#24292E;">      </span><span style="color:#032F62;">-</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">96</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#032F62;">-</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#回滚zp1/data01@2025 这个时间点快照</span></span>
<span class="line"><span style="color:#24292E;">[root@other .zfs]# zfs rollback zp1/data01@2025</span></span>
<span class="line"><span style="color:#6F42C1;">cannot</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rollback</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;zp1/data01@2025&#39;:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">more</span><span style="color:#24292E;"> </span><span style="color:#032F62;">recent</span><span style="color:#24292E;"> </span><span style="color:#032F62;">snapshots</span><span style="color:#24292E;"> </span><span style="color:#032F62;">or</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bookmarks</span><span style="color:#24292E;"> </span><span style="color:#032F62;">exist</span></span>
<span class="line"><span style="color:#6F42C1;">use</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;-r&#39;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">force</span><span style="color:#24292E;"> </span><span style="color:#032F62;">deletion</span><span style="color:#24292E;"> </span><span style="color:#032F62;">of</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">following</span><span style="color:#24292E;"> </span><span style="color:#032F62;">snapshots</span><span style="color:#24292E;"> </span><span style="color:#032F62;">and</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bookmarks:</span></span>
<span class="line"><span style="color:#6F42C1;">zp1/data01@2027</span></span>
<span class="line"><span style="color:#6F42C1;">zp1/data01@2026</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@other .zfs]# zfs rollback -r zp1/data01@2025</span></span>
<span class="line"><span style="color:#6F42C1;">-r</span><span style="color:#24292E;"> </span><span style="color:#032F62;">删除中间快照，恢复早期版本</span></span>
<span class="line"><span style="color:#6F42C1;">-R</span><span style="color:#24292E;"> </span><span style="color:#032F62;">选项以销毁中间快照的克隆</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@other .zfs]# zfs list -t snapshot</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">              </span><span style="color:#032F62;">USED</span><span style="color:#24292E;">  </span><span style="color:#032F62;">AVAIL</span><span style="color:#24292E;">  </span><span style="color:#032F62;">REFER</span><span style="color:#24292E;">  </span><span style="color:#032F62;">MOUNTPOINT</span></span>
<span class="line"><span style="color:#6F42C1;">zp1/data01@2024</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">B</span><span style="color:#24292E;">      </span><span style="color:#032F62;">-</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">96</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#032F62;">-</span></span>
<span class="line"><span style="color:#6F42C1;">zp1/data01@2025</span><span style="color:#24292E;">     </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">B</span><span style="color:#24292E;">      </span><span style="color:#032F62;">-</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">96</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#032F62;">-</span></span></code></pre></div><blockquote><p>要想回滚之前的快照，的必须删除回滚当时之前的时间</p></blockquote><h4 id="快照恢复" tabindex="-1">快照恢复 <a class="header-anchor" href="#快照恢复" aria-label="Permalink to &quot;快照恢复&quot;">​</a></h4><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 将快照挂载到一个临时挂载点，手动进行数据恢复</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/recovery</span></span>
<span class="line"><span style="color:#B392F0;">mount</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-t</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zfs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">snapshot_name</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/recovery</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 将快照挂载到一个临时挂载点，手动进行数据恢复</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/recovery</span></span>
<span class="line"><span style="color:#6F42C1;">mount</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-t</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zfs</span><span style="color:#24292E;"> </span><span style="color:#032F62;">snapshot_name</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/recovery</span></span></code></pre></div><h2 id="_9-2快照策略" tabindex="-1">9.2快照策略 <a class="header-anchor" href="#_9-2快照策略" aria-label="Permalink to &quot;9.2快照策略&quot;">​</a></h2><ul><li>频率–每15分钟做一次快照，保留4张快照</li><li>每小时–每小时快照，保留24张快照</li><li>Daily –每天快照，保留31个快照</li><li>每周–每周快照，保留7个快照</li><li>Monthly–每月快照，保留12个快照</li></ul><h3 id="脚本" tabindex="-1">脚本 <a class="header-anchor" href="#脚本" aria-label="Permalink to &quot;脚本&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">wget</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://github.com/zfsonlinux/zfs-auto-snapshot/archive/upstream/1.2.4.tar.gz</span></span>
<span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-xzf</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1.2</span><span style="color:#9ECBFF;">.4.tar.gz</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">zfs-auto-snapshot-upstream-1.2.4</span></span>
<span class="line"><span style="color:#B392F0;">make</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">wget</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://github.com/zfsonlinux/zfs-auto-snapshot/archive/upstream/1.2.4.tar.gz</span></span>
<span class="line"><span style="color:#6F42C1;">tar</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-xzf</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1.2</span><span style="color:#032F62;">.4.tar.gz</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">zfs-auto-snapshot-upstream-1.2.4</span></span>
<span class="line"><span style="color:#6F42C1;">make</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span></span></code></pre></div><h1 id="_10-克隆" tabindex="-1">10.克隆 <a class="header-anchor" href="#_10-克隆" aria-label="Permalink to &quot;10.克隆&quot;">​</a></h1><p>ZFS克隆是一个从快照“升级”的可写文件系统。克隆只能从快照创建，只要克隆存在，对快照的依赖就会保持。这意味着，如果你克隆了快照，就不能直接销毁这个快照。克隆依赖快照提供给它的数据，所以在销毁快照之前，必须先销毁克隆。</p><p>创建克隆几乎是瞬时的，就像快照一样，最初并不会占用任何额外的空间。相反，它会占用快照的所有初始空间。当数据在克隆中被修改时，它开始占用与快照分离的空间</p><h2 id="_1-创建" tabindex="-1">1.创建 <a class="header-anchor" href="#_1-创建" aria-label="Permalink to &quot;1.创建&quot;">​</a></h2><p>使用“zfs clone”命令、要克隆的快照和新文件系统的名称来创建克隆。克隆不需要驻留在与克隆相同的数据集中，但它需要驻留在相同的存储池中。</p><p>例如，如果我想克隆“zp1/data01@2025”快照，并给它命名为“zp1/2025”，我将运行以下命令:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;"># zfs clone zp1/data01@2025 zp1/2025</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;"># dd if=/dev/zero of=/zp1/2025/random.img bs=1M count=100</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;"># zfs list -r zp1</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;"># zfs clone zp1/data01@2025 zp1/2025</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;"># dd if=/dev/zero of=/zp1/2025/random.img bs=1M count=100</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;"># zfs list -r zp1</span></span></code></pre></div><h2 id="_2-删除" tabindex="-1">2.删除 <a class="header-anchor" href="#_2-删除" aria-label="Permalink to &quot;2.删除&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zfs list -r zp1</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">USED</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">AVAIL</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">REFER</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">MOUNTPOINT</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">556</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">9.63</span><span style="color:#9ECBFF;">G</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">96</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">/zp1</span></span>
<span class="line"><span style="color:#B392F0;">zp1/2025</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">0</span><span style="color:#9ECBFF;">B</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">9.63</span><span style="color:#9ECBFF;">G</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">96</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">/zp1/2025</span></span>
<span class="line"><span style="color:#B392F0;">zp1/data01</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">160</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">9.63</span><span style="color:#9ECBFF;">G</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">96</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">/data01</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zfs destroy zp1/2025</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zfs list -r zp1</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">USED</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">AVAIL</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">REFER</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">MOUNTPOINT</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">544</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">9.63</span><span style="color:#9ECBFF;">G</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">96</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">/zp1</span></span>
<span class="line"><span style="color:#B392F0;">zp1/data01</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">160</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">9.63</span><span style="color:#9ECBFF;">G</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">96</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">/data01</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zfs list -r zp1</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">         </span><span style="color:#032F62;">USED</span><span style="color:#24292E;">  </span><span style="color:#032F62;">AVAIL</span><span style="color:#24292E;">  </span><span style="color:#032F62;">REFER</span><span style="color:#24292E;">  </span><span style="color:#032F62;">MOUNTPOINT</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">556</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">9.63</span><span style="color:#032F62;">G</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">96</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#032F62;">/zp1</span></span>
<span class="line"><span style="color:#6F42C1;">zp1/2025</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">0</span><span style="color:#032F62;">B</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">9.63</span><span style="color:#032F62;">G</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">96</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#032F62;">/zp1/2025</span></span>
<span class="line"><span style="color:#6F42C1;">zp1/data01</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">160</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">9.63</span><span style="color:#032F62;">G</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">96</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#032F62;">/data01</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zfs destroy zp1/2025</span></span>
<span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zfs list -r zp1</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">         </span><span style="color:#032F62;">USED</span><span style="color:#24292E;">  </span><span style="color:#032F62;">AVAIL</span><span style="color:#24292E;">  </span><span style="color:#032F62;">REFER</span><span style="color:#24292E;">  </span><span style="color:#032F62;">MOUNTPOINT</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">544</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">9.63</span><span style="color:#032F62;">G</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">96</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#032F62;">/zp1</span></span>
<span class="line"><span style="color:#6F42C1;">zp1/data01</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">160</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">9.63</span><span style="color:#032F62;">G</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">96</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#032F62;">/data01</span></span></code></pre></div><h1 id="_11-监控" tabindex="-1">11.监控 <a class="header-anchor" href="#_11-监控" aria-label="Permalink to &quot;11.监控&quot;">​</a></h1><h2 id="io" tabindex="-1">IO <a class="header-anchor" href="#io" aria-label="Permalink to &quot;IO&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@other </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# zpool iostat zp_name 1</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">capacity</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">operations</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">bandwidth</span></span>
<span class="line"><span style="color:#B392F0;">pool</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">alloc</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">free</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">read</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">write</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">read</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">write</span></span>
<span class="line"><span style="color:#B392F0;">----------</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-----</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-----</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-----</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-----</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-----</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">-----</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">728</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">4.97</span><span style="color:#9ECBFF;">G</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">12.0</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">60.6</span><span style="color:#9ECBFF;">K</span></span>
<span class="line"><span style="color:#B392F0;">zp1</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">728</span><span style="color:#9ECBFF;">K</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">4.97</span><span style="color:#9ECBFF;">G</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">0</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@other </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# zpool iostat zp_name 1</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6F42C1;">capacity</span><span style="color:#24292E;">     </span><span style="color:#032F62;">operations</span><span style="color:#24292E;">     </span><span style="color:#032F62;">bandwidth</span></span>
<span class="line"><span style="color:#6F42C1;">pool</span><span style="color:#24292E;">        </span><span style="color:#032F62;">alloc</span><span style="color:#24292E;">   </span><span style="color:#032F62;">free</span><span style="color:#24292E;">   </span><span style="color:#032F62;">read</span><span style="color:#24292E;">  </span><span style="color:#032F62;">write</span><span style="color:#24292E;">   </span><span style="color:#032F62;">read</span><span style="color:#24292E;">  </span><span style="color:#032F62;">write</span></span>
<span class="line"><span style="color:#6F42C1;">----------</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-----</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-----</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-----</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-----</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-----</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">-----</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">728</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">4.97</span><span style="color:#032F62;">G</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">5</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">12.0</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">60.6</span><span style="color:#032F62;">K</span></span>
<span class="line"><span style="color:#6F42C1;">zp1</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">728</span><span style="color:#032F62;">K</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">4.97</span><span style="color:#032F62;">G</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">      </span><span style="color:#005CC5;">0</span></span></code></pre></div>`,102),e=[o];function t(c,r,E,y,F,i){return a(),n("div",null,e)}const d=s(p,[["render",t]]);export{B as __pageData,d as default};
