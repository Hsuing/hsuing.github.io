import{_ as s,o as a,c as n,R as l}from"./chunks/framework.zUbWieqp.js";const u=JSON.parse('{"title":"kubelet的作用是什么？","description":"","frontmatter":{},"headers":[],"relativePath":"guide/container/k8s/cmd/kubectl.md","filePath":"guide/container/k8s/cmd/kubectl.md","lastUpdated":1734344767000}'),p={name:"guide/container/k8s/cmd/kubectl.md"},o=l(`<p>文档，</p><p><a href="https://kubernetes.io/zh-cn/docs/reference/kubectl/" target="_blank" rel="noreferrer">https://kubernetes.io/zh-cn/docs/reference/kubectl/</a></p><p><a href="https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands#get" target="_blank" rel="noreferrer">https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands#get</a></p><h1 id="kubelet的作用是什么" tabindex="-1">kubelet的作用是什么？ <a class="header-anchor" href="#kubelet的作用是什么" aria-label="Permalink to &quot;kubelet的作用是什么？&quot;">​</a></h1><p>在Kubernetes（k8S）中，kubelet是一个核心组件，它负责管理单个计算节点上的容器运行时环境。kubelet的主要功能和作用包括：</p><ol><li><strong>Pod生命周期管理</strong>： <ul><li>kubelet会接收来自API Server的指令，确保本节点上运行的Pod达到期望的状态。这包括创建、启动、停止或删除Pod中的容器。</li></ul></li><li><strong>容器运行时交互</strong>： <ul><li>与容器运行时（如Docker、containerd、CRI-O等）进行通信，执行实际的容器操作，例如拉取镜像、创建容器、监控容器状态以及清理不再需要的容器资源。</li></ul></li><li><strong>健康检查</strong>： <ul><li>监控并报告容器及Pod的健康状况，通过HTTP GET请求、命令执行或者端口检查等方式实现健康检查，并根据结果采取相应行动。</li></ul></li><li><strong>资源管理</strong>： <ul><li>确保节点上的容器按照其资源配置要求运行，管理和限制CPU、内存、磁盘和网络资源使用情况。</li></ul></li><li><strong>卷管理</strong>： <ul><li>协调和管理Pod使用的存储卷，包括挂载和卸载持久化存储卷。</li></ul></li><li><strong>Node状态报告</strong>： <ul><li>定期向API Server汇报节点资源使用情况、运行的Pod列表以及节点的总体健康状态。</li></ul></li><li><strong>事件生成</strong>： <ul><li>当节点上发生重要事件时，kubelet会生成相应的事件消息，这些信息可供集群管理员通过kubectl工具查看，帮助分析和调试问题。</li></ul></li><li><strong>SyncLoop机制</strong>： <ul><li>kubelet内部有一个控制循环，即SyncLoop，不断同步本地节点状态与从API Server接收到的期望状态，驱动节点上各种任务的执行。</li></ul></li><li><strong>PodDisruptionBudget兼容性</strong>： <ul><li>遵循PodDisruptionBudget策略，在节点维护或缩容时保证应用的可用性。</li></ul></li></ol><h1 id="_1-kubectl安装" tabindex="-1">1. kubectl安装 <a class="header-anchor" href="#_1-kubectl安装" aria-label="Permalink to &quot;1. kubectl安装&quot;">​</a></h1><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 下载最新版本：</span></span>
<span class="line"><span style="color:#B392F0;">curl -LO https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt</span><span style="color:#E1E4E8;">)/bin/linux/amd64/kubectl</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 下载特定版本：</span></span>
<span class="line"><span style="color:#B392F0;">curl -LO https://storage.googleapis.com/kubernetes-release/release/v1.7.0/bin/linux/amd64/kubectl</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 下载到本地后，对kubectl二进制添加可执行权限：</span></span>
<span class="line"><span style="color:#B392F0;">chmod +x ./kubectl</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 将二进制文件移动到PATH中：</span></span>
<span class="line"><span style="color:#B392F0;">mv ./kubectl /usr/local/bin/kubectl</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 下载最新版本：</span></span>
<span class="line"><span style="color:#6F42C1;">curl -LO https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt</span><span style="color:#24292E;">)/bin/linux/amd64/kubectl</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 下载特定版本：</span></span>
<span class="line"><span style="color:#6F42C1;">curl -LO https://storage.googleapis.com/kubernetes-release/release/v1.7.0/bin/linux/amd64/kubectl</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 下载到本地后，对kubectl二进制添加可执行权限：</span></span>
<span class="line"><span style="color:#6F42C1;">chmod +x ./kubectl</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 将二进制文件移动到PATH中：</span></span>
<span class="line"><span style="color:#6F42C1;">mv ./kubectl /usr/local/bin/kubectl</span></span></code></pre></div><p>kubectl设置简写</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/.bashrc</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">EOF</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#9ECBFF;">alias kg=&#39;kubectl get&#39;</span></span>
<span class="line"><span style="color:#9ECBFF;">alias k=&#39;kubectl&#39;</span></span>
<span class="line"><span style="color:#9ECBFF;">alias kd=&#39;kubectl describe pods&#39;</span></span>
<span class="line"><span style="color:#9ECBFF;">alias ke=&#39;kubectl explain&#39;</span></span>
<span class="line"><span style="color:#9ECBFF;">alias ka=&#39;kubectl apply&#39;</span></span>
<span class="line"><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">source</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">~/.bashrc</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/.bashrc</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">EOF</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#032F62;">alias kg=&#39;kubectl get&#39;</span></span>
<span class="line"><span style="color:#032F62;">alias k=&#39;kubectl&#39;</span></span>
<span class="line"><span style="color:#032F62;">alias kd=&#39;kubectl describe pods&#39;</span></span>
<span class="line"><span style="color:#032F62;">alias ke=&#39;kubectl explain&#39;</span></span>
<span class="line"><span style="color:#032F62;">alias ka=&#39;kubectl apply&#39;</span></span>
<span class="line"><span style="color:#032F62;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5;">source</span><span style="color:#24292E;"> </span><span style="color:#032F62;">~/.bashrc</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kg</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">po</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#查看default名字空间下的po数量</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                                              </span><span style="color:#9ECBFF;">READY</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">RESTARTS</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">AGE</span></span>
<span class="line"><span style="color:#B392F0;">busybox</span><span style="color:#E1E4E8;">                                           </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> (21d </span><span style="color:#9ECBFF;">ago</span><span style="color:#E1E4E8;">)    21d</span></span>
<span class="line"><span style="color:#B392F0;">counter</span><span style="color:#E1E4E8;">                                           </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> (62d </span><span style="color:#9ECBFF;">ago</span><span style="color:#E1E4E8;">)    134d</span></span>
<span class="line"><span style="color:#B392F0;">http-svc-65b48ffc7b-2dzqt</span><span style="color:#E1E4E8;">                         </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;"> (62d </span><span style="color:#9ECBFF;">ago</span><span style="color:#E1E4E8;">)    138d</span></span>
<span class="line"><span style="color:#B392F0;">http-svc-65b48ffc7b-b6rtz</span><span style="color:#E1E4E8;">                         </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> (62d </span><span style="color:#9ECBFF;">ago</span><span style="color:#E1E4E8;">)    138d</span></span>
<span class="line"><span style="color:#B392F0;">http-svc-65b48ffc7b-sqtvt</span><span style="color:#E1E4E8;">                         </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> (62d </span><span style="color:#9ECBFF;">ago</span><span style="color:#E1E4E8;">)    138d</span></span>
<span class="line"><span style="color:#B392F0;">nfs-subdir-external-provisioner-796df7c59-gcwc2</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">39</span><span style="color:#E1E4E8;"> (37d </span><span style="color:#9ECBFF;">ago</span><span style="color:#E1E4E8;">)   139d</span></span>
<span class="line"><span style="color:#B392F0;">nginx-demo-98c8d48ff-r6wmv</span><span style="color:#E1E4E8;">                        </span><span style="color:#79B8FF;">1</span><span style="color:#9ECBFF;">/1</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Running</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;"> (62d </span><span style="color:#9ECBFF;">ago</span><span style="color:#E1E4E8;">)    156d</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 另外说一个技巧，可以通过&quot;kubectl api-resource&quot;查看当前集群中拥有的api-resources，其中第二个栏位“SHORTNAMES”对应相关资源的简写。</span></span>
<span class="line"><span style="color:#B392F0;">k</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">api-resources</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#实际输出内容较多，这里支截取了精华部分</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                              </span><span style="color:#9ECBFF;">SHORTNAMES</span><span style="color:#E1E4E8;">                                      </span><span style="color:#9ECBFF;">APIVERSION</span><span style="color:#E1E4E8;">                             </span><span style="color:#9ECBFF;">NAMESPACED</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">KIND</span></span>
<span class="line"><span style="color:#B392F0;">bindings</span><span style="color:#E1E4E8;">                                                                          </span><span style="color:#9ECBFF;">v1</span><span style="color:#E1E4E8;">                                     </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">Binding</span></span>
<span class="line"><span style="color:#B392F0;">componentstatuses</span><span style="color:#E1E4E8;">                 </span><span style="color:#9ECBFF;">cs</span><span style="color:#E1E4E8;">                                              </span><span style="color:#9ECBFF;">v1</span><span style="color:#E1E4E8;">                                     </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">ComponentStatus</span></span>
<span class="line"><span style="color:#B392F0;">configmaps</span><span style="color:#E1E4E8;">                        </span><span style="color:#9ECBFF;">cm</span><span style="color:#E1E4E8;">                                              </span><span style="color:#9ECBFF;">v1</span><span style="color:#E1E4E8;">                                     </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">ConfigMap</span></span>
<span class="line"><span style="color:#B392F0;">endpoints</span><span style="color:#E1E4E8;">                         </span><span style="color:#9ECBFF;">ep</span><span style="color:#E1E4E8;">                                              </span><span style="color:#9ECBFF;">v1</span><span style="color:#E1E4E8;">                                     </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">Endpoints</span></span>
<span class="line"><span style="color:#B392F0;">events</span><span style="color:#E1E4E8;">                            </span><span style="color:#9ECBFF;">ev</span><span style="color:#E1E4E8;">                                              </span><span style="color:#9ECBFF;">v1</span><span style="color:#E1E4E8;">                                     </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">Event</span></span>
<span class="line"><span style="color:#B392F0;">limitranges</span><span style="color:#E1E4E8;">                       </span><span style="color:#9ECBFF;">limits</span><span style="color:#E1E4E8;">                                          </span><span style="color:#9ECBFF;">v1</span><span style="color:#E1E4E8;">                                     </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">LimitRange</span></span>
<span class="line"><span style="color:#B392F0;">namespaces</span><span style="color:#E1E4E8;">                        </span><span style="color:#9ECBFF;">ns</span><span style="color:#E1E4E8;">                                              </span><span style="color:#9ECBFF;">v1</span><span style="color:#E1E4E8;">                                     </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">Namespace</span></span>
<span class="line"><span style="color:#B392F0;">nodes</span><span style="color:#E1E4E8;">                             </span><span style="color:#9ECBFF;">no</span><span style="color:#E1E4E8;">                                              </span><span style="color:#9ECBFF;">v1</span><span style="color:#E1E4E8;">                                     </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">Node</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumeclaims</span><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">pvc</span><span style="color:#E1E4E8;">                                             </span><span style="color:#9ECBFF;">v1</span><span style="color:#E1E4E8;">                                     </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">PersistentVolumeClaim</span></span>
<span class="line"><span style="color:#B392F0;">persistentvolumes</span><span style="color:#E1E4E8;">                 </span><span style="color:#9ECBFF;">pv</span><span style="color:#E1E4E8;">                                              </span><span style="color:#9ECBFF;">v1</span><span style="color:#E1E4E8;">                                     </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">PersistentVolume</span></span>
<span class="line"><span style="color:#B392F0;">pods</span><span style="color:#E1E4E8;">                              </span><span style="color:#9ECBFF;">po</span><span style="color:#E1E4E8;">                                              </span><span style="color:#9ECBFF;">v1</span><span style="color:#E1E4E8;">                                     </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">Pod</span></span>
<span class="line"><span style="color:#B392F0;">podtemplates</span><span style="color:#E1E4E8;">                                                                      </span><span style="color:#9ECBFF;">v1</span><span style="color:#E1E4E8;">                                     </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">PodTemplate</span></span>
<span class="line"><span style="color:#B392F0;">replicationcontrollers</span><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">rc</span><span style="color:#E1E4E8;">                                              </span><span style="color:#9ECBFF;">v1</span><span style="color:#E1E4E8;">                                     </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">ReplicationController</span></span>
<span class="line"><span style="color:#B392F0;">resourcequotas</span><span style="color:#E1E4E8;">                    </span><span style="color:#9ECBFF;">quota</span><span style="color:#E1E4E8;">                                           </span><span style="color:#9ECBFF;">v1</span><span style="color:#E1E4E8;">                                     </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">ResourceQuota</span></span>
<span class="line"><span style="color:#B392F0;">secrets</span><span style="color:#E1E4E8;">                                                                           </span><span style="color:#9ECBFF;">v1</span><span style="color:#E1E4E8;">                                     </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">Secret</span></span>
<span class="line"><span style="color:#B392F0;">serviceaccounts</span><span style="color:#E1E4E8;">                   </span><span style="color:#9ECBFF;">sa</span><span style="color:#E1E4E8;">                                              </span><span style="color:#9ECBFF;">v1</span><span style="color:#E1E4E8;">                                     </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">ServiceAccount</span></span>
<span class="line"><span style="color:#B392F0;">services</span><span style="color:#E1E4E8;">                          </span><span style="color:#9ECBFF;">svc</span><span style="color:#E1E4E8;">                                             </span><span style="color:#9ECBFF;">v1</span><span style="color:#E1E4E8;">                                     </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">Service</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 例如 &quot;kg ns&quot; 就等价于 “kubectl get namespace”</span></span>
<span class="line"><span style="color:#B392F0;">kg</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ns</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">AGE</span></span>
<span class="line"><span style="color:#B392F0;">calico-apiserver</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">Active</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">156</span><span style="color:#9ECBFF;">d</span></span>
<span class="line"><span style="color:#B392F0;">calico-system</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">Active</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">156</span><span style="color:#9ECBFF;">d</span></span>
<span class="line"><span style="color:#B392F0;">cronjob</span><span style="color:#E1E4E8;">             </span><span style="color:#9ECBFF;">Active</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">131</span><span style="color:#9ECBFF;">d</span></span>
<span class="line"><span style="color:#B392F0;">tigera-operator</span><span style="color:#E1E4E8;">     </span><span style="color:#9ECBFF;">Active</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">156</span><span style="color:#9ECBFF;">d</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kg</span><span style="color:#24292E;"> </span><span style="color:#032F62;">po</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#查看default名字空间下的po数量</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                                              </span><span style="color:#032F62;">READY</span><span style="color:#24292E;">   </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">    </span><span style="color:#032F62;">RESTARTS</span><span style="color:#24292E;">       </span><span style="color:#032F62;">AGE</span></span>
<span class="line"><span style="color:#6F42C1;">busybox</span><span style="color:#24292E;">                                           </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> (21d </span><span style="color:#032F62;">ago</span><span style="color:#24292E;">)    21d</span></span>
<span class="line"><span style="color:#6F42C1;">counter</span><span style="color:#24292E;">                                           </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">5</span><span style="color:#24292E;"> (62d </span><span style="color:#032F62;">ago</span><span style="color:#24292E;">)    134d</span></span>
<span class="line"><span style="color:#6F42C1;">http-svc-65b48ffc7b-2dzqt</span><span style="color:#24292E;">                         </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">6</span><span style="color:#24292E;"> (62d </span><span style="color:#032F62;">ago</span><span style="color:#24292E;">)    138d</span></span>
<span class="line"><span style="color:#6F42C1;">http-svc-65b48ffc7b-b6rtz</span><span style="color:#24292E;">                         </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">5</span><span style="color:#24292E;"> (62d </span><span style="color:#032F62;">ago</span><span style="color:#24292E;">)    138d</span></span>
<span class="line"><span style="color:#6F42C1;">http-svc-65b48ffc7b-sqtvt</span><span style="color:#24292E;">                         </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">5</span><span style="color:#24292E;"> (62d </span><span style="color:#032F62;">ago</span><span style="color:#24292E;">)    138d</span></span>
<span class="line"><span style="color:#6F42C1;">nfs-subdir-external-provisioner-796df7c59-gcwc2</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">39</span><span style="color:#24292E;"> (37d </span><span style="color:#032F62;">ago</span><span style="color:#24292E;">)   139d</span></span>
<span class="line"><span style="color:#6F42C1;">nginx-demo-98c8d48ff-r6wmv</span><span style="color:#24292E;">                        </span><span style="color:#005CC5;">1</span><span style="color:#032F62;">/1</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Running</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">5</span><span style="color:#24292E;"> (62d </span><span style="color:#032F62;">ago</span><span style="color:#24292E;">)    156d</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 另外说一个技巧，可以通过&quot;kubectl api-resource&quot;查看当前集群中拥有的api-resources，其中第二个栏位“SHORTNAMES”对应相关资源的简写。</span></span>
<span class="line"><span style="color:#6F42C1;">k</span><span style="color:#24292E;"> </span><span style="color:#032F62;">api-resources</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#实际输出内容较多，这里支截取了精华部分</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                              </span><span style="color:#032F62;">SHORTNAMES</span><span style="color:#24292E;">                                      </span><span style="color:#032F62;">APIVERSION</span><span style="color:#24292E;">                             </span><span style="color:#032F62;">NAMESPACED</span><span style="color:#24292E;">   </span><span style="color:#032F62;">KIND</span></span>
<span class="line"><span style="color:#6F42C1;">bindings</span><span style="color:#24292E;">                                                                          </span><span style="color:#032F62;">v1</span><span style="color:#24292E;">                                     </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">         </span><span style="color:#032F62;">Binding</span></span>
<span class="line"><span style="color:#6F42C1;">componentstatuses</span><span style="color:#24292E;">                 </span><span style="color:#032F62;">cs</span><span style="color:#24292E;">                                              </span><span style="color:#032F62;">v1</span><span style="color:#24292E;">                                     </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">        </span><span style="color:#032F62;">ComponentStatus</span></span>
<span class="line"><span style="color:#6F42C1;">configmaps</span><span style="color:#24292E;">                        </span><span style="color:#032F62;">cm</span><span style="color:#24292E;">                                              </span><span style="color:#032F62;">v1</span><span style="color:#24292E;">                                     </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">         </span><span style="color:#032F62;">ConfigMap</span></span>
<span class="line"><span style="color:#6F42C1;">endpoints</span><span style="color:#24292E;">                         </span><span style="color:#032F62;">ep</span><span style="color:#24292E;">                                              </span><span style="color:#032F62;">v1</span><span style="color:#24292E;">                                     </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">         </span><span style="color:#032F62;">Endpoints</span></span>
<span class="line"><span style="color:#6F42C1;">events</span><span style="color:#24292E;">                            </span><span style="color:#032F62;">ev</span><span style="color:#24292E;">                                              </span><span style="color:#032F62;">v1</span><span style="color:#24292E;">                                     </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">         </span><span style="color:#032F62;">Event</span></span>
<span class="line"><span style="color:#6F42C1;">limitranges</span><span style="color:#24292E;">                       </span><span style="color:#032F62;">limits</span><span style="color:#24292E;">                                          </span><span style="color:#032F62;">v1</span><span style="color:#24292E;">                                     </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">         </span><span style="color:#032F62;">LimitRange</span></span>
<span class="line"><span style="color:#6F42C1;">namespaces</span><span style="color:#24292E;">                        </span><span style="color:#032F62;">ns</span><span style="color:#24292E;">                                              </span><span style="color:#032F62;">v1</span><span style="color:#24292E;">                                     </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">        </span><span style="color:#032F62;">Namespace</span></span>
<span class="line"><span style="color:#6F42C1;">nodes</span><span style="color:#24292E;">                             </span><span style="color:#032F62;">no</span><span style="color:#24292E;">                                              </span><span style="color:#032F62;">v1</span><span style="color:#24292E;">                                     </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">        </span><span style="color:#032F62;">Node</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumeclaims</span><span style="color:#24292E;">            </span><span style="color:#032F62;">pvc</span><span style="color:#24292E;">                                             </span><span style="color:#032F62;">v1</span><span style="color:#24292E;">                                     </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">         </span><span style="color:#032F62;">PersistentVolumeClaim</span></span>
<span class="line"><span style="color:#6F42C1;">persistentvolumes</span><span style="color:#24292E;">                 </span><span style="color:#032F62;">pv</span><span style="color:#24292E;">                                              </span><span style="color:#032F62;">v1</span><span style="color:#24292E;">                                     </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">        </span><span style="color:#032F62;">PersistentVolume</span></span>
<span class="line"><span style="color:#6F42C1;">pods</span><span style="color:#24292E;">                              </span><span style="color:#032F62;">po</span><span style="color:#24292E;">                                              </span><span style="color:#032F62;">v1</span><span style="color:#24292E;">                                     </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">         </span><span style="color:#032F62;">Pod</span></span>
<span class="line"><span style="color:#6F42C1;">podtemplates</span><span style="color:#24292E;">                                                                      </span><span style="color:#032F62;">v1</span><span style="color:#24292E;">                                     </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">         </span><span style="color:#032F62;">PodTemplate</span></span>
<span class="line"><span style="color:#6F42C1;">replicationcontrollers</span><span style="color:#24292E;">            </span><span style="color:#032F62;">rc</span><span style="color:#24292E;">                                              </span><span style="color:#032F62;">v1</span><span style="color:#24292E;">                                     </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">         </span><span style="color:#032F62;">ReplicationController</span></span>
<span class="line"><span style="color:#6F42C1;">resourcequotas</span><span style="color:#24292E;">                    </span><span style="color:#032F62;">quota</span><span style="color:#24292E;">                                           </span><span style="color:#032F62;">v1</span><span style="color:#24292E;">                                     </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">         </span><span style="color:#032F62;">ResourceQuota</span></span>
<span class="line"><span style="color:#6F42C1;">secrets</span><span style="color:#24292E;">                                                                           </span><span style="color:#032F62;">v1</span><span style="color:#24292E;">                                     </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">         </span><span style="color:#032F62;">Secret</span></span>
<span class="line"><span style="color:#6F42C1;">serviceaccounts</span><span style="color:#24292E;">                   </span><span style="color:#032F62;">sa</span><span style="color:#24292E;">                                              </span><span style="color:#032F62;">v1</span><span style="color:#24292E;">                                     </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">         </span><span style="color:#032F62;">ServiceAccount</span></span>
<span class="line"><span style="color:#6F42C1;">services</span><span style="color:#24292E;">                          </span><span style="color:#032F62;">svc</span><span style="color:#24292E;">                                             </span><span style="color:#032F62;">v1</span><span style="color:#24292E;">                                     </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">         </span><span style="color:#032F62;">Service</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 例如 &quot;kg ns&quot; 就等价于 “kubectl get namespace”</span></span>
<span class="line"><span style="color:#6F42C1;">kg</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ns</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">   </span><span style="color:#032F62;">AGE</span></span>
<span class="line"><span style="color:#6F42C1;">calico-apiserver</span><span style="color:#24292E;">    </span><span style="color:#032F62;">Active</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">156</span><span style="color:#032F62;">d</span></span>
<span class="line"><span style="color:#6F42C1;">calico-system</span><span style="color:#24292E;">       </span><span style="color:#032F62;">Active</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">156</span><span style="color:#032F62;">d</span></span>
<span class="line"><span style="color:#6F42C1;">cronjob</span><span style="color:#24292E;">             </span><span style="color:#032F62;">Active</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">131</span><span style="color:#032F62;">d</span></span>
<span class="line"><span style="color:#6F42C1;">tigera-operator</span><span style="color:#24292E;">     </span><span style="color:#032F62;">Active</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">156</span><span style="color:#032F62;">d</span></span></code></pre></div><h2 id="_1-1-创建" tabindex="-1">1.1 创建 <a class="header-anchor" href="#_1-1-创建" aria-label="Permalink to &quot;1.1 创建&quot;">​</a></h2><p>create apply的区别</p><p>create 创建相同的名字的，会创建失败，但apply不会，这个会重新创建</p><p>kubectl apply -f和kubectl create -f有什么区别</p><p>kubectl create属于Imperative command（祈使式命令），它明确告诉kubectl要创建某个资源或对象；</p><p>kubectl apply是Declarative command（声明式命令），apply并不告诉kubectl具体做什么，而是由kubectl根据后面-f中的yaml文件与k8s中对应的object对比，自动探测要进行哪些操作，比如如果object不存在，则create；如果已经存在，则对比差异，update and replace</p><h2 id="_1-1create" tabindex="-1">1.1create <a class="header-anchor" href="#_1-1create" aria-label="Permalink to &quot;1.1create&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">语法，kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-f</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">FILENAME</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">语法，kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-f</span><span style="color:#24292E;"> </span><span style="color:#032F62;">FILENAME</span></span></code></pre></div><h3 id="deployment" tabindex="-1">deployment <a class="header-anchor" href="#deployment" aria-label="Permalink to &quot;deployment&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">语法，kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">deployment</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">NAME</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--image=image</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--</span><span style="color:#E1E4E8;"> [COMMAND] [args...]</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">例子，</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">deployment</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">my-dep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--image=nginx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--replicas=3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#指定namespace</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">deployment</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">my-dep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--image=nginx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--replicas=3</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">namespace_name</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#生成yaml 文件</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">deployment</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">my-dep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--image=nginx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--replicas=3</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dry-run</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-oyaml</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">语法，kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">deployment</span><span style="color:#24292E;"> </span><span style="color:#032F62;">NAME</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--image=image</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--</span><span style="color:#24292E;"> [COMMAND] [args...]</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">例子，</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">deployment</span><span style="color:#24292E;"> </span><span style="color:#032F62;">my-dep</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--image=nginx</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--replicas=3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#指定namespace</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">deployment</span><span style="color:#24292E;"> </span><span style="color:#032F62;">my-dep</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--image=nginx</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--replicas=3</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-n</span><span style="color:#24292E;"> </span><span style="color:#032F62;">namespace_name</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#生成yaml 文件</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">deployment</span><span style="color:#24292E;"> </span><span style="color:#032F62;">my-dep</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--image=nginx</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--replicas=3</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dry-run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-oyaml</span></span></code></pre></div><h3 id="创建模版" tabindex="-1">创建模版 <a class="header-anchor" href="#创建模版" aria-label="Permalink to &quot;创建模版&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#创建deploy</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">deployment</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx-2</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--image=10.122.6.81:5000/image/nginx:v1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dry-run</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-oyaml</span></span>
<span class="line"><span style="color:#6A737D;">#创建svc</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">service</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clusterip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">my-cs</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--tcp=5678:8080</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dry-run</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-oyaml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">--dir-run</span><span style="color:#E1E4E8;">   </span><span style="color:#6A737D;">#不做创建操作</span></span>
<span class="line"><span style="color:#B392F0;">-oyaml</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">#输出为yaml文件</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#如果不会写创建资源命令可以使用-h查看帮助，如</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">deploy</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">svc</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-h</span></span>
<span class="line"><span style="color:#79B8FF;">....</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#创建deploy</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">deployment</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx-2</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--image=10.122.6.81:5000/image/nginx:v1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dry-run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-oyaml</span></span>
<span class="line"><span style="color:#6A737D;">#创建svc</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">service</span><span style="color:#24292E;"> </span><span style="color:#032F62;">clusterip</span><span style="color:#24292E;"> </span><span style="color:#032F62;">my-cs</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--tcp=5678:8080</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dry-run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-oyaml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">--dir-run</span><span style="color:#24292E;">   </span><span style="color:#6A737D;">#不做创建操作</span></span>
<span class="line"><span style="color:#6F42C1;">-oyaml</span><span style="color:#24292E;">      </span><span style="color:#6A737D;">#输出为yaml文件</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#如果不会写创建资源命令可以使用-h查看帮助，如</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">deploy</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">svc</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-h</span></span>
<span class="line"><span style="color:#005CC5;">....</span></span></code></pre></div><h2 id="_1-2apply" tabindex="-1">1.2apply <a class="header-anchor" href="#_1-2apply" aria-label="Permalink to &quot;1.2apply&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">语法，kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apply</span><span style="color:#E1E4E8;"> (-f </span><span style="color:#9ECBFF;">FILENAME</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">-k</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">DIRECTORY</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">语法，kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apply</span><span style="color:#24292E;"> (-f </span><span style="color:#032F62;">FILENAME</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">-k</span><span style="color:#24292E;"> </span><span style="color:#032F62;">DIRECTORY</span><span style="color:#24292E;">)</span></span></code></pre></div><h1 id="_2-删除" tabindex="-1">2.删除 <a class="header-anchor" href="#_2-删除" aria-label="Permalink to &quot;2.删除&quot;">​</a></h1><h2 id="_2-1-delete" tabindex="-1">2.1 delete <a class="header-anchor" href="#_2-1-delete" aria-label="Permalink to &quot;2.1 delete&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#创建</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">create</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">deployment</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">my-dep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--image=nginx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--replicas=3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pod</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#删除,或者delete -f xx.yaml</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">delete</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">deployment</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">my-dep</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#创建</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">create</span><span style="color:#24292E;"> </span><span style="color:#032F62;">deployment</span><span style="color:#24292E;"> </span><span style="color:#032F62;">my-dep</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--image=nginx</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--replicas=3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pod</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#删除,或者delete -f xx.yaml</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">delete</span><span style="color:#24292E;"> </span><span style="color:#032F62;">deployment</span><span style="color:#24292E;"> </span><span style="color:#032F62;">my-dep</span></span></code></pre></div><h1 id="_3-查看" tabindex="-1">3.查看 <a class="header-anchor" href="#_3-查看" aria-label="Permalink to &quot;3.查看&quot;">​</a></h1><h2 id="_3-1describe" tabindex="-1">3.1describe <a class="header-anchor" href="#_3-1describe" aria-label="Permalink to &quot;3.1describe&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 显示名为 &lt;pod-name&gt; 的 Pod 的详细信息。</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">describe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nodes</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">node-nam</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">或者</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">describe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nodes/</span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">node-nam</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 显示名为 &lt;pod-name&gt; 的 Pod 的详细信息。</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">describe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pods/</span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">pod-nam</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 显示由名为 &lt;rc-name&gt; 的副本控制器管理的所有 Pod 的详细信息。</span></span>
<span class="line"><span style="color:#6A737D;"># 记住：副本控制器创建的任何 Pod 都以副本控制器的名称为前缀。</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">describe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pods</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">rc-nam</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 描述所有的 Pod</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">describe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pods</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 显示名为 &lt;pod-name&gt; 的 Pod 的详细信息。</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">describe</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nodes</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">node-nam</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">或者</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">describe</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nodes/</span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">node-nam</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 显示名为 &lt;pod-name&gt; 的 Pod 的详细信息。</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">describe</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pods/</span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">pod-nam</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 显示由名为 &lt;rc-name&gt; 的副本控制器管理的所有 Pod 的详细信息。</span></span>
<span class="line"><span style="color:#6A737D;"># 记住：副本控制器创建的任何 Pod 都以副本控制器的名称为前缀。</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">describe</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pods</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">rc-nam</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 描述所有的 Pod</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">describe</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pods</span></span></code></pre></div><h2 id="_3-2get" tabindex="-1">3.2get <a class="header-anchor" href="#_3-2get" aria-label="Permalink to &quot;3.2get&quot;">​</a></h2><h3 id="svc" tabindex="-1">svc <a class="header-anchor" href="#svc" aria-label="Permalink to &quot;svc&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@kube-master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl get svc</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">service</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">         </span><span style="color:#9ECBFF;">TYPE</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">CLUSTER-IP</span><span style="color:#E1E4E8;">       </span><span style="color:#9ECBFF;">EXTERNAL-IP</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">PORT</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">S</span><span style="color:#E1E4E8;">)          </span><span style="color:#9ECBFF;">AGE</span></span>
<span class="line"><span style="color:#B392F0;">kubernetes</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ClusterIP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">192.168</span><span style="color:#9ECBFF;">.0.1</span><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">443</span><span style="color:#9ECBFF;">/TCP</span><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">25</span><span style="color:#9ECBFF;">h</span></span>
<span class="line"><span style="color:#B392F0;">nginx</span><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">NodePort</span><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">192.168</span><span style="color:#9ECBFF;">.253.94</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">non</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">8080</span><span style="color:#9ECBFF;">:32498/TCP</span><span style="color:#E1E4E8;">   </span><span style="color:#79B8FF;">172</span><span style="color:#9ECBFF;">m</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看所有 -A</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">svc</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-A</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@kube-master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl get svc</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">service</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">         </span><span style="color:#032F62;">TYPE</span><span style="color:#24292E;">        </span><span style="color:#032F62;">CLUSTER-IP</span><span style="color:#24292E;">       </span><span style="color:#032F62;">EXTERNAL-IP</span><span style="color:#24292E;">   </span><span style="color:#032F62;">PORT</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">S</span><span style="color:#24292E;">)          </span><span style="color:#032F62;">AGE</span></span>
<span class="line"><span style="color:#6F42C1;">kubernetes</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ClusterIP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">192.168</span><span style="color:#032F62;">.0.1</span><span style="color:#24292E;">      </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">443</span><span style="color:#032F62;">/TCP</span><span style="color:#24292E;">          </span><span style="color:#005CC5;">25</span><span style="color:#032F62;">h</span></span>
<span class="line"><span style="color:#6F42C1;">nginx</span><span style="color:#24292E;">        </span><span style="color:#032F62;">NodePort</span><span style="color:#24292E;">    </span><span style="color:#005CC5;">192.168</span><span style="color:#032F62;">.253.94</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">non</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">        </span><span style="color:#005CC5;">8080</span><span style="color:#032F62;">:32498/TCP</span><span style="color:#24292E;">   </span><span style="color:#005CC5;">172</span><span style="color:#032F62;">m</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看所有 -A</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">svc</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-A</span></span></code></pre></div><h3 id="componentstatuses" tabindex="-1">componentstatuses <a class="header-anchor" href="#componentstatuses" aria-label="Permalink to &quot;componentstatuses&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master yaml]# kubectl get componentstatuses</span></span>
<span class="line"><span style="color:#B392F0;">Warning:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">v1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ComponentStatus</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">is</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">deprecated</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">v1.19+</span></span>
<span class="line"><span style="color:#B392F0;">NAME</span><span style="color:#E1E4E8;">                 </span><span style="color:#9ECBFF;">STATUS</span><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">MESSAGE</span><span style="color:#E1E4E8;">                         </span><span style="color:#9ECBFF;">ERROR</span></span>
<span class="line"><span style="color:#B392F0;">etcd-0</span><span style="color:#E1E4E8;">               </span><span style="color:#9ECBFF;">Healthy</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">{&quot;health&quot;:&quot;true&quot;,&quot;reason&quot;:&quot;&quot;}</span></span>
<span class="line"><span style="color:#B392F0;">scheduler</span><span style="color:#E1E4E8;">            </span><span style="color:#9ECBFF;">Healthy</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ok</span></span>
<span class="line"><span style="color:#B392F0;">controller-manager</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">Healthy</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">ok</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#- --port=0 注释（kubeadmin）</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master yaml]# kubectl get componentstatuses</span></span>
<span class="line"><span style="color:#6F42C1;">Warning:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">v1</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ComponentStatus</span><span style="color:#24292E;"> </span><span style="color:#032F62;">is</span><span style="color:#24292E;"> </span><span style="color:#032F62;">deprecated</span><span style="color:#24292E;"> </span><span style="color:#032F62;">in</span><span style="color:#24292E;"> </span><span style="color:#032F62;">v1.19+</span></span>
<span class="line"><span style="color:#6F42C1;">NAME</span><span style="color:#24292E;">                 </span><span style="color:#032F62;">STATUS</span><span style="color:#24292E;">    </span><span style="color:#032F62;">MESSAGE</span><span style="color:#24292E;">                         </span><span style="color:#032F62;">ERROR</span></span>
<span class="line"><span style="color:#6F42C1;">etcd-0</span><span style="color:#24292E;">               </span><span style="color:#032F62;">Healthy</span><span style="color:#24292E;">   </span><span style="color:#032F62;">{&quot;health&quot;:&quot;true&quot;,&quot;reason&quot;:&quot;&quot;}</span></span>
<span class="line"><span style="color:#6F42C1;">scheduler</span><span style="color:#24292E;">            </span><span style="color:#032F62;">Healthy</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ok</span></span>
<span class="line"><span style="color:#6F42C1;">controller-manager</span><span style="color:#24292E;">   </span><span style="color:#032F62;">Healthy</span><span style="color:#24292E;">   </span><span style="color:#032F62;">ok</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#- --port=0 注释（kubeadmin）</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#查找资源</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">deployments.apps</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#按标签查找资源</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">deployments.apps</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">app=redis</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#一次查看多个指定的不通类型资源</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-n</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kube-system</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">service/xx</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">deployments.apps/xx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查找一个资源并且输出为yaml文件</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">deployments.apps</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">nginx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-oyaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-A</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看pv并且以容量排序</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pv</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--sort-by=spec.capacity.storage</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#列出事件（Events），按时间戳排序</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">events</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--sort-by=.metadata.creationTimestamp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-A</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">-owide</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#以列表方式查看更详细的信息</span></span>
<span class="line"><span style="color:#B392F0;">-oyaml</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#以yaml文件格式输出</span></span>
<span class="line"><span style="color:#B392F0;">-A</span><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">#所有命名空间</span></span>
<span class="line"><span style="color:#B392F0;">--sort-by</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#排序，以资源中定义的某些信息排序</span></span>
<span class="line"><span style="color:#B392F0;">--show-labels</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#显示资源的labels</span></span>
<span class="line"><span style="color:#B392F0;">-l</span><span style="color:#E1E4E8;">          </span><span style="color:#6A737D;">#显示匹配标签的资源</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看一个资源的详细信息</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">describe</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nodes</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">10.122</span><span style="color:#9ECBFF;">.6.75</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#查找资源</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">deployments.apps</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#按标签查找资源</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">deployments.apps</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-l</span><span style="color:#24292E;"> </span><span style="color:#032F62;">app=redis</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#一次查看多个指定的不通类型资源</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-n</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kube-system</span><span style="color:#24292E;"> </span><span style="color:#032F62;">service/xx</span><span style="color:#24292E;"> </span><span style="color:#032F62;">deployments.apps/xx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查找一个资源并且输出为yaml文件</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">deployments.apps</span><span style="color:#24292E;">  </span><span style="color:#032F62;">nginx</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-oyaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-A</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看pv并且以容量排序</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pv</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--sort-by=spec.capacity.storage</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#列出事件（Events），按时间戳排序</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">events</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--sort-by=.metadata.creationTimestamp</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-A</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">-owide</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#以列表方式查看更详细的信息</span></span>
<span class="line"><span style="color:#6F42C1;">-oyaml</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#以yaml文件格式输出</span></span>
<span class="line"><span style="color:#6F42C1;">-A</span><span style="color:#24292E;">      </span><span style="color:#6A737D;">#所有命名空间</span></span>
<span class="line"><span style="color:#6F42C1;">--sort-by</span><span style="color:#24292E;">  </span><span style="color:#6A737D;">#排序，以资源中定义的某些信息排序</span></span>
<span class="line"><span style="color:#6F42C1;">--show-labels</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#显示资源的labels</span></span>
<span class="line"><span style="color:#6F42C1;">-l</span><span style="color:#24292E;">          </span><span style="color:#6A737D;">#显示匹配标签的资源</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看一个资源的详细信息</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">describe</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nodes</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">10.122</span><span style="color:#032F62;">.6.75</span></span></code></pre></div><h2 id="_3-3logs" tabindex="-1">3.3logs <a class="header-anchor" href="#_3-3logs" aria-label="Permalink to &quot;3.3logs&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">kubectl logs -f &lt;pod-name&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">kubectl logs -f &lt;pod-name&gt;</span></span></code></pre></div><h2 id="_3-4-查看image" tabindex="-1">3.4 查看image <a class="header-anchor" href="#_3-4-查看image" aria-label="Permalink to &quot;3.4 查看image&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@kube-master-01 </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl -n kube-system get ds calico-node -oyaml </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">image:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">image:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">registry.cn-zhangjiakou.aliyuncs.com/hsuing/node:v3.28.0</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">image:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">registry.cn-zhangjiakou.aliyuncs.com/hsuing/cni:v3.28.0</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">image:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">registry.cn-zhangjiakou.aliyuncs.com/hsuing/cni:v3.28.0</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">image:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">registry.cn-zhangjiakou.aliyuncs.com/hsuing/node:v3.28.0</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@kube-master-01 </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl -n kube-system get ds calico-node -oyaml </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">grep</span><span style="color:#24292E;"> </span><span style="color:#032F62;">image:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">image:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">registry.cn-zhangjiakou.aliyuncs.com/hsuing/node:v3.28.0</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">image:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">registry.cn-zhangjiakou.aliyuncs.com/hsuing/cni:v3.28.0</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">image:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">registry.cn-zhangjiakou.aliyuncs.com/hsuing/cni:v3.28.0</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">image:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">registry.cn-zhangjiakou.aliyuncs.com/hsuing/node:v3.28.0</span></span></code></pre></div><h1 id="_4-操作pod" tabindex="-1">4.操作Pod <a class="header-anchor" href="#_4-操作pod" aria-label="Permalink to &quot;4.操作Pod&quot;">​</a></h1><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 从 Pod &lt;pod-name&gt; 中获取运行 &#39;date&#39; 的输出。默认情况下，输出来自第一个容器。</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">exec</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">pod-nam</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">date</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 运行输出 &#39;date&#39; 获取在 Pod &lt;pod-name&gt; 中容器 &lt;container-name&gt; 的输出。</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">exec</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">pod-nam</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">container-nam</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">date</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 获取一个交互 TTY 并在 Pod  &lt;pod-name&gt; 中运行 /bin/bash。默认情况下，输出来自第一个容器。</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">exec</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-ti</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">pod-nam</span><span style="color:#E1E4E8;">e</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/bin/bash</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 从 Pod &lt;pod-name&gt; 中获取运行 &#39;date&#39; 的输出。默认情况下，输出来自第一个容器。</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">exec</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">pod-nam</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--</span><span style="color:#24292E;"> </span><span style="color:#032F62;">date</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 运行输出 &#39;date&#39; 获取在 Pod &lt;pod-name&gt; 中容器 &lt;container-name&gt; 的输出。</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">exec</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">pod-nam</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">container-nam</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--</span><span style="color:#24292E;"> </span><span style="color:#032F62;">date</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 获取一个交互 TTY 并在 Pod  &lt;pod-name&gt; 中运行 /bin/bash。默认情况下，输出来自第一个容器。</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">exec</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-ti</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">pod-nam</span><span style="color:#24292E;">e</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/bin/bash</span></span></code></pre></div><h1 id="_5-格式化输出" tabindex="-1">5.格式化输出 <a class="header-anchor" href="#_5-格式化输出" aria-label="Permalink to &quot;5.格式化输出&quot;">​</a></h1><p>要以特定格式将详细信息输出到终端窗口，将 <code>-o</code>（或者 <code>--output</code>）参数添加到支持的 <code>kubectl</code> 命令中</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#输出集群中运行着的所有镜像</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pods</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-A</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-o=custom-columns=</span><span style="color:#9ECBFF;">&#39;IMAGES:spec.containers[*].image&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#获取deploy的名称与副本数,单个</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">deployment</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-A</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-o</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">jsonpath=&#39;{.metadata.name}{&quot;\\t&quot;}{.spec.replicas}{&quot;\\n&quot;}&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#获取deploy的名称与副本数,列表</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">deployment</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-A</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-o</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">jsonpath=&#39;{range .items[*]}{.metadata.name}{&quot;\\t&quot;}{.spec.replicas}{&quot;\\n&quot;}&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#输出集群中运行着的所有镜像</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pods</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-A</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-o=custom-columns=</span><span style="color:#032F62;">&#39;IMAGES:spec.containers[*].image&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#获取deploy的名称与副本数,单个</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">deployment</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-A</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-o</span><span style="color:#24292E;"> </span><span style="color:#032F62;">jsonpath=&#39;{.metadata.name}{&quot;\\t&quot;}{.spec.replicas}{&quot;\\n&quot;}&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#获取deploy的名称与副本数,列表</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">deployment</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-A</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-o</span><span style="color:#24292E;"> </span><span style="color:#032F62;">jsonpath=&#39;{range .items[*]}{.metadata.name}{&quot;\\t&quot;}{.spec.replicas}{&quot;\\n&quot;}&#39;</span></span></code></pre></div><p>jsonpath说明：</p><ul><li>{range .items[*]}：循环列表</li><li>{&quot;\\t&quot;}：制表符</li><li>{&quot;\\n&quot;}：换行</li></ul><h1 id="_6-config" tabindex="-1">6. config <a class="header-anchor" href="#_6-config" aria-label="Permalink to &quot;6. config&quot;">​</a></h1><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 查看所有的集群，因为你的 .kubeconfig 文件中可能包含多个上下文</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">config</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">view</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-o</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">jsonpath=&#39;{&quot;Cluster name\\tServer\\n&quot;}{range .clusters[*]}{.name}{&quot;\\t&quot;}{.cluster.server}{&quot;\\n&quot;}{end}&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 指向引用该集群名称的 API 服务器</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">config</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">view</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-o</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">jsonpath=&quot;{.clusters[?(@.name==</span><span style="color:#79B8FF;">\\&quot;</span><span style="color:#E1E4E8;">$CLUSTER_NAME</span><span style="color:#79B8FF;">\\&quot;</span><span style="color:#9ECBFF;">)].cluster.server}&quot;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#获取token</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">secret</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">default-token</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-o</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">jsonpath=&#39;{.data.token}&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">base64</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--decode</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 使用令牌玩转 API</span></span>
<span class="line"><span style="color:#B392F0;">curl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-X</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">GET</span><span style="color:#E1E4E8;"> $APISERVER</span><span style="color:#9ECBFF;">/api</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--header</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;Authorization: Bearer </span><span style="color:#E1E4E8;">$TOKEN</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--insecure</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 查看所有的集群，因为你的 .kubeconfig 文件中可能包含多个上下文</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">config</span><span style="color:#24292E;"> </span><span style="color:#032F62;">view</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-o</span><span style="color:#24292E;"> </span><span style="color:#032F62;">jsonpath=&#39;{&quot;Cluster name\\tServer\\n&quot;}{range .clusters[*]}{.name}{&quot;\\t&quot;}{.cluster.server}{&quot;\\n&quot;}{end}&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 指向引用该集群名称的 API 服务器</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">config</span><span style="color:#24292E;"> </span><span style="color:#032F62;">view</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-o</span><span style="color:#24292E;"> </span><span style="color:#032F62;">jsonpath=&quot;{.clusters[?(@.name==</span><span style="color:#005CC5;">\\&quot;</span><span style="color:#24292E;">$CLUSTER_NAME</span><span style="color:#005CC5;">\\&quot;</span><span style="color:#032F62;">)].cluster.server}&quot;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#获取token</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">secret</span><span style="color:#24292E;"> </span><span style="color:#032F62;">default-token</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-o</span><span style="color:#24292E;"> </span><span style="color:#032F62;">jsonpath=&#39;{.data.token}&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">base64</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--decode</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 使用令牌玩转 API</span></span>
<span class="line"><span style="color:#6F42C1;">curl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-X</span><span style="color:#24292E;"> </span><span style="color:#032F62;">GET</span><span style="color:#24292E;"> $APISERVER</span><span style="color:#032F62;">/api</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--header</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;Authorization: Bearer </span><span style="color:#24292E;">$TOKEN</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--insecure</span></span></code></pre></div><h1 id="_7-集群管理命令" tabindex="-1">7. 集群管理命令 <a class="header-anchor" href="#_7-集群管理命令" aria-label="Permalink to &quot;7. 集群管理命令&quot;">​</a></h1><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">语法格式：</span></span>
<span class="line"><span style="color:#e1e4e8;">kubectl  [command]  [TYPE]  [NAME]  [flags]</span></span>
<span class="line"><span style="color:#e1e4e8;">command: 子命令，如create、get、describe、delete</span></span>
<span class="line"><span style="color:#e1e4e8;">type： 资源类型，可以表示单数，复数或缩写形式</span></span>
<span class="line"><span style="color:#e1e4e8;">name： 资源的名称，如果省略，泽显示所有资源信息</span></span>
<span class="line"><span style="color:#e1e4e8;">flags： 指定可选标志，或附加的参数</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">语法格式：</span></span>
<span class="line"><span style="color:#24292e;">kubectl  [command]  [TYPE]  [NAME]  [flags]</span></span>
<span class="line"><span style="color:#24292e;">command: 子命令，如create、get、describe、delete</span></span>
<span class="line"><span style="color:#24292e;">type： 资源类型，可以表示单数，复数或缩写形式</span></span>
<span class="line"><span style="color:#24292e;">name： 资源的名称，如果省略，泽显示所有资源信息</span></span>
<span class="line"><span style="color:#24292e;">flags： 指定可选标志，或附加的参数</span></span></code></pre></div><table><thead><tr><th>子命令</th><th>说明</th></tr></thead><tbody><tr><td>help</td><td>用于查看命令及子命令的帮助信息</td></tr><tr><td>cluster-info</td><td>显示集群的相关配置信息</td></tr><tr><td>version</td><td>查看服务器及客户端的版本信息</td></tr><tr><td>api-resources</td><td>查看当前服务器上所有的资源对象</td></tr><tr><td>api-versions</td><td>查看当前服务器上所有资源对象的版本</td></tr><tr><td>config</td><td>管理当前节点上kubeconfig 的认证信息</td></tr></tbody></table><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#查看集群健康情况</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cs</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#集群核心组件运行情况</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cluster-info</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看表空间名</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">namespaces</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看版本</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">version</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看API</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">api-versions</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看事件</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">events</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#获取全部节点</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nodes</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#删除节点</span></span>
<span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">delete</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">node</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">k8s2</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#查看集群健康情况</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cs</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#集群核心组件运行情况</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cluster-info</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看表空间名</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">namespaces</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看版本</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">version</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看API</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">api-versions</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看事件</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">events</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#获取全部节点</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nodes</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#删除节点</span></span>
<span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">delete</span><span style="color:#24292E;"> </span><span style="color:#032F62;">node</span><span style="color:#24292E;"> </span><span style="color:#032F62;">k8s2</span></span></code></pre></div><h1 id="_8-命名空间" tabindex="-1">8. 命名空间 <a class="header-anchor" href="#_8-命名空间" aria-label="Permalink to &quot;8. 命名空间&quot;">​</a></h1><h2 id="_8-1-获取" tabindex="-1">8.1 获取 <a class="header-anchor" href="#_8-1-获取" aria-label="Permalink to &quot;8.1 获取&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl get ns </span><span style="color:#6A737D;"># 简写</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl get namespaces </span><span style="color:#6A737D;"># 全写</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl -n 命名空间 get pods  </span><span style="color:#6A737D;"># 查看命名空间中的资源对象</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl get ns </span><span style="color:#6A737D;"># 简写</span></span>
<span class="line"><span style="color:#24292E;">[root@master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl get namespaces </span><span style="color:#6A737D;"># 全写</span></span>
<span class="line"><span style="color:#24292E;">[root@master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl -n 命名空间 get pods  </span><span style="color:#6A737D;"># 查看命名空间中的资源对象</span></span></code></pre></div><h2 id="_8-2-创建" tabindex="-1">8.2 创建 <a class="header-anchor" href="#_8-2-创建" aria-label="Permalink to &quot;8.2 创建&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl create ns your_namespace </span><span style="color:#6A737D;"># 简写, 其中：your_namespace 为你自己的命名空间名称</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl create namespace your_namespace </span><span style="color:#6A737D;"># 全写, 其中：your_namespace 为你自己的命名空间名称</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl create ns your_namespace </span><span style="color:#6A737D;"># 简写, 其中：your_namespace 为你自己的命名空间名称</span></span>
<span class="line"><span style="color:#24292E;">[root@master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl create namespace your_namespace </span><span style="color:#6A737D;"># 全写, 其中：your_namespace 为你自己的命名空间名称</span></span></code></pre></div><h2 id="_8-3-删除" tabindex="-1">8.3 删除 <a class="header-anchor" href="#_8-3-删除" aria-label="Permalink to &quot;8.3 删除&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl delete namespace your_namespace </span><span style="color:#6A737D;"># 简写, 其中：your_namespace 为你自己的命名空间名称</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl delete namespace your_namespace </span><span style="color:#6A737D;"># 全写, 其中：your_namespace 为你自己的命名空间名称</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl delete namespace your_namespace </span><span style="color:#6A737D;"># 简写, 其中：your_namespace 为你自己的命名空间名称</span></span>
<span class="line"><span style="color:#24292E;">[root@master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl delete namespace your_namespace </span><span style="color:#6A737D;"># 全写, 其中：your_namespace 为你自己的命名空间名称</span></span></code></pre></div><h2 id="_8-4-查看" tabindex="-1">8.4 查看 <a class="header-anchor" href="#_8-4-查看" aria-label="Permalink to &quot;8.4 查看&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">[root@master </span><span style="color:#F97583;">~</span><span style="color:#E1E4E8;">]# kubectl describe ns your_namespace</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">[root@master </span><span style="color:#D73A49;">~</span><span style="color:#24292E;">]# kubectl describe ns your_namespace</span></span></code></pre></div>`,63),e=[o];function t(c,r,y,E,i,F){return a(),n("div",null,e)}const C=s(p,[["render",t]]);export{u as __pageData,C as default};
