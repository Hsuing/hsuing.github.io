import{_ as s,o as a,c as n,R as l}from"./chunks/framework.zUbWieqp.js";const m=JSON.parse('{"title":"1. ansible-doc命令","description":"","frontmatter":{},"headers":[],"relativePath":"guide/Linux/Ansible/8-adhoc.md","filePath":"guide/Linux/Ansible/8-adhoc.md","lastUpdated":1739528109000}'),o={name:"guide/Linux/Ansible/8-adhoc.md"},p=l(`<h1 id="_1-ansible-doc命令" tabindex="-1">1. ansible-doc命令 <a class="header-anchor" href="#_1-ansible-doc命令" aria-label="Permalink to &quot;1. ansible-doc命令&quot;">​</a></h1><h2 id="_1-1-查看所有模块" tabindex="-1">1.1 查看所有模块 <a class="header-anchor" href="#_1-1-查看所有模块" aria-label="Permalink to &quot;1.1 查看所有模块&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ansible-doc</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-l</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ansible-doc</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-l</span></span></code></pre></div><h2 id="_1-2-查看个例模块" tabindex="-1">1.2 查看个例模块 <a class="header-anchor" href="#_1-2-查看个例模块" aria-label="Permalink to &quot;1.2 查看个例模块&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ansible-doc</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">copy</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ansible-doc</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-s</span><span style="color:#24292E;"> </span><span style="color:#032F62;">copy</span></span></code></pre></div><p>Ad-Hoc 执行方式，可以通过shell或者command模块来执行命令。一条条来执行</p><ul><li>-m 模块名称</li><li>-a 模块参数</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">ansible-doc</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看某服务器的内存使用情况</span></span>
<span class="line"><span style="color:#B392F0;">ansible</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">myserver</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-m</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;free -m&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 可简写, 因为 command 是默认模块</span></span>
<span class="line"><span style="color:#B392F0;">ansible</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">myserver</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;free -m&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 模块包括 command, script(在远程主机执行主控端的shell脚本), shell (执行远程主机的shell脚本文件)</span></span>
<span class="line"><span style="color:#B392F0;">ansible</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">myserver</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-m</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;cat /etc/os-release&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 先切换到目录再执行</span></span>
<span class="line"><span style="color:#B392F0;">ansible</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">myserver</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-m</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;chdir=/etc cat os-release&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 用 command 模块执行不成功, shell 模块可以</span></span>
<span class="line"><span style="color:#B392F0;">ansible</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cloud</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-m</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">command</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;sudo rm -rf /var/log/mysql/*.gz&quot;</span></span>
<span class="line"><span style="color:#B392F0;">ansible</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cloud</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-m</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">shell</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;sudo rm -rf /var/log/mysql/*.gz&quot;</span></span>
<span class="line"><span style="color:#B392F0;">ansible</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">myserver</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-m</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">script</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;/home/local.sh&quot;</span></span>
<span class="line"><span style="color:#B392F0;">ansible</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">myserver</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-m</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">shell</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;/home/server.sh&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 实际上shell模块执行命令的方式是在远程使用/bin/sh来执行的</span></span>
<span class="line"><span style="color:#B392F0;">ansible</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">merch</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-m</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">shell</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-a</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;touch demo.txt&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">ansible-doc</span><span style="color:#24292E;"> </span><span style="color:#032F62;">command</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查看某服务器的内存使用情况</span></span>
<span class="line"><span style="color:#6F42C1;">ansible</span><span style="color:#24292E;"> </span><span style="color:#032F62;">myserver</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-m</span><span style="color:#24292E;"> </span><span style="color:#032F62;">command</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-a</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;free -m&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 可简写, 因为 command 是默认模块</span></span>
<span class="line"><span style="color:#6F42C1;">ansible</span><span style="color:#24292E;"> </span><span style="color:#032F62;">myserver</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-a</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;free -m&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 模块包括 command, script(在远程主机执行主控端的shell脚本), shell (执行远程主机的shell脚本文件)</span></span>
<span class="line"><span style="color:#6F42C1;">ansible</span><span style="color:#24292E;"> </span><span style="color:#032F62;">myserver</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-m</span><span style="color:#24292E;"> </span><span style="color:#032F62;">command</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-a</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;cat /etc/os-release&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 先切换到目录再执行</span></span>
<span class="line"><span style="color:#6F42C1;">ansible</span><span style="color:#24292E;"> </span><span style="color:#032F62;">myserver</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-m</span><span style="color:#24292E;"> </span><span style="color:#032F62;">command</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-a</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;chdir=/etc cat os-release&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 用 command 模块执行不成功, shell 模块可以</span></span>
<span class="line"><span style="color:#6F42C1;">ansible</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cloud</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-m</span><span style="color:#24292E;"> </span><span style="color:#032F62;">command</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-a</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;sudo rm -rf /var/log/mysql/*.gz&quot;</span></span>
<span class="line"><span style="color:#6F42C1;">ansible</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cloud</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-m</span><span style="color:#24292E;"> </span><span style="color:#032F62;">shell</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-a</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;sudo rm -rf /var/log/mysql/*.gz&quot;</span></span>
<span class="line"><span style="color:#6F42C1;">ansible</span><span style="color:#24292E;"> </span><span style="color:#032F62;">myserver</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-m</span><span style="color:#24292E;"> </span><span style="color:#032F62;">script</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-a</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;/home/local.sh&quot;</span></span>
<span class="line"><span style="color:#6F42C1;">ansible</span><span style="color:#24292E;"> </span><span style="color:#032F62;">myserver</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-m</span><span style="color:#24292E;"> </span><span style="color:#032F62;">shell</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-a</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;/home/server.sh&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 实际上shell模块执行命令的方式是在远程使用/bin/sh来执行的</span></span>
<span class="line"><span style="color:#6F42C1;">ansible</span><span style="color:#24292E;"> </span><span style="color:#032F62;">merch</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-m</span><span style="color:#24292E;"> </span><span style="color:#032F62;">shell</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-a</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;touch demo.txt&quot;</span></span></code></pre></div>`,8),e=[p];function c(t,r,y,E,i,F){return a(),n("div",null,e)}const C=s(o,[["render",c]]);export{m as __pageData,C as default};
