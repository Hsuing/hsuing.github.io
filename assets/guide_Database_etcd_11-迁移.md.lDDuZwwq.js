import{_ as e,o as t,c as a,R as s}from"./chunks/framework.zUbWieqp.js";const u=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"guide/Database/etcd/11-迁移.md","filePath":"guide/Database/etcd/11-迁移.md","lastUpdated":1730111076000}'),o={name:"guide/Database/etcd/11-迁移.md"},p=s('<p><strong>make-mirror简介</strong></p><p>ETCD官网提供了一种实时镜像同步数据的工具mirror-maker，如果出现主机房服务挂掉可以通过切换域名的形式切换到灾备机房，这个过程数据是可以保持一致的。</p><div class="danger custom-block"><p class="custom-block-title">❌ 注意</p><p>make-mirror 的使用需要依赖于API版本3， 使用API2的无法通过该工具做数据同步</p></div><h2 id="_1-同步" tabindex="-1">1.同步 <a class="header-anchor" href="#_1-同步" aria-label="Permalink to &quot;1.同步&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">ETCDCTL_API=3 etcdctl make-mirror --endpoints=http://source_ip:2379 http://target_IP:2379</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">ETCDCTL_API=3 etcdctl make-mirror --endpoints=http://source_ip:2379 http://target_IP:2379</span></span></code></pre></div><h2 id="_2-验证" tabindex="-1">2.验证 <a class="header-anchor" href="#_2-验证" aria-label="Permalink to &quot;2.验证&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">export ETCDCTL_API=3</span></span>\n<span class="line"><span style="color:#e1e4e8;">etcdctl get  --prefix --keys-only &quot;&quot; #查看所有key</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">export ETCDCTL_API=3</span></span>\n<span class="line"><span style="color:#24292e;">etcdctl get  --prefix --keys-only &quot;&quot; #查看所有key</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;"># 导出所有key的值</span></span>\n<span class="line"><span style="color:#e1e4e8;">for i in `etcdctl get  --prefix --keys-only &quot;&quot; |sort`;do etcdctl get $i &gt;&gt;/tmp/etcdcheck.log;done</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;"># 导出所有key的值</span></span>\n<span class="line"><span style="color:#24292e;">for i in `etcdctl get  --prefix --keys-only &quot;&quot; |sort`;do etcdctl get $i &gt;&gt;/tmp/etcdcheck.log;done</span></span></code></pre></div><p><a href="https://www.cnblogs.com/davygeek/p/6761090.html" target="_blank" rel="noreferrer">https://www.cnblogs.com/davygeek/p/6761090.html</a></p><p><a href="https://www.cnblogs.com/yuhaohao/p/12893061.html" target="_blank" rel="noreferrer">https://www.cnblogs.com/yuhaohao/p/12893061.html</a></p><p><a href="http://blueskykong.com/categories/etcd/" target="_blank" rel="noreferrer">http://blueskykong.com/categories/etcd/</a></p>',11),c=[p];function l(n,r,i,d,h,g){return t(),a("div",null,c)}const k=e(o,[["render",l]]);export{u as __pageData,k as default};
