import{_ as s,o as a,c as n,R as l}from"./chunks/framework.zUbWieqp.js";const h=JSON.parse('{"title":"1. Solana验证节点部署","description":"","frontmatter":{},"headers":[],"relativePath":"guide/Blockchain/solana/2.deploy.md","filePath":"guide/Blockchain/solana/2.deploy.md","lastUpdated":1736763438000}'),p={name:"guide/Blockchain/solana/2.deploy.md"},o=l(`<h1 id="_1-solana验证节点部署" tabindex="-1">1. Solana验证节点部署 <a class="header-anchor" href="#_1-solana验证节点部署" aria-label="Permalink to &quot;1. Solana验证节点部署&quot;">​</a></h1><p>基于centos，官方推荐使用ubuntu20.x</p><p>Solana 基于1.18.26</p><h2 id="_1-1-系统要求" tabindex="-1">1.1 系统要求 <a class="header-anchor" href="#_1-1-系统要求" aria-label="Permalink to &quot;1.1 系统要求&quot;">​</a></h2><p><a href="https://docs.anza.xyz/operations/requirements#minimum-sol-requirements" target="_blank" rel="noreferrer">官方最低要求</a></p><p>performance testing.</p><table><thead><tr><th>Component</th><th>Validator Requirements</th><th>Additional RPC Node Requirements</th></tr></thead><tbody><tr><td><strong>CPU</strong></td><td>- 2.8GHz base clock speed, or faster - SHA extensions instruction support - AMD Gen 3 or newer - Intel Ice Lake or newer - Higher clock speed is preferable over more cores - AVX2 instruction support (to use official release binaries, self-compile otherwise) - Support for AVX512f is helpful</td><td></td></tr><tr><td></td><td>12 cores / 24 threads, or more</td><td>16 cores / 32 threads, or more</td></tr><tr><td><strong>RAM</strong></td><td>Error Correction Code (ECC) memory is suggested Motherboard with 512GB capacity suggested</td><td></td></tr><tr><td></td><td>256GB or more</td><td>512 GB or more for <strong>all <a href="https://docs.solanalabs.com/operations/setup-an-rpc-node#account-indexing" target="_blank" rel="noreferrer">account indexes</a></strong></td></tr><tr><td><strong>Disk</strong></td><td>PCIe Gen3 x4 NVME SSD, or better, on each of: - <strong>Accounts</strong>: 500GB, or larger. High TBW (Total Bytes Written) - <strong>Ledger</strong>: 1TB or larger. High TBW suggested - <strong>Snapshots</strong>: 250GB or larger. High TBW suggested - <strong>OS</strong>: (Optional) 500GB, or larger. SATA OK The OS may be installed on the ledger disk, though testing has shown better performance with the ledger on its own disk Accounts and ledger <em>can</em> be stored on the same disk, however due to high IOPS, this is not recommended The Samsung 970 and 980 Pro series SSDs are popular with the validator community</td><td>Consider a larger ledger disk if longer transaction history is required Accounts and ledger <strong>should not</strong> be stored on the same disk</td></tr><tr><td><strong>GPUs</strong></td><td>Not necessary at this time Operators in the validator community do not use GPUs currently</td><td></td></tr><tr><td>Network</td><td>Internet service should be at least 1GBbit/s symmetric, commercial. 10GBit/s preferred (especially for mainnet-beta).</td><td></td></tr></tbody></table><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">CPU：16 核以上。</span></span>
<span class="line"><span style="color:#e1e4e8;">RAM：128 GB</span></span>
<span class="line"><span style="color:#e1e4e8;">存储：2TB NVMe SSD 或更大</span></span>
<span class="line"><span style="color:#e1e4e8;">网络：1Gbps 带宽</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">如果只是拉块，可以采用16x32g</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">CPU：16 核以上。</span></span>
<span class="line"><span style="color:#24292e;">RAM：128 GB</span></span>
<span class="line"><span style="color:#24292e;">存储：2TB NVMe SSD 或更大</span></span>
<span class="line"><span style="color:#24292e;">网络：1Gbps 带宽</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">如果只是拉块，可以采用16x32g</span></span></code></pre></div><h2 id="_1-2-官当" tabindex="-1">1.2 官当 <a class="header-anchor" href="#_1-2-官当" aria-label="Permalink to &quot;1.2 官当&quot;">​</a></h2><ul><li><p>GitHub: <a href="https://github.com/solana-labs" target="_blank" rel="noreferrer">https://github.com/solana-labs</a></p></li><li><p>官网: <a href="https://solana.com" target="_blank" rel="noreferrer">https://solana.com</a></p></li><li><p>区块浏览器：</p></li></ul><p><a href="https://explorer.solana.com/" target="_blank" rel="noreferrer">https://explorer.solana.com/</a></p><p>或者</p><p><a href="https://solanabeach.io/" target="_blank" rel="noreferrer">https://solanabeach.io/</a></p><p>更多地址请看，<a href="https://solana.com/zh/docs/core/clusters" target="_blank" rel="noreferrer">https://solana.com/zh/docs/core/clusters</a></p><ul><li><p>solana工具配置：<a href="https://docs.solana.com/cli/install-solana-cli-tools" target="_blank" rel="noreferrer">https://docs.solana.com/cli/install-solana-cli-tools</a></p></li><li><p>solana服务配置：<a href="https://docs.solana.com/running-validator/validator-start" target="_blank" rel="noreferrer">https://docs.solana.com/running-validator/validator-start</a></p></li><li><p>json rpc：<a href="https://docs.solana.com/zh/developing/clients/jsonrpc-api" target="_blank" rel="noreferrer">https://docs.solana.com/zh/developing/clients/jsonrpc-api</a></p></li><li><p>Solana集群：<a href="https://docs.solana.com/zh/clusters" target="_blank" rel="noreferrer">https://docs.solana.com/zh/clusters</a></p></li></ul><h2 id="_1-2-安装依赖" tabindex="-1">1.2 安装依赖 <a class="header-anchor" href="#_1-2-安装依赖" aria-label="Permalink to &quot;1.2 安装依赖&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">yum</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-y</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">build-essential</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pkg-config</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">libssl-dev</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">llvm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">libclang-dev</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">protobuf-compiler</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bzip2</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">yum</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-y</span><span style="color:#24292E;"> </span><span style="color:#032F62;">build-essential</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pkg-config</span><span style="color:#24292E;"> </span><span style="color:#032F62;">libssl-dev</span><span style="color:#24292E;"> </span><span style="color:#032F62;">llvm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">libclang-dev</span><span style="color:#24292E;"> </span><span style="color:#032F62;">protobuf-compiler</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bzip2</span></span></code></pre></div><p>解释：</p><ul><li>Build essential 构建必备</li><li>Package config 包配置</li><li>Udev &amp; LLM &amp; libclang</li><li>Protocol buffers 协议缓冲区</li></ul><h2 id="_1-3-安装solana" tabindex="-1">1.3 安装Solana <a class="header-anchor" href="#_1-3-安装solana" aria-label="Permalink to &quot;1.3 安装Solana&quot;">​</a></h2><p>官方共有三种方式安装：</p><ul><li>通过 Solana 安装Solana工具包</li><li>通过源<a href="https://docs.anza.xyz/cli/install" target="_blank" rel="noreferrer">代码</a>安装</li><li>下载预置二进制文件</li></ul><p>本次采用二进制安装，方便</p><h3 id="_1-下载" tabindex="-1">1.下载 <a class="header-anchor" href="#_1-下载" aria-label="Permalink to &quot;1.下载&quot;">​</a></h3><p><a href="https://github.com/solana-labs/solana/releases/latest" target="_blank" rel="noreferrer">https://github.com/solana-labs/solana/releases/latest</a></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">wget</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://github.com/solana-labs/solana/releases/download/v1.18.26/solana-release-x86_64-unknown-linux-gnu.tar.bz2</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">wget</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://github.com/solana-labs/solana/releases/download/v1.18.26/solana-release-x86_64-unknown-linux-gnu.tar.bz2</span></span></code></pre></div><h3 id="_2-创建目录" tabindex="-1">2.创建目录 <a class="header-anchor" href="#_2-创建目录" aria-label="Permalink to &quot;2.创建目录&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#命令目录</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data/apps/solana</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#数据目录</span></span>
<span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data/solana</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#命令目录</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/data/apps/solana</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#数据目录</span></span>
<span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/data/solana</span></span></code></pre></div><h3 id="_3-解压" tabindex="-1">3.解压 <a class="header-anchor" href="#_3-解压" aria-label="Permalink to &quot;3.解压&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">tar</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">jxvf</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">solana-release-x86_64-unknown-linux-gnu.tar.bz2</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--strip-components=1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-C</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">/data/apps/solana/</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">tar</span><span style="color:#24292E;"> </span><span style="color:#032F62;">jxvf</span><span style="color:#24292E;"> </span><span style="color:#032F62;">solana-release-x86_64-unknown-linux-gnu.tar.bz2</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--strip-components=1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-C</span><span style="color:#24292E;">  </span><span style="color:#032F62;">/data/apps/solana/</span></span></code></pre></div><ul><li>查看目录结构</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">$tree -L 2 /data/apps/solana/</span></span>
<span class="line"><span style="color:#B392F0;">/data/apps/solana/</span></span>
<span class="line"><span style="color:#B392F0;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">bin</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cargo-build-bpf</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cargo-build-sbf</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cargo-test-bpf</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">cargo-test-sbf</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">deps</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--</span><span style="color:#F97583;">&gt;</span><span style="color:#79B8FF;">dir</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">perf-libs</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">---</span><span style="color:#F97583;">&gt;</span><span style="color:#79B8FF;">dir</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">rbpf-cli</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">sdk</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">---</span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">dir</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">solana</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">solana-bench-tps</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">solana-dos</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">solana-faucet</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">solana-genesis</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">solana-gossip</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">solana-install</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">solana-install-init</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">solana-keygen</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">solana-ledger-tool</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">solana-log-analyzer</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">solana-net-shaper</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">solana-stake-accounts</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">solana-test-validator</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">solana-tokens</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">solana-validator</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">solana-watchtower</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">solang</span></span>
<span class="line"><span style="color:#B392F0;">│  </span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">└──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">spl-token</span></span>
<span class="line"><span style="color:#B392F0;">├──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">validator-keypair.json</span></span>
<span class="line"><span style="color:#B392F0;">└──</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">version.yml</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">$tree -L 2 /data/apps/solana/</span></span>
<span class="line"><span style="color:#6F42C1;">/data/apps/solana/</span></span>
<span class="line"><span style="color:#6F42C1;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">bin</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cargo-build-bpf</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cargo-build-sbf</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cargo-test-bpf</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">cargo-test-sbf</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">deps</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--</span><span style="color:#D73A49;">&gt;</span><span style="color:#005CC5;">dir</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">perf-libs</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">---</span><span style="color:#D73A49;">&gt;</span><span style="color:#005CC5;">dir</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">rbpf-cli</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">sdk</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">---</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">dir</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">solana</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">solana-bench-tps</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">solana-dos</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">solana-faucet</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">solana-genesis</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">solana-gossip</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">solana-install</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">solana-install-init</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">solana-keygen</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">solana-ledger-tool</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">solana-log-analyzer</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">solana-net-shaper</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">solana-stake-accounts</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">solana-test-validator</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">solana-tokens</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">solana-validator</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">solana-watchtower</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">solang</span></span>
<span class="line"><span style="color:#6F42C1;">│  </span><span style="color:#24292E;"> </span><span style="color:#032F62;">└──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">spl-token</span></span>
<span class="line"><span style="color:#6F42C1;">├──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">validator-keypair.json</span></span>
<span class="line"><span style="color:#6F42C1;">└──</span><span style="color:#24292E;"> </span><span style="color:#032F62;">version.yml</span></span></code></pre></div><h3 id="_4-设置环境变量" tabindex="-1">4.设置环境变量 <a class="header-anchor" href="#_4-设置环境变量" aria-label="Permalink to &quot;4.设置环境变量&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data/apps/solana/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#vim /etc/profile</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> PATH</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">/data/apps/solana/bin:</span><span style="color:#E1E4E8;">$PATH</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#source /etc/profile</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/data/apps/solana/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#vim /etc/profile</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> PATH</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">/data/apps/solana/bin:</span><span style="color:#24292E;">$PATH</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#source /etc/profile</span></span></code></pre></div><h3 id="_5-查看版本" tabindex="-1">5.查看版本 <a class="header-anchor" href="#_5-查看版本" aria-label="Permalink to &quot;5.查看版本&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">$solana --version</span></span>
<span class="line"><span style="color:#B392F0;">solana-cli</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1.18</span><span style="color:#9ECBFF;">.26</span><span style="color:#E1E4E8;"> (src:d9f20e95; </span><span style="color:#B392F0;">feat:3241752014,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">client:SolanaLabs</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">$solana --version</span></span>
<span class="line"><span style="color:#6F42C1;">solana-cli</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1.18</span><span style="color:#032F62;">.26</span><span style="color:#24292E;"> (src:d9f20e95; </span><span style="color:#6F42C1;">feat:3241752014,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">client:SolanaLabs</span><span style="color:#24292E;">)</span></span></code></pre></div><h2 id="_1-4-连接solana集群" tabindex="-1">1.4 连接Solana集群 <a class="header-anchor" href="#_1-4-连接solana集群" aria-label="Permalink to &quot;1.4 连接Solana集群&quot;">​</a></h2><p><a href="https://docs.solana.com/zh/clusters" target="_blank" rel="noreferrer">Solana集群</a>步骤</p><h3 id="_1-mainnet-beta-群集" tabindex="-1">1.Mainnet Beta 群集 <a class="header-anchor" href="#_1-mainnet-beta-群集" aria-label="Permalink to &quot;1.Mainnet Beta 群集&quot;">​</a></h3><p>生产集群</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">$solana config set --url https://api.mainnet-beta.solana.com</span></span>
<span class="line"><span style="color:#B392F0;">Config</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">File:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/root/.config/solana/cli/config.yml</span></span>
<span class="line"><span style="color:#B392F0;">RPC</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">URL:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://api.mainnet-beta.solana.com</span></span>
<span class="line"><span style="color:#B392F0;">WebSocket</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">URL:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">wss://api.mainnet-beta.solana.com/</span><span style="color:#E1E4E8;"> (computed)</span></span>
<span class="line"><span style="color:#B392F0;">Keypair</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Path:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/root/.config/solana/id.json</span></span>
<span class="line"><span style="color:#B392F0;">Commitment:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">confirmed</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看新添加的地址</span></span>
<span class="line"><span style="color:#E1E4E8;">$solana config get</span></span>
<span class="line"><span style="color:#B392F0;">Config</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">File:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/root/.config/solana/cli/config.yml</span></span>
<span class="line"><span style="color:#B392F0;">RPC</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">URL:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://api.mainnet-beta.solana.com</span></span>
<span class="line"><span style="color:#B392F0;">WebSocket</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">URL:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">wss://api.mainnet-beta.solana.com/</span><span style="color:#E1E4E8;"> (computed)</span></span>
<span class="line"><span style="color:#B392F0;">Keypair</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Path:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data/apps/solana/validator-keypair.json</span></span>
<span class="line"><span style="color:#B392F0;">Commitment:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">confirmed</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">$solana config set --url https://api.mainnet-beta.solana.com</span></span>
<span class="line"><span style="color:#6F42C1;">Config</span><span style="color:#24292E;"> </span><span style="color:#032F62;">File:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/root/.config/solana/cli/config.yml</span></span>
<span class="line"><span style="color:#6F42C1;">RPC</span><span style="color:#24292E;"> </span><span style="color:#032F62;">URL:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://api.mainnet-beta.solana.com</span></span>
<span class="line"><span style="color:#6F42C1;">WebSocket</span><span style="color:#24292E;"> </span><span style="color:#032F62;">URL:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">wss://api.mainnet-beta.solana.com/</span><span style="color:#24292E;"> (computed)</span></span>
<span class="line"><span style="color:#6F42C1;">Keypair</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Path:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/root/.config/solana/id.json</span></span>
<span class="line"><span style="color:#6F42C1;">Commitment:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">confirmed</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看新添加的地址</span></span>
<span class="line"><span style="color:#24292E;">$solana config get</span></span>
<span class="line"><span style="color:#6F42C1;">Config</span><span style="color:#24292E;"> </span><span style="color:#032F62;">File:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/root/.config/solana/cli/config.yml</span></span>
<span class="line"><span style="color:#6F42C1;">RPC</span><span style="color:#24292E;"> </span><span style="color:#032F62;">URL:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://api.mainnet-beta.solana.com</span></span>
<span class="line"><span style="color:#6F42C1;">WebSocket</span><span style="color:#24292E;"> </span><span style="color:#032F62;">URL:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">wss://api.mainnet-beta.solana.com/</span><span style="color:#24292E;"> (computed)</span></span>
<span class="line"><span style="color:#6F42C1;">Keypair</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Path:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/data/apps/solana/validator-keypair.json</span></span>
<span class="line"><span style="color:#6F42C1;">Commitment:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">confirmed</span></span></code></pre></div><p>在成为一个验证器节点之前，通过获取事务计数来检查集群是否可以被你的机器访问到：</p><ul><li>验证是否能访问</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">$solana transaction-count</span></span>
<span class="line"><span style="color:#B392F0;">358210243456</span></span>
<span class="line"><span style="color:#6A737D;">#返回数字说明可以连接集群</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">$solana transaction-count</span></span>
<span class="line"><span style="color:#6F42C1;">358210243456</span></span>
<span class="line"><span style="color:#6A737D;">#返回数字说明可以连接集群</span></span></code></pre></div><h3 id="_2-devnet集群" tabindex="-1">2.Devnet集群 <a class="header-anchor" href="#_2-devnet集群" aria-label="Permalink to &quot;2.Devnet集群&quot;">​</a></h3><p><a href="https://docs.anza.xyz/clusters/available#devnet" target="_blank" rel="noreferrer">开发者集群</a></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">solana config set --url https://api.devnet.solana.com</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">solana config set --url https://api.devnet.solana.com</span></span></code></pre></div><h3 id="_3-testnet集群" tabindex="-1">3.Testnet集群 <a class="header-anchor" href="#_3-testnet集群" aria-label="Permalink to &quot;3.Testnet集群&quot;">​</a></h3><p><a href="https://docs.anza.xyz/clusters/available#testnet" target="_blank" rel="noreferrer">测试集群</a></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">solana</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">config</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--url</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://api.testnet.solana.com</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">solana</span><span style="color:#24292E;"> </span><span style="color:#032F62;">config</span><span style="color:#24292E;"> </span><span style="color:#032F62;">set</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--url</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://api.testnet.solana.com</span></span></code></pre></div><h2 id="_1-5-配置solana身份信息" tabindex="-1">1.5 配置Solana身份信息 <a class="header-anchor" href="#_1-5-配置solana身份信息" aria-label="Permalink to &quot;1.5 配置Solana身份信息&quot;">​</a></h2><ul><li>验证节点创建身份密钥</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># solana-keygen new -o /data/apps/solana/validator-keypair.json</span></span>
<span class="line"><span style="color:#B392F0;">输入密码</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># solana-keygen new -o /data/apps/solana/validator-keypair.json</span></span>
<span class="line"><span style="color:#6F42C1;">输入密码</span></span></code></pre></div><ul><li>查看身份公钥</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">$solana-keygen pubkey /data/apps/solana/validator-keypair.json</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">$solana-keygen pubkey /data/apps/solana/validator-keypair.json</span></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">❌ 注意</p><p>validator-keypair.json”文件也是您的 (ed25519) 私钥。需要将这个私钥备份好</p></div><ul><li>将solana配置设置为对以下所有命令使用验证节点密钥对</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">$solana config set --keypair /data/apps/solana/validator-keypair.json</span></span>
<span class="line"><span style="color:#B392F0;">Config</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">File:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/root/.config/solana/cli/config.yml</span></span>
<span class="line"><span style="color:#B392F0;">RPC</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">URL:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://api.mainnet-beta.solana.com</span></span>
<span class="line"><span style="color:#B392F0;">WebSocket</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">URL:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">wss://api.mainnet-beta.solana.com/</span><span style="color:#E1E4E8;"> (computed)</span></span>
<span class="line"><span style="color:#B392F0;">Keypair</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Path:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data/apps/solana/validator-keypair.json</span></span>
<span class="line"><span style="color:#B392F0;">Commitment:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">confirmed</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">$solana config set --keypair /data/apps/solana/validator-keypair.json</span></span>
<span class="line"><span style="color:#6F42C1;">Config</span><span style="color:#24292E;"> </span><span style="color:#032F62;">File:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/root/.config/solana/cli/config.yml</span></span>
<span class="line"><span style="color:#6F42C1;">RPC</span><span style="color:#24292E;"> </span><span style="color:#032F62;">URL:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://api.mainnet-beta.solana.com</span></span>
<span class="line"><span style="color:#6F42C1;">WebSocket</span><span style="color:#24292E;"> </span><span style="color:#032F62;">URL:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">wss://api.mainnet-beta.solana.com/</span><span style="color:#24292E;"> (computed)</span></span>
<span class="line"><span style="color:#6F42C1;">Keypair</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Path:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/data/apps/solana/validator-keypair.json</span></span>
<span class="line"><span style="color:#6F42C1;">Commitment:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">confirmed</span></span></code></pre></div><h2 id="_1-6-启动solana验证器" tabindex="-1">1.6 启动Solana验证器 <a class="header-anchor" href="#_1-6-启动solana验证器" aria-label="Permalink to &quot;1.6 启动Solana验证器&quot;">​</a></h2><p><a href="https://docs.anza.xyz/operations/guides/validator-start#configure-solana-cli" target="_blank" rel="noreferrer">官当</a></p><p><a href="https://docs.anza.xyz/clusters/available#mainnet-beta" target="_blank" rel="noreferrer">集群启动脚本</a></p><h3 id="_1-配置启动脚本" tabindex="-1">1.配置启动脚本 <a class="header-anchor" href="#_1-配置启动脚本" aria-label="Permalink to &quot;1.配置启动脚本&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#创建脚本</span></span>
<span class="line"><span style="color:#6A737D;">#touch  /data/apps/solana/validator.sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># vim  /data/apps/solana/validator.sh</span></span>
<span class="line"><span style="color:#6A737D;">#!/bin/bash</span></span>
<span class="line"><span style="color:#B392F0;">solana-validator</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--identity</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data/apps/solana/validator-keypair.json</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--known-validator</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">7</span><span style="color:#9ECBFF;">Np41oeYqPefeNQEHSv1UDhYrehxin3NStELsSKCT4K2</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--known-validator</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">GdnSyH3YtwcxFvQrVVJMm1JhTS4QVX7MFsX56uJLUfiZ</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--known-validator</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">DE1bawNcRJB9rVm3buyMVfr8mBEoyyu73NBovf2oXJsJ</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--known-validator</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">CakcnaRDHka2gXyfbEd2d3xsvkJkqsLw2akB3zsN1D2S</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--only-known-rpc</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--ledger</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data/solana/validator-ledger</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--rpc-port</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">8899</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--bind-address</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">127.0</span><span style="color:#9ECBFF;">.0.1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--private-rpc</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dynamic-port-range</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">8000</span><span style="color:#9ECBFF;">-8020</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--entrypoint</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">entrypoint.mainnet-beta.solana.com:8001</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--entrypoint</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">entrypoint2.mainnet-beta.solana.com:8001</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--entrypoint</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">entrypoint3.mainnet-beta.solana.com:8001</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--entrypoint</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">entrypoint4.mainnet-beta.solana.com:8001</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--entrypoint</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">entrypoint5.mainnet-beta.solana.com:8001</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--expected-genesis-hash</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">5</span><span style="color:#9ECBFF;">eykt4UsFv8P8NJdTREpY1vzqKqZKvdpKuc147dw2N9d</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--wal-recovery-mode</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">skip_any_corrupted_record</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--limit-ledger-size</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--enable-rpc-transaction-history</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--account-index</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">spl-token-mint</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">program-id</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">spl-token-owner</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--log</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data/solana/solana-validator.log</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#创建脚本</span></span>
<span class="line"><span style="color:#6A737D;">#touch  /data/apps/solana/validator.sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># vim  /data/apps/solana/validator.sh</span></span>
<span class="line"><span style="color:#6A737D;">#!/bin/bash</span></span>
<span class="line"><span style="color:#6F42C1;">solana-validator</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">--identity</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/data/apps/solana/validator-keypair.json</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">--known-validator</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">7</span><span style="color:#032F62;">Np41oeYqPefeNQEHSv1UDhYrehxin3NStELsSKCT4K2</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">--known-validator</span><span style="color:#24292E;"> </span><span style="color:#032F62;">GdnSyH3YtwcxFvQrVVJMm1JhTS4QVX7MFsX56uJLUfiZ</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">--known-validator</span><span style="color:#24292E;"> </span><span style="color:#032F62;">DE1bawNcRJB9rVm3buyMVfr8mBEoyyu73NBovf2oXJsJ</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">--known-validator</span><span style="color:#24292E;"> </span><span style="color:#032F62;">CakcnaRDHka2gXyfbEd2d3xsvkJkqsLw2akB3zsN1D2S</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">--only-known-rpc</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">--ledger</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/data/solana/validator-ledger</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">--rpc-port</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">8899</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">--bind-address</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">127.0</span><span style="color:#032F62;">.0.1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">--private-rpc</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dynamic-port-range</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">8000</span><span style="color:#032F62;">-8020</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">--entrypoint</span><span style="color:#24292E;"> </span><span style="color:#032F62;">entrypoint.mainnet-beta.solana.com:8001</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">--entrypoint</span><span style="color:#24292E;"> </span><span style="color:#032F62;">entrypoint2.mainnet-beta.solana.com:8001</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">--entrypoint</span><span style="color:#24292E;"> </span><span style="color:#032F62;">entrypoint3.mainnet-beta.solana.com:8001</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">--entrypoint</span><span style="color:#24292E;"> </span><span style="color:#032F62;">entrypoint4.mainnet-beta.solana.com:8001</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">--entrypoint</span><span style="color:#24292E;"> </span><span style="color:#032F62;">entrypoint5.mainnet-beta.solana.com:8001</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">--expected-genesis-hash</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">5</span><span style="color:#032F62;">eykt4UsFv8P8NJdTREpY1vzqKqZKvdpKuc147dw2N9d</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">--wal-recovery-mode</span><span style="color:#24292E;"> </span><span style="color:#032F62;">skip_any_corrupted_record</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">--limit-ledger-size</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">--enable-rpc-transaction-history</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">--account-index</span><span style="color:#24292E;"> </span><span style="color:#032F62;">spl-token-mint</span><span style="color:#24292E;"> </span><span style="color:#032F62;">program-id</span><span style="color:#24292E;"> </span><span style="color:#032F62;">spl-token-owner</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#005CC5;">--log</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/data/solana/solana-validator.log</span></span></code></pre></div><blockquote><p>注意修改ip</p></blockquote><ul><li>脚本授权</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+x</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data/apps/solana/validator.sh</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">chmod</span><span style="color:#24292E;"> </span><span style="color:#032F62;">+x</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/data/apps/solana/validator.sh</span></span></code></pre></div><h3 id="_2-配置systemd" tabindex="-1">2.配置systemd <a class="header-anchor" href="#_2-配置systemd" aria-label="Permalink to &quot;2.配置systemd&quot;">​</a></h3><ul><li>创建sol用户</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">useradd</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-rs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/bin/</span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">sol</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">chown</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-R</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">sol.</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data/apps/solana</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">chown</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-R</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">sol.</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data/solana</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">useradd</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-rs</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/bin/</span><span style="color:#005CC5;">false</span><span style="color:#24292E;"> </span><span style="color:#032F62;">sol</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">chown</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-R</span><span style="color:#24292E;"> </span><span style="color:#032F62;">sol.</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/data/apps/solana</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">chown</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-R</span><span style="color:#24292E;"> </span><span style="color:#032F62;">sol.</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/data/solana</span></span></code></pre></div><ul><li>创建配置文件</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/systemd/system/sol.service</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"><span style="color:#9ECBFF;">[Unit]</span></span>
<span class="line"><span style="color:#9ECBFF;">Description=Solana Validator</span></span>
<span class="line"><span style="color:#9ECBFF;">Documentation=https://solana.com/zh</span></span>
<span class="line"><span style="color:#9ECBFF;">After=network.target</span></span>
<span class="line"><span style="color:#9ECBFF;">Wants=solana-sys-tuner.service</span></span>
<span class="line"><span style="color:#9ECBFF;">StartLimitIntervalSec=0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF;">[Service]</span></span>
<span class="line"><span style="color:#9ECBFF;">Type=simple</span></span>
<span class="line"><span style="color:#9ECBFF;">Restart=always</span></span>
<span class="line"><span style="color:#9ECBFF;">RestartSec=1</span></span>
<span class="line"><span style="color:#9ECBFF;">User=sol</span></span>
<span class="line"><span style="color:#9ECBFF;">LimitNOFILE=1000000</span></span>
<span class="line"><span style="color:#9ECBFF;">LogRateLimitIntervalSec=0</span></span>
<span class="line"><span style="color:#9ECBFF;">Environment=&quot;PATH=/data/apps/solana/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span></span>
<span class="line"><span style="color:#9ECBFF;">ExecStart=/data/apps/solana/validator.sh</span></span>
<span class="line"><span style="color:#9ECBFF;">KillMode=process</span></span>
<span class="line"><span style="color:#9ECBFF;">[Install]</span></span>
<span class="line"><span style="color:#9ECBFF;">WantedBy=multi-user.target</span></span>
<span class="line"><span style="color:#9ECBFF;">EOF</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/systemd/system/sol.service</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#032F62;">EOF</span></span>
<span class="line"><span style="color:#032F62;">[Unit]</span></span>
<span class="line"><span style="color:#032F62;">Description=Solana Validator</span></span>
<span class="line"><span style="color:#032F62;">Documentation=https://solana.com/zh</span></span>
<span class="line"><span style="color:#032F62;">After=network.target</span></span>
<span class="line"><span style="color:#032F62;">Wants=solana-sys-tuner.service</span></span>
<span class="line"><span style="color:#032F62;">StartLimitIntervalSec=0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62;">[Service]</span></span>
<span class="line"><span style="color:#032F62;">Type=simple</span></span>
<span class="line"><span style="color:#032F62;">Restart=always</span></span>
<span class="line"><span style="color:#032F62;">RestartSec=1</span></span>
<span class="line"><span style="color:#032F62;">User=sol</span></span>
<span class="line"><span style="color:#032F62;">LimitNOFILE=1000000</span></span>
<span class="line"><span style="color:#032F62;">LogRateLimitIntervalSec=0</span></span>
<span class="line"><span style="color:#032F62;">Environment=&quot;PATH=/data/apps/solana/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span></span>
<span class="line"><span style="color:#032F62;">ExecStart=/data/apps/solana/validator.sh</span></span>
<span class="line"><span style="color:#032F62;">KillMode=process</span></span>
<span class="line"><span style="color:#032F62;">[Install]</span></span>
<span class="line"><span style="color:#032F62;">WantedBy=multi-user.target</span></span>
<span class="line"><span style="color:#032F62;">EOF</span></span></code></pre></div><ul><li>启动</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">daemon-reload</span></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">enable</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--now</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">sol</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">daemon-reload</span></span>
<span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">enable</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--now</span><span style="color:#24292E;"> </span><span style="color:#032F62;">sol</span></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">❌ 注意</p><p>节点启动之后会下载snapshot，等下载之后再解压，之后才会启动8899端口，需要一段时间才能进行验证</p></div><h3 id="_3-验证节点" tabindex="-1">3.验证节点 <a class="header-anchor" href="#_3-验证节点" aria-label="Permalink to &quot;3.验证节点&quot;">​</a></h3><ul><li>查看端口</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">netstat</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-lnptu</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">8899</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">netstat</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-lnptu</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">grep</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">8899</span></span></code></pre></div><ul><li>查看mainnet集群信息</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">curl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-X</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">POST</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-H</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;Content-Type: application/json&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:1, &quot;method&quot;:&quot;getClusterNodes&quot;}&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">http://api.mainnet-beta.solana.com</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">curl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-X</span><span style="color:#24292E;"> </span><span style="color:#032F62;">POST</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-H</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;Content-Type: application/json&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:1, &quot;method&quot;:&quot;getClusterNodes&quot;}&#39;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">http://api.mainnet-beta.solana.com</span></span></code></pre></div><blockquote><p>输出信息中会包含我们自己的节点信息</p></blockquote><ul><li>列出了所有已在协议中注册的验证者</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#查看pubkey</span></span>
<span class="line"><span style="color:#B392F0;">solana-keygen</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pubkey</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data/apps/solana/validator-keypair.json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">$solana gossip </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;</span><span style="color:#9ECBFF;">pubke</span><span style="color:#E1E4E8;">y</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">139.178.68.207</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">5D1fNXzvv5NjV1ysLjirC4WY92RNsVH18vjmcszZd8on</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">8001</span><span style="color:#E1E4E8;">   </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">8004</span><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">139.178.68.207:80</span><span style="color:#E1E4E8;">     </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">1.14.17</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">3488713414</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#查看pubkey</span></span>
<span class="line"><span style="color:#6F42C1;">solana-keygen</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pubkey</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/data/apps/solana/validator-keypair.json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">$solana gossip </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">grep</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;</span><span style="color:#032F62;">pubke</span><span style="color:#24292E;">y</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">139.178.68.207</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">5D1fNXzvv5NjV1ysLjirC4WY92RNsVH18vjmcszZd8on</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">8001</span><span style="color:#24292E;">   </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">8004</span><span style="color:#24292E;">  </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">139.178.68.207:80</span><span style="color:#24292E;">     </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">1.14.17</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">3488713414</span></span></code></pre></div><h3 id="_4-配置日志切换" tabindex="-1">4.配置日志切换 <a class="header-anchor" href="#_4-配置日志切换" aria-label="Permalink to &quot;4.配置日志切换&quot;">​</a></h3><ul><li>创建配置</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/logrotate.d/logrotate.sol</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#9ECBFF;">EOF</span></span>
<span class="line"><span style="color:#9ECBFF;">/data/solana/solana-validator.log {</span></span>
<span class="line"><span style="color:#9ECBFF;">  rotate 7</span></span>
<span class="line"><span style="color:#9ECBFF;">  daily</span></span>
<span class="line"><span style="color:#9ECBFF;">  missingok</span></span>
<span class="line"><span style="color:#9ECBFF;">  postrotate</span></span>
<span class="line"><span style="color:#9ECBFF;">    systemctl kill -s USR1 sol.service</span></span>
<span class="line"><span style="color:#9ECBFF;">  endscript</span></span>
<span class="line"><span style="color:#9ECBFF;">}</span></span>
<span class="line"><span style="color:#9ECBFF;">EOF</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/logrotate.d/logrotate.sol</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#032F62;">EOF</span></span>
<span class="line"><span style="color:#032F62;">/data/solana/solana-validator.log {</span></span>
<span class="line"><span style="color:#032F62;">  rotate 7</span></span>
<span class="line"><span style="color:#032F62;">  daily</span></span>
<span class="line"><span style="color:#032F62;">  missingok</span></span>
<span class="line"><span style="color:#032F62;">  postrotate</span></span>
<span class="line"><span style="color:#032F62;">    systemctl kill -s USR1 sol.service</span></span>
<span class="line"><span style="color:#032F62;">  endscript</span></span>
<span class="line"><span style="color:#032F62;">}</span></span>
<span class="line"><span style="color:#032F62;">EOF</span></span></code></pre></div><ul><li>重启服务</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">restart</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">logrotate.service</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">restart</span><span style="color:#24292E;"> </span><span style="color:#032F62;">logrotate.service</span></span></code></pre></div>`,87),e=[o];function t(c,r,y,i,E,F){return a(),n("div",null,e)}const C=s(p,[["render",t]]);export{h as __pageData,C as default};
