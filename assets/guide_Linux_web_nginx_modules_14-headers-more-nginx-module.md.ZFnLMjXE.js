import{_ as e,o as s,c as a,R as n}from"./chunks/framework.zUbWieqp.js";const y=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"guide/Linux/web/nginx/modules/14-headers-more-nginx-module.md","filePath":"guide/Linux/web/nginx/modules/14-headers-more-nginx-module.md","lastUpdated":1701684699000}'),o={name:"guide/Linux/web/nginx/modules/14-headers-more-nginx-module.md"},l=n(`<h2 id="_0-简介" tabindex="-1">0.简介 <a class="header-anchor" href="#_0-简介" aria-label="Permalink to &quot;0.简介&quot;">​</a></h2><p><code>nginx</code> 的 <code>headers_more</code> 模块用于 添加、修改或清除 请求/响应头，该模块不是 <code>nginx</code> 自带的，默认不包含该模块，需要另外安装。幸运的是 <code>openresty</code> 默认包含了该模块，可以直接使用</p><h2 id="_1-下载" tabindex="-1">1.下载 <a class="header-anchor" href="#_1-下载" aria-label="Permalink to &quot;1.下载&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">wget https://github.com/openresty/headers-more-nginx-module/archive/v0.33.tar.gz</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">wget https://github.com/openresty/headers-more-nginx-module/archive/v0.33.tar.gz</span></span></code></pre></div><h2 id="_2-编译" tabindex="-1">2.编译 <a class="header-anchor" href="#_2-编译" aria-label="Permalink to &quot;2.编译&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">/configure --prefix=/app/nginx112 --add-module=/app/tools/headers-more-nginx-module-0.33</span></span>
<span class="line"><span style="color:#e1e4e8;"># 编辑，切记没有make install</span></span>
<span class="line"><span style="color:#e1e4e8;">make</span></span>
<span class="line"><span style="color:#e1e4e8;"># 备份</span></span>
<span class="line"><span style="color:#e1e4e8;">cp /app/nginx112/sbin/nginx /app/nginx112/sbin/nginx.bak</span></span>
<span class="line"><span style="color:#e1e4e8;"># 覆盖(覆盖提示输入y)</span></span>
<span class="line"><span style="color:#e1e4e8;">cp -f /app/nginx-1.12.2/objs/nginx /app/nginx112/sbin/nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">/configure --prefix=/app/nginx112 --add-module=/app/tools/headers-more-nginx-module-0.33</span></span>
<span class="line"><span style="color:#24292e;"># 编辑，切记没有make install</span></span>
<span class="line"><span style="color:#24292e;">make</span></span>
<span class="line"><span style="color:#24292e;"># 备份</span></span>
<span class="line"><span style="color:#24292e;">cp /app/nginx112/sbin/nginx /app/nginx112/sbin/nginx.bak</span></span>
<span class="line"><span style="color:#24292e;"># 覆盖(覆盖提示输入y)</span></span>
<span class="line"><span style="color:#24292e;">cp -f /app/nginx-1.12.2/objs/nginx /app/nginx112/sbin/nginx</span></span></code></pre></div><h2 id="_3-案例" tabindex="-1">3.案例 <a class="header-anchor" href="#_3-案例" aria-label="Permalink to &quot;3.案例&quot;">​</a></h2><h3 id="语法" tabindex="-1">语法 <a class="header-anchor" href="#语法" aria-label="Permalink to &quot;语法&quot;">​</a></h3><p>官方文档，<a href="https://github.com/openresty/headers-more-nginx-module#more_set_headers" target="_blank" rel="noreferrer">https://github.com/openresty/headers-more-nginx-module#more_set_headers</a></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">配置段：http, server, location, location if</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">配置段：http, server, location, location if</span></span></code></pre></div><h3 id="删除响应头" tabindex="-1">删除响应头 <a class="header-anchor" href="#删除响应头" aria-label="Permalink to &quot;删除响应头&quot;">​</a></h3><p>去掉 X-Powered-By 和 Server 响应头：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">more_clear_headers X-Powered-By Server;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">more_clear_headers X-Powered-By Server;</span></span></code></pre></div><h3 id="自定义-覆盖-响应头" tabindex="-1">自定义 / 覆盖 响应头 <a class="header-anchor" href="#自定义-覆盖-响应头" aria-label="Permalink to &quot;自定义 / 覆盖 响应头&quot;">​</a></h3><p>去掉 <code>X-Powered-By</code> 响应头，增加一个 <code>X-Author</code> 响应头，修改 <code>Server</code> 响应头为 <code>Apache</code> ，伪装一下</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">more_clear_headers X-Powered-By;</span></span>
<span class="line"><span style="color:#e1e4e8;">more_set_headers &quot;X-Author: Lcy&quot; &quot;Server: Apache 2.4&quot;;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">more_clear_headers X-Powered-By;</span></span>
<span class="line"><span style="color:#24292e;">more_set_headers &quot;X-Author: Lcy&quot; &quot;Server: Apache 2.4&quot;;</span></span></code></pre></div><h3 id="去掉请求头" tabindex="-1">去掉请求头 <a class="header-anchor" href="#去掉请求头" aria-label="Permalink to &quot;去掉请求头&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">location / {</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">more_clear_input_headers &quot;Accept-Encoding&quot;;</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">location / {</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">more_clear_input_headers &quot;Accept-Encoding&quot;;</span></span>
<span class="line"><span style="color:#24292e;">}</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">more_set_headers &quot;Server: ttlsa.com Web Server&quot;;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">more_clear_headers &quot;Content-Type:&quot;;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">more_clear_headers &quot;Accept-Ranges: &quot;;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">more_clear_headers &quot;Content-Length: &quot;;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">more_clear_headers Server;</span></span>
<span class="line"><span style="color:#e1e4e8;">#禁止返回 Date</span></span>
<span class="line"><span style="color:#e1e4e8;">more_clear_headers Date;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">more_set_headers &quot;Server: ttlsa.com Web Server&quot;;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">more_clear_headers &quot;Content-Type:&quot;;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">more_clear_headers &quot;Accept-Ranges: &quot;;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">more_clear_headers &quot;Content-Length: &quot;;</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">more_clear_headers Server;</span></span>
<span class="line"><span style="color:#24292e;">#禁止返回 Date</span></span>
<span class="line"><span style="color:#24292e;">more_clear_headers Date;</span></span></code></pre></div><blockquote><p>注意</p><p>不同于标准头模块，该模块不会对下面头有效： Expires, Cache-Control, 和Last-Modified</p></blockquote>`,20),p=[l];function t(c,r,i,d,h,u){return s(),a("div",null,p)}const _=e(o,[["render",t]]);export{y as __pageData,_ as default};
