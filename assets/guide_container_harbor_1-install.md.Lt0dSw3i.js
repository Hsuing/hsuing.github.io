import{_ as s,o as a,c as n,R as l}from"./chunks/framework.zUbWieqp.js";const F=JSON.parse('{"title":"1. 文档","description":"","frontmatter":{},"headers":[],"relativePath":"guide/container/harbor/1-install.md","filePath":"guide/container/harbor/1-install.md","lastUpdated":1723470142000}'),o={name:"guide/container/harbor/1-install.md"},p=l(`<h1 id="_1-文档" tabindex="-1">1. 文档 <a class="header-anchor" href="#_1-文档" aria-label="Permalink to &quot;1. 文档&quot;">​</a></h1><p>官网：<a href="https://goharbor.io/" target="_blank" rel="noreferrer">https://goharbor.io/</a></p><p>GitHub地址： <a href="https://github.com/goharbor/harbor" target="_blank" rel="noreferrer">https://github.com/goharbor/harbor</a></p><p>官方安装文档： <a href="https://goharbor.io/docs/2.4.0/install-config/" target="_blank" rel="noreferrer">https://goharbor.io/docs/2.4.0/install-config/</a></p><h1 id="_1-安装" tabindex="-1">1. 安装 <a class="header-anchor" href="#_1-安装" aria-label="Permalink to &quot;1. 安装&quot;">​</a></h1><ul><li>安装要求</li></ul><p>依赖 Docker和Docker Compose</p><ul><li>硬件需求</li></ul><table><thead><tr><th>Resource</th><th>Minimum</th><th>Recommended</th></tr></thead><tbody><tr><td>CPU</td><td>2 CPU</td><td>4 CPU</td></tr><tr><td>Mem</td><td>4 GB</td><td>8 GB</td></tr><tr><td>Disk</td><td>40 GB</td><td>160 GB</td></tr></tbody></table><ul><li><h1 id="软件需求" tabindex="-1">软件需求 <a class="header-anchor" href="#软件需求" aria-label="Permalink to &quot;软件需求&quot;">​</a></h1></li></ul><table><thead><tr><th>Software</th><th>Version</th><th>Description</th></tr></thead><tbody><tr><td>Docker engine</td><td>Version 17.06.0-ce+ or higher</td><td></td></tr><tr><td>Docker Compose</td><td>Version 1.18.0 or higher</td><td>安装文档参考：docker-compose容器编排</td></tr><tr><td>Openssl</td><td>Latest is preferred</td><td>Used to generate certificate and keys for Harbor yum install -y openssl openssl-devel</td></tr></tbody></table><ul><li><h1 id="开放端口" tabindex="-1">开放端口 <a class="header-anchor" href="#开放端口" aria-label="Permalink to &quot;开放端口&quot;">​</a></h1></li></ul><table><thead><tr><th>Port</th><th>Protocol</th><th>Description</th></tr></thead><tbody><tr><td>443</td><td>HTTPS</td><td>Harbor portal and core API accept HTTPS requests on this port. You can change this port in the configuration file.</td></tr><tr><td>4443</td><td>HTTPS</td><td>Connections to the Docker Content Trust service for Harbor. Only required if Notary is enabled. You can change this port in the configuration file.</td></tr><tr><td>80</td><td>HTTP</td><td>Harbor portal and core API accept HTTP requests on this port. You can change this port in the configuration file.</td></tr></tbody></table><h2 id="_1-1-下载" tabindex="-1">1.1 下载 <a class="header-anchor" href="#_1-1-下载" aria-label="Permalink to &quot;1.1 下载&quot;">​</a></h2><ul><li>docker-compose</li></ul><p><a href="https://github.com/docker/compose/releases/" target="_blank" rel="noreferrer">https://github.com/docker/compose/releases/</a></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;"> wget</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://github.com/docker/compose/releases/download/v2.20.3/docker-compose-linux-x86_64</span></span>
<span class="line"><span style="color:#B392F0;"> </span></span>
<span class="line"><span style="color:#B392F0;"> 或者</span></span>
<span class="line"><span style="color:#B392F0;"> curl</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-L</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;https://github.com/docker/compose/releases/download/1.24.1/docker-compose-$(</span><span style="color:#B392F0;">uname</span><span style="color:#9ECBFF;"> </span><span style="color:#79B8FF;">-s</span><span style="color:#9ECBFF;">)-$(</span><span style="color:#B392F0;">uname</span><span style="color:#9ECBFF;"> </span><span style="color:#79B8FF;">-m</span><span style="color:#9ECBFF;">)&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-o</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/local/bin/docker-compose</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;"> wget</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://github.com/docker/compose/releases/download/v2.20.3/docker-compose-linux-x86_64</span></span>
<span class="line"><span style="color:#6F42C1;"> </span></span>
<span class="line"><span style="color:#6F42C1;"> 或者</span></span>
<span class="line"><span style="color:#6F42C1;"> curl</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-L</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;https://github.com/docker/compose/releases/download/1.24.1/docker-compose-$(</span><span style="color:#6F42C1;">uname</span><span style="color:#032F62;"> </span><span style="color:#005CC5;">-s</span><span style="color:#032F62;">)-$(</span><span style="color:#6F42C1;">uname</span><span style="color:#032F62;"> </span><span style="color:#005CC5;">-m</span><span style="color:#032F62;">)&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-o</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/local/bin/docker-compose</span></span></code></pre></div><ul><li>install</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">mv</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">docker-compose-linux-x86_64</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/local/sbin/docker-compose</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看版本</span></span>
<span class="line"><span style="color:#B392F0;">docker-compose</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">mv</span><span style="color:#24292E;">  </span><span style="color:#032F62;">docker-compose-linux-x86_64</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/local/sbin/docker-compose</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#查看版本</span></span>
<span class="line"><span style="color:#6F42C1;">docker-compose</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span></span></code></pre></div><ul><li>harbor</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">wget</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://github.com/goharbor/harbor/releases/download/v2.7.3/harbor-offline-installer-v2.7.3.tgz</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">wget</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://github.com/goharbor/harbor/releases/download/v2.7.3/harbor-offline-installer-v2.7.3.tgz</span></span></code></pre></div><h2 id="_1-2-配置" tabindex="-1">1.2 配置 <a class="header-anchor" href="#_1-2-配置" aria-label="Permalink to &quot;1.2 配置&quot;">​</a></h2><ul><li>修改配置文件</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">mv</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">harbor.yml.tmpl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">harbor.yml</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">mv</span><span style="color:#24292E;"> </span><span style="color:#032F62;">harbor.yml.tmpl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">harbor.yml</span></span></code></pre></div><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">hostname</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">hub.xxx.com</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 修改域名</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 关闭http访问方式</span></span>
<span class="line"><span style="color:#85E89D;">http</span><span style="color:#E1E4E8;">: </span></span>
<span class="line"><span style="color:#6A737D;">#  # port for http, default is 80. If https enabled, this port will redirect to https port</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">port</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">80</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># https related config</span></span>
<span class="line"><span style="color:#6A737D;">#https:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># https port for harbor, default is 443</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># port: 443</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># The path of cert and key files for nginx</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># certificate: /data/docker/harbor/cert/hub.guoliangjun.com.crt #取消注释，填写实际路径</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># private_key: /data/docker/harbor/cert/hub.guoliangjun.com.key #取消注释，填写实际路径</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D;">harbor_admin_password</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">harbor123456</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># admin用户登入密码</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D;">database</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">password</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">root123</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># 数据库密码</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">max_idle_conns</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">100</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">max_open_conns</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">900</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># The default data volume</span></span>
<span class="line"><span style="color:#85E89D;">data_volume</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/data/harbor</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#目录自己创建，根据实际情况填写</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">hostname</span><span style="color:#24292E;">: </span><span style="color:#032F62;">hub.xxx.com</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># 修改域名</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 关闭http访问方式</span></span>
<span class="line"><span style="color:#22863A;">http</span><span style="color:#24292E;">: </span></span>
<span class="line"><span style="color:#6A737D;">#  # port for http, default is 80. If https enabled, this port will redirect to https port</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">port</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">80</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># https related config</span></span>
<span class="line"><span style="color:#6A737D;">#https:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;"># https port for harbor, default is 443</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6A737D;"># port: 443</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;"># The path of cert and key files for nginx</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6A737D;"># certificate: /data/docker/harbor/cert/hub.guoliangjun.com.crt #取消注释，填写实际路径</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6A737D;"># private_key: /data/docker/harbor/cert/hub.guoliangjun.com.key #取消注释，填写实际路径</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863A;">harbor_admin_password</span><span style="color:#24292E;">: </span><span style="color:#032F62;">harbor123456</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># admin用户登入密码</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863A;">database</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">password</span><span style="color:#24292E;">: </span><span style="color:#032F62;">root123</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># 数据库密码</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">max_idle_conns</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">100</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">max_open_conns</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">900</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># The default data volume</span></span>
<span class="line"><span style="color:#22863A;">data_volume</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/data/harbor</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#目录自己创建，根据实际情况填写</span></span></code></pre></div><ul><li>创建目录</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">mkdir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/data/harbor</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">mkdir</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/data/harbor</span></span></code></pre></div><h2 id="_1-3-启动服务" tabindex="-1">1.3 启动服务 <a class="header-anchor" href="#_1-3-启动服务" aria-label="Permalink to &quot;1.3 启动服务&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#重新加载配置</span></span>
<span class="line"><span style="color:#B392F0;">sh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">./prepare</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#安装</span></span>
<span class="line"><span style="color:#B392F0;">sh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">./install.sh</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#重新加载配置</span></span>
<span class="line"><span style="color:#6F42C1;">sh</span><span style="color:#24292E;"> </span><span style="color:#032F62;">./prepare</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#安装</span></span>
<span class="line"><span style="color:#6F42C1;">sh</span><span style="color:#24292E;"> </span><span style="color:#032F62;">./install.sh</span></span></code></pre></div><ul><li>测试访问</li></ul><p><a href="http://ip" target="_blank" rel="noreferrer">http://ip</a></p><p>用户名：admin</p><p>密码：看harbor_admin_password参数</p><h2 id="_1-4-配置仓库地址" tabindex="-1">1.4 配置仓库地址 <a class="header-anchor" href="#_1-4-配置仓库地址" aria-label="Permalink to &quot;1.4 配置仓库地址&quot;">​</a></h2><ul><li>01.添加docker仓库地址</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">vim</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/docker/daemon.json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">&quot;insecure-registries&quot;</span><span style="color:#79B8FF;">:</span><span style="color:#E1E4E8;"> [</span><span style="color:#9ECBFF;">&quot;http://hub.xxx.com&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#重启服务</span></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">daemon-reload</span><span style="color:#E1E4E8;"> &amp;&amp; </span><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">restart</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker</span><span style="color:#E1E4E8;"> &amp;&amp; </span><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">vim</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/docker/daemon.json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">&quot;insecure-registries&quot;</span><span style="color:#005CC5;">:</span><span style="color:#24292E;"> [</span><span style="color:#032F62;">&quot;http://hub.xxx.com&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#重启服务</span></span>
<span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">daemon-reload</span><span style="color:#24292E;"> &amp;&amp; </span><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">restart</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker</span><span style="color:#24292E;"> &amp;&amp; </span><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker</span></span></code></pre></div><ul><li>02.证书添加docker仓库地址</li></ul><p>参考，<a href="https://goharbor.io/docs/2.6.0/install-config/configure-https/" target="_blank" rel="noreferrer">https://goharbor.io/docs/2.6.0/install-config/configure-https/</a></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#要将harbor服务端生成的CA证书拷贝到每个远程客户机的&quot;/etc/docker/certs.d/harbor服务器的域名或ip/&quot;目录下</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">[root@localhost hub.xxx.com]# pwd</span></span>
<span class="line"><span style="color:#B392F0;">/etc/docker/certs.d/hub.xxx.com</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@localhost hub.xxx.com]#</span></span>
<span class="line"><span style="color:#E1E4E8;">[root@localhost hub.xxx.com]# ls -l</span></span>
<span class="line"><span style="color:#B392F0;">总用量</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">4</span></span>
<span class="line"><span style="color:#B392F0;">-rw-r--r--</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">root</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">root</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2041</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">12</span><span style="color:#9ECBFF;">月</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">14</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">22</span><span style="color:#9ECBFF;">:36</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ca.crt</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#重启服务</span></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">daemon-reload</span><span style="color:#E1E4E8;"> &amp;&amp; </span><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">restart</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker</span><span style="color:#E1E4E8;"> &amp;&amp; </span><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#要将harbor服务端生成的CA证书拷贝到每个远程客户机的&quot;/etc/docker/certs.d/harbor服务器的域名或ip/&quot;目录下</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">[root@localhost hub.xxx.com]# pwd</span></span>
<span class="line"><span style="color:#6F42C1;">/etc/docker/certs.d/hub.xxx.com</span></span>
<span class="line"><span style="color:#24292E;">[root@localhost hub.xxx.com]#</span></span>
<span class="line"><span style="color:#24292E;">[root@localhost hub.xxx.com]# ls -l</span></span>
<span class="line"><span style="color:#6F42C1;">总用量</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">4</span></span>
<span class="line"><span style="color:#6F42C1;">-rw-r--r--</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#032F62;">root</span><span style="color:#24292E;"> </span><span style="color:#032F62;">root</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2041</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">12</span><span style="color:#032F62;">月</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">14</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">22</span><span style="color:#032F62;">:36</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ca.crt</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">#重启服务</span></span>
<span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">daemon-reload</span><span style="color:#24292E;"> &amp;&amp; </span><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">restart</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker</span><span style="color:#24292E;"> &amp;&amp; </span><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker</span></span></code></pre></div><h2 id="_1-5-登录harbor" tabindex="-1">1.5 登录harbor <a class="header-anchor" href="#_1-5-登录harbor" aria-label="Permalink to &quot;1.5 登录harbor&quot;">​</a></h2><p>docker login -u 用户 -p 密码 服务器IP：端口</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">[root@localhost docker]# docker login -u admin -p Harbor12345 http://hub.xxx.com</span></span>
<span class="line"><span style="color:#e1e4e8;">WARNING! Using --password via the CLI is insecure. Use --password-stdin.</span></span>
<span class="line"><span style="color:#e1e4e8;">WARNING! Your password will be stored unencrypted in /root/.docker/config.json.</span></span>
<span class="line"><span style="color:#e1e4e8;">Configure a credential helper to remove this warning. See</span></span>
<span class="line"><span style="color:#e1e4e8;">https://docs.docker.com/engine/reference/commandline/login/#credentials-store</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">Login Succeeded</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">[root@localhost docker]# docker login -u admin -p Harbor12345 http://hub.xxx.com</span></span>
<span class="line"><span style="color:#24292e;">WARNING! Using --password via the CLI is insecure. Use --password-stdin.</span></span>
<span class="line"><span style="color:#24292e;">WARNING! Your password will be stored unencrypted in /root/.docker/config.json.</span></span>
<span class="line"><span style="color:#24292e;">Configure a credential helper to remove this warning. See</span></span>
<span class="line"><span style="color:#24292e;">https://docs.docker.com/engine/reference/commandline/login/#credentials-store</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">Login Succeeded</span></span></code></pre></div><ul><li>重启harbor服务</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path/harbor/</span></span>
<span class="line"><span style="color:#B392F0;">docker-compose</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">stop</span></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">stop</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker</span></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">daemon-reload</span></span>
<span class="line"><span style="color:#B392F0;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker</span></span>
<span class="line"><span style="color:#B392F0;">docker-compose</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/path/harbor/</span></span>
<span class="line"><span style="color:#6F42C1;">docker-compose</span><span style="color:#24292E;"> </span><span style="color:#032F62;">stop</span></span>
<span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">stop</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker</span></span>
<span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">daemon-reload</span></span>
<span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker</span></span>
<span class="line"><span style="color:#6F42C1;">docker-compose</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span></span></code></pre></div><h2 id="_1-6-卸载" tabindex="-1">1.6 卸载 <a class="header-anchor" href="#_1-6-卸载" aria-label="Permalink to &quot;1.6 卸载&quot;">​</a></h2><p>docker-compose down 或者：docker rm -f $(docker ps -aq)</p>`,46),e=[p];function t(r,c,i,y,d,h){return a(),n("div",null,e)}const u=s(o,[["render",t]]);export{F as __pageData,u as default};
