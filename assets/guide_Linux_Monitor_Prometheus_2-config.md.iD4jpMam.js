import{_ as s,o as a,c as n,R as l}from"./chunks/framework.zUbWieqp.js";const u=JSON.parse('{"title":"1. prometheus.yml配置文件","description":"","frontmatter":{},"headers":[],"relativePath":"guide/Linux/Monitor/Prometheus/2-config.md","filePath":"guide/Linux/Monitor/Prometheus/2-config.md","lastUpdated":1739441864000}'),e={name:"guide/Linux/Monitor/Prometheus/2-config.md"},o=l(`<p><a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/" target="_blank" rel="noreferrer">配置文件</a></p><h1 id="_1-prometheus-yml配置文件" tabindex="-1">1. prometheus.yml配置文件 <a class="header-anchor" href="#_1-prometheus-yml配置文件" aria-label="Permalink to &quot;1. prometheus.yml配置文件&quot;">​</a></h1><p>大致分为四类</p><h2 id="_1-1-global配置块" tabindex="-1">1.1 global配置块 <a class="header-anchor" href="#_1-1-global配置块" aria-label="Permalink to &quot;1.1 global配置块&quot;">​</a></h2><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">global</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">scrape_interval</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">2m</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">scrape_timeout</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">10s</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">evaluation_interval</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">4m</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">global</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">scrape_interval</span><span style="color:#24292E;">: </span><span style="color:#032F62;">2m</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">scrape_timeout</span><span style="color:#24292E;">: </span><span style="color:#032F62;">10s</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">evaluation_interval</span><span style="color:#24292E;">: </span><span style="color:#032F62;">4m</span></span></code></pre></div><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>scrape_interval</td><td>用来指定Prometheus从监控端抓取数据的时间间隔（默认为15s），如果在特定的job指定时间间隔指标，则该job的配置会覆盖全局设置</td></tr><tr><td>scrape_timeout</td><td>拉取实例指标的超时时间</td></tr><tr><td>evaluation_interval</td><td>用于指定检测告警规则的时间间隔，每15s重新检测告警规则，并对变更进行更新</td></tr></tbody></table><h2 id="_1-2-alertmanager配置块" tabindex="-1">1.2 Alertmanager配置块 <a class="header-anchor" href="#_1-2-alertmanager配置块" aria-label="Permalink to &quot;1.2 Alertmanager配置块&quot;">​</a></h2><p><a href="https://prometheus.io/docs/alerting/latest/alertmanager/" target="_blank" rel="noreferrer">官当</a></p><p>用于设置Prometheus与Alertmanager的通信，在Prometheus的整体架构中，Prometheus会根据配置的告警规则触发警报并发送到独立的Alertmanager组件，Alertmanager将对告警进行管理并发送给相关的用户。</p><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">alerting</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">alertmanagers</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">scheme</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">http</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">timeout</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">10s</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">static_configs</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">targets</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">        - </span><span style="color:#9ECBFF;">localhost:9093</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">alerting</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">alertmanagers</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">scheme</span><span style="color:#24292E;">: </span><span style="color:#032F62;">http</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">timeout</span><span style="color:#24292E;">: </span><span style="color:#032F62;">10s</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">static_configs</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">targets</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">        - </span><span style="color:#032F62;">localhost:9093</span></span></code></pre></div><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>scheme</td><td>配置如何访问alertmanager，可使用http或https</td></tr><tr><td>timeout</td><td>配置与alertmanager连接的超时时间</td></tr><tr><td>static_configs</td><td>配置alertmanager的地址信息</td></tr></tbody></table><h2 id="_1-3-rule-files配置块" tabindex="-1">1.3 rule_files配置块 <a class="header-anchor" href="#_1-3-rule-files配置块" aria-label="Permalink to &quot;1.3 rule_files配置块&quot;">​</a></h2><p>用于指定告警规则的文件路径，文件格式为yml</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">rule_files</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#9ECBFF;">&quot;alert.yml&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#单个文件</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#9ECBFF;">&quot;rules/*.yml&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#配置目录</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">rule_files</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#032F62;">&quot;alert.yml&quot;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#单个文件</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#032F62;">&quot;rules/*.yml&quot;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#配置目录</span></span></code></pre></div><h2 id="_1-4-scrape-config-配置块" tabindex="-1">1.4 scrape_config 配置块 <a class="header-anchor" href="#_1-4-scrape-config-配置块" aria-label="Permalink to &quot;1.4 scrape_config 配置块&quot;">​</a></h2><p><a href="https://prometheus.io/docs/prometheus/2.55/configuration/configuration/" target="_blank" rel="noreferrer">官当</a></p><p>用于指定Prometheus抓取的目标信息</p><div class="language-yml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">scrape_configs</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  - </span><span style="color:#85E89D;">job_name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;prometheus&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">static_configs</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">targets</span><span style="color:#E1E4E8;">: [</span><span style="color:#9ECBFF;">&#39;localhost:9090&#39;</span><span style="color:#E1E4E8;">]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">scrape_configs</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  - </span><span style="color:#22863A;">job_name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;prometheus&#39;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">static_configs</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">targets</span><span style="color:#24292E;">: [</span><span style="color:#032F62;">&#39;localhost:9090&#39;</span><span style="color:#24292E;">]</span></span></code></pre></div><p><a href="https://yasongxu.gitbook.io/container-monitor/yi-.-kai-yuan-fang-an/di-2-zhang-prometheus/prometheus-de-pei-zhi-yu-fu-wu-fa-xian" target="_blank" rel="noreferrer">https://yasongxu.gitbook.io/container-monitor/yi-.-kai-yuan-fang-an/di-2-zhang-prometheus/prometheus-de-pei-zhi-yu-fu-wu-fa-xian</a></p>`,19),p=[o];function t(r,c,i,y,E,d){return a(),n("div",null,p)}const m=s(e,[["render",t]]);export{u as __pageData,m as default};
