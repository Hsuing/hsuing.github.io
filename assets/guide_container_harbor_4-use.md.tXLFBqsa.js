import{_ as s,o as a,c as n,R as e}from"./chunks/framework.zUbWieqp.js";const E=JSON.parse('{"title":"1. Harbor仓库使用","description":"","frontmatter":{},"headers":[],"relativePath":"guide/container/harbor/4-use.md","filePath":"guide/container/harbor/4-use.md","lastUpdated":1723470142000}'),l={name:"guide/container/harbor/4-use.md"},o=e(`<h1 id="_1-harbor仓库使用" tabindex="-1">1. Harbor仓库使用 <a class="header-anchor" href="#_1-harbor仓库使用" aria-label="Permalink to &quot;1. Harbor仓库使用&quot;">​</a></h1><h2 id="_1-1-登录web-harbor" tabindex="-1">1.1 登录Web Harbor <a class="header-anchor" href="#_1-1-登录web-harbor" aria-label="Permalink to &quot;1.1 登录Web Harbor&quot;">​</a></h2><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/ha1.jpg" alt=""></p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/ha2.jpg" alt=""></p><h2 id="_1-2-使用" tabindex="-1">1.2 使用 <a class="header-anchor" href="#_1-2-使用" aria-label="Permalink to &quot;1.2 使用&quot;">​</a></h2><h3 id="_1-1-1-创建用户" tabindex="-1">1.1.1 创建用户 <a class="header-anchor" href="#_1-1-1-创建用户" aria-label="Permalink to &quot;1.1.1 创建用户&quot;">​</a></h3><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/ha3.jpg" alt=""></p><h3 id="_1-1-2-创建项目" tabindex="-1">1.1.2 创建项目 <a class="header-anchor" href="#_1-1-2-创建项目" aria-label="Permalink to &quot;1.1.2 创建项目&quot;">​</a></h3><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/ha4.jpg" alt=""></p><p><code>新建项目，会自动把管理员加入进来</code></p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/ha6.jpg" alt=""></p><h3 id="_1-1-3-新建成员" tabindex="-1">1.1.3 新建成员 <a class="header-anchor" href="#_1-1-3-新建成员" aria-label="Permalink to &quot;1.1.3 新建成员&quot;">​</a></h3><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/ha5.jpg" alt=""></p><h3 id="_1-1-4-推送" tabindex="-1">1.1.4 推送 <a class="header-anchor" href="#_1-1-4-推送" aria-label="Permalink to &quot;1.1.4 推送&quot;">​</a></h3><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/ha7.jpg" alt=""></p><ul><li>登录</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">#免交互</span></span>
<span class="line"><span style="color:#e1e4e8;">[root@localhost docker]# docker login -u admin -p Harbor12345 http://hub.xxx.com</span></span>
<span class="line"><span style="color:#e1e4e8;">WARNING! Using --password via the CLI is insecure. Use --password-stdin.</span></span>
<span class="line"><span style="color:#e1e4e8;">WARNING! Your password will be stored unencrypted in /root/.docker/config.json.</span></span>
<span class="line"><span style="color:#e1e4e8;">Configure a credential helper to remove this warning. See</span></span>
<span class="line"><span style="color:#e1e4e8;">https://docs.docker.com/engine/reference/commandline/login/#credentials-store</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">Login Succeeded</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">#输入密码</span></span>
<span class="line"><span style="color:#e1e4e8;">docker login -u admin  http://hub.xxx.com</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">#免交互</span></span>
<span class="line"><span style="color:#24292e;">[root@localhost docker]# docker login -u admin -p Harbor12345 http://hub.xxx.com</span></span>
<span class="line"><span style="color:#24292e;">WARNING! Using --password via the CLI is insecure. Use --password-stdin.</span></span>
<span class="line"><span style="color:#24292e;">WARNING! Your password will be stored unencrypted in /root/.docker/config.json.</span></span>
<span class="line"><span style="color:#24292e;">Configure a credential helper to remove this warning. See</span></span>
<span class="line"><span style="color:#24292e;">https://docs.docker.com/engine/reference/commandline/login/#credentials-store</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">Login Succeeded</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">#输入密码</span></span>
<span class="line"><span style="color:#24292e;">docker login -u admin  http://hub.xxx.com</span></span></code></pre></div><ul><li>打标签</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#pull</span></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pull</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">busybox</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">tag</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">beae173ccac6</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">192.168</span><span style="color:#9ECBFF;">.177.130/test/busybos:1</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#pull</span></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pull</span><span style="color:#24292E;"> </span><span style="color:#032F62;">busybox</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">tag</span><span style="color:#24292E;"> </span><span style="color:#032F62;">beae173ccac6</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">192.168</span><span style="color:#032F62;">.177.130/test/busybos:1</span></span></code></pre></div><ul><li>推送</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">push</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">192.168</span><span style="color:#9ECBFF;">.177.130/test/busybos:1</span></span>
<span class="line"><span style="color:#B392F0;">The</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">push</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">refers</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">repository</span><span style="color:#E1E4E8;"> [192.168.177.130/test/busybos]</span></span>
<span class="line"><span style="color:#B392F0;">01fd6df81c8e:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Pushed</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#B392F0;">1:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">digest:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">sha256:62ffc2ed7554e4c6d360bce40bbcf196573dd27c4ce080641a2c59867e732dee</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">size:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">527</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">push</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">192.168</span><span style="color:#032F62;">.177.130/test/busybos:1</span></span>
<span class="line"><span style="color:#6F42C1;">The</span><span style="color:#24292E;"> </span><span style="color:#032F62;">push</span><span style="color:#24292E;"> </span><span style="color:#032F62;">refers</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">repository</span><span style="color:#24292E;"> [192.168.177.130/test/busybos]</span></span>
<span class="line"><span style="color:#6F42C1;">01fd6df81c8e:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Pushed</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#6F42C1;">1:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">digest:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">sha256:62ffc2ed7554e4c6d360bce40bbcf196573dd27c4ce080641a2c59867e732dee</span><span style="color:#24292E;"> </span><span style="color:#032F62;">size:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">527</span></span></code></pre></div><ul><li>查看仓库</li></ul><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/ha8.jpg" alt=""></p><h3 id="_1-1-5-重置密码" tabindex="-1">1.1.5 重置密码 <a class="header-anchor" href="#_1-1-5-重置密码" aria-label="Permalink to &quot;1.1.5 重置密码&quot;">​</a></h3><p>改回默认密码Harbor12345</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">update</span><span style="color:#E1E4E8;"> harbor_user </span><span style="color:#F97583;">set</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">password=</span><span style="color:#9ECBFF;">&#39;a71a7d0df981a61cbb53a97ed8d78f3e&#39;</span><span style="color:#E1E4E8;">, salt</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;ah3fdh5b7yxepalg9z45bu8zb36sszmr&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> username</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;admin&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">#修改加密方式为sha1</span></span>
<span class="line"><span style="color:#F97583;">update</span><span style="color:#E1E4E8;"> harbor_user </span><span style="color:#F97583;">set</span><span style="color:#E1E4E8;"> password_version</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;sha1&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">where</span><span style="color:#E1E4E8;"> user_id</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">update</span><span style="color:#24292E;"> harbor_user </span><span style="color:#D73A49;">set</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">password=</span><span style="color:#032F62;">&#39;a71a7d0df981a61cbb53a97ed8d78f3e&#39;</span><span style="color:#24292E;">, salt</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;ah3fdh5b7yxepalg9z45bu8zb36sszmr&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> username</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;admin&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">#修改加密方式为sha1</span></span>
<span class="line"><span style="color:#D73A49;">update</span><span style="color:#24292E;"> harbor_user </span><span style="color:#D73A49;">set</span><span style="color:#24292E;"> password_version</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;sha1&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">where</span><span style="color:#24292E;"> user_id</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">;</span></span></code></pre></div><ul><li>进入容器</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">docker exec -it harbor-db /bin/bash</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">docker exec -it harbor-db /bin/bash</span></span></code></pre></div><ul><li>连接数据库</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">psql -h postgresql -d postgres -U postgres #默认密码是：root123 详见 harbor安装配置文件</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">psql -h postgresql -d postgres -U postgres #默认密码是：root123 详见 harbor安装配置文件</span></span></code></pre></div><ul><li>切换数据库</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">\\c registry</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">\\c registry</span></span></code></pre></div><ul><li>更新密码</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">update harbor_user set salt=&#39;&#39;, password=&#39;&#39; where username=&#39;admin&#39;;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">update harbor_user set salt=&#39;&#39;, password=&#39;&#39; where username=&#39;admin&#39;;</span></span></code></pre></div><ul><li>重启容器</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">docker restart harbor-core</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">docker restart harbor-core</span></span></code></pre></div>`,36),p=[o];function c(t,r,i,d,y,h){return a(),n("div",null,p)}const g=s(l,[["render",c]]);export{E as __pageData,g as default};
