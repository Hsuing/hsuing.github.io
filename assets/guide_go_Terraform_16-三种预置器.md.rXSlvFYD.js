import{_ as s,o as n,c as a,R as o}from"./chunks/framework.zUbWieqp.js";const h=JSON.parse('{"title":"1. ä»€ä¹ˆæ˜¯é¢„ç½®å™¨provisionerï¼Ÿ","description":"","frontmatter":{},"headers":[],"relativePath":"guide/go/Terraform/16-ä¸‰ç§é¢„ç½®å™¨.md","filePath":"guide/go/Terraform/16-ä¸‰ç§é¢„ç½®å™¨.md","lastUpdated":1753370025000}'),l={name:"guide/go/Terraform/16-ä¸‰ç§é¢„ç½®å™¨.md"},p=o(`<h1 id="_1-ä»€ä¹ˆæ˜¯é¢„ç½®å™¨provisioner" tabindex="-1">1. ä»€ä¹ˆæ˜¯é¢„ç½®å™¨provisionerï¼Ÿ <a class="header-anchor" href="#_1-ä»€ä¹ˆæ˜¯é¢„ç½®å™¨provisioner" aria-label="Permalink to &quot;1. ä»€ä¹ˆæ˜¯é¢„ç½®å™¨provisionerï¼Ÿ&quot;">â€‹</a></h1><p>å€ŸåŠ©Terraform provisionerï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å•ä¸ªå‘½ä»¤åœ¨äº‘ç¯å¢ƒä¸­å¯¹åŸºç¡€è®¾æ–½é…ç½®è¿›è¡Œç¼–ç å¹¶æ„å»ºè™šæ‹ŸæœåŠ¡å™¨ ï¼ˆå’Œå…¶ä»–èµ„æºï¼‰ã€‚åœ¨æ„å»ºçš„è™šæ‹ŸæœåŠ¡å™¨ä¸Šï¼Œè®¾ç½®å„ç§ä¸­é—´ä»¶ç­‰å‡†å¤‡åº”ç”¨ç¨‹åºæ‰§è¡Œç¯å¢ƒï¼ˆæ‰€è°“çš„provisioningè¿‡ ç¨‹ï¼‰ã€‚</p><p>å¯ä»¥ä½¿ç”¨provisioneråœ¨è¿œç¨‹æˆ–æœ¬åœ°æœºå™¨ä¸ŠæŒ‡å®šç‰¹å®šçš„æ“ä½œï¼Œä»¥ä¾¿ä¸ºæœåŠ¡å™¨æˆ–å…¶ä»–åŸºç¡€è®¾æ–½å¯¹è±¡æœåŠ¡ã€‚ Terraformå¸®æˆ‘ä»¬åˆ›å»ºå¥½instanceä»¥åï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬åªæ˜¯æœ‰ä¸€ä¸ªç©ºçš„instanceï¼Œå¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦åšä¸€äº›åˆ å§‹åŒ–çš„æ“ä½œï¼Œä¾‹å¦‚å®‰è£…å¿…è¦çš„è½¯ä»¶åŒ…ï¼Œåˆ›å»ºç”¨æˆ·ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ç­‰ã€‚</p><p><a href="https://developer.hashicorp.com/terraform/language/resources/provisioners/syntax" target="_blank" rel="noreferrer">https://developer.hashicorp.com/terraform/language/resources/provisioners/syntax</a></p><h2 id="_1-2-provisionerçš„ä¸‰ç§åŠŸèƒ½" tabindex="-1">1.2 provisionerçš„ä¸‰ç§åŠŸèƒ½ <a class="header-anchor" href="#_1-2-provisionerçš„ä¸‰ç§åŠŸèƒ½" aria-label="Permalink to &quot;1.2 provisionerçš„ä¸‰ç§åŠŸèƒ½&quot;">â€‹</a></h2><p>rovisioneræä¾›äº†ä¸‰ç§åŠŸèƒ½ï¼š</p><p>Remote-exec Provisionerï¼šåœ¨è¿œç«¯èµ„æºåˆ›å»ºåè°ƒç”¨è¯¥èµ„æºå»¶çš„è„šæœ¬ã€‚</p><p>File Provisionerï¼šå¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•åˆ°è¿œç¨‹ã€‚</p><p>Local-exec Provisionerï¼šåœ¨èµ„æºåˆ›å»ºåè°ƒç”¨æœ¬åœ°å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p><h3 id="è¿œç¨‹æ‰§è¡Œå‘½ä»¤" tabindex="-1"><a href="https://developer.hashicorp.com/terraform/language/resources/provisioners/remote-exec" target="_blank" rel="noreferrer">è¿œç¨‹æ‰§è¡Œå‘½ä»¤</a> <a class="header-anchor" href="#è¿œç¨‹æ‰§è¡Œå‘½ä»¤" aria-label="Permalink to &quot;[è¿œç¨‹æ‰§è¡Œå‘½ä»¤](https://developer.hashicorp.com/terraform/language/resources/provisioners/remote-exec)&quot;">â€‹</a></h3><p>å‘½ä»¤è¯´æ˜</p><p>provisioner &quot;remote-exec&quot; {} åœ¨æœåŠ¡å™¨ä¸Šè¿œç¨‹æ‰§è¡Œå‘½ä»¤</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#åˆ›å»ºECSå®ä¾‹</span></span>
<span class="line"><span style="color:#9ECBFF;">resource &quot;alicloud_instance&quot; &quot;instance&quot; {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># cn-shanghai</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#count = 2 # åˆ›å»º2å°ECSå®ä¾‹,é»˜è®¤ä¸å†™countï¼Œåˆ™åˆ›å»º1å°ECSå®ä¾‹</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">availability_zone    = &quot;cn-shanghai-b&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">security_groups      = [&quot;\${alicloud_security_group.nsg1.id}&quot;]</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">instance_type        = &quot;ecs.e-c1m1.large&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">#è‹¥å®ä¾‹è§„æ ¼ä¸‹çº¿ï¼Œè¯·ä½¿ç”¨ç›®å‰å”®å–ä¸­çš„å®ä¾‹è§„æ ¼</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">system_disk_category = &quot;cloud_essd&quot;</span><span style="color:#E1E4E8;">       </span><span style="color:#6A737D;">#è‹¥ç£ç›˜è§„æ ¼ä¸‹çº¿ï¼Œè¯·ä½¿ç”¨ç›®å‰å”®å–ä¸­çš„å®ä¾‹è§„æ ¼</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">system_disk_size     = 40</span><span style="color:#E1E4E8;">                 </span><span style="color:#6A737D;"># ç³»ç»Ÿç›˜å¤§å°ï¼Œå•ä½ä¸ºGB</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">image_id             = local.image_id</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#instance_name              = &quot;lyc-test-\${count.index+1}&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">instance_name              = &quot;lyc-test&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">vswitch_id                 = alicloud_vswitch.vsw_1.id</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">internet_max_bandwidth_out = 1</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># å‡ºç½‘å¸¦å®½ï¼Œå•ä½ä¸ºMbps</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">password                   = local.password</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># data_disks {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#   name = &quot;data_disk1&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#   description = &quot;data_disk1&quot; # æ•°æ®ç›˜æè¿°</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#   size = 20 # æ•°æ®ç›˜å¤§å°ï¼Œå•ä½ä¸ºGB</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">#   category = &quot;cloud_essd&quot; # æ•°æ®ç›˜ç±»å‹</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">//provisioner</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">provisioner &quot;remote-exec&quot; {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">inline = [</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;mkdir /root/test&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">&quot;echo &#39;Hello, World!&#39; &gt; /root/test/hello.txt&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">connection {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">type     = &quot;ssh&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">user     = &quot;root&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">password = local.password</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#9ECBFF;">host     = self.public_ip</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#åˆ›å»ºECSå®ä¾‹</span></span>
<span class="line"><span style="color:#032F62;">resource &quot;alicloud_instance&quot; &quot;instance&quot; {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;"># cn-shanghai</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">#count = 2 # åˆ›å»º2å°ECSå®ä¾‹,é»˜è®¤ä¸å†™countï¼Œåˆ™åˆ›å»º1å°ECSå®ä¾‹</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">availability_zone    = &quot;cn-shanghai-b&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">security_groups      = [&quot;\${alicloud_security_group.nsg1.id}&quot;]</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">instance_type        = &quot;ecs.e-c1m1.large&quot;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">#è‹¥å®ä¾‹è§„æ ¼ä¸‹çº¿ï¼Œè¯·ä½¿ç”¨ç›®å‰å”®å–ä¸­çš„å®ä¾‹è§„æ ¼</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">system_disk_category = &quot;cloud_essd&quot;</span><span style="color:#24292E;">       </span><span style="color:#6A737D;">#è‹¥ç£ç›˜è§„æ ¼ä¸‹çº¿ï¼Œè¯·ä½¿ç”¨ç›®å‰å”®å–ä¸­çš„å®ä¾‹è§„æ ¼</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">system_disk_size     = 40</span><span style="color:#24292E;">                 </span><span style="color:#6A737D;"># ç³»ç»Ÿç›˜å¤§å°ï¼Œå•ä½ä¸ºGB</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">image_id             = local.image_id</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">#instance_name              = &quot;lyc-test-\${count.index+1}&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">instance_name              = &quot;lyc-test&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">vswitch_id                 = alicloud_vswitch.vsw_1.id</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">internet_max_bandwidth_out = 1</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># å‡ºç½‘å¸¦å®½ï¼Œå•ä½ä¸ºMbps</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">password                   = local.password</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;"># data_disks {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">#   name = &quot;data_disk1&quot;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">#   description = &quot;data_disk1&quot; # æ•°æ®ç›˜æè¿°</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">#   size = 20 # æ•°æ®ç›˜å¤§å°ï¼Œå•ä½ä¸ºGB</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">#   category = &quot;cloud_essd&quot; # æ•°æ®ç›˜ç±»å‹</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;"># }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">//provisioner</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">provisioner &quot;remote-exec&quot; {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">inline = [</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;mkdir /root/test&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">&quot;echo &#39;Hello, World!&#39; &gt; /root/test/hello.txt&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    ]</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">connection {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">type     = &quot;ssh&quot;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">user     = &quot;root&quot;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">password = local.password</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#032F62;">host     = self.public_ip</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>é˜¿é‡Œä¸Šé¢è·å–å…ƒæ•°æ®</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">curl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">http://100.100.100.200/latest/meta-data/</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">curl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">http://100.100.100.200/latest/meta-data/</span></span></code></pre></div><blockquote><p>è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¦‚æœå‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œåœ¨æ‰§è¡Œä¼šæŠŠåŸå…ˆçš„æœºå™¨åˆ é™¤ï¼Œåœ¨æ¬¡åˆ›å»ºæ–°çš„å®ä¾‹æ¥è¿è¡Œå‘½ä»¤</p></blockquote><h3 id="å¤åˆ¶æœ¬åœ°æ–‡ä»¶åˆ°è¿œç¨‹å‘½ä»¤file" tabindex="-1">å¤åˆ¶æœ¬åœ°æ–‡ä»¶åˆ°è¿œç¨‹å‘½ä»¤file <a class="header-anchor" href="#å¤åˆ¶æœ¬åœ°æ–‡ä»¶åˆ°è¿œç¨‹å‘½ä»¤file" aria-label="Permalink to &quot;å¤åˆ¶æœ¬åœ°æ–‡ä»¶åˆ°è¿œç¨‹å‘½ä»¤file&quot;">â€‹</a></h3><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">//å¤åˆ¶æœ¬åœ°æ–‡ä»¶åˆ°è¿œç¨‹</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">provisioner &quot;file&quot; {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">source      = &quot;local_file.txt&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">destination = &quot;/root/test/local_file.txt&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">//è¿æ¥è¿œç¨‹,connection ä¹Ÿå¯ä»¥æ”¾åˆ°provisionerä¸­</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">connection {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">type     = &quot;ssh&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">user     = &quot;root&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">password = local.password</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">host     = self.public_ip</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">//å¤åˆ¶æœ¬åœ°æ–‡ä»¶åˆ°è¿œç¨‹</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">provisioner &quot;file&quot; {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">source      = &quot;local_file.txt&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">destination = &quot;/root/test/local_file.txt&quot;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">//è¿æ¥è¿œç¨‹,connection ä¹Ÿå¯ä»¥æ”¾åˆ°provisionerä¸­</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">connection {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">type     = &quot;ssh&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">user     = &quot;root&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">password = local.password</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">host     = self.public_ip</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span></code></pre></div><h3 id="æœ¬åœ°" tabindex="-1">æœ¬åœ° <a class="header-anchor" href="#æœ¬åœ°" aria-label="Permalink to &quot;æœ¬åœ°&quot;">â€‹</a></h3><h3 id="æ‰§è¡Œå‘½ä»¤local-exec" tabindex="-1">æ‰§è¡Œå‘½ä»¤local-exec <a class="header-anchor" href="#æ‰§è¡Œå‘½ä»¤local-exec" aria-label="Permalink to &quot;æ‰§è¡Œå‘½ä»¤local-exec&quot;">â€‹</a></h3><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">//æœ¬åœ°æ‰§è¡Œå‘½ä»¤</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">provisioner &quot;local-exec&quot; {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">command = &quot;echo \${self.public_ip} &gt; output.txt&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;"> </span><span style="color:#032F62;">//æœ¬åœ°æ‰§è¡Œå‘½ä»¤</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">provisioner &quot;local-exec&quot; {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">command = &quot;echo \${self.public_ip} &gt; output.txt&quot;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">ğŸ’¡ è¯´æ˜</p><p>file provisionersã€remote-exec provisionerséœ€è¦connection ä¸æœåŠ¡å™¨è¿›è¡Œè¿æ¥æ‰å¯å·¥ä½œï¼Œlocal-execä¸éœ€è¦ã€‚</p><p>local-execï¼ˆæœ¬åœ°æ‰§è¡Œï¼‰æ˜¯è¢«æ¨èçš„ï¼Œä»–çš„ä¼˜åŠ¿æ˜¯å¯ä»¥æ¯”è¾ƒäº‹ç‰©æ˜¯å¦å‘ç”Ÿå˜åŒ–å’Œè¾¾åˆ°æœŸæœ›çŠ¶æ€çš„æ–¹å¼ï¼Œä»¥ä¾¿æˆ‘ ä»¬å¯ä»¥æ£€æµ‹åˆ°å˜åŒ–ï¼ˆå£°æ˜å¼æ¨¡å‹å°±æ˜¯è¿™æ ·ç»´æŠ¤çš„ï¼‰ã€‚</p><p>rmote-execï¼ˆè¿œç¨‹æ‰§è¡Œï¼‰æ˜¯ä¸è¢«æ¨èçš„ã€‚å®˜æ–¹ä¸å»ºè®®ä½¿ç”¨è¿œç¨‹æ‰§è¡Œè„šæœ¬ï¼ŒTerraformæ— æ³•æ„ŸçŸ¥ä½ æ‰§è¡Œäº†ä»€ä¹ˆï¼Œä¸çŸ¥é“å‘½ä»¤æ˜¯å¦å®é™…æ‰§è¡ŒæˆåŠŸï¼ŒçŠ¶æ€æ˜¯å¦‚ä½•ã€‚å› æ­¤å¦‚æœæ˜¯åˆå§‹åŒ–æ“ä½œï¼Œå»ºè®®ä½¿ç”¨<strong>user_data</strong>ç”¨æˆ·æ•°æ®æ‰§è¡Œï¼Œprovisionersåªåœ¨ä¸´æ—¶éœ€è¦æˆ–å¿…è¦æ—¶ä½¿ç”¨ã€‚</p><p>æˆ‘ä»¬èµ„æºåˆ›å»ºæˆåŠŸï¼Œä½†æ˜¯provisioneræ²¡æœ‰æ‰§è¡ŒæˆåŠŸï¼Œæ­¤æ—¶Terraformä¼šè®¤ä¸ºæˆ‘ä»¬çš„èµ„æºæ˜¯â€œä¸å®‰å…¨â€çš„ï¼ŒTerraform ä¼šå°†è¿™ä¸ªèµ„æºæ ‡è®°ä¸ºtaintedï¼Œå½“æˆ‘ä»¬ä¸‹æ¬¡æ‰§è¡Œapplyçš„æ—¶å€™ï¼ŒTerraformä¸ä¼šé‡æ–°å°è¯•provisionerï¼Œå®ƒä¼šç›´æ¥å°†æ ‡è®°ä¸ºtaintedçš„èµ„æºåˆ æ‰ï¼Œç„¶åé‡æ–°åˆ›å»ºï¼Œé€šè¿‡è¿™æ ·çš„æ–¹å¼æ¥è§¦å‘provisionerè¿›è¡Œå†æ¬¡å°è¯•ã€‚å› æ­¤æ˜¯ååˆ†å±é™©å’Œä¸æ¨èçš„ã€‚</p><p>povisioneråªèƒ½ä½œä¸ºæœ€åæ‰‹æ®µä½¿ç”¨ã€‚æœ€ä½³å®è·µæ˜¯ï¼Œä½¿ç”¨é…ç½®ç®¡ç†å·¥å…·Ansibleã€‚ç”±ç®¡ç†é…ç½®å·¥å…·æ¥ç®¡æœåŠ¡å™¨ï¼Œå¹¶åšæ‰€æœ‰äº‹æƒ…ï¼Œç®¡ç†å·¥å…·æœ‰æ›´å¤šçš„å¯è§æ€§ï¼Œå¯æ§æ€§ï¼Œç®¡ç†ã€‚</p></div>`,22),e=[p];function t(c,r,i,E,y,u){return n(),a("div",null,e)}const q=s(l,[["render",t]]);export{h as __pageData,q as default};
