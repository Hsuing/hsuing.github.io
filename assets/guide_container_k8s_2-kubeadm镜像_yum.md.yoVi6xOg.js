import{_ as s,o as a,c as e,R as n}from"./chunks/framework.zUbWieqp.js";const F=JSON.parse('{"title":"1. Kubernetes镜像源配置","description":"","frontmatter":{},"headers":[],"relativePath":"guide/container/k8s/2-kubeadm镜像_yum.md","filePath":"guide/container/k8s/2-kubeadm镜像_yum.md","lastUpdated":1734517339000}'),l={name:"guide/container/k8s/2-kubeadm镜像_yum.md"},p=n(`<h1 id="_1-kubernetes镜像源配置" tabindex="-1">1. Kubernetes镜像源配置 <a class="header-anchor" href="#_1-kubernetes镜像源配置" aria-label="Permalink to &quot;1. Kubernetes镜像源配置&quot;">​</a></h1><p>由于 Kubernetes 官方变更了仓库的存储路径以及使用方式，如果需要使用<code> 1.28 及以上版本</code>，请使用 新版配置方法 进行配置。</p><p>下载地址：<a href="https://mirrors.aliyun.com/kubernetes/" target="_blank" rel="noreferrer">https://mirrors.aliyun.com/kubernetes/</a></p><p>新版下载地址：<a href="https://mirrors.aliyun.com/kubernetes-new/" target="_blank" rel="noreferrer">https://mirrors.aliyun.com/kubernetes-new/</a></p><h2 id="_1-1-配置方法" tabindex="-1">1.1 配置方法 <a class="header-anchor" href="#_1-1-配置方法" aria-label="Permalink to &quot;1.1 配置方法&quot;">​</a></h2><h3 id="新版配置方法" tabindex="-1">新版配置方法 <a class="header-anchor" href="#新版配置方法" aria-label="Permalink to &quot;新版配置方法&quot;">​</a></h3><p>新版 kubernetes 源使用方法和之前有一定区别，请求按照如下配置方法配置使用。</p><p>其中新版 kubernetes 源按照安装版本区分不同仓库，该文档示例为配置 1.28 版本，如需其他版本请在对应位置字符串替换即可。</p><p>（比如需要安装 1.29 版本，则需要将如下配置中的 v1.28 替换成 v1.29）</p><p><img src="https://nnaigos.oss-cn-hangzhou.aliyuncs.com/imgs/202405291038585.png" alt="image-20240529103842309"></p><h4 id="centos-rhel-fedora" tabindex="-1">CentOS / RHEL / Fedora <a class="header-anchor" href="#centos-rhel-fedora" aria-label="Permalink to &quot;CentOS / RHEL / Fedora&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#9ECBFF;">EOF</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> tee /etc/yum.repos.d/kubernetes.repo</span></span>
<span class="line"><span style="color:#9ECBFF;">[kubernetes]</span></span>
<span class="line"><span style="color:#9ECBFF;">name=Kubernetes</span></span>
<span class="line"><span style="color:#9ECBFF;">baseurl=https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.28/rpm/</span></span>
<span class="line"><span style="color:#9ECBFF;">enabled=1</span></span>
<span class="line"><span style="color:#9ECBFF;">gpgcheck=1</span></span>
<span class="line"><span style="color:#9ECBFF;">gpgkey=https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.28/rpm/repodata/repomd.xml.key</span></span>
<span class="line"><span style="color:#9ECBFF;">EOF</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#032F62;">EOF</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> tee /etc/yum.repos.d/kubernetes.repo</span></span>
<span class="line"><span style="color:#032F62;">[kubernetes]</span></span>
<span class="line"><span style="color:#032F62;">name=Kubernetes</span></span>
<span class="line"><span style="color:#032F62;">baseurl=https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.28/rpm/</span></span>
<span class="line"><span style="color:#032F62;">enabled=1</span></span>
<span class="line"><span style="color:#032F62;">gpgcheck=1</span></span>
<span class="line"><span style="color:#032F62;">gpgkey=https://mirrors.aliyun.com/kubernetes-new/core/stable/v1.28/rpm/repodata/repomd.xml.key</span></span>
<span class="line"><span style="color:#032F62;">EOF</span></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">❌ 注意</p><p>由于官网未开放同步方式, 可能会有索引gpg检查失败的情况, 这时请用 <code>yum install -y --nogpgcheck kubelet kubeadm kubectl</code> 安装</p></div><h3 id="旧版配置方法" tabindex="-1">旧版配置方法 <a class="header-anchor" href="#旧版配置方法" aria-label="Permalink to &quot;旧版配置方法&quot;">​</a></h3><p>目前由于kubernetes官方变更了仓库的存储路径以及使用方式，旧版 kubernetes 源只更新到 1.28 部分版本，后续更新版本请使用 新源配置方法 进行配置。</p><h4 id="centos-rhel-fedora-1" tabindex="-1">CentOS / RHEL / Fedora <a class="header-anchor" href="#centos-rhel-fedora-1" aria-label="Permalink to &quot;CentOS / RHEL / Fedora&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">cat</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&lt;&lt;</span><span style="color:#9ECBFF;">EOF</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> /etc/yum.repos.d/kubernetes.repo</span></span>
<span class="line"><span style="color:#9ECBFF;">[kubernetes]</span></span>
<span class="line"><span style="color:#9ECBFF;">name=Kubernetes</span></span>
<span class="line"><span style="color:#9ECBFF;">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/</span></span>
<span class="line"><span style="color:#9ECBFF;">enabled=1</span></span>
<span class="line"><span style="color:#9ECBFF;">gpgcheck=1</span></span>
<span class="line"><span style="color:#9ECBFF;">repo_gpgcheck=1</span></span>
<span class="line"><span style="color:#9ECBFF;">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span></span>
<span class="line"><span style="color:#9ECBFF;">EOF</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&lt;&lt;</span><span style="color:#032F62;">EOF</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> /etc/yum.repos.d/kubernetes.repo</span></span>
<span class="line"><span style="color:#032F62;">[kubernetes]</span></span>
<span class="line"><span style="color:#032F62;">name=Kubernetes</span></span>
<span class="line"><span style="color:#032F62;">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/</span></span>
<span class="line"><span style="color:#032F62;">enabled=1</span></span>
<span class="line"><span style="color:#032F62;">gpgcheck=1</span></span>
<span class="line"><span style="color:#032F62;">repo_gpgcheck=1</span></span>
<span class="line"><span style="color:#032F62;">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span></span>
<span class="line"><span style="color:#032F62;">EOF</span></span></code></pre></div><h2 id="_1-2-获取镜像" tabindex="-1">1.2 获取镜像 <a class="header-anchor" href="#_1-2-获取镜像" aria-label="Permalink to &quot;1.2 获取镜像&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubeadm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">config</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">images</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">list</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-F</span><span style="color:#9ECBFF;">&#39;/&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;{print $NF}&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubeadm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">config</span><span style="color:#24292E;"> </span><span style="color:#032F62;">images</span><span style="color:#24292E;"> </span><span style="color:#032F62;">list</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">awk</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-F</span><span style="color:#032F62;">&#39;/&#39;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;{print $NF}&#39;</span></span></code></pre></div>`,19),o=[p];function t(r,c,i,y,u,d){return a(),e("div",null,o)}const b=s(l,[["render",t]]);export{F as __pageData,b as default};
